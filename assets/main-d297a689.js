var D8=Object.defineProperty;var F8=(t,e,n)=>e in t?D8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>(F8(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Kw(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const bt={},Yc=[],br=()=>{},P8=()=>!1,z8=/^on[^a-z]/,q0=t=>z8.test(t),Jw=t=>t.startsWith("onUpdate:"),Zt=Object.assign,Qw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},W8=Object.prototype.hasOwnProperty,qe=(t,e)=>W8.call(t,e),ve=Array.isArray,jc=t=>Sd(t)==="[object Map]",ju=t=>Sd(t)==="[object Set]",qT=t=>Sd(t)==="[object Date]",De=t=>typeof t=="function",Pt=t=>typeof t=="string",au=t=>typeof t=="symbol",dt=t=>t!==null&&typeof t=="object",f3=t=>(dt(t)||De(t))&&De(t.then)&&De(t.catch),d3=Object.prototype.toString,Sd=t=>d3.call(t),H8=t=>Sd(t).slice(8,-1),g3=t=>Sd(t)==="[object Object]",e2=t=>Pt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fm=Kw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),X0=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},B8=/-(\w)/g,rs=X0(t=>t.replace(B8,(e,n)=>n?n.toUpperCase():"")),V8=/\B([A-Z])/g,qu=X0(t=>t.replace(V8,"-$1").toLowerCase()),Z0=X0(t=>t.charAt(0).toUpperCase()+t.slice(1)),Pm=X0(t=>t?`on${Z0(t)}`:""),Ml=(t,e)=>!Object.is(t,e),zm=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},sp=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},op=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G8=t=>{const e=Pt(t)?Number(t):NaN;return isNaN(e)?t:e};let XT;const Bv=()=>XT||(XT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gt(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=Pt(i)?q8(i):Gt(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(Pt(t)||dt(t))return t}const U8=/;(?![^(]*\))/g,Y8=/:([^]+)/,j8=/\/\*[^]*?\*\//g;function q8(t){const e={};return t.replace(j8,"").split(U8).forEach(n=>{if(n){const i=n.split(Y8);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Xt(t){let e="";if(Pt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const i=Xt(t[n]);i&&(e+=i+" ")}else if(dt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function ir(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Pt(e)&&(t.class=Xt(e)),n&&(t.style=Gt(n)),t}const X8="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z8=Kw(X8);function m3(t){return!!t||t===""}function K8(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=Cd(t[i],e[i]);return n}function Cd(t,e){if(t===e)return!0;let n=qT(t),i=qT(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=au(t),i=au(e),n||i)return t===e;if(n=ve(t),i=ve(e),n||i)return n&&i?K8(t,e):!1;if(n=dt(t),i=dt(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Cd(t[o],e[o]))return!1}}return String(t)===String(e)}function t2(t,e){return t.findIndex(n=>Cd(n,e))}const X=t=>Pt(t)?t:t==null?"":ve(t)||dt(t)&&(t.toString===d3||!De(t.toString))?JSON.stringify(t,p3,2):String(t),p3=(t,e)=>e&&e.__v_isRef?p3(t,e.value):jc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:ju(e)?{[`Set(${e.size})`]:[...e.values()]}:dt(e)&&!ve(e)&&!g3(e)?String(e):e;let hr;class _3{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=hr,!e&&hr&&(this.index=(hr.scopes||(hr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=hr;try{return hr=this,e()}finally{hr=n}}}on(){hr=this}off(){hr=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function J8(t){return new _3(t)}function Q8(t,e=hr){e&&e.active&&e.effects.push(t)}function e7(){return hr}const n2=t=>{const e=new Set(t);return e.w=0,e.n=0,e},y3=t=>(t.w&ia)>0,v3=t=>(t.n&ia)>0,t7=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ia},n7=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];y3(r)&&!v3(r)?r.delete(t):e[n++]=r,r.w&=~ia,r.n&=~ia}e.length=n}},Vv=new WeakMap;let ef=0,ia=1;const Gv=30;let fr;const gl=Symbol(""),Uv=Symbol("");class i2{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Q8(this,i)}run(){if(!this.active)return this.fn();let e=fr,n=ea;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=fr,fr=this,ea=!0,ia=1<<++ef,ef<=Gv?t7(this):ZT(this),this.fn()}finally{ef<=Gv&&n7(this),ia=1<<--ef,fr=this.parent,ea=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){fr===this?this.deferStop=!0:this.active&&(ZT(this),this.onStop&&this.onStop(),this.active=!1)}}function ZT(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ea=!0;const b3=[];function Xu(){b3.push(ea),ea=!1}function Zu(){const t=b3.pop();ea=t===void 0?!0:t}function li(t,e,n){if(ea&&fr){let i=Vv.get(t);i||Vv.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=n2()),w3(r)}}function w3(t,e){let n=!1;ef<=Gv?v3(t)||(t.n|=ia,n=!y3(t)):n=!t.has(fr),n&&(t.add(fr),fr.deps.push(t))}function zs(t,e,n,i,r,s){const o=Vv.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ve(t)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!au(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ve(t)?e2(n)&&a.push(o.get("length")):(a.push(o.get(gl)),jc(t)&&a.push(o.get(Uv)));break;case"delete":ve(t)||(a.push(o.get(gl)),jc(t)&&a.push(o.get(Uv)));break;case"set":jc(t)&&a.push(o.get(gl));break}if(a.length===1)a[0]&&Yv(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Yv(n2(l))}}function Yv(t,e){const n=ve(t)?t:[...t];for(const i of n)i.computed&&KT(i);for(const i of n)i.computed||KT(i)}function KT(t,e){(t!==fr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const i7=Kw("__proto__,__v_isRef,__isVue"),x3=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(au)),JT=r7();function r7(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ue(this);for(let s=0,o=this.length;s<o;s++)li(i,"get",s+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(Ue)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Xu();const i=Ue(this)[e].apply(this,n);return Zu(),i}}),t}function s7(t){const e=Ue(this);return li(e,"has",t),e.hasOwnProperty(t)}class E3{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,i){const r=this._isReadonly,s=this._shallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw"&&i===(r?s?y7:M3:s?C3:S3).get(e))return e;const o=ve(e);if(!r){if(o&&qe(JT,n))return Reflect.get(JT,n,i);if(n==="hasOwnProperty")return s7}const a=Reflect.get(e,n,i);return(au(n)?x3.has(n):i7(n))||(r||li(e,"get",n),s)?a:Mn(a)?o&&e2(n)?a:a.value:dt(a)?r?R3(a):J0(a):a}}class T3 extends E3{constructor(e=!1){super(!1,e)}set(e,n,i,r){let s=e[n];if(lu(s)&&Mn(s)&&!Mn(i))return!1;if(!this._shallow&&(!ap(i)&&!lu(i)&&(s=Ue(s),i=Ue(i)),!ve(e)&&Mn(s)&&!Mn(i)))return s.value=i,!0;const o=ve(e)&&e2(n)?Number(n)<e.length:qe(e,n),a=Reflect.set(e,n,i,r);return e===Ue(r)&&(o?Ml(i,s)&&zs(e,"set",n,i):zs(e,"add",n,i)),a}deleteProperty(e,n){const i=qe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&i&&zs(e,"delete",n,void 0),r}has(e,n){const i=Reflect.has(e,n);return(!au(n)||!x3.has(n))&&li(e,"has",n),i}ownKeys(e){return li(e,"iterate",ve(e)?"length":gl),Reflect.ownKeys(e)}}class o7 extends E3{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const a7=new T3,l7=new o7,c7=new T3(!0),r2=t=>t,K0=t=>Reflect.getPrototypeOf(t);function Ag(t,e,n=!1,i=!1){t=t.__v_raw;const r=Ue(t),s=Ue(e);n||(Ml(e,s)&&li(r,"get",e),li(r,"get",s));const{has:o}=K0(r),a=i?r2:n?l2:Lf;if(o.call(r,e))return a(t.get(e));if(o.call(r,s))return a(t.get(s));t!==r&&t.get(e)}function Rg(t,e=!1){const n=this.__v_raw,i=Ue(n),r=Ue(t);return e||(Ml(t,r)&&li(i,"has",t),li(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Ig(t,e=!1){return t=t.__v_raw,!e&&li(Ue(t),"iterate",gl),Reflect.get(t,"size",t)}function QT(t){t=Ue(t);const e=Ue(this);return K0(e).has.call(e,t)||(e.add(t),zs(e,"add",t,t)),this}function eS(t,e){e=Ue(e);const n=Ue(this),{has:i,get:r}=K0(n);let s=i.call(n,t);s||(t=Ue(t),s=i.call(n,t));const o=r.call(n,t);return n.set(t,e),s?Ml(e,o)&&zs(n,"set",t,e):zs(n,"add",t,e),this}function tS(t){const e=Ue(this),{has:n,get:i}=K0(e);let r=n.call(e,t);r||(t=Ue(t),r=n.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return r&&zs(e,"delete",t,void 0),s}function nS(){const t=Ue(this),e=t.size!==0,n=t.clear();return e&&zs(t,"clear",void 0,void 0),n}function kg(t,e){return function(i,r){const s=this,o=s.__v_raw,a=Ue(o),l=e?r2:t?l2:Lf;return!t&&li(a,"iterate",gl),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function $g(t,e,n){return function(...i){const r=this.__v_raw,s=Ue(r),o=jc(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...i),u=n?r2:e?l2:Lf;return!e&&li(s,"iterate",l?Uv:gl),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function yo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function u7(){const t={get(s){return Ag(this,s)},get size(){return Ig(this)},has:Rg,add:QT,set:eS,delete:tS,clear:nS,forEach:kg(!1,!1)},e={get(s){return Ag(this,s,!1,!0)},get size(){return Ig(this)},has:Rg,add:QT,set:eS,delete:tS,clear:nS,forEach:kg(!1,!0)},n={get(s){return Ag(this,s,!0)},get size(){return Ig(this,!0)},has(s){return Rg.call(this,s,!0)},add:yo("add"),set:yo("set"),delete:yo("delete"),clear:yo("clear"),forEach:kg(!0,!1)},i={get(s){return Ag(this,s,!0,!0)},get size(){return Ig(this,!0)},has(s){return Rg.call(this,s,!0)},add:yo("add"),set:yo("set"),delete:yo("delete"),clear:yo("clear"),forEach:kg(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=$g(s,!1,!1),n[s]=$g(s,!0,!1),e[s]=$g(s,!1,!0),i[s]=$g(s,!0,!0)}),[t,n,e,i]}const[h7,f7,d7,g7]=u7();function s2(t,e){const n=e?t?g7:d7:t?f7:h7;return(i,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(qe(n,r)&&r in i?n:i,r,s)}const m7={get:s2(!1,!1)},p7={get:s2(!1,!0)},_7={get:s2(!0,!1)},S3=new WeakMap,C3=new WeakMap,M3=new WeakMap,y7=new WeakMap;function v7(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function b7(t){return t.__v_skip||!Object.isExtensible(t)?0:v7(H8(t))}function J0(t){return lu(t)?t:o2(t,!1,a7,m7,S3)}function A3(t){return o2(t,!1,c7,p7,C3)}function R3(t){return o2(t,!0,l7,_7,M3)}function o2(t,e,n,i,r){if(!dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const o=b7(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return r.set(t,a),a}function qc(t){return lu(t)?qc(t.__v_raw):!!(t&&t.__v_isReactive)}function lu(t){return!!(t&&t.__v_isReadonly)}function ap(t){return!!(t&&t.__v_isShallow)}function I3(t){return qc(t)||lu(t)}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function a2(t){return sp(t,"__v_skip",!0),t}const Lf=t=>dt(t)?J0(t):t,l2=t=>dt(t)?R3(t):t;function k3(t){ea&&fr&&(t=Ue(t),w3(t.dep||(t.dep=n2())))}function $3(t,e){t=Ue(t);const n=t.dep;n&&Yv(n)}function Mn(t){return!!(t&&t.__v_isRef===!0)}function O3(t){return L3(t,!1)}function Jt(t){return L3(t,!0)}function L3(t,e){return Mn(t)?t:new w7(t,e)}class w7{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ue(e),this._value=n?e:Lf(e)}get value(){return k3(this),this._value}set value(e){const n=this.__v_isShallow||ap(e)||lu(e);e=n?e:Ue(e),Ml(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Lf(e),$3(this))}}function _t(t){return Mn(t)?t.value:t}const x7={get:(t,e,n)=>_t(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Mn(r)&&!Mn(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function N3(t){return qc(t)?t:new Proxy(t,x7)}class E7{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new i2(e,()=>{this._dirty||(this._dirty=!0,$3(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Ue(this);return k3(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function T7(t,e,n=!1){let i,r;const s=De(t);return s?(i=t,r=br):(i=t.get,r=t.set),new E7(i,r,s||!r,n)}function ta(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){Q0(s,e,n)}return r}function Vi(t,e,n,i){if(De(t)){const s=ta(t,e,n,i);return s&&f3(s)&&s.catch(o=>{Q0(o,e,n)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(Vi(t[s],e,n,i));return r}function Q0(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ta(l,null,10,[t,o,a]);return}}S7(t,n,r,i)}function S7(t,e,n,i=!0){console.error(t)}let Nf=!1,jv=!1;const Tn=[];let Wr=0;const Xc=[];let As=null,qa=0;const D3=Promise.resolve();let c2=null;function F3(t){const e=c2||D3;return t?e.then(this?t.bind(this):t):e}function C7(t){let e=Wr+1,n=Tn.length;for(;e<n;){const i=e+n>>>1,r=Tn[i],s=Df(r);s<t||s===t&&r.pre?e=i+1:n=i}return e}function u2(t){(!Tn.length||!Tn.includes(t,Nf&&t.allowRecurse?Wr+1:Wr))&&(t.id==null?Tn.push(t):Tn.splice(C7(t.id),0,t),P3())}function P3(){!Nf&&!jv&&(jv=!0,c2=D3.then(W3))}function M7(t){const e=Tn.indexOf(t);e>Wr&&Tn.splice(e,1)}function A7(t){ve(t)?Xc.push(...t):(!As||!As.includes(t,t.allowRecurse?qa+1:qa))&&Xc.push(t),P3()}function iS(t,e=Nf?Wr+1:0){for(;e<Tn.length;e++){const n=Tn[e];n&&n.pre&&(Tn.splice(e,1),e--,n())}}function z3(t){if(Xc.length){const e=[...new Set(Xc)];if(Xc.length=0,As){As.push(...e);return}for(As=e,As.sort((n,i)=>Df(n)-Df(i)),qa=0;qa<As.length;qa++)As[qa]();As=null,qa=0}}const Df=t=>t.id==null?1/0:t.id,R7=(t,e)=>{const n=Df(t)-Df(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function W3(t){jv=!1,Nf=!0,Tn.sort(R7);const e=br;try{for(Wr=0;Wr<Tn.length;Wr++){const n=Tn[Wr];n&&n.active!==!1&&ta(n,null,14)}}finally{Wr=0,Tn.length=0,z3(),Nf=!1,c2=null,(Tn.length||Xc.length)&&W3()}}function I7(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||bt;let r=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||bt;f&&(r=n.map(d=>Pt(d)?d.trim():d)),h&&(r=n.map(op))}let a,l=i[a=Pm(e)]||i[a=Pm(rs(e))];!l&&s&&(l=i[a=Pm(qu(e))]),l&&Vi(l,t,6,r);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vi(c,t,6,r)}}function H3(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const s=t.emits;let o={},a=!1;if(!De(t)){const l=c=>{const u=H3(c,e,!0);u&&(a=!0,Zt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(dt(t)&&i.set(t,null),null):(ve(s)?s.forEach(l=>o[l]=null):Zt(o,s),dt(t)&&i.set(t,o),o)}function e_(t,e){return!t||!q0(e)?!1:(e=e.slice(2).replace(/Once$/,""),qe(t,e[0].toLowerCase()+e.slice(1))||qe(t,qu(e))||qe(t,e))}let pn=null,t_=null;function lp(t){const e=pn;return pn=t,t_=t&&t.type.__scopeId||null,e}function Qt(t){t_=t}function en(){t_=null}function Al(t,e=pn,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&mS(-1);const s=lp(e);let o;try{o=t(...r)}finally{lp(s),i._d&&mS(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Uy(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:d,ctx:g,inheritAttrs:m}=t;let _,y;const p=lp(t);try{if(n.shapeFlag&4){const v=r||i,E=v;_=Fr(u.call(E,v,h,s,d,f,g)),y=l}else{const v=e;_=Fr(v.length>1?v(s,{attrs:l,slots:a,emit:c}):v(s,null)),y=e.props?l:k7(l)}}catch(v){vf.length=0,Q0(v,t,1),_=me(Gi)}let b=_;if(y&&m!==!1){const v=Object.keys(y),{shapeFlag:E}=b;v.length&&E&7&&(o&&v.some(Jw)&&(y=$7(y,o)),b=ra(b,y))}return n.dirs&&(b=ra(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),_=b,lp(p),_}const k7=t=>{let e;for(const n in t)(n==="class"||n==="style"||q0(n))&&((e||(e={}))[n]=t[n]);return e},$7=(t,e)=>{const n={};for(const i in t)(!Jw(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function O7(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?rS(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!e_(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?rS(i,o,c):!0:!!o;return!1}function rS(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!e_(n,s))return!0}return!1}function L7({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const h2="components",N7="directives";function Ku(t,e){return f2(h2,t,!0,e)||t}const B3=Symbol.for("v-ndc");function Yy(t){return Pt(t)?f2(h2,t,!1)||t:t||B3}function D7(t){return f2(N7,t)}function f2(t,e,n=!0,i=!1){const r=pn||cn;if(r){const s=r.type;if(t===h2){const a=A9(s,!1);if(a&&(a===e||a===rs(e)||a===Z0(rs(e))))return s}const o=sS(r[t]||s[t],e)||sS(r.appContext[t],e);return!o&&i?s:o}}function sS(t,e){return t&&(t[e]||t[rs(e)]||t[Z0(rs(e))])}const F7=t=>t.__isSuspense;function P7(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):A7(t)}const Og={};function Wm(t,e,n){return V3(t,e,n)}function V3(t,e,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=bt){var a;const l=e7()===((a=cn)==null?void 0:a.scope)?cn:null;let c,u=!1,h=!1;if(Mn(t)?(c=()=>t.value,u=ap(t)):qc(t)?(c=()=>t,i=!0):ve(t)?(h=!0,u=t.some(v=>qc(v)||ap(v)),c=()=>t.map(v=>{if(Mn(v))return v.value;if(qc(v))return Qa(v);if(De(v))return ta(v,l,2)})):De(t)?e?c=()=>ta(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Vi(t,l,3,[d])}:c=br,e&&i){const v=c;c=()=>Qa(v())}let f,d=v=>{f=p.onStop=()=>{ta(v,l,4),f=p.onStop=void 0}},g;if(Pf)if(d=br,e?n&&Vi(e,l,3,[c(),h?[]:void 0,d]):c(),r==="sync"){const v=k9();g=v.__watcherHandles||(v.__watcherHandles=[])}else return br;let m=h?new Array(t.length).fill(Og):Og;const _=()=>{if(p.active)if(e){const v=p.run();(i||u||(h?v.some((E,w)=>Ml(E,m[w])):Ml(v,m)))&&(f&&f(),Vi(e,l,3,[v,m===Og?void 0:h&&m[0]===Og?[]:m,d]),m=v)}else p.run()};_.allowRecurse=!!e;let y;r==="sync"?y=_:r==="post"?y=()=>Jn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),y=()=>u2(_));const p=new i2(c,y);e?n?_():m=p.run():r==="post"?Jn(p.run.bind(p),l&&l.suspense):p.run();const b=()=>{p.stop(),l&&l.scope&&Qw(l.scope.effects,p)};return g&&g.push(b),b}function z7(t,e,n){const i=this.proxy,r=Pt(t)?t.includes(".")?G3(i,t):()=>i[t]:t.bind(i,i);let s;De(e)?s=e:(s=e.handler,n=e);const o=cn;cu(this);const a=V3(r,s.bind(i),n);return o?cu(o):pl(),a}function G3(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Qa(t,e){if(!dt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Mn(t))Qa(t.value,e);else if(ve(t))for(let n=0;n<t.length;n++)Qa(t[n],e);else if(ju(t)||jc(t))t.forEach(n=>{Qa(n,e)});else if(g3(t))for(const n in t)Qa(t[n],e);return t}function ct(t,e){const n=pn;if(n===null)return t;const i=o_(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=bt]=e[s];o&&(De(o)&&(o={mounted:o,updated:o}),o.deep&&Qa(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function Na(t,e,n,i){const r=t.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Xu(),Vi(l,n,8,[t.el,a,t,e]),Zu())}}const Lo=Symbol("_leaveCb"),Lg=Symbol("_enterCb");function W7(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return X3(()=>{t.isMounted=!0}),Z3(()=>{t.isUnmounting=!0}),t}const ki=[Function,Array],U3={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ki,onEnter:ki,onAfterEnter:ki,onEnterCancelled:ki,onBeforeLeave:ki,onLeave:ki,onAfterLeave:ki,onLeaveCancelled:ki,onBeforeAppear:ki,onAppear:ki,onAfterAppear:ki,onAppearCancelled:ki},H7={name:"BaseTransition",props:U3,setup(t,{slots:e}){const n=E9(),i=W7();let r;return()=>{const s=e.default&&j3(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Gi){o=m;break}}const a=Ue(t),{mode:l}=a;if(i.isLeaving)return jy(o);const c=oS(o);if(!c)return jy(o);const u=qv(c,a,i,n);Xv(c,u);const h=n.subTree,f=h&&oS(h);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();r===void 0?r=m:m!==r&&(r=m,d=!0)}if(f&&f.type!==Gi&&(!Xa(c,f)||d)){const m=qv(f,a,i,n);if(Xv(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},jy(o);l==="in-out"&&c.type!==Gi&&(m.delayLeave=(_,y,p)=>{const b=Y3(i,f);b[String(f.key)]=f,_[Lo]=()=>{y(),_[Lo]=void 0,delete u.delayedLeave},u.delayedLeave=p})}return o}}},B7=H7;function Y3(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function qv(t,e,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:_,onAfterAppear:y,onAppearCancelled:p}=e,b=String(t.key),v=Y3(n,t),E=(C,M)=>{C&&Vi(C,i,9,M)},w=(C,M)=>{const S=M[1];E(C,M),ve(C)?C.every(R=>R.length<=1)&&S():C.length<=1&&S()},T={mode:s,persisted:o,beforeEnter(C){let M=a;if(!n.isMounted)if(r)M=m||a;else return;C[Lo]&&C[Lo](!0);const S=v[b];S&&Xa(t,S)&&S.el[Lo]&&S.el[Lo](),E(M,[C])},enter(C){let M=l,S=c,R=u;if(!n.isMounted)if(r)M=_||l,S=y||c,R=p||u;else return;let I=!1;const N=C[Lg]=O=>{I||(I=!0,O?E(R,[C]):E(S,[C]),T.delayedLeave&&T.delayedLeave(),C[Lg]=void 0)};M?w(M,[C,N]):N()},leave(C,M){const S=String(t.key);if(C[Lg]&&C[Lg](!0),n.isUnmounting)return M();E(h,[C]);let R=!1;const I=C[Lo]=N=>{R||(R=!0,M(),N?E(g,[C]):E(d,[C]),C[Lo]=void 0,v[S]===t&&delete v[S])};v[S]=t,f?w(f,[C,I]):I()},clone(C){return qv(C,e,n,i)}};return T}function jy(t){if(n_(t))return t=ra(t),t.children=null,t}function oS(t){return n_(t)?t.children?t.children[0]:void 0:t}function Xv(t,e){t.shapeFlag&6&&t.component?Xv(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function j3(t,e=!1,n){let i=[],r=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===yt?(o.patchFlag&128&&r++,i=i.concat(j3(o.children,e,a))):(e||o.type!==Gi)&&i.push(a!=null?ra(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function xt(t,e){return De(t)?(()=>Zt({name:t.name},e,{setup:t}))():t}const _f=t=>!!t.type.__asyncLoader,n_=t=>t.type.__isKeepAlive;function V7(t,e){q3(t,"a",e)}function G7(t,e){q3(t,"da",e)}function q3(t,e,n=cn){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(i_(e,i,n),n){let r=n.parent;for(;r&&r.parent;)n_(r.parent.vnode)&&U7(i,e,n,r),r=r.parent}}function U7(t,e,n,i){const r=i_(e,t,i,!0);K3(()=>{Qw(i[e],r)},n)}function i_(t,e,n=cn,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Xu(),cu(n);const a=Vi(e,n,t,o);return pl(),Zu(),a});return i?r.unshift(s):r.push(s),s}}const oo=t=>(e,n=cn)=>(!Pf||t==="sp")&&i_(t,(...i)=>e(...i),n),Y7=oo("bm"),X3=oo("m"),j7=oo("bu"),q7=oo("u"),Z3=oo("bum"),K3=oo("um"),X7=oo("sp"),Z7=oo("rtg"),K7=oo("rtc");function J7(t,e=cn){i_("ec",t,e)}function ji(t,e,n,i){let r;const s=n&&n[i];if(ve(t)||Pt(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(dt(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(t[c],c,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}function rr(t,e,n={},i,r){if(pn.isCE||pn.parent&&_f(pn.parent)&&pn.parent.isCE)return e!=="default"&&(n.name=e),me("slot",n,i&&i());let s=t[e];s&&s._c&&(s._d=!1),j();const o=s&&J3(s(n)),a=ml(yt,{key:n.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function J3(t){return t.some(e=>hp(e)?!(e.type===Gi||e.type===yt&&!J3(e.children)):!0)?t:null}function Q7(t,e){const n={};for(const i in t)n[e&&/[A-Z]/.test(i)?`on:${i}`:Pm(i)]=t[i];return n}const Zv=t=>t?ck(t)?o_(t)||t.proxy:Zv(t.parent):null,yf=Zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zv(t.parent),$root:t=>Zv(t.root),$emit:t=>t.emit,$options:t=>d2(t),$forceUpdate:t=>t.f||(t.f=()=>u2(t.update)),$nextTick:t=>t.n||(t.n=F3.bind(t.proxy)),$watch:t=>z7.bind(t)}),qy=(t,e)=>t!==bt&&!t.__isScriptSetup&&qe(t,e),e9={get({_:t},e){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return s[e]}else{if(qy(i,e))return o[e]=1,i[e];if(r!==bt&&qe(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&qe(c,e))return o[e]=3,s[e];if(n!==bt&&qe(n,e))return o[e]=4,n[e];Kv&&(o[e]=0)}}const u=yf[e];let h,f;if(u)return e==="$attrs"&&li(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==bt&&qe(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,qe(f,e))return f[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:s}=t;return qy(r,e)?(r[e]=n,!0):i!==bt&&qe(i,e)?(i[e]=n,!0):qe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||t!==bt&&qe(t,o)||qy(e,o)||(a=s[0])&&qe(a,o)||qe(i,o)||qe(yf,o)||qe(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:qe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function aS(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Kv=!0;function t9(t){const e=d2(t),n=t.proxy,i=t.ctx;Kv=!1,e.beforeCreate&&lS(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:g,activated:m,deactivated:_,beforeDestroy:y,beforeUnmount:p,destroyed:b,unmounted:v,render:E,renderTracked:w,renderTriggered:T,errorCaptured:C,serverPrefetch:M,expose:S,inheritAttrs:R,components:I,directives:N,filters:O}=e;if(c&&n9(c,i,null),o)for(const D in o){const H=o[D];De(H)&&(i[D]=H.bind(n))}if(r){const D=r.call(n,n);dt(D)&&(t.data=J0(D))}if(Kv=!0,s)for(const D in s){const H=s[D],q=De(H)?H.bind(n,n):De(H.get)?H.get.bind(n,n):br,G=!De(H)&&De(H.set)?H.set.bind(n):br,J=dr({get:q,set:G});Object.defineProperty(i,D,{enumerable:!0,configurable:!0,get:()=>J.value,set:W=>J.value=W})}if(a)for(const D in a)Q3(a[D],i,n,D);if(l){const D=De(l)?l.call(n):l;Reflect.ownKeys(D).forEach(H=>{Hm(H,D[H])})}u&&lS(u,t,"c");function L(D,H){ve(H)?H.forEach(q=>D(q.bind(n))):H&&D(H.bind(n))}if(L(Y7,h),L(X3,f),L(j7,d),L(q7,g),L(V7,m),L(G7,_),L(J7,C),L(K7,w),L(Z7,T),L(Z3,p),L(K3,v),L(X7,M),ve(S))if(S.length){const D=t.exposed||(t.exposed={});S.forEach(H=>{Object.defineProperty(D,H,{get:()=>n[H],set:q=>n[H]=q})})}else t.exposed||(t.exposed={});E&&t.render===br&&(t.render=E),R!=null&&(t.inheritAttrs=R),I&&(t.components=I),N&&(t.directives=N)}function n9(t,e,n=br){ve(t)&&(t=Jv(t));for(const i in t){const r=t[i];let s;dt(r)?"default"in r?s=Ws(r.from||i,r.default,!0):s=Ws(r.from||i):s=Ws(r),Mn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function lS(t,e,n){Vi(ve(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Q3(t,e,n,i){const r=i.includes(".")?G3(n,i):()=>n[i];if(Pt(t)){const s=e[t];De(s)&&Wm(r,s)}else if(De(t))Wm(r,t.bind(n));else if(dt(t))if(ve(t))t.forEach(s=>Q3(s,e,n,i));else{const s=De(t.handler)?t.handler.bind(n):e[t.handler];De(s)&&Wm(r,s,t)}}function d2(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!n&&!i?l=e:(l={},r.length&&r.forEach(c=>cp(l,c,o,!0)),cp(l,e,o)),dt(e)&&s.set(e,l),l}function cp(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&cp(t,s,n,!0),r&&r.forEach(o=>cp(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=i9[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const i9={data:cS,props:uS,emits:uS,methods:tf,computed:tf,beforeCreate:Ln,created:Ln,beforeMount:Ln,mounted:Ln,beforeUpdate:Ln,updated:Ln,beforeDestroy:Ln,beforeUnmount:Ln,destroyed:Ln,unmounted:Ln,activated:Ln,deactivated:Ln,errorCaptured:Ln,serverPrefetch:Ln,components:tf,directives:tf,watch:s9,provide:cS,inject:r9};function cS(t,e){return e?t?function(){return Zt(De(t)?t.call(this,this):t,De(e)?e.call(this,this):e)}:e:t}function r9(t,e){return tf(Jv(t),Jv(e))}function Jv(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ln(t,e){return t?[...new Set([].concat(t,e))]:e}function tf(t,e){return t?Zt(Object.create(null),t,e):e}function uS(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Zt(Object.create(null),aS(t),aS(e??{})):e}function s9(t,e){if(!t)return e;if(!e)return t;const n=Zt(Object.create(null),t);for(const i in e)n[i]=Ln(t[i],e[i]);return n}function ek(){return{app:null,config:{isNativeTag:P8,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let o9=0;function a9(t,e){return function(i,r=null){De(i)||(i=Zt({},i)),r!=null&&!dt(r)&&(r=null);const s=ek(),o=new WeakSet;let a=!1;const l=s.app={_uid:o9++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:$9,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&De(c.install)?(o.add(c),c.install(l,...u)):De(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const f=me(i,r);return f.appContext=s,u&&e?e(f,c):t(f,c,h),a=!0,l._container=c,c.__vue_app__=l,o_(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){up=l;try{return c()}finally{up=null}}};return l}}let up=null;function Hm(t,e){if(cn){let n=cn.provides;const i=cn.parent&&cn.parent.provides;i===n&&(n=cn.provides=Object.create(i)),n[t]=e}}function Ws(t,e,n=!1){const i=cn||pn;if(i||up){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:up._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&De(e)?e.call(i&&i.proxy):e}}function l9(t,e,n,i=!1){const r={},s={};sp(s,s_,1),t.propsDefaults=Object.create(null),tk(t,e,r,s);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=i?r:A3(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function c9(t,e,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=t,a=Ue(r),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(e_(t.emitsOptions,f))continue;const d=e[f];if(l)if(qe(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const g=rs(f);r[g]=Qv(l,a,g,d,t,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{tk(t,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!qe(e,h)&&((u=qu(h))===h||!qe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=Qv(l,a,h,void 0,t,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!qe(e,h))&&(delete s[h],c=!0)}c&&zs(t,"set","$attrs")}function tk(t,e,n,i){const[r,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Fm(l))continue;const c=e[l];let u;r&&qe(r,u=rs(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:e_(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Ue(n),c=a||bt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Qv(r,l,h,c[h],t,!qe(c,h))}}return o}function Qv(t,e,n,i,r,s){const o=t[n];if(o!=null){const a=qe(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&De(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(cu(r),i=c[n]=l.call(null,e),pl())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===qu(n))&&(i=!0))}return i}function nk(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const s=t.props,o={},a=[];let l=!1;if(!De(t)){const u=h=>{l=!0;const[f,d]=nk(h,e,!0);Zt(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return dt(t)&&i.set(t,Yc),Yc;if(ve(s))for(let u=0;u<s.length;u++){const h=rs(s[u]);hS(h)&&(o[h]=bt)}else if(s)for(const u in s){const h=rs(u);if(hS(h)){const f=s[u],d=o[h]=ve(f)||De(f)?{type:f}:Zt({},f);if(d){const g=gS(Boolean,d.type),m=gS(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||qe(d,"default"))&&a.push(h)}}}const c=[o,a];return dt(t)&&i.set(t,c),c}function hS(t){return t[0]!=="$"}function fS(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function dS(t,e){return fS(t)===fS(e)}function gS(t,e){return ve(e)?e.findIndex(n=>dS(n,t)):De(e)&&dS(e,t)?0:-1}const ik=t=>t[0]==="_"||t==="$stable",g2=t=>ve(t)?t.map(Fr):[Fr(t)],u9=(t,e,n)=>{if(e._n)return e;const i=Al((...r)=>g2(e(...r)),n);return i._c=!1,i},rk=(t,e,n)=>{const i=t._ctx;for(const r in t){if(ik(r))continue;const s=t[r];if(De(s))e[r]=u9(r,s,i);else if(s!=null){const o=g2(s);e[r]=()=>o}}},sk=(t,e)=>{const n=g2(e);t.slots.default=()=>n},h9=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ue(e),sp(e,"_",n)):rk(e,t.slots={})}else t.slots={},e&&sk(t,e);sp(t.slots,s_,1)},f9=(t,e,n)=>{const{vnode:i,slots:r}=t;let s=!0,o=bt;if(i.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Zt(r,e),!n&&a===1&&delete r._):(s=!e.$stable,rk(e,r)),o=e}else e&&(sk(t,e),o={default:1});if(s)for(const a in r)!ik(a)&&o[a]==null&&delete r[a]};function eb(t,e,n,i,r=!1){if(ve(t)){t.forEach((f,d)=>eb(f,e&&(ve(e)?e[d]:e),n,i,r));return}if(_f(i)&&!r)return;const s=i.shapeFlag&4?o_(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===bt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Pt(c)?(u[c]=null,qe(h,c)&&(h[c]=null)):Mn(c)&&(c.value=null)),De(l))ta(l,a,12,[o,u]);else{const f=Pt(l),d=Mn(l);if(f||d){const g=()=>{if(t.f){const m=f?qe(h,l)?h[l]:u[l]:l.value;r?ve(m)&&Qw(m,s):ve(m)?m.includes(s)||m.push(s):f?(u[l]=[s],qe(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,qe(h,l)&&(h[l]=o)):d&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,Jn(g,n)):g()}}}const Jn=P7;function d9(t){return g9(t)}function g9(t,e){const n=Bv();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=br,insertStaticContent:g}=t,m=(A,$,F,B=null,V=null,Z=null,ue=!1,oe=null,ae=!!$.dynamicChildren)=>{if(A===$)return;A&&!Xa(A,$)&&(B=z(A),W(A,V,Z,!0),A=null),$.patchFlag===-2&&(ae=!1,$.dynamicChildren=null);const{type:Q,ref:de,shapeFlag:he}=$;switch(Q){case r_:_(A,$,F,B);break;case Gi:y(A,$,F,B);break;case Bm:A==null&&p($,F,B,ue);break;case yt:I(A,$,F,B,V,Z,ue,oe,ae);break;default:he&1?E(A,$,F,B,V,Z,ue,oe,ae):he&6?N(A,$,F,B,V,Z,ue,oe,ae):(he&64||he&128)&&Q.process(A,$,F,B,V,Z,ue,oe,ae,P)}de!=null&&V&&eb(de,A&&A.ref,Z,$||A,!$)},_=(A,$,F,B)=>{if(A==null)i($.el=a($.children),F,B);else{const V=$.el=A.el;$.children!==A.children&&c(V,$.children)}},y=(A,$,F,B)=>{A==null?i($.el=l($.children||""),F,B):$.el=A.el},p=(A,$,F,B)=>{[A.el,A.anchor]=g(A.children,$,F,B,A.el,A.anchor)},b=({el:A,anchor:$},F,B)=>{let V;for(;A&&A!==$;)V=f(A),i(A,F,B),A=V;i($,F,B)},v=({el:A,anchor:$})=>{let F;for(;A&&A!==$;)F=f(A),r(A),A=F;r($)},E=(A,$,F,B,V,Z,ue,oe,ae)=>{ue=ue||$.type==="svg",A==null?w($,F,B,V,Z,ue,oe,ae):M(A,$,V,Z,ue,oe,ae)},w=(A,$,F,B,V,Z,ue,oe)=>{let ae,Q;const{type:de,props:he,shapeFlag:ge,transition:_e,dirs:Ae}=A;if(ae=A.el=o(A.type,Z,he&&he.is,he),ge&8?u(ae,A.children):ge&16&&C(A.children,ae,null,B,V,Z&&de!=="foreignObject",ue,oe),Ae&&Na(A,null,B,"created"),T(ae,A,A.scopeId,ue,B),he){for(const Ie in he)Ie!=="value"&&!Fm(Ie)&&s(ae,Ie,null,he[Ie],Z,A.children,B,V,ce);"value"in he&&s(ae,"value",null,he.value),(Q=he.onVnodeBeforeMount)&&$r(Q,B,A)}Ae&&Na(A,null,B,"beforeMount");const ze=m9(V,_e);ze&&_e.beforeEnter(ae),i(ae,$,F),((Q=he&&he.onVnodeMounted)||ze||Ae)&&Jn(()=>{Q&&$r(Q,B,A),ze&&_e.enter(ae),Ae&&Na(A,null,B,"mounted")},V)},T=(A,$,F,B,V)=>{if(F&&d(A,F),B)for(let Z=0;Z<B.length;Z++)d(A,B[Z]);if(V){let Z=V.subTree;if($===Z){const ue=V.vnode;T(A,ue,ue.scopeId,ue.slotScopeIds,V.parent)}}},C=(A,$,F,B,V,Z,ue,oe,ae=0)=>{for(let Q=ae;Q<A.length;Q++){const de=A[Q]=oe?No(A[Q]):Fr(A[Q]);m(null,de,$,F,B,V,Z,ue,oe)}},M=(A,$,F,B,V,Z,ue)=>{const oe=$.el=A.el;let{patchFlag:ae,dynamicChildren:Q,dirs:de}=$;ae|=A.patchFlag&16;const he=A.props||bt,ge=$.props||bt;let _e;F&&Da(F,!1),(_e=ge.onVnodeBeforeUpdate)&&$r(_e,F,$,A),de&&Na($,A,F,"beforeUpdate"),F&&Da(F,!0);const Ae=V&&$.type!=="foreignObject";if(Q?S(A.dynamicChildren,Q,oe,F,B,Ae,Z):ue||H(A,$,oe,null,F,B,Ae,Z,!1),ae>0){if(ae&16)R(oe,$,he,ge,F,B,V);else if(ae&2&&he.class!==ge.class&&s(oe,"class",null,ge.class,V),ae&4&&s(oe,"style",he.style,ge.style,V),ae&8){const ze=$.dynamicProps;for(let Ie=0;Ie<ze.length;Ie++){const st=ze[Ie],It=he[st],Et=ge[st];(Et!==It||st==="value")&&s(oe,st,It,Et,V,A.children,F,B,ce)}}ae&1&&A.children!==$.children&&u(oe,$.children)}else!ue&&Q==null&&R(oe,$,he,ge,F,B,V);((_e=ge.onVnodeUpdated)||de)&&Jn(()=>{_e&&$r(_e,F,$,A),de&&Na($,A,F,"updated")},B)},S=(A,$,F,B,V,Z,ue)=>{for(let oe=0;oe<$.length;oe++){const ae=A[oe],Q=$[oe],de=ae.el&&(ae.type===yt||!Xa(ae,Q)||ae.shapeFlag&70)?h(ae.el):F;m(ae,Q,de,null,B,V,Z,ue,!0)}},R=(A,$,F,B,V,Z,ue)=>{if(F!==B){if(F!==bt)for(const oe in F)!Fm(oe)&&!(oe in B)&&s(A,oe,F[oe],null,ue,$.children,V,Z,ce);for(const oe in B){if(Fm(oe))continue;const ae=B[oe],Q=F[oe];ae!==Q&&oe!=="value"&&s(A,oe,Q,ae,ue,$.children,V,Z,ce)}"value"in B&&s(A,"value",F.value,B.value)}},I=(A,$,F,B,V,Z,ue,oe,ae)=>{const Q=$.el=A?A.el:a(""),de=$.anchor=A?A.anchor:a("");let{patchFlag:he,dynamicChildren:ge,slotScopeIds:_e}=$;_e&&(oe=oe?oe.concat(_e):_e),A==null?(i(Q,F,B),i(de,F,B),C($.children,F,de,V,Z,ue,oe,ae)):he>0&&he&64&&ge&&A.dynamicChildren?(S(A.dynamicChildren,ge,F,V,Z,ue,oe),($.key!=null||V&&$===V.subTree)&&ok(A,$,!0)):H(A,$,F,de,V,Z,ue,oe,ae)},N=(A,$,F,B,V,Z,ue,oe,ae)=>{$.slotScopeIds=oe,A==null?$.shapeFlag&512?V.ctx.activate($,F,B,ue,ae):O($,F,B,V,Z,ue,ae):k(A,$,ae)},O=(A,$,F,B,V,Z,ue)=>{const oe=A.component=x9(A,B,V);if(n_(A)&&(oe.ctx.renderer=P),T9(oe),oe.asyncDep){if(V&&V.registerDep(oe,L),!A.el){const ae=oe.subTree=me(Gi);y(null,ae,$,F)}return}L(oe,A,$,F,V,Z,ue)},k=(A,$,F)=>{const B=$.component=A.component;if(O7(A,$,F))if(B.asyncDep&&!B.asyncResolved){D(B,$,F);return}else B.next=$,M7(B.update),B.update();else $.el=A.el,B.vnode=$},L=(A,$,F,B,V,Z,ue)=>{const oe=()=>{if(A.isMounted){let{next:de,bu:he,u:ge,parent:_e,vnode:Ae}=A,ze=de,Ie;Da(A,!1),de?(de.el=Ae.el,D(A,de,ue)):de=Ae,he&&zm(he),(Ie=de.props&&de.props.onVnodeBeforeUpdate)&&$r(Ie,_e,de,Ae),Da(A,!0);const st=Uy(A),It=A.subTree;A.subTree=st,m(It,st,h(It.el),z(It),A,V,Z),de.el=st.el,ze===null&&L7(A,st.el),ge&&Jn(ge,V),(Ie=de.props&&de.props.onVnodeUpdated)&&Jn(()=>$r(Ie,_e,de,Ae),V)}else{let de;const{el:he,props:ge}=$,{bm:_e,m:Ae,parent:ze}=A,Ie=_f($);if(Da(A,!1),_e&&zm(_e),!Ie&&(de=ge&&ge.onVnodeBeforeMount)&&$r(de,ze,$),Da(A,!0),he&&te){const st=()=>{A.subTree=Uy(A),te(he,A.subTree,A,V,null)};Ie?$.type.__asyncLoader().then(()=>!A.isUnmounted&&st()):st()}else{const st=A.subTree=Uy(A);m(null,st,F,B,A,V,Z),$.el=st.el}if(Ae&&Jn(Ae,V),!Ie&&(de=ge&&ge.onVnodeMounted)){const st=$;Jn(()=>$r(de,ze,st),V)}($.shapeFlag&256||ze&&_f(ze.vnode)&&ze.vnode.shapeFlag&256)&&A.a&&Jn(A.a,V),A.isMounted=!0,$=F=B=null}},ae=A.effect=new i2(oe,()=>u2(Q),A.scope),Q=A.update=()=>ae.run();Q.id=A.uid,Da(A,!0),Q()},D=(A,$,F)=>{$.component=A;const B=A.vnode.props;A.vnode=$,A.next=null,c9(A,$.props,B,F),f9(A,$.children,F),Xu(),iS(),Zu()},H=(A,$,F,B,V,Z,ue,oe,ae=!1)=>{const Q=A&&A.children,de=A?A.shapeFlag:0,he=$.children,{patchFlag:ge,shapeFlag:_e}=$;if(ge>0){if(ge&128){G(Q,he,F,B,V,Z,ue,oe,ae);return}else if(ge&256){q(Q,he,F,B,V,Z,ue,oe,ae);return}}_e&8?(de&16&&ce(Q,V,Z),he!==Q&&u(F,he)):de&16?_e&16?G(Q,he,F,B,V,Z,ue,oe,ae):ce(Q,V,Z,!0):(de&8&&u(F,""),_e&16&&C(he,F,B,V,Z,ue,oe,ae))},q=(A,$,F,B,V,Z,ue,oe,ae)=>{A=A||Yc,$=$||Yc;const Q=A.length,de=$.length,he=Math.min(Q,de);let ge;for(ge=0;ge<he;ge++){const _e=$[ge]=ae?No($[ge]):Fr($[ge]);m(A[ge],_e,F,null,V,Z,ue,oe,ae)}Q>de?ce(A,V,Z,!0,!1,he):C($,F,B,V,Z,ue,oe,ae,he)},G=(A,$,F,B,V,Z,ue,oe,ae)=>{let Q=0;const de=$.length;let he=A.length-1,ge=de-1;for(;Q<=he&&Q<=ge;){const _e=A[Q],Ae=$[Q]=ae?No($[Q]):Fr($[Q]);if(Xa(_e,Ae))m(_e,Ae,F,null,V,Z,ue,oe,ae);else break;Q++}for(;Q<=he&&Q<=ge;){const _e=A[he],Ae=$[ge]=ae?No($[ge]):Fr($[ge]);if(Xa(_e,Ae))m(_e,Ae,F,null,V,Z,ue,oe,ae);else break;he--,ge--}if(Q>he){if(Q<=ge){const _e=ge+1,Ae=_e<de?$[_e].el:B;for(;Q<=ge;)m(null,$[Q]=ae?No($[Q]):Fr($[Q]),F,Ae,V,Z,ue,oe,ae),Q++}}else if(Q>ge)for(;Q<=he;)W(A[Q],V,Z,!0),Q++;else{const _e=Q,Ae=Q,ze=new Map;for(Q=Ae;Q<=ge;Q++){const Tt=$[Q]=ae?No($[Q]):Fr($[Q]);Tt.key!=null&&ze.set(Tt.key,Q)}let Ie,st=0;const It=ge-Ae+1;let Et=!1,_o=0;const Ai=new Array(It);for(Q=0;Q<It;Q++)Ai[Q]=0;for(Q=_e;Q<=he;Q++){const Tt=A[Q];if(st>=It){W(Tt,V,Z,!0);continue}let $n;if(Tt.key!=null)$n=ze.get(Tt.key);else for(Ie=Ae;Ie<=ge;Ie++)if(Ai[Ie-Ae]===0&&Xa(Tt,$[Ie])){$n=Ie;break}$n===void 0?W(Tt,V,Z,!0):(Ai[$n-Ae]=Q+1,$n>=_o?_o=$n:Et=!0,m(Tt,$[$n],F,null,V,Z,ue,oe,ae),st++)}const kn=Et?p9(Ai):Yc;for(Ie=kn.length-1,Q=It-1;Q>=0;Q--){const Tt=Ae+Q,$n=$[Tt],rc=Tt+1<de?$[Tt+1].el:B;Ai[Q]===0?m(null,$n,F,rc,V,Z,ue,oe,ae):Et&&(Ie<0||Q!==kn[Ie]?J($n,F,rc,2):Ie--)}}},J=(A,$,F,B,V=null)=>{const{el:Z,type:ue,transition:oe,children:ae,shapeFlag:Q}=A;if(Q&6){J(A.component.subTree,$,F,B);return}if(Q&128){A.suspense.move($,F,B);return}if(Q&64){ue.move(A,$,F,P);return}if(ue===yt){i(Z,$,F);for(let he=0;he<ae.length;he++)J(ae[he],$,F,B);i(A.anchor,$,F);return}if(ue===Bm){b(A,$,F);return}if(B!==2&&Q&1&&oe)if(B===0)oe.beforeEnter(Z),i(Z,$,F),Jn(()=>oe.enter(Z),V);else{const{leave:he,delayLeave:ge,afterLeave:_e}=oe,Ae=()=>i(Z,$,F),ze=()=>{he(Z,()=>{Ae(),_e&&_e()})};ge?ge(Z,Ae,ze):ze()}else i(Z,$,F)},W=(A,$,F,B=!1,V=!1)=>{const{type:Z,props:ue,ref:oe,children:ae,dynamicChildren:Q,shapeFlag:de,patchFlag:he,dirs:ge}=A;if(oe!=null&&eb(oe,null,F,A,!0),de&256){$.ctx.deactivate(A);return}const _e=de&1&&ge,Ae=!_f(A);let ze;if(Ae&&(ze=ue&&ue.onVnodeBeforeUnmount)&&$r(ze,$,A),de&6)le(A.component,F,B);else{if(de&128){A.suspense.unmount(F,B);return}_e&&Na(A,null,$,"beforeUnmount"),de&64?A.type.remove(A,$,F,V,P,B):Q&&(Z!==yt||he>0&&he&64)?ce(Q,$,F,!1,!0):(Z===yt&&he&384||!V&&de&16)&&ce(ae,$,F),B&&ie(A)}(Ae&&(ze=ue&&ue.onVnodeUnmounted)||_e)&&Jn(()=>{ze&&$r(ze,$,A),_e&&Na(A,null,$,"unmounted")},F)},ie=A=>{const{type:$,el:F,anchor:B,transition:V}=A;if($===yt){se(F,B);return}if($===Bm){v(A);return}const Z=()=>{r(F),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(A.shapeFlag&1&&V&&!V.persisted){const{leave:ue,delayLeave:oe}=V,ae=()=>ue(F,Z);oe?oe(A.el,Z,ae):ae()}else Z()},se=(A,$)=>{let F;for(;A!==$;)F=f(A),r(A),A=F;r($)},le=(A,$,F)=>{const{bum:B,scope:V,update:Z,subTree:ue,um:oe}=A;B&&zm(B),V.stop(),Z&&(Z.active=!1,W(ue,A,$,F)),oe&&Jn(oe,$),Jn(()=>{A.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},ce=(A,$,F,B=!1,V=!1,Z=0)=>{for(let ue=Z;ue<A.length;ue++)W(A[ue],$,F,B,V)},z=A=>A.shapeFlag&6?z(A.component.subTree):A.shapeFlag&128?A.suspense.next():f(A.anchor||A.el),U=(A,$,F)=>{A==null?$._vnode&&W($._vnode,null,null,!0):m($._vnode||null,A,$,null,null,null,F),iS(),z3(),$._vnode=A},P={p:m,um:W,m:J,r:ie,mt:O,mc:C,pc:H,pbc:S,n:z,o:t};let Y,te;return e&&([Y,te]=e(P)),{render:U,hydrate:Y,createApp:a9(U,Y)}}function Da({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function m9(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ok(t,e,n=!1){const i=t.children,r=e.children;if(ve(i)&&ve(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=No(r[s]),a.el=o.el),n||ok(o,a)),a.type===r_&&(a.el=o.el)}}function p9(t){const e=t.slice(),n=[0];let i,r,s,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const _9=t=>t.__isTeleport,yt=Symbol.for("v-fgt"),r_=Symbol.for("v-txt"),Gi=Symbol.for("v-cmt"),Bm=Symbol.for("v-stc"),vf=[];let pr=null;function j(t=!1){vf.push(pr=t?null:[])}function y9(){vf.pop(),pr=vf[vf.length-1]||null}let Ff=1;function mS(t){Ff+=t}function ak(t){return t.dynamicChildren=Ff>0?pr||Yc:null,y9(),Ff>0&&pr&&pr.push(t),t}function K(t,e,n,i,r,s){return ak(x(t,e,n,i,r,s,!0))}function ml(t,e,n,i,r){return ak(me(t,e,n,i,r,!0))}function hp(t){return t?t.__v_isVNode===!0:!1}function Xa(t,e){return t.type===e.type&&t.key===e.key}const s_="__vInternal",lk=({key:t})=>t??null,Vm=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Pt(t)||Mn(t)||De(t)?{i:pn,r:t,k:e,f:!!n}:t:null);function x(t,e=null,n=null,i=0,r=null,s=t===yt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&lk(e),ref:e&&Vm(e),scopeId:t_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:pn};return a?(m2(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Pt(n)?8:16),Ff>0&&!o&&pr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&pr.push(l),l}const me=v9;function v9(t,e=null,n=null,i=0,r=null,s=!1){if((!t||t===B3)&&(t=Gi),hp(t)){const a=ra(t,e,!0);return n&&m2(a,n),Ff>0&&!s&&pr&&(a.shapeFlag&6?pr[pr.indexOf(t)]=a:pr.push(a)),a.patchFlag|=-2,a}if(R9(t)&&(t=t.__vccOpts),e){e=cr(e);let{class:a,style:l}=e;a&&!Pt(a)&&(e.class=Xt(a)),dt(l)&&(I3(l)&&!ve(l)&&(l=Zt({},l)),e.style=Gt(l))}const o=Pt(t)?1:F7(t)?128:_9(t)?64:dt(t)?4:De(t)?2:0;return x(t,e,n,i,r,o,s,!0)}function cr(t){return t?I3(t)||s_ in t?Zt({},t):t:null}function ra(t,e,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=t,a=e?tb(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&lk(a),ref:e&&e.ref?n&&r?ve(r)?r.concat(Vm(e)):[r,Vm(e)]:Vm(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==yt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ra(t.ssContent),ssFallback:t.ssFallback&&ra(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function pe(t=" ",e=0){return me(r_,null,t,e)}function Md(t,e){const n=me(Bm,null,t);return n.staticCount=e,n}function Ee(t="",e=!1){return e?(j(),ml(Gi,null,t)):me(Gi,null,t)}function Fr(t){return t==null||typeof t=="boolean"?me(Gi):ve(t)?me(yt,null,t.slice()):typeof t=="object"?No(t):me(r_,null,String(t))}function No(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ra(t)}function m2(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),m2(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(s_ in e)?e._ctx=pn:r===3&&pn&&(pn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else De(e)?(e={default:e,_ctx:pn},n=32):(e=String(e),i&64?(n=16,e=[pe(e)]):n=8);t.children=e,t.shapeFlag|=n}function tb(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=Xt([e.class,i.class]));else if(r==="style")e.style=Gt([e.style,i.style]);else if(q0(r)){const s=e[r],o=i[r];o&&s!==o&&!(ve(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function $r(t,e,n,i=null){Vi(t,e,7,[n,i])}const b9=ek();let w9=0;function x9(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||b9,s={uid:w9++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new _3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nk(i,r),emitsOptions:H3(i,r),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:i.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=I7.bind(null,s),t.ce&&t.ce(s),s}let cn=null;const E9=()=>cn||pn;let p2,oc,pS="__VUE_INSTANCE_SETTERS__";(oc=Bv()[pS])||(oc=Bv()[pS]=[]),oc.push(t=>cn=t),p2=t=>{oc.length>1?oc.forEach(e=>e(t)):oc[0](t)};const cu=t=>{p2(t),t.scope.on()},pl=()=>{cn&&cn.scope.off(),p2(null)};function ck(t){return t.vnode.shapeFlag&4}let Pf=!1;function T9(t,e=!1){Pf=e;const{props:n,children:i}=t.vnode,r=ck(t);l9(t,n,r,e),h9(t,i);const s=r?S9(t,e):void 0;return Pf=!1,s}function S9(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=a2(new Proxy(t.ctx,e9));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?M9(t):null;cu(t),Xu();const s=ta(i,t,0,[t.props,r]);if(Zu(),pl(),f3(s)){if(s.then(pl,pl),e)return s.then(o=>{_S(t,o,e)}).catch(o=>{Q0(o,t,0)});t.asyncDep=s}else _S(t,s,e)}else uk(t,e)}function _S(t,e,n){De(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:dt(e)&&(t.setupState=N3(e)),uk(t,n)}let yS;function uk(t,e,n){const i=t.type;if(!t.render){if(!e&&yS&&!i.render){const r=i.template||d2(t).template;if(r){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Zt(Zt({isCustomElement:s,delimiters:a},o),l);i.render=yS(r,c)}}t.render=i.render||br}{cu(t),Xu();try{t9(t)}finally{Zu(),pl()}}}function C9(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return li(t,"get","$attrs"),e[n]}}))}function M9(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return C9(t)},slots:t.slots,emit:t.emit,expose:e}}function o_(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(N3(a2(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in yf)return yf[n](t)},has(e,n){return n in e||n in yf}}))}function A9(t,e=!0){return De(t)?t.displayName||t.name:t.name||e&&t.__name}function R9(t){return De(t)&&"__vccOpts"in t}const dr=(t,e)=>T7(t,e,Pf);function $s(t,e,n){const i=arguments.length;return i===2?dt(e)&&!ve(e)?hp(e)?me(t,null,[e]):me(t,e):me(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&hp(n)&&(n=[n]),me(t,e,n))}const I9=Symbol.for("v-scx"),k9=()=>Ws(I9),$9="3.3.9",O9="http://www.w3.org/2000/svg",Za=typeof document<"u"?document:null,vS=Za&&Za.createElement("template"),L9={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?Za.createElementNS(O9,t):Za.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Za.createTextNode(t),createComment:t=>Za.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Za.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,s){const o=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{vS.innerHTML=i?`<svg>${t}</svg>`:t;const a=vS.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vo="transition",Ah="animation",zf=Symbol("_vtc"),uu=(t,{slots:e})=>$s(B7,N9(t),e);uu.displayName="Transition";const hk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};uu.props=Zt({},U3,hk);const Fa=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},bS=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function N9(t){const e={};for(const I in t)I in hk||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,g=D9(r),m=g&&g[0],_=g&&g[1],{onBeforeEnter:y,onEnter:p,onEnterCancelled:b,onLeave:v,onLeaveCancelled:E,onBeforeAppear:w=y,onAppear:T=p,onAppearCancelled:C=b}=e,M=(I,N,O)=>{Pa(I,N?u:a),Pa(I,N?c:o),O&&O()},S=(I,N)=>{I._isLeaving=!1,Pa(I,h),Pa(I,d),Pa(I,f),N&&N()},R=I=>(N,O)=>{const k=I?T:p,L=()=>M(N,I,O);Fa(k,[N,L]),wS(()=>{Pa(N,I?l:s),bo(N,I?u:a),bS(k)||xS(N,i,m,L)})};return Zt(e,{onBeforeEnter(I){Fa(y,[I]),bo(I,s),bo(I,o)},onBeforeAppear(I){Fa(w,[I]),bo(I,l),bo(I,c)},onEnter:R(!1),onAppear:R(!0),onLeave(I,N){I._isLeaving=!0;const O=()=>S(I,N);bo(I,h),z9(),bo(I,f),wS(()=>{I._isLeaving&&(Pa(I,h),bo(I,d),bS(v)||xS(I,i,_,O))}),Fa(v,[I,O])},onEnterCancelled(I){M(I,!1),Fa(b,[I])},onAppearCancelled(I){M(I,!0),Fa(C,[I])},onLeaveCancelled(I){S(I),Fa(E,[I])}})}function D9(t){if(t==null)return null;if(dt(t))return[Xy(t.enter),Xy(t.leave)];{const e=Xy(t);return[e,e]}}function Xy(t){return G8(t)}function bo(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[zf]||(t[zf]=new Set)).add(e)}function Pa(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[zf];n&&(n.delete(e),n.size||(t[zf]=void 0))}function wS(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let F9=0;function xS(t,e,n,i){const r=t._endId=++F9,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=P9(t,e);if(!o)return i();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,f),s()},f=d=>{d.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function P9(t,e){const n=window.getComputedStyle(t),i=g=>(n[g]||"").split(", "),r=i(`${vo}Delay`),s=i(`${vo}Duration`),o=ES(r,s),a=i(`${Ah}Delay`),l=i(`${Ah}Duration`),c=ES(a,l);let u=null,h=0,f=0;e===vo?o>0&&(u=vo,h=o,f=s.length):e===Ah?c>0&&(u=Ah,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?vo:Ah:null,f=u?u===vo?s.length:l.length:0);const d=u===vo&&/\b(transform|all)(,|$)/.test(i(`${vo}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function ES(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>TS(n)+TS(t[i])))}function TS(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function z9(){return document.body.offsetHeight}function W9(t,e,n){const i=t[zf];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _2=Symbol("_vod"),un={beforeMount(t,{value:e},{transition:n}){t[_2]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Rh(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Rh(t,!0),i.enter(t)):i.leave(t,()=>{Rh(t,!1)}):Rh(t,e))},beforeUnmount(t,{value:e}){Rh(t,e)}};function Rh(t,e){t.style.display=e?t[_2]:"none"}function H9(t,e,n){const i=t.style,r=Pt(n);if(n&&!r){if(e&&!Pt(e))for(const s in e)n[s]==null&&nb(i,s,"");for(const s in n)nb(i,s,n[s])}else{const s=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),_2 in t&&(i.display=s)}}const SS=/\s*!important$/;function nb(t,e,n){if(ve(n))n.forEach(i=>nb(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=B9(t,e);SS.test(n)?t.setProperty(qu(i),n.replace(SS,""),"important"):t[i]=n}}const CS=["Webkit","Moz","ms"],Zy={};function B9(t,e){const n=Zy[e];if(n)return n;let i=rs(e);if(i!=="filter"&&i in t)return Zy[e]=i;i=Z0(i);for(let r=0;r<CS.length;r++){const s=CS[r]+i;if(s in t)return Zy[e]=s}return e}const MS="http://www.w3.org/1999/xlink";function V9(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(MS,e.slice(6,e.length)):t.setAttributeNS(MS,e,n);else{const s=Z8(e);n==null||s&&!m3(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function G9(t,e,n,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const c=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=m3(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Bo(t,e,n,i){t.addEventListener(e,n,i)}function U9(t,e,n,i){t.removeEventListener(e,n,i)}const AS=Symbol("_vei");function Y9(t,e,n,i,r=null){const s=t[AS]||(t[AS]={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=j9(e);if(i){const c=s[e]=Z9(i,r);Bo(t,a,c,l)}else o&&(U9(t,a,o,l),s[e]=void 0)}}const RS=/(?:Once|Passive|Capture)$/;function j9(t){let e;if(RS.test(t)){e={};let i;for(;i=t.match(RS);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qu(t.slice(2)),e]}let Ky=0;const q9=Promise.resolve(),X9=()=>Ky||(q9.then(()=>Ky=0),Ky=Date.now());function Z9(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Vi(K9(i,n.value),e,5,[i])};return n.value=t,n.attached=X9(),n}function K9(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const IS=/^on[a-z]/,J9=(t,e,n,i,r=!1,s,o,a,l)=>{e==="class"?W9(t,i,r):e==="style"?H9(t,n,i):q0(e)?Jw(e)||Y9(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Q9(t,e,i,r))?G9(t,e,i,s,o,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),V9(t,e,i,r))};function Q9(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&IS.test(e)&&De(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||IS.test(e)&&Pt(n)?!1:e in t}const hu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>zm(e,n):e};function ez(t){t.target.composing=!0}function kS(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Hs=Symbol("_assign"),fp={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t[Hs]=hu(r);const s=i||r.props&&r.props.type==="number";Bo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=op(a)),t[Hs](a)}),n&&Bo(t,"change",()=>{t.value=t.value.trim()}),e||(Bo(t,"compositionstart",ez),Bo(t,"compositionend",kS),Bo(t,"change",kS))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},s){if(t[Hs]=hu(s),t.composing)return;const o=r||t.type==="number"?op(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===a)||(t.value=a))}},fk={deep:!0,created(t,e,n){t[Hs]=hu(n),Bo(t,"change",()=>{const i=t._modelValue,r=Wf(t),s=t.checked,o=t[Hs];if(ve(i)){const a=t2(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(ju(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(gk(t,s))})},mounted:$S,beforeUpdate(t,e,n){t[Hs]=hu(n),$S(t,e,n)}};function $S(t,{value:e,oldValue:n},i){t._modelValue=e,ve(e)?t.checked=t2(e,i.props.value)>-1:ju(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=Cd(e,gk(t,!0)))}const dk={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const r=ju(e);Bo(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?op(Wf(o)):Wf(o));t[Hs](t.multiple?r?new Set(s):s:s[0])}),t[Hs]=hu(i)},mounted(t,{value:e}){OS(t,e)},beforeUpdate(t,e,n){t[Hs]=hu(n)},updated(t,{value:e}){OS(t,e)}};function OS(t,e){const n=t.multiple;if(!(n&&!ve(e)&&!ju(e))){for(let i=0,r=t.options.length;i<r;i++){const s=t.options[i],o=Wf(s);if(n)ve(e)?s.selected=t2(e,o)>-1:s.selected=e.has(o);else if(Cd(Wf(s),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Wf(t){return"_value"in t?t._value:t.value}function gk(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const tz=["ctrl","shift","alt","meta"],nz={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>tz.some(n=>t[`${n}Key`]&&!e.includes(n))},LS=(t,e)=>(n,...i)=>{for(let r=0;r<e.length;r++){const s=nz[e[r]];if(s&&s(n,e))return}return t(n,...i)},iz=Zt({patchProp:J9},L9);let NS;function rz(){return NS||(NS=d9(iz))}const sz=(...t)=>{const e=rz().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=oz(i);if(!r)return;const s=e._component;!De(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function oz(t){return Pt(t)?document.querySelector(t):t}var az=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const lz=Symbol();var DS;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(DS||(DS={}));function cz(){const t=J8(!0),e=t.run(()=>O3({}));let n=[],i=[];const r=a2({install(s){r._a=s,s.provide(lz,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!az?i.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Mc=typeof window<"u";function uz(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const lt=Object.assign;function Jy(t,e){const n={};for(const i in e){const r=e[i];n[i]=wr(r)?r.map(t):t(r)}return n}const bf=()=>{},wr=Array.isArray,hz=/\/$/,fz=t=>t.replace(hz,"");function Qy(t,e,n="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=t(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=pz(i??e,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function dz(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function FS(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function gz(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&fu(e.matched[i],n.matched[r])&&mk(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function fu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function mk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!mz(t[n],e[n]))return!1;return!0}function mz(t,e){return wr(t)?PS(t,e):wr(e)?PS(e,t):t===e}function PS(t,e){return wr(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function pz(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var Hf;(function(t){t.pop="pop",t.push="push"})(Hf||(Hf={}));var wf;(function(t){t.back="back",t.forward="forward",t.unknown=""})(wf||(wf={}));function _z(t){if(!t)if(Mc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),fz(t)}const yz=/^[^#]+#/;function vz(t,e){return t.replace(yz,"#")+e}function bz(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const a_=()=>({left:window.pageXOffset,top:window.pageYOffset});function wz(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=bz(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function zS(t,e){return(history.state?history.state.position-e:-1)+t}const ib=new Map;function xz(t,e){ib.set(t,e)}function Ez(t){const e=ib.get(t);return ib.delete(t),e}let Tz=()=>location.protocol+"//"+location.host;function pk(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let a=r.includes(t.slice(s))?t.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),FS(l,"")}return FS(n,t)+i+r}function Sz(t,e,n,i){let r=[],s=[],o=null;const a=({state:f})=>{const d=pk(t,location),g=n.value,m=e.value;let _=0;if(f){if(n.value=d,e.value=f,o&&o===g){o=null;return}_=m?f.position-m.position:0}else i(d);r.forEach(y=>{y(n.value,g,{delta:_,type:Hf.pop,direction:_?_>0?wf.forward:wf.back:wf.unknown})})};function l(){o=n.value}function c(f){r.push(f);const d=()=>{const g=r.indexOf(f);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(lt({},f.state,{scroll:a_()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function WS(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?a_():null}}function Cz(t){const{history:e,location:n}=window,i={value:pk(t,n)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:Tz()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(d){console.error(d),n[u?"replace":"assign"](f)}}function o(l,c){const u=lt({},e.state,WS(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=lt({},r.value,e.state,{forward:l,scroll:a_()});s(u.current,u,!0);const h=lt({},WS(i.value,l,null),{position:u.position+1},c);s(l,h,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function Mz(t){t=_z(t);const e=Cz(t),n=Sz(t,e.state,e.location,e.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=lt({location:"",base:t,go:i,createHref:vz.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Az(t){return typeof t=="string"||t&&typeof t=="object"}function _k(t){return typeof t=="string"||typeof t=="symbol"}const wo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},yk=Symbol("");var HS;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(HS||(HS={}));function du(t,e){return lt(new Error,{type:t,[yk]:!0},e)}function _s(t,e){return t instanceof Error&&yk in t&&(e==null||!!(t.type&e))}const BS="[^/]+?",Rz={sensitive:!1,strict:!1,start:!0,end:!0},Iz=/[.+*?^${}()[\]/\\]/g;function kz(t,e){const n=lt({},Rz,e),i=[];let r=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(Iz,"\\$&"),d+=40;else if(f.type===1){const{value:g,repeatable:m,optional:_,regexp:y}=f;s.push({name:g,repeatable:m,optional:_});const p=y||BS;if(p!==BS){d+=10;try{new RegExp(`(${p})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${p}): `+v.message)}}let b=m?`((?:${p})(?:/(?:${p}))*)`:`(${p})`;h||(b=_&&c.length<2?`(?:/${b})`:"/"+b),_&&(b+="?"),r+=b,d+=20,_&&(d+=-8),m&&(d+=-20),p===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",g=s[f-1];h[g.name]=d&&g.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:_}=d,y=g in c?c[g]:"";if(wr(y)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const p=wr(y)?y.join("/"):y;if(!p)if(_)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=p}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function $z(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Oz(t,e){let n=0;const i=t.score,r=e.score;for(;n<i.length&&n<r.length;){const s=$z(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(VS(i))return 1;if(VS(r))return-1}return r.length-i.length}function VS(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Lz={type:0,value:""},Nz=/[a-zA-Z0-9_]/;function Dz(t){if(!t)return[[]];if(t==="/")return[[Lz]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=i;break;case 1:l==="("?n=2:Nz.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function Fz(t,e,n){const i=kz(Dz(t.path),n),r=lt(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Pz(t,e){const n=[],i=new Map;e=YS({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,h,f){const d=!f,g=zz(u);g.aliasOf=f&&f.record;const m=YS(e,u),_=[g];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of b)_.push(lt({},g,{components:f?f.record.components:g.components,path:v,aliasOf:f?f.record:g}))}let y,p;for(const b of _){const{path:v}=b;if(h&&v[0]!=="/"){const E=h.record.path,w=E[E.length-1]==="/"?"":"/";b.path=h.record.path+(v&&w+v)}if(y=Fz(b,h,m),f?f.alias.push(y):(p=p||y,p!==y&&p.alias.push(y),d&&u.name&&!US(y)&&o(u.name)),g.children){const E=g.children;for(let w=0;w<E.length;w++)s(E[w],y,f&&f.children[w])}f=f||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return p?()=>{o(p)}:bf}function o(u){if(_k(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Oz(u,n[h])>=0&&(u.record.path!==n[h].record.path||!vk(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!US(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},g,m;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw du(1,{location:u});m=f.record.name,d=lt(GS(h.params,f.keys.filter(p=>!p.optional).map(p=>p.name)),u.params&&GS(u.params,f.keys.map(p=>p.name))),g=f.stringify(d)}else if("path"in u)g=u.path,f=n.find(p=>p.re.test(g)),f&&(d=f.parse(g),m=f.record.name);else{if(f=h.name?i.get(h.name):n.find(p=>p.re.test(h.path)),!f)throw du(1,{location:u,currentLocation:h});m=f.record.name,d=lt({},h.params,u.params),g=f.stringify(d)}const _=[];let y=f;for(;y;)_.unshift(y.record),y=y.parent;return{name:m,path:g,params:d,matched:_,meta:Hz(_)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function GS(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function zz(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Wz(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Wz(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function US(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hz(t){return t.reduce((e,n)=>lt(e,n.meta),{})}function YS(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function vk(t,e){return e.children.some(n=>n===t||vk(t,n))}const bk=/#/g,Bz=/&/g,Vz=/\//g,Gz=/=/g,Uz=/\?/g,wk=/\+/g,Yz=/%5B/g,jz=/%5D/g,xk=/%5E/g,qz=/%60/g,Ek=/%7B/g,Xz=/%7C/g,Tk=/%7D/g,Zz=/%20/g;function y2(t){return encodeURI(""+t).replace(Xz,"|").replace(Yz,"[").replace(jz,"]")}function Kz(t){return y2(t).replace(Ek,"{").replace(Tk,"}").replace(xk,"^")}function rb(t){return y2(t).replace(wk,"%2B").replace(Zz,"+").replace(bk,"%23").replace(Bz,"%26").replace(qz,"`").replace(Ek,"{").replace(Tk,"}").replace(xk,"^")}function Jz(t){return rb(t).replace(Gz,"%3D")}function Qz(t){return y2(t).replace(bk,"%23").replace(Uz,"%3F")}function eW(t){return t==null?"":Qz(t).replace(Vz,"%2F")}function dp(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function tW(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(wk," "),o=s.indexOf("="),a=dp(o<0?s:s.slice(0,o)),l=o<0?null:dp(s.slice(o+1));if(a in e){let c=e[a];wr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function jS(t){let e="";for(let n in t){const i=t[n];if(n=Jz(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(wr(i)?i.map(s=>s&&rb(s)):[i&&rb(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function nW(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=wr(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const iW=Symbol(""),qS=Symbol(""),v2=Symbol(""),Sk=Symbol(""),sb=Symbol("");function Ih(){let t=[];function e(i){return t.push(i),()=>{const r=t.indexOf(i);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Do(t,e,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(du(4,{from:n,to:e})):h instanceof Error?a(h):Az(h)?a(du(2,{from:e,to:h})):(s&&i.enterCallbacks[r]===s&&typeof h=="function"&&s.push(h),o())},c=t.call(i&&i.instances[r],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function e1(t,e,n,i){const r=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(rW(a)){const c=(a.__vccOpts||a)[e];c&&r.push(Do(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=uz(c)?c.default:c;s.components[o]=u;const f=(u.__vccOpts||u)[e];return f&&Do(f,n,i,s,o)()}))}}return r}function rW(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function XS(t){const e=Ws(v2),n=Ws(Sk),i=dr(()=>e.resolve(_t(t.to))),r=dr(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(fu.bind(null,u));if(f>-1)return f;const d=ZS(l[c-2]);return c>1&&ZS(u)===d&&h[h.length-1].path!==d?h.findIndex(fu.bind(null,l[c-2])):f}),s=dr(()=>r.value>-1&&lW(n.params,i.value.params)),o=dr(()=>r.value>-1&&r.value===n.matched.length-1&&mk(n.params,i.value.params));function a(l={}){return aW(l)?e[_t(t.replace)?"replace":"push"](_t(t.to)).catch(bf):Promise.resolve()}return{route:i,href:dr(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const sW=xt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:XS,setup(t,{slots:e}){const n=J0(XS(t)),{options:i}=Ws(v2),r=dr(()=>({[KS(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[KS(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:$s("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),oW=sW;function aW(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function lW(t,e){for(const n in e){const i=e[n],r=t[n];if(typeof i=="string"){if(i!==r)return!1}else if(!wr(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function ZS(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const KS=(t,e,n)=>t??e??n,cW=xt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Ws(sb),r=dr(()=>t.route||i.value),s=Ws(qS,0),o=dr(()=>{let c=_t(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=dr(()=>r.value.matched[o.value]);Hm(qS,dr(()=>o.value+1)),Hm(iW,a),Hm(sb,r);const l=O3();return Wm(()=>[l.value,a.value,t.name],([c,u,h],[f,d,g])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!fu(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return JS(n.default,{Component:f,route:c});const d=h.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,_=$s(f,lt({},g,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return JS(n.default,{Component:_,route:c})||_}}});function JS(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Ck=cW;function uW(t){const e=Pz(t.routes,t),n=t.parseQuery||tW,i=t.stringifyQuery||jS,r=t.history,s=Ih(),o=Ih(),a=Ih(),l=Jt(wo);let c=wo;Mc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Jy.bind(null,z=>""+z),h=Jy.bind(null,eW),f=Jy.bind(null,dp);function d(z,U){let P,Y;return _k(z)?(P=e.getRecordMatcher(z),Y=U):Y=z,e.addRoute(Y,P)}function g(z){const U=e.getRecordMatcher(z);U&&e.removeRoute(U)}function m(){return e.getRoutes().map(z=>z.record)}function _(z){return!!e.getRecordMatcher(z)}function y(z,U){if(U=lt({},U||l.value),typeof z=="string"){const F=Qy(n,z,U.path),B=e.resolve({path:F.path},U),V=r.createHref(F.fullPath);return lt(F,B,{params:f(B.params),hash:dp(F.hash),redirectedFrom:void 0,href:V})}let P;if("path"in z)P=lt({},z,{path:Qy(n,z.path,U.path).path});else{const F=lt({},z.params);for(const B in F)F[B]==null&&delete F[B];P=lt({},z,{params:h(F)}),U.params=h(U.params)}const Y=e.resolve(P,U),te=z.hash||"";Y.params=u(f(Y.params));const A=dz(i,lt({},z,{hash:Kz(te),path:Y.path})),$=r.createHref(A);return lt({fullPath:A,hash:te,query:i===jS?nW(z.query):z.query||{}},Y,{redirectedFrom:void 0,href:$})}function p(z){return typeof z=="string"?Qy(n,z,l.value.path):lt({},z)}function b(z,U){if(c!==z)return du(8,{from:U,to:z})}function v(z){return T(z)}function E(z){return v(lt(p(z),{replace:!0}))}function w(z){const U=z.matched[z.matched.length-1];if(U&&U.redirect){const{redirect:P}=U;let Y=typeof P=="function"?P(z):P;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=p(Y):{path:Y},Y.params={}),lt({query:z.query,hash:z.hash,params:"path"in Y?{}:z.params},Y)}}function T(z,U){const P=c=y(z),Y=l.value,te=z.state,A=z.force,$=z.replace===!0,F=w(P);if(F)return T(lt(p(F),{state:typeof F=="object"?lt({},te,F.state):te,force:A,replace:$}),U||P);const B=P;B.redirectedFrom=U;let V;return!A&&gz(i,Y,P)&&(V=du(16,{to:B,from:Y}),J(Y,Y,!0,!1)),(V?Promise.resolve(V):S(B,Y)).catch(Z=>_s(Z)?_s(Z,2)?Z:G(Z):H(Z,B,Y)).then(Z=>{if(Z){if(_s(Z,2))return T(lt({replace:$},p(Z.to),{state:typeof Z.to=="object"?lt({},te,Z.to.state):te,force:A}),U||B)}else Z=I(B,Y,!0,$,te);return R(B,Y,Z),Z})}function C(z,U){const P=b(z,U);return P?Promise.reject(P):Promise.resolve()}function M(z){const U=se.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(z):z()}function S(z,U){let P;const[Y,te,A]=hW(z,U);P=e1(Y.reverse(),"beforeRouteLeave",z,U);for(const F of Y)F.leaveGuards.forEach(B=>{P.push(Do(B,z,U))});const $=C.bind(null,z,U);return P.push($),ce(P).then(()=>{P=[];for(const F of s.list())P.push(Do(F,z,U));return P.push($),ce(P)}).then(()=>{P=e1(te,"beforeRouteUpdate",z,U);for(const F of te)F.updateGuards.forEach(B=>{P.push(Do(B,z,U))});return P.push($),ce(P)}).then(()=>{P=[];for(const F of A)if(F.beforeEnter)if(wr(F.beforeEnter))for(const B of F.beforeEnter)P.push(Do(B,z,U));else P.push(Do(F.beforeEnter,z,U));return P.push($),ce(P)}).then(()=>(z.matched.forEach(F=>F.enterCallbacks={}),P=e1(A,"beforeRouteEnter",z,U),P.push($),ce(P))).then(()=>{P=[];for(const F of o.list())P.push(Do(F,z,U));return P.push($),ce(P)}).catch(F=>_s(F,8)?F:Promise.reject(F))}function R(z,U,P){a.list().forEach(Y=>M(()=>Y(z,U,P)))}function I(z,U,P,Y,te){const A=b(z,U);if(A)return A;const $=U===wo,F=Mc?history.state:{};P&&(Y||$?r.replace(z.fullPath,lt({scroll:$&&F&&F.scroll},te)):r.push(z.fullPath,te)),l.value=z,J(z,U,P,$),G()}let N;function O(){N||(N=r.listen((z,U,P)=>{if(!le.listening)return;const Y=y(z),te=w(Y);if(te){T(lt(te,{replace:!0}),Y).catch(bf);return}c=Y;const A=l.value;Mc&&xz(zS(A.fullPath,P.delta),a_()),S(Y,A).catch($=>_s($,12)?$:_s($,2)?(T($.to,Y).then(F=>{_s(F,20)&&!P.delta&&P.type===Hf.pop&&r.go(-1,!1)}).catch(bf),Promise.reject()):(P.delta&&r.go(-P.delta,!1),H($,Y,A))).then($=>{$=$||I(Y,A,!1),$&&(P.delta&&!_s($,8)?r.go(-P.delta,!1):P.type===Hf.pop&&_s($,20)&&r.go(-1,!1)),R(Y,A,$)}).catch(bf)}))}let k=Ih(),L=Ih(),D;function H(z,U,P){G(z);const Y=L.list();return Y.length?Y.forEach(te=>te(z,U,P)):console.error(z),Promise.reject(z)}function q(){return D&&l.value!==wo?Promise.resolve():new Promise((z,U)=>{k.add([z,U])})}function G(z){return D||(D=!z,O(),k.list().forEach(([U,P])=>z?P(z):U()),k.reset()),z}function J(z,U,P,Y){const{scrollBehavior:te}=t;if(!Mc||!te)return Promise.resolve();const A=!P&&Ez(zS(z.fullPath,0))||(Y||!P)&&history.state&&history.state.scroll||null;return F3().then(()=>te(z,U,A)).then($=>$&&wz($)).catch($=>H($,z,U))}const W=z=>r.go(z);let ie;const se=new Set,le={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:m,resolve:y,options:t,push:v,replace:E,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:L.add,isReady:q,install(z){const U=this;z.component("RouterLink",oW),z.component("RouterView",Ck),z.config.globalProperties.$router=U,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>_t(l)}),Mc&&!ie&&l.value===wo&&(ie=!0,v(r.location).catch(te=>{}));const P={};for(const te in wo)Object.defineProperty(P,te,{get:()=>l.value[te],enumerable:!0});z.provide(v2,U),z.provide(Sk,A3(P)),z.provide(sb,l);const Y=z.unmount;se.add(z),z.unmount=function(){se.delete(z),se.size<1&&(c=wo,N&&N(),N=null,l.value=wo,ie=!1,D=!1),Y()}}};function ce(z){return z.reduce((U,P)=>U.then(()=>M(P)),Promise.resolve())}return le}function hW(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>fu(c,a))?i.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>fu(c,l))||r.push(l))}return[n,i,r]}const fW=xt({__name:"App",setup(t){return(e,n)=>(j(),ml(_t(Ck)))}}),dW="modulepreload",gW=function(t){return"/"+t},QS={},eC=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=gW(s),s in QS)return;QS[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":dW,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Mk="Generic";class Ke{constructor(e){ee(this,"timestamp",null);ee(this,"positionLat",null);ee(this,"positionLong",null);ee(this,"distance",null);ee(this,"speed",null);ee(this,"altitude",null);ee(this,"cadence",null);ee(this,"heartRate",null);ee(this,"power",null);ee(this,"temperature",null);ee(this,"grade",0);ee(this,"pace",null);const n=e;this.positionLat=n==null?void 0:n.positionLat,this.positionLong=n==null?void 0:n.positionLong,this.altitude=n==null?void 0:n.altitude,this.cadence=n==null?void 0:n.cadence,this.distance=n==null?void 0:n.distance,this.heartRate=n==null?void 0:n.heartRate,this.speed=n==null?void 0:n.speed,this.timestamp=n==null?void 0:n.timestamp,this.power=n==null?void 0:n.power,this.temperature=n==null?void 0:n.temperature,this.grade=n==null?void 0:n.grade,this.pace=n==null?void 0:n.pace}}function gu(t){const e=Math.floor(t/60),n=t%60;return`${e}:${n<10?"0":""}${n.toFixed(0)}`}function Rt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rl(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function l_(t){let e,n,i;t.length!==2?(e=Rt,n=(a,l)=>Rt(t(a),l),i=(a,l)=>t(a)-l):(e=t===Rt||t===Rl?t:mW,n=t,i=t);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=r(a,l,c,u-1);return h>c&&i(a[h-1],l)>-i(a[h],l)?h-1:h}return{left:r,center:o,right:s}}function mW(){return 0}function Ak(t){return t===null?NaN:+t}function*pW(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const _W=l_(Rt),yW=_W.right;l_(Ak).center;const c_=yW,Rk=Ik(kk),vW=Ik(bW);function Ik(t){return function(e,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return e;const a=n&&t(n),l=i&&t(i),c=r.slice();return a&&l?(ac(a,c,r,s,o),ac(a,r,c,s,o),ac(a,c,r,s,o),lc(l,r,c,s,o),lc(l,c,r,s,o),lc(l,r,c,s,o)):a?(ac(a,r,c,s,o),ac(a,c,r,s,o),ac(a,r,c,s,o)):l&&(lc(l,r,c,s,o),lc(l,c,r,s,o),lc(l,r,c,s,o)),e}}function ac(t,e,n,i,r){for(let s=0,o=i*r;s<o;)t(e,n,s,s+=i,1)}function lc(t,e,n,i,r){for(let s=0,o=i*r;s<i;++s)t(e,n,s,s+o,i)}function bW(t){const e=kk(t);return(n,i,r,s,o)=>{r<<=2,s<<=2,o<<=2,e(n,i,r+0,s+0,o),e(n,i,r+1,s+1,o),e(n,i,r+2,s+2,o),e(n,i,r+3,s+3,o)}}function kk(t){const e=Math.floor(t);if(e===t)return wW(t);const n=t-e,i=2*t+1;return(r,s,o,a,l)=>{if(!((a-=l)>=o))return;let c=e*s[o];const u=l*e,h=u+l;for(let f=o,d=o+u;f<d;f+=l)c+=s[Math.min(a,f)];for(let f=o,d=a;f<=d;f+=l)c+=s[Math.min(a,f+u)],r[f]=(c+n*(s[Math.max(o,f-h)]+s[Math.min(a,f+h)]))/i,c-=s[Math.max(o,f-u)]}}function wW(t){const e=2*t+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=t*i[r];const l=o*t;for(let c=r,u=r+l;c<u;c+=o)a+=i[Math.min(s,c)];for(let c=r,u=s;c<=u;c+=o)a+=i[Math.min(s,c+l)],n[c]=a/e,a-=i[Math.max(r,c-l)]}}function u_(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function xW(t){return t.length|0}function EW(t){return!(t>0)}function TW(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function SW(t){return e=>t(...e)}function CW(...t){const e=typeof t[t.length-1]=="function"&&SW(t.pop());t=t.map(TW);const n=t.map(xW),i=t.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(EW))return s;for(;;){s.push(r.map((a,l)=>t[l][a]));let o=i;for(;++r[o]===n[o];){if(o===0)return e?s.map(e):s;r[o--]=0}}}function MW(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function b2(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function Ad(t,e){const n=b2(t,e);return n&&Math.sqrt(n)}function St(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(n===void 0?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class Zr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[i++]=a),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class Il extends Map{constructor(e,n=Lk){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(ob(this,e))}has(e){return super.has(ob(this,e))}set(e,n){return super.set($k(this,e),n)}delete(e){return super.delete(Ok(this,e))}}class Rd extends Set{constructor(e,n=Lk){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(ob(this,e))}add(e){return super.add($k(this,e))}delete(e){return super.delete(Ok(this,e))}}function ob({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function $k({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Ok({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Lk(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ab(t){return t}function ao(t,...e){return w2(t,ab,ab,e)}function Zc(t,e,...n){return w2(t,ab,e,n)}function AW(t,e,...n){return w2(t,Array.from,e,n)}function w2(t,e,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new Il,l=i[o++];let c=-1;for(const u of s){const h=l(u,++c,s),f=a.get(h);f?f.push(u):a.set(h,[u])}for(const[u,h]of a)a.set(u,r(h,o));return e(a)}(t,0)}function RW(t,e){return Array.from(e,n=>t[n])}function Bf(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,s)=>s);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,s)=>{for(const o of e){const a=Vf(o[r],o[s]);if(a)return a}})):(n=t.map(n),i.sort((r,s)=>Vf(n[r],n[s]))),RW(t,i)}return t.sort(x2(n))}function x2(t=Rt){if(t===Rt)return Vf;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Vf(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function E2(t,e,n){return(e.length!==2?Bf(Zc(t,e,n),([i,r],[s,o])=>Rt(r,o)||Rt(i,s)):Bf(ao(t,n),([i,r],[s,o])=>e(r,o)||Rt(i,s))).map(([i])=>i)}const IW=Math.sqrt(50),kW=Math.sqrt(10),$W=Math.sqrt(2);function gp(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=IW?10:s>=kW?5:s>=$W?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?gp(t,e,n*2):[a,l,c]}function sa(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,o]=i?gp(e,t,n):gp(t,e,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function Gf(t,e,n){return e=+e,t=+t,n=+n,gp(t,e,n)[2]}function lb(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Gf(e,t,n):Gf(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Nk(t,e,n){let i;for(;;){const r=Gf(t,e,n);if(r===i||r===0||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function T2(t){return Math.max(1,Math.ceil(Math.log(u_(t))/Math.LN2)+1)}function Kt(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function OW(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,i=r);return i}function fn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function LW(t,e){let n,i=-1,r=-1;if(e===void 0)for(const s of t)++r,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);else for(let s of t)(s=e(s,++r,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,i=r);return i}function Dk(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Vf:x2(r);i>n;){if(i-n>600){const l=i-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*h/l+f)),g=Math.min(i,Math.floor(e+(l-c)*h/l+f));Dk(t,e,d,g,r)}const s=t[e];let o=n,a=i;for(kh(t,n,e),r(t[i],s)>0&&kh(t,n,i);o<a;){for(kh(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}r(t[n],s)===0?kh(t,n,a):(++a,kh(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function kh(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function S2(t,e=Rt){let n,i=!1;if(e.length===1){let r;for(const s of t){const o=e(s);(i?Rt(o,r)>0:Rt(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function oa(t,e,n){if(t=Float64Array.from(pW(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return fn(t);if(e>=1)return Kt(t);var i,r=(i-1)*e,s=Math.floor(r),o=Kt(Dk(t,s).subarray(0,s+1)),a=fn(t.subarray(s+1));return o+(a-o)*(r-s)}}function NW(t,e,n=Ak){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(r-s)}}function DW(t,e,n){const i=u_(t),r=oa(t,.75)-oa(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function Fk(t,e,n){const i=u_(t),r=Ad(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function h_(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Uf(t,e){return oa(t,.5,e)}function*FW(t){for(const e of t)yield*e}function Pk(t){return Array.from(FW(t))}function zk(t,e){const n=new Il;if(e===void 0)for(let s of t)s!=null&&s>=s&&n.set(s,(n.get(s)||0)+1);else{let s=-1;for(let o of t)(o=e(o,++s,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let i,r=0;for(const[s,o]of n)o>r&&(r=o,i=s);return i}function PW(t,e=zW){const n=[];let i,r=!1;for(const s of t)r&&n.push(e(i,s)),i=s,r=!0;return n}function zW(t,e){return[t,e]}function Fi(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Wk(t,e=Rt){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Rt);const r=(a,l)=>e(n[a],n[l]);let s,o;return t=Uint32Array.from(n,(a,l)=>l),t.sort(e===Rt?(a,l)=>Vf(n[a],n[l]):x2(r)),t.forEach((a,l)=>{const c=r(a,s===void 0?a:s);c>=0?((s===void 0||c>0)&&(s=a,o=l),i[a]=o):i[a]=NaN}),i}function WW(t,e=Rt){let n,i=!1;if(e.length===1){let r;for(const s of t){const o=e(s);(i?Rt(o,r)<0:Rt(o,o)===0)&&(n=s,r=o,i=!0)}}else for(const r of t)(i?e(r,n)<0:e(r,r)===0)&&(n=r,i=!0);return n}function ss(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function mp(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function HW(t){return t}var t1=1,n1=2,cb=3,nf=4,tC=1e-6;function BW(t){return"translate("+t+",0)"}function VW(t){return"translate(0,"+t+")"}function GW(t){return e=>+t(e)}function UW(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function YW(){return!this.__axis}function Hk(t,e){var n=[],i=null,r=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===t1||t===nf?-1:1,u=t===nf||t===n1?"x":"y",h=t===t1||t===cb?BW:VW;function f(d){var g=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):HW),_=Math.max(s,0)+a,y=e.range(),p=+y[0]+l,b=+y[y.length-1]+l,v=(e.bandwidth?UW:GW)(e.copy(),l),E=d.selection?d.selection():d,w=E.selectAll(".domain").data([null]),T=E.selectAll(".tick").data(g,e).order(),C=T.exit(),M=T.enter().append("g").attr("class","tick"),S=T.select("line"),R=T.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(M),S=S.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),R=R.merge(M.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy",t===t1?"0em":t===cb?"0.71em":"0.32em")),d!==E&&(w=w.transition(d),T=T.transition(d),S=S.transition(d),R=R.transition(d),C=C.transition(d).attr("opacity",tC).attr("transform",function(I){return isFinite(I=v(I))?h(I+l):this.getAttribute("transform")}),M.attr("opacity",tC).attr("transform",function(I){var N=this.parentNode.__axis;return h((N&&isFinite(N=N(I))?N:v(I))+l)})),C.remove(),w.attr("d",t===nf||t===n1?o?"M"+c*o+","+p+"H"+l+"V"+b+"H"+c*o:"M"+l+","+p+"V"+b:o?"M"+p+","+c*o+"V"+l+"H"+b+"V"+c*o:"M"+p+","+l+"H"+b),T.attr("opacity",1).attr("transform",function(I){return h(v(I)+l)}),S.attr(u+"2",c*s),R.attr(u,c*_).text(m),E.filter(YW).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===n1?"start":t===nf?"end":"middle"),E.each(function(){this.__axis=v})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),f):i&&i.slice()},f.tickFormat=function(d){return arguments.length?(r=d,f):r},f.tickSize=function(d){return arguments.length?(s=o=+d,f):s},f.tickSizeInner=function(d){return arguments.length?(s=+d,f):s},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function C2(t){return Hk(cb,t)}function Bk(t){return Hk(nf,t)}var jW={value:()=>{}};function Vk(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Gm(n)}function Gm(t){this._=t}function qW(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Gm.prototype=Vk.prototype={constructor:Gm,on:function(t,e){var n=this._,i=qW(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=XW(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=nC(n[r],t.name,e);else if(e==null)for(r in n)n[r]=nC(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Gm(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function XW(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function nC(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=jW,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var ub="http://www.w3.org/1999/xhtml";const kl={svg:"http://www.w3.org/2000/svg",xhtml:ub,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function f_(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),kl.hasOwnProperty(e)?{space:kl[e],local:t}:t}function ZW(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ub&&e.documentElement.namespaceURI===ub?e.createElement(t):e.createElementNS(n,t)}}function KW(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function d_(t){var e=f_(t);return(e.local?KW:ZW)(e)}function JW(){}function M2(t){return t==null?JW:function(){return this.querySelector(t)}}function QW(t){typeof t!="function"&&(t=M2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new wi(i,this._parents)}function eH(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function tH(){return[]}function Gk(t){return t==null?tH:function(){return this.querySelectorAll(t)}}function nH(t){return function(){return eH(t.apply(this,arguments))}}function iH(t){typeof t=="function"?t=nH(t):t=Gk(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),r.push(l));return new wi(i,r)}function Uk(t){return function(){return this.matches(t)}}function Yk(t){return function(e){return e.matches(t)}}var rH=Array.prototype.find;function sH(t){return function(){return rH.call(this.children,t)}}function oH(){return this.firstElementChild}function aH(t){return this.select(t==null?oH:sH(typeof t=="function"?t:Yk(t)))}var lH=Array.prototype.filter;function cH(){return Array.from(this.children)}function uH(t){return function(){return lH.call(this.children,t)}}function hH(t){return this.selectAll(t==null?cH:uH(typeof t=="function"?t:Yk(t)))}function fH(t){typeof t!="function"&&(t=Uk(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new wi(i,this._parents)}function jk(t){return new Array(t.length)}function dH(){return new wi(this._enter||this._groups.map(jk),this._parents)}function pp(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}pp.prototype={constructor:pp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gH(t){return function(){return t}}function mH(t,e,n,i,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new pp(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function pH(t,e,n,i,r,s,o){var a,l,c=new Map,u=e.length,h=s.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=o.call(l,l.__data__,a,e)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<h;++a)d=o.call(t,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new pp(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function _H(t){return t.__data__}function yH(t,e){if(!arguments.length)return Array.from(this,_H);var n=e?pH:mH,i=this._parents,r=this._groups;typeof t!="function"&&(t=gH(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],h=r[c],f=h.length,d=vH(t.call(u,u&&u.__data__,c,i)),g=d.length,m=a[c]=new Array(g),_=o[c]=new Array(g),y=l[c]=new Array(f);n(u,h,m,_,y,d,e);for(var p=0,b=0,v,E;p<g;++p)if(v=m[p]){for(p>=b&&(b=p+1);!(E=_[b])&&++b<g;);v._next=E||null}}return o=new wi(o,i),o._enter=a,o._exit=l,o}function vH(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bH(){return new wi(this._exit||this._groups.map(jk),this._parents)}function wH(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function xH(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],u=i[l],h=c.length,f=a[l]=new Array(h),d,g=0;g<h;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<r;++l)a[l]=n[l];return new wi(a,this._parents)}function EH(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function TH(t){t||(t=SH);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new wi(r,this._parents).order()}function SH(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function CH(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function MH(){return Array.from(this)}function AH(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function RH(){let t=0;for(const e of this)++t;return t}function IH(){return!this.node()}function kH(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function $H(t){return function(){this.removeAttribute(t)}}function OH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function LH(t,e){return function(){this.setAttribute(t,e)}}function NH(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function DH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function FH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function PH(t,e){var n=f_(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?OH:$H:typeof e=="function"?n.local?FH:DH:n.local?NH:LH)(n,e))}function qk(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zH(t){return function(){this.style.removeProperty(t)}}function WH(t,e,n){return function(){this.style.setProperty(t,e,n)}}function HH(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function BH(t,e,n){return arguments.length>1?this.each((e==null?zH:typeof e=="function"?HH:WH)(t,e,n??"")):mu(this.node(),t)}function mu(t,e){return t.style.getPropertyValue(e)||qk(t).getComputedStyle(t,null).getPropertyValue(e)}function VH(t){return function(){delete this[t]}}function GH(t,e){return function(){this[t]=e}}function UH(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function YH(t,e){return arguments.length>1?this.each((e==null?VH:typeof e=="function"?UH:GH)(t,e)):this.node()[t]}function Xk(t){return t.trim().split(/^|\s+/)}function A2(t){return t.classList||new Zk(t)}function Zk(t){this._node=t,this._names=Xk(t.getAttribute("class")||"")}Zk.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Kk(t,e){for(var n=A2(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Jk(t,e){for(var n=A2(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function jH(t){return function(){Kk(this,t)}}function qH(t){return function(){Jk(this,t)}}function XH(t,e){return function(){(e.apply(this,arguments)?Kk:Jk)(this,t)}}function ZH(t,e){var n=Xk(t+"");if(arguments.length<2){for(var i=A2(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?XH:e?jH:qH)(n,e))}function KH(){this.textContent=""}function JH(t){return function(){this.textContent=t}}function QH(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function eB(t){return arguments.length?this.each(t==null?KH:(typeof t=="function"?QH:JH)(t)):this.node().textContent}function tB(){this.innerHTML=""}function nB(t){return function(){this.innerHTML=t}}function iB(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rB(t){return arguments.length?this.each(t==null?tB:(typeof t=="function"?iB:nB)(t)):this.node().innerHTML}function sB(){this.nextSibling&&this.parentNode.appendChild(this)}function oB(){return this.each(sB)}function aB(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lB(){return this.each(aB)}function cB(t){var e=typeof t=="function"?t:d_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function uB(){return null}function hB(t,e){var n=typeof t=="function"?t:d_(t),i=e==null?uB:typeof e=="function"?e:M2(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function fB(){var t=this.parentNode;t&&t.removeChild(this)}function dB(){return this.each(fB)}function gB(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mB(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pB(t){return this.select(t?mB:gB)}function _B(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yB(t){return function(e){t.call(this,e,this.__data__)}}function vB(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function bB(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function wB(t,e,n){return function(){var i=this.__on,r,s=yB(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function xB(t,e,n){var i=vB(t+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?wB:bB,r=0;r<s;++r)this.each(a(i[r],e,n));return this}function Qk(t,e,n){var i=qk(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function EB(t,e){return function(){return Qk(this,t,e)}}function TB(t,e){return function(){return Qk(this,t,e.apply(this,arguments))}}function SB(t,e){return this.each((typeof e=="function"?TB:EB)(t,e))}function*CB(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var e$=[null];function wi(t,e){this._groups=t,this._parents=e}function Id(){return new wi([[document.documentElement]],e$)}function MB(){return this}wi.prototype=Id.prototype={constructor:wi,select:QW,selectAll:iH,selectChild:aH,selectChildren:hH,filter:fH,data:yH,enter:dH,exit:bH,join:wH,merge:xH,selection:MB,order:EH,sort:TH,call:CH,nodes:MH,node:AH,size:RH,empty:IH,each:kH,attr:PH,style:BH,property:YH,classed:ZH,text:eB,html:rB,raise:oB,lower:lB,append:cB,insert:hB,remove:dB,clone:pB,datum:_B,on:xB,dispatch:SB,[Symbol.iterator]:CB};function ai(t){return typeof t=="string"?new wi([[document.querySelector(t)]],[document.documentElement]):new wi([[t]],e$)}function AB(t){let e;for(;e=t.sourceEvent;)t=e;return t}function R2(t,e){if(t=AB(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ju(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kd(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ba(){}var $l=.7,pu=1/$l,Kc="\\s*([+-]?\\d+)\\s*",Yf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RB=/^#([0-9a-f]{3,8})$/,IB=new RegExp(`^rgb\\(${Kc},${Kc},${Kc}\\)$`),kB=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),$B=new RegExp(`^rgba\\(${Kc},${Kc},${Kc},${Yf}\\)$`),OB=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${Yf}\\)$`),LB=new RegExp(`^hsl\\(${Yf},${Kr},${Kr}\\)$`),NB=new RegExp(`^hsla\\(${Yf},${Kr},${Kr},${Yf}\\)$`),iC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ju(ba,Ol,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rC,formatHex:rC,formatHex8:DB,formatHsl:FB,formatRgb:sC,toString:sC});function rC(){return this.rgb().formatHex()}function DB(){return this.rgb().formatHex8()}function FB(){return t$(this).formatHsl()}function sC(){return this.rgb().formatRgb()}function Ol(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RB.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oC(e):n===3?new hn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ng(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ng(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=IB.exec(t))?new hn(e[1],e[2],e[3],1):(e=kB.exec(t))?new hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$B.exec(t))?Ng(e[1],e[2],e[3],e[4]):(e=OB.exec(t))?Ng(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LB.exec(t))?cC(e[1],e[2]/100,e[3]/100,1):(e=NB.exec(t))?cC(e[1],e[2]/100,e[3]/100,e[4]):iC.hasOwnProperty(t)?oC(iC[t]):t==="transparent"?new hn(NaN,NaN,NaN,0):null}function oC(t){return new hn(t>>16&255,t>>8&255,t&255,1)}function Ng(t,e,n,i){return i<=0&&(t=e=n=NaN),new hn(t,e,n,i)}function I2(t){return t instanceof ba||(t=Ol(t)),t?(t=t.rgb(),new hn(t.r,t.g,t.b,t.opacity)):new hn}function os(t,e,n,i){return arguments.length===1?I2(t):new hn(t,e,n,i??1)}function hn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ju(hn,os,kd(ba,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$l:Math.pow($l,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hn(_l(this.r),_l(this.g),_l(this.b),_p(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aC,formatHex:aC,formatHex8:PB,formatRgb:lC,toString:lC}));function aC(){return`#${el(this.r)}${el(this.g)}${el(this.b)}`}function PB(){return`#${el(this.r)}${el(this.g)}${el(this.b)}${el((isNaN(this.opacity)?1:this.opacity)*255)}`}function lC(){const t=_p(this.opacity);return`${t===1?"rgb(":"rgba("}${_l(this.r)}, ${_l(this.g)}, ${_l(this.b)}${t===1?")":`, ${t})`}`}function _p(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _l(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function el(t){return t=_l(t),(t<16?"0":"")+t.toString(16)}function cC(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gr(t,e,n,i)}function t$(t){if(t instanceof gr)return new gr(t.h,t.s,t.l,t.opacity);if(t instanceof ba||(t=Ol(t)),!t)return new gr;if(t instanceof gr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new gr(o,a,l,t.opacity)}function hb(t,e,n,i){return arguments.length===1?t$(t):new gr(t,e,n,i??1)}function gr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ju(gr,hb,kd(ba,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new gr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$l:Math.pow($l,t),new gr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new hn(i1(t>=240?t-240:t+120,r,i),i1(t,r,i),i1(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new gr(uC(this.h),Dg(this.s),Dg(this.l),_p(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_p(this.opacity);return`${t===1?"hsl(":"hsla("}${uC(this.h)}, ${Dg(this.s)*100}%, ${Dg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uC(t){return t=(t||0)%360,t<0?t+360:t}function Dg(t){return Math.max(0,Math.min(1,t||0))}function i1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const n$=Math.PI/180,i$=180/Math.PI,yp=18,r$=.96422,s$=1,o$=.82521,a$=4/29,Jc=6/29,l$=3*Jc*Jc,zB=Jc*Jc*Jc;function c$(t){if(t instanceof Jr)return new Jr(t.l,t.a,t.b,t.opacity);if(t instanceof Os)return u$(t);t instanceof hn||(t=I2(t));var e=a1(t.r),n=a1(t.g),i=a1(t.b),r=r1((.2225045*e+.7168786*n+.0606169*i)/s$),s,o;return e===n&&n===i?s=o=r:(s=r1((.4360747*e+.3850649*n+.1430804*i)/r$),o=r1((.0139322*e+.0971045*n+.7141733*i)/o$)),new Jr(116*r-16,500*(s-r),200*(r-o),t.opacity)}function fb(t,e,n,i){return arguments.length===1?c$(t):new Jr(t,e,n,i??1)}function Jr(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Ju(Jr,fb,kd(ba,{brighter(t){return new Jr(this.l+yp*(t??1),this.a,this.b,this.opacity)},darker(t){return new Jr(this.l-yp*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=r$*s1(e),t=s$*s1(t),n=o$*s1(n),new hn(o1(3.1338561*e-1.6168667*t-.4906146*n),o1(-.9787684*e+1.9161415*t+.033454*n),o1(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function r1(t){return t>zB?Math.pow(t,1/3):t/l$+a$}function s1(t){return t>Jc?t*t*t:l$*(t-a$)}function o1(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a1(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function WB(t){if(t instanceof Os)return new Os(t.h,t.c,t.l,t.opacity);if(t instanceof Jr||(t=c$(t)),t.a===0&&t.b===0)return new Os(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*i$;return new Os(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function db(t,e,n,i){return arguments.length===1?WB(t):new Os(t,e,n,i??1)}function Os(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function u$(t){if(isNaN(t.h))return new Jr(t.l,0,0,t.opacity);var e=t.h*n$;return new Jr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ju(Os,db,kd(ba,{brighter(t){return new Os(this.h,this.c,this.l+yp*(t??1),this.opacity)},darker(t){return new Os(this.h,this.c,this.l-yp*(t??1),this.opacity)},rgb(){return u$(this).rgb()}}));var h$=-.14861,k2=1.78277,$2=-.29227,g_=-.90649,jf=1.97294,hC=jf*g_,fC=jf*k2,dC=k2*$2-g_*h$;function HB(t){if(t instanceof yl)return new yl(t.h,t.s,t.l,t.opacity);t instanceof hn||(t=I2(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(dC*i+hC*e-fC*n)/(dC+hC-fC),s=i-r,o=(jf*(n-r)-$2*s)/g_,a=Math.sqrt(o*o+s*s)/(jf*r*(1-r)),l=a?Math.atan2(o,s)*i$-120:NaN;return new yl(l<0?l+360:l,a,r,t.opacity)}function as(t,e,n,i){return arguments.length===1?HB(t):new yl(t,e,n,i??1)}function yl(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ju(yl,as,kd(ba,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new yl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$l:Math.pow($l,t),new yl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*n$,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new hn(255*(e+n*(h$*i+k2*r)),255*(e+n*($2*i+g_*r)),255*(e+n*(jf*i)),this.opacity)}}));function BB(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function VB(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return BB((n-i/e)*e,o,r,s,a)}}const m_=t=>()=>t;function f$(t,e){return function(n){return t+n*e}}function GB(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function O2(t,e){var n=e-t;return n?f$(t,n>180||n<-180?n-360*Math.round(n/360):n):m_(isNaN(t)?e:t)}function UB(t){return(t=+t)==1?An:function(e,n){return n-e?GB(e,n,t):m_(isNaN(e)?n:e)}}function An(t,e){var n=e-t;return n?f$(t,n):m_(isNaN(t)?e:t)}const Ll=function t(e){var n=UB(e);function i(r,s){var o=n((r=os(r)).r,(s=os(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=An(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function YB(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=os(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=t(i),r=t(r),s=t(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var d$=YB(VB);function jB(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function qB(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XB(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=Qu(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function ZB(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function xn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KB(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Qu(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var gb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l1=new RegExp(gb.source,"g");function JB(t){return function(){return t}}function QB(t){return function(e){return t(e)+""}}function g$(t,e){var n=gb.lastIndex=l1.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=gb.exec(t))&&(r=l1.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:xn(i,r)})),n=l1.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?QB(l[0].x):JB(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function Qu(t,e){var n=typeof e,i;return e==null||n==="boolean"?m_(e):(n==="number"?xn:n==="string"?(i=Ol(e))?(e=i,Ll):g$:e instanceof Ol?Ll:e instanceof Date?ZB:qB(e)?jB:Array.isArray(e)?XB:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KB:xn)(t,e)}function p_(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var gC=180/Math.PI,mb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m$(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*gC,skewX:Math.atan(l)*gC,scaleX:o,scaleY:a}}var Fg;function eV(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?mb:m$(e.a,e.b,e.c,e.d,e.e,e.f)}function tV(t){return t==null||(Fg||(Fg=document.createElementNS("http://www.w3.org/2000/svg","g")),Fg.setAttribute("transform",t),!(t=Fg.transform.baseVal.consolidate()))?mb:(t=t.matrix,m$(t.a,t.b,t.c,t.d,t.e,t.f))}function p$(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push("translate(",null,e,null,n);g.push({i:m-4,x:xn(c,h)},{i:m-2,x:xn(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:xn(c,u)})):u&&h.push(r(h)+"rotate("+u+i)}function a(c,u,h,f){c!==u?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:xn(c,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(c,u,h,f,d,g){if(c!==h||u!==f){var m=d.push(r(d)+"scale(",null,",",null,")");g.push({i:m-4,x:xn(c,h)},{i:m-2,x:xn(u,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var g=-1,m=f.length,_;++g<m;)h[(_=f[g]).i]=_.x(d);return h.join("")}}}var nV=p$(eV,"px, ","px)","deg)"),iV=p$(tV,", ",")",")");function rV(t){return function(e,n){var i=t((e=hb(e)).h,(n=hb(n)).h),r=An(e.s,n.s),s=An(e.l,n.l),o=An(e.opacity,n.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const sV=rV(O2);function oV(t,e){var n=An((t=fb(t)).l,(e=fb(e)).l),i=An(t.a,e.a),r=An(t.b,e.b),s=An(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=i(o),t.b=r(o),t.opacity=s(o),t+""}}function aV(t){return function(e,n){var i=t((e=db(e)).h,(n=db(n)).h),r=An(e.c,n.c),s=An(e.l,n.l),o=An(e.opacity,n.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const lV=aV(O2);function _$(t){return function e(n){n=+n;function i(r,s){var o=t((r=as(r)).h,(s=as(s)).h),a=An(r.s,s.s),l=An(r.l,s.l),c=An(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,n)),r.opacity=c(u),r+""}}return i.gamma=e,i}(1)}_$(O2);var L2=_$(An);function __(t,e){e===void 0&&(e=t,t=Qu);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function xr(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var _u=0,rf=0,$h=0,y$=1e3,vp,sf,bp=0,Nl=0,y_=0,qf=typeof performance=="object"&&performance.now?performance:Date,v$=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function N2(){return Nl||(v$(cV),Nl=qf.now()+y_)}function cV(){Nl=0}function wp(){this._call=this._time=this._next=null}wp.prototype=b$.prototype={constructor:wp,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?N2():+n)+(e==null?0:+e),!this._next&&sf!==this&&(sf?sf._next=this:vp=this,sf=this),this._call=t,this._time=n,pb()},stop:function(){this._call&&(this._call=null,this._time=1/0,pb())}};function b$(t,e,n){var i=new wp;return i.restart(t,e,n),i}function uV(){N2(),++_u;for(var t=vp,e;t;)(e=Nl-t._time)>=0&&t._call.call(void 0,e),t=t._next;--_u}function mC(){Nl=(bp=qf.now())+y_,_u=rf=0;try{uV()}finally{_u=0,fV(),Nl=0}}function hV(){var t=qf.now(),e=t-bp;e>y$&&(y_-=e,bp=t)}function fV(){for(var t,e=vp,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:vp=n);sf=t,pb(i)}function pb(t){if(!_u){rf&&(rf=clearTimeout(rf));var e=t-Nl;e>24?(t<1/0&&(rf=setTimeout(mC,t-qf.now()-y_)),$h&&($h=clearInterval($h))):($h||(bp=qf.now(),$h=setInterval(hV,y$)),_u=1,v$(mC))}}function pC(t,e,n){var i=new wp;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var dV=Vk("start","end","cancel","interrupt"),gV=[],w$=0,_C=1,_b=2,Um=3,yC=4,yb=5,Ym=6;function v_(t,e,n,i,r,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;mV(t,n,{name:e,index:i,group:r,on:dV,tween:gV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:w$})}function D2(t,e){var n=Ar(t,e);if(n.state>w$)throw new Error("too late; already scheduled");return n}function cs(t,e){var n=Ar(t,e);if(n.state>Um)throw new Error("too late; already running");return n}function Ar(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function mV(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=b$(s,0,n.time);function s(c){n.state=_C,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==_C)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Um)return pC(o);d.state===yC?(d.state=Ym,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Ym,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(pC(function(){n.state===Um&&(n.state=yC,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=_b,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_b){for(n.state=Um,r=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=yb,1),h=-1,f=r.length;++h<f;)r[h].call(t,u);n.state===yb&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ym,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function pV(t,e){var n=t.__transition,i,r,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){s=!1;continue}r=i.state>_b&&i.state<yb,i.state=Ym,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}s&&delete t.__transition}}function _V(t){return this.each(function(){pV(this,t)})}function yV(t,e){var n,i;return function(){var r=cs(this,t),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function vV(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=cs(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function bV(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Ar(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?yV:vV)(n,t,e))}function F2(t,e,n){var i=t._id;return t.each(function(){var r=cs(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ar(r,i).value[e]}}function x$(t,e){var n;return(typeof e=="number"?xn:e instanceof Ol?Ll:(n=Ol(e))?(e=n,Ll):g$)(t,e)}function wV(t){return function(){this.removeAttribute(t)}}function xV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function EV(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttribute(t);return o===r?null:o===i?s:s=e(i=o,n)}}function TV(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?s:s=e(i=o,n)}}function SV(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function CV(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function MV(t,e){var n=f_(t),i=n==="transform"?iV:x$;return this.attrTween(t,typeof e=="function"?(n.local?CV:SV)(n,i,F2(this,"attr."+t,e)):e==null?(n.local?xV:wV)(n):(n.local?TV:EV)(n,i,e))}function AV(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function RV(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function IV(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&RV(t,s)),n}return r._value=e,r}function kV(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&AV(t,s)),n}return r._value=e,r}function $V(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=f_(t);return this.tween(n,(i.local?IV:kV)(i,e))}function OV(t,e){return function(){D2(this,t).delay=+e.apply(this,arguments)}}function LV(t,e){return e=+e,function(){D2(this,t).delay=e}}function NV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?OV:LV)(e,t)):Ar(this.node(),e).delay}function DV(t,e){return function(){cs(this,t).duration=+e.apply(this,arguments)}}function FV(t,e){return e=+e,function(){cs(this,t).duration=e}}function PV(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?DV:FV)(e,t)):Ar(this.node(),e).duration}function zV(t,e){if(typeof e!="function")throw new Error;return function(){cs(this,t).ease=e}}function WV(t){var e=this._id;return arguments.length?this.each(zV(e,t)):Ar(this.node(),e).ease}function HV(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;cs(this,t).ease=n}}function BV(t){if(typeof t!="function")throw new Error;return this.each(HV(this._id,t))}function VV(t){typeof t!="function"&&(t=Uk(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Ks(i,this._parents,this._name,this._id)}function GV(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)o[a]=e[a];return new Ks(o,this._parents,this._name,this._id)}function UV(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function YV(t,e,n){var i,r,s=UV(e)?D2:cs;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}function jV(t,e){var n=this._id;return arguments.length<2?Ar(this.node(),n).on.on(t):this.each(YV(n,t,e))}function qV(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function XV(){return this.on("end.remove",qV(this._id))}function ZV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=M2(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=t.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,v_(c[f],e,n,f,c,Ar(u,n)));return new Ks(s,this._parents,e,n)}function KV(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Gk(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,g=Ar(u,n),m=0,_=f.length;m<_;++m)(d=f[m])&&v_(d,e,n,m,f,g);s.push(f),o.push(u)}return new Ks(s,o,e,n)}var JV=Id.prototype.constructor;function QV(){return new JV(this._groups,this._parents)}function eG(t,e){var n,i,r;return function(){var s=mu(this,t),o=(this.style.removeProperty(t),mu(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}function E$(t){return function(){this.style.removeProperty(t)}}function tG(t,e,n){var i,r=n+"",s;return function(){var o=mu(this,t);return o===r?null:o===i?s:s=e(i=o,n)}}function nG(t,e,n){var i,r,s;return function(){var o=mu(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),mu(this,t))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function iG(t,e){var n,i,r,s="style."+e,o="end."+s,a;return function(){var l=cs(this,t),c=l.on,u=l.value[s]==null?a||(a=E$(e)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function rG(t,e,n){var i=(t+="")=="transform"?nV:x$;return e==null?this.styleTween(t,eG(t,i)).on("end.style."+t,E$(t)):typeof e=="function"?this.styleTween(t,nG(t,i,F2(this,"style."+t,e))).each(iG(this._id,t)):this.styleTween(t,tG(t,i,e),n).on("end.style."+t,null)}function sG(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function oG(t,e,n){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&sG(t,o,n)),i}return s._value=e,s}function aG(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,oG(t,e,n??""))}function lG(t){return function(){this.textContent=t}}function cG(t){return function(){var e=t(this);this.textContent=e??""}}function uG(t){return this.tween("text",typeof t=="function"?cG(F2(this,"text",t)):lG(t==null?"":t+""))}function hG(t){return function(e){this.textContent=t.call(this,e)}}function fG(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&hG(r)),e}return i._value=t,i}function dG(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fG(t))}function gG(){for(var t=this._name,e=this._id,n=T$(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ar(l,e);v_(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ks(i,this._parents,t,n)}function mG(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=cs(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&s()})}var pG=0;function Ks(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function T$(){return++pG}var ys=Id.prototype;Ks.prototype={constructor:Ks,select:ZV,selectAll:KV,selectChild:ys.selectChild,selectChildren:ys.selectChildren,filter:VV,merge:GV,selection:QV,transition:gG,call:ys.call,nodes:ys.nodes,node:ys.node,size:ys.size,empty:ys.empty,each:ys.each,on:jV,attr:MV,attrTween:$V,style:rG,styleTween:aG,text:uG,textTween:dG,remove:XV,tween:bV,delay:NV,duration:PV,ease:WV,easeVarying:BV,end:mG,[Symbol.iterator]:ys[Symbol.iterator]};function _G(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var yG={time:null,delay:0,duration:250,ease:_G};function vG(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function bG(t){var e,n;t instanceof Ks?(e=t._id,t=t._name):(e=T$(),(n=yG).time=N2(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&v_(l,t,e,c,o,n||vG(l,e));return new Ks(i,this._parents,t,e)}Id.prototype.interrupt=_V;Id.prototype.transition=bG;const vb=Math.PI,bb=2*vb,Ua=1e-6,wG=bb-Ua;function S$(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function xG(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return S$;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let C$=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?S$:xG(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=r-n,u=o-e,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Ua)if(!(Math.abs(h*l-c*u)>Ua)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-o,g=r-a,m=l*l+c*c,_=d*d+g*g,y=Math.sqrt(m),p=Math.sqrt(f),b=s*Math.tan((vb-Math.acos((m+f-_)/(2*y*p)))/2),v=b/p,E=b/y;Math.abs(v-1)>Ua&&this._append`L${e+v*u},${n+v*h}`,this._append`A${s},${s},0,0,${+(h*d>u*g)},${this._x1=e+E*l},${this._y1=n+E*c}`}}arc(e,n,i,r,s,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=e+a,u=n+l,h=1^o,f=o?r-s:s-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ua||Math.abs(this._y1-u)>Ua)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%bb+bb),f>wG?this._append`A${i},${i},0,1,${h},${e-a},${n-l}A${i},${i},0,1,${h},${this._x1=c},${this._y1=u}`:f>Ua&&this._append`A${i},${i},0,${+(f>=vb)},${h},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Ls(t=3){return new C$(+t)}var EG=Array.prototype,M$=EG.slice;function TG(t,e){return t-e}function SG(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}const Fo=t=>()=>t;function CG(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=MG(t,e[n]))return r;return 0}function MG(t,e){for(var n=e[0],i=e[1],r=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],c=l[0],u=l[1],h=t[a],f=h[0],d=h[1];if(AG(l,h,e))return 0;u>i!=d>i&&n<(f-c)*(i-u)/(d-u)+c&&(r=-r)}return r}function AG(t,e,n){var i;return RG(t,e,n)&&IG(t[i=+(t[0]===e[0])],n[i],e[i])}function RG(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function IG(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function kG(){}var vs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function wb(){var t=1,e=1,n=T2,i=l;function r(c){var u=n(c);if(Array.isArray(u))u=u.slice().sort(TG);else{const h=St(c,$G);for(u=sa(...Nk(h[0],h[1],u),u);u[u.length-1]>=h[1];)u.pop();for(;u[1]<h[0];)u.shift()}return u.map(h=>s(c,h))}function s(c,u){const h=u==null?NaN:+u;if(isNaN(h))throw new Error(`invalid value: ${u}`);var f=[],d=[];return o(c,h,function(g){i(g,c,h),SG(g)>0?f.push([g]):d.push(g)}),d.forEach(function(g){for(var m=0,_=f.length,y;m<_;++m)if(CG((y=f[m])[0],g)!==-1){y.push(g);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(c,u,h){var f=new Array,d=new Array,g,m,_,y,p,b;for(g=m=-1,y=za(c[0],u),vs[y<<1].forEach(v);++g<t-1;)_=y,y=za(c[g+1],u),vs[_|y<<1].forEach(v);for(vs[y<<0].forEach(v);++m<e-1;){for(g=-1,y=za(c[m*t+t],u),p=za(c[m*t],u),vs[y<<1|p<<2].forEach(v);++g<t-1;)_=y,y=za(c[m*t+t+g+1],u),b=p,p=za(c[m*t+g+1],u),vs[_|y<<1|p<<2|b<<3].forEach(v);vs[y|p<<3].forEach(v)}for(g=-1,p=c[m*t]>=u,vs[p<<2].forEach(v);++g<t-1;)b=p,p=za(c[m*t+g+1],u),vs[p<<2|b<<3].forEach(v);vs[p<<3].forEach(v);function v(E){var w=[E[0][0]+g,E[0][1]+m],T=[E[1][0]+g,E[1][1]+m],C=a(w),M=a(T),S,R;(S=d[C])?(R=f[M])?(delete d[S.end],delete f[R.start],S===R?(S.ring.push(T),h(S.ring)):f[S.start]=d[R.end]={start:S.start,end:R.end,ring:S.ring.concat(R.ring)}):(delete d[S.end],S.ring.push(T),d[S.end=M]=S):(S=f[M])?(R=d[C])?(delete f[S.start],delete d[R.end],S===R?(S.ring.push(T),h(S.ring)):f[R.start]=d[S.end]={start:R.start,end:S.end,ring:R.ring.concat(S.ring)}):(delete f[S.start],S.ring.unshift(w),f[S.start=C]=S):f[C]=d[M]={start:C,end:M,ring:[w,T]}}}function a(c){return c[0]*2+c[1]*(t+1)*4}function l(c,u,h){c.forEach(function(f){var d=f[0],g=f[1],m=d|0,_=g|0,y=c1(u[_*t+m]);d>0&&d<t&&m===d&&(f[0]=vC(d,c1(u[_*t+m-1]),y,h)),g>0&&g<e&&_===g&&(f[1]=vC(g,c1(u[(_-1)*t+m]),y,h))})}return r.contour=s,r.size=function(c){if(!arguments.length)return[t,e];var u=Math.floor(c[0]),h=Math.floor(c[1]);if(!(u>=0&&h>=0))throw new Error("invalid size");return t=u,e=h,r},r.thresholds=function(c){return arguments.length?(n=typeof c=="function"?c:Array.isArray(c)?Fo(M$.call(c)):Fo(c),r):n},r.smooth=function(c){return arguments.length?(i=c?l:kG,r):i===l},r}function $G(t){return isFinite(t)?t:NaN}function za(t,e){return t==null?!1:+t>=e}function c1(t){return t==null||isNaN(t=+t)?-1/0:t}function vC(t,e,n,i){const r=i-e,s=n-e,o=isFinite(r)||isFinite(s)?r/s:Math.sign(r)/Math.sign(s);return isNaN(o)?t:t+o-.5}function OG(t){return t[0]}function LG(t){return t[1]}function NG(){return 1}function DG(){var t=OG,e=LG,n=NG,i=960,r=500,s=20,o=2,a=s*3,l=i+a*2>>o,c=r+a*2>>o,u=Fo(20);function h(p){var b=new Float32Array(l*c),v=Math.pow(2,-o),E=-1;for(const N of p){var w=(t(N,++E,p)+a)*v,T=(e(N,E,p)+a)*v,C=+n(N,E,p);if(C&&w>=0&&w<l&&T>=0&&T<c){var M=Math.floor(w),S=Math.floor(T),R=w-M-.5,I=T-S-.5;b[M+S*l]+=(1-R)*(1-I)*C,b[M+1+S*l]+=R*(1-I)*C,b[M+1+(S+1)*l]+=R*I*C,b[M+(S+1)*l]+=(1-R)*I*C}}return Rk({data:b,width:l,height:c},s*v),b}function f(p){var b=h(p),v=u(b),E=Math.pow(2,2*o);return Array.isArray(v)||(v=sa(Number.MIN_VALUE,Kt(b)/E,v)),wb().size([l,c]).thresholds(v.map(w=>w*E))(b).map((w,T)=>(w.value=+v[T],d(w)))}f.contours=function(p){var b=h(p),v=wb().size([l,c]),E=Math.pow(2,2*o),w=T=>{T=+T;var C=d(v.contour(b,T*E));return C.value=T,C};return Object.defineProperty(w,"max",{get:()=>Kt(b)/E}),w};function d(p){return p.coordinates.forEach(g),p}function g(p){p.forEach(m)}function m(p){p.forEach(_)}function _(p){p[0]=p[0]*Math.pow(2,o)-a,p[1]=p[1]*Math.pow(2,o)-a}function y(){return a=s*3,l=i+a*2>>o,c=r+a*2>>o,f}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Fo(+p),f):t},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Fo(+p),f):e},f.weight=function(p){return arguments.length?(n=typeof p=="function"?p:Fo(+p),f):n},f.size=function(p){if(!arguments.length)return[i,r];var b=+p[0],v=+p[1];if(!(b>=0&&v>=0))throw new Error("invalid size");return i=b,r=v,y()},f.cellSize=function(p){if(!arguments.length)return 1<<o;if(!((p=+p)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(p)/Math.LN2),y()},f.thresholds=function(p){return arguments.length?(u=typeof p=="function"?p:Array.isArray(p)?Fo(M$.call(p)):Fo(p),f):u},f.bandwidth=function(p){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((p=+p)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*p*p+1)-1)/2,y()},f}const Bs=11102230246251565e-32,vn=134217729,FG=(3+8*Bs)*Bs;function u1(t,e,n,i,r){let s,o,a,l,c=e[0],u=i[0],h=0,f=0;u>c==u>-c?(s=c,c=e[++h]):(s=u,u=i[++f]);let d=0;if(h<t&&f<n)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=e[++h]):(o=u+s,a=s-(o-u),u=i[++f]),s=o,a!==0&&(r[d++]=a);h<t&&f<n;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=e[++h]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++f]),s=o,a!==0&&(r[d++]=a);for(;h<t;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=e[++h],s=o,a!==0&&(r[d++]=a);for(;f<n;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=i[++f],s=o,a!==0&&(r[d++]=a);return(s!==0||d===0)&&(r[d++]=s),d}function PG(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function $d(t){return new Float64Array(t)}const zG=(3+16*Bs)*Bs,WG=(2+12*Bs)*Bs,HG=(9+64*Bs)*Bs*Bs,cc=$d(4),bC=$d(8),wC=$d(12),xC=$d(16),On=$d(4);function BG(t,e,n,i,r,s,o){let a,l,c,u,h,f,d,g,m,_,y,p,b,v,E,w,T,C;const M=t-r,S=n-r,R=e-s,I=i-s;v=M*I,f=vn*M,d=f-(f-M),g=M-d,f=vn*I,m=f-(f-I),_=I-m,E=g*_-(v-d*m-g*m-d*_),w=R*S,f=vn*R,d=f-(f-R),g=R-d,f=vn*S,m=f-(f-S),_=S-m,T=g*_-(w-d*m-g*m-d*_),y=E-T,h=E-y,cc[0]=E-(y+h)+(h-T),p=v+y,h=p-v,b=v-(p-h)+(y-h),y=b-w,h=b-y,cc[1]=b-(y+h)+(h-w),C=p+y,h=C-p,cc[2]=p-(C-h)+(y-h),cc[3]=C;let N=PG(4,cc),O=WG*o;if(N>=O||-N>=O||(h=t-M,a=t-(M+h)+(h-r),h=n-S,c=n-(S+h)+(h-r),h=e-R,l=e-(R+h)+(h-s),h=i-I,u=i-(I+h)+(h-s),a===0&&l===0&&c===0&&u===0)||(O=HG*o+FG*Math.abs(N),N+=M*u+I*a-(R*c+S*l),N>=O||-N>=O))return N;v=a*I,f=vn*a,d=f-(f-a),g=a-d,f=vn*I,m=f-(f-I),_=I-m,E=g*_-(v-d*m-g*m-d*_),w=l*S,f=vn*l,d=f-(f-l),g=l-d,f=vn*S,m=f-(f-S),_=S-m,T=g*_-(w-d*m-g*m-d*_),y=E-T,h=E-y,On[0]=E-(y+h)+(h-T),p=v+y,h=p-v,b=v-(p-h)+(y-h),y=b-w,h=b-y,On[1]=b-(y+h)+(h-w),C=p+y,h=C-p,On[2]=p-(C-h)+(y-h),On[3]=C;const k=u1(4,cc,4,On,bC);v=M*u,f=vn*M,d=f-(f-M),g=M-d,f=vn*u,m=f-(f-u),_=u-m,E=g*_-(v-d*m-g*m-d*_),w=R*c,f=vn*R,d=f-(f-R),g=R-d,f=vn*c,m=f-(f-c),_=c-m,T=g*_-(w-d*m-g*m-d*_),y=E-T,h=E-y,On[0]=E-(y+h)+(h-T),p=v+y,h=p-v,b=v-(p-h)+(y-h),y=b-w,h=b-y,On[1]=b-(y+h)+(h-w),C=p+y,h=C-p,On[2]=p-(C-h)+(y-h),On[3]=C;const L=u1(k,bC,4,On,wC);v=a*u,f=vn*a,d=f-(f-a),g=a-d,f=vn*u,m=f-(f-u),_=u-m,E=g*_-(v-d*m-g*m-d*_),w=l*c,f=vn*l,d=f-(f-l),g=l-d,f=vn*c,m=f-(f-c),_=c-m,T=g*_-(w-d*m-g*m-d*_),y=E-T,h=E-y,On[0]=E-(y+h)+(h-T),p=v+y,h=p-v,b=v-(p-h)+(y-h),y=b-w,h=b-y,On[1]=b-(y+h)+(h-w),C=p+y,h=C-p,On[2]=p-(C-h)+(y-h),On[3]=C;const D=u1(L,wC,4,On,xC);return xC[D-1]}function Pg(t,e,n,i,r,s){const o=(e-s)*(n-r),a=(t-r)*(i-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=zG*c?l:-BG(t,e,n,i,r,s,c)}const EC=Math.pow(2,-52),zg=new Uint32Array(512);class xp{static from(e,n=jG,i=qG){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new xp(s)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<o;S++){const R=e[2*S],I=e[2*S+1];R<a&&(a=R),I<l&&(l=I),R>c&&(c=R),I>u&&(u=I),this._ids[S]=S}const h=(a+c)/2,f=(l+u)/2;let d=1/0,g,m,_;for(let S=0;S<o;S++){const R=h1(h,f,e[2*S],e[2*S+1]);R<d&&(g=S,d=R)}const y=e[2*g],p=e[2*g+1];d=1/0;for(let S=0;S<o;S++){if(S===g)continue;const R=h1(y,p,e[2*S],e[2*S+1]);R<d&&R>0&&(m=S,d=R)}let b=e[2*m],v=e[2*m+1],E=1/0;for(let S=0;S<o;S++){if(S===g||S===m)continue;const R=UG(y,p,b,v,e[2*S],e[2*S+1]);R<E&&(_=S,E=R)}let w=e[2*_],T=e[2*_+1];if(E===1/0){for(let I=0;I<o;I++)this._dists[I]=e[2*I]-e[0]||e[2*I+1]-e[1];Nc(this._ids,this._dists,0,o-1);const S=new Uint32Array(o);let R=0;for(let I=0,N=-1/0;I<o;I++){const O=this._ids[I];this._dists[O]>N&&(S[R++]=O,N=this._dists[O])}this.hull=S.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Pg(y,p,b,v,w,T)<0){const S=m,R=b,I=v;m=_,b=w,v=T,_=S,w=R,T=I}const C=YG(y,p,b,v,w,T);this._cx=C.x,this._cy=C.y;for(let S=0;S<o;S++)this._dists[S]=h1(e[2*S],e[2*S+1],C.x,C.y);Nc(this._ids,this._dists,0,o-1),this._hullStart=g;let M=3;i[g]=n[_]=m,i[m]=n[g]=_,i[_]=n[m]=g,r[g]=0,r[m]=1,r[_]=2,s.fill(-1),s[this._hashKey(y,p)]=g,s[this._hashKey(b,v)]=m,s[this._hashKey(w,T)]=_,this.trianglesLen=0,this._addTriangle(g,m,_,-1,-1,-1);for(let S=0,R,I;S<this._ids.length;S++){const N=this._ids[S],O=e[2*N],k=e[2*N+1];if(S>0&&Math.abs(O-R)<=EC&&Math.abs(k-I)<=EC||(R=O,I=k,N===g||N===m||N===_))continue;let L=0;for(let J=0,W=this._hashKey(O,k);J<this._hashSize&&(L=s[(W+J)%this._hashSize],!(L!==-1&&L!==i[L]));J++);L=n[L];let D=L,H;for(;H=i[D],Pg(O,k,e[2*D],e[2*D+1],e[2*H],e[2*H+1])>=0;)if(D=H,D===L){D=-1;break}if(D===-1)continue;let q=this._addTriangle(D,N,i[D],-1,-1,r[D]);r[N]=this._legalize(q+2),r[D]=q,M++;let G=i[D];for(;H=i[G],Pg(O,k,e[2*G],e[2*G+1],e[2*H],e[2*H+1])<0;)q=this._addTriangle(G,N,H,r[N],-1,r[G]),r[N]=this._legalize(q+2),i[G]=G,M--,G=H;if(D===L)for(;H=n[D],Pg(O,k,e[2*H],e[2*H+1],e[2*D],e[2*D+1])<0;)q=this._addTriangle(H,N,D,-1,r[D],r[H]),this._legalize(q+2),r[H]=q,i[D]=D,M--,D=H;this._hullStart=n[N]=D,i[D]=n[G]=N,i[N]=G,s[this._hashKey(O,k)]=N,s[this._hashKey(e[2*D],e[2*D+1])]=D}this.hull=new Uint32Array(M);for(let S=0,R=this._hullStart;S<M;S++)this.hull[S]=R,R=i[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(VG(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=zg[--s];continue}const c=a-a%3,u=l+(e+1)%3,h=c+(a+2)%3,f=n[o],d=n[e],g=n[u],m=n[h];if(GG(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){n[e]=m,n[a]=f;const y=i[h];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===h){this._hullTri[b]=e;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(e,y),this._link(a,i[o]),this._link(o,h);const p=c+(a+1)%3;s<zg.length&&(zg[s++]=p)}else{if(s===0)break;e=zg[--s]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function VG(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function h1(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}function GG(t,e,n,i,r,s,o,a){const l=t-o,c=e-a,u=n-o,h=i-a,f=r-o,d=s-a,g=l*l+c*c,m=u*u+h*h,_=f*f+d*d;return l*(h*_-m*d)-c*(u*_-m*f)+g*(u*d-h*f)<0}function UG(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,c=s-e,u=o*o+a*a,h=l*l+c*c,f=.5/(o*c-a*l),d=(c*u-a*h)*f,g=(o*h-l*u)*f;return d*d+g*g}function YG(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,c=s-e,u=o*o+a*a,h=l*l+c*c,f=.5/(o*c-a*l),d=t+(c*u-a*h)*f,g=e+(o*h-l*u)*f;return{x:d,y:g}}function Nc(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=t[r],o=e[s];let a=r-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;Oh(t,r,s),e[t[n]]>e[t[i]]&&Oh(t,n,i),e[t[s]]>e[t[i]]&&Oh(t,s,i),e[t[n]]>e[t[s]]&&Oh(t,n,s);const a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;Oh(t,s,o)}t[n+1]=t[o],t[o]=a,i-s+1>=o-n?(Nc(t,e,s,i),Nc(t,e,n,o-1)):(Nc(t,e,n,o-1),Nc(t,e,s,i))}}function Oh(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function jG(t){return t[0]}function qG(t){return t[1]}const TC=1e-6;class tl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const r=e+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>TC||Math.abs(this._y1-s)>TC)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,n,i,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}let xb=class{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}},XG=class{constructor(e,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,_=0,y=i.length,p,b;m<y;m+=3,_+=2){const v=i[m]*2,E=i[m+1]*2,w=i[m+2]*2,T=e[v],C=e[v+1],M=e[E],S=e[E+1],R=e[w],I=e[w+1],N=M-T,O=S-C,k=R-T,L=I-C,D=(N*L-O*k)*2;if(Math.abs(D)<1e-9){if(s===void 0){s=o=0;for(const q of n)s+=e[q*2],o+=e[q*2+1];s/=n.length,o/=n.length}const H=1e9*Math.sign((s-T)*L-(o-C)*k);p=(T+R)/2-H*L,b=(C+I)/2+H*k}else{const H=1/D,q=N*N+O*O,G=k*k+L*L;p=T+(L*q-O*G)*H,b=C+(N*G-k*q)*H}a[_]=p,a[_+1]=b}let l=n[n.length-1],c,u=l*4,h,f=e[2*l],d,g=e[2*l+1];r.fill(0);for(let m=0;m<n.length;++m)l=n[m],c=u,h=f,d=g,u=l*4,f=e[2*l],g=e[2*l+1],r[c+2]=r[u]=d-g,r[c+3]=r[u+1]=f-h}render(e){const n=e==null?e=new tl:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,h=i.length;u<h;++u){const f=i[u];if(f<u)continue;const d=Math.floor(u/3)*2,g=Math.floor(f/3)*2,m=o[d],_=o[d+1],y=o[g],p=o[g+1];this._renderSegment(m,_,y,p,e)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const h=Math.floor(r[c]/3)*2,f=o[h],d=o[h+1],g=l*4,m=this._project(f,d,a[g+2],a[g+3]);m&&this._renderSegment(f,d,m[0],m[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new tl:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new tl:void 0,r=this._clip(e);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(e){const n=new xb;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,r,s){let o;const a=this._regioncode(e,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(e,n),s.lineTo(i,r)):(o=this._clipSegment(e,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const r=this._clip(i);if(r){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+l-2)%l]&&n[(s+3)%o]===r[(a+l-1)%l]){yield i;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[e];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,r=e*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(e,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(e,n))}_clipFinite(e,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],c,u=this._regioncode(a,l),h,f=0;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],c=u,u=this._regioncode(a,l),c===0&&u===0)h=f,f=0,r?r.push(a,l):r=[a,l];else{let g,m,_,y,p;if(c===0){if((g=this._clipSegment(s,o,a,l,c,u))===null)continue;[m,_,y,p]=g}else{if((g=this._clipSegment(a,l,s,o,u,c))===null)continue;[y,p,m,_]=g,h=f,f=this._edgecode(m,_),h&&f&&this._edge(e,h,f,r,r.length),r?r.push(m,_):r=[m,_]}h=f,f=this._edgecode(y,p),h&&f&&this._edge(e,h,f,r,r.length),r?r.push(y,p):r=[y,p]}if(r)h=f,f=this._edgecode(r[0],r[1]),h&&f&&this._edge(e,h,f,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,n,i,r,s,o){const a=s<o;for(a&&([e,n,i,r,s,o]=[i,r,e,n,o,s]);;){if(s===0&&o===0)return a?[i,r,e,n]:[e,n,i,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=e+(i-e)*(this.ymax-n)/(r-n),c=this.ymax):u&4?(l=e+(i-e)*(this.ymin-n)/(r-n),c=this.ymin):u&2?(c=n+(r-n)*(this.xmax-e)/(i-e),l=this.xmax):(c=n+(r-n)*(this.xmin-e)/(i-e),l=this.xmin),s?(e=l,n=c,s=this._regioncode(e,n)):(i=l,r=c,o=this._regioncode(i,r))}}_clipInfinite(e,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let c=0,u=a.length,h,f=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)h=f,f=this._edgecode(a[c],a[c+1]),h&&f&&(c=this._edge(e,h,f,a,c),u=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(e,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=e+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=e+(s=o)*i)}if(i>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const i=(n+2)%e.length,r=(n+4)%e.length;(e[n]===e[i]&&e[i]===e[r]||e[n+1]===e[i+1]&&e[i+1]===e[r+1])&&(e.splice(i,2),n-=2)}e.length||(e=null)}return e}};const ZG=2*Math.PI,uc=Math.pow;function KG(t){return t[0]}function JG(t){return t[1]}function QG(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const r=2*e[i],s=2*e[i+1],o=2*e[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function eU(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class wa{static from(e,n=KG,i=JG,r){return new wa("length"in e?tU(e,n,i,r):Float64Array.from(nU(e,n,i,r)))}constructor(e){this._delaunator=new xp(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&QG(e)){this.collinear=Int32Array.from({length:n.length/2},(f,d)=>d).sort((f,d)=>n[2*f]-n[2*d]||n[2*f+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],h=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let f=0,d=n.length/2;f<d;++f){const g=eU(n[2*f],n[2*f+1],h);n[2*f]=g[0],n[2*f+1]=g[1]}this._delaunator=new xp(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(i[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new XG(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const h=a.indexOf(e);h>0&&(yield a[h-1]),h<a.length-1&&(yield a[h+1]);return}const l=n[e];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==e)return;if(c=s[c],c===-1){const h=i[(r[e]+1)%i.length];h!==u&&(yield h);return}}while(c!==l)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,e,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(e,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[e]===-1||!c.length)return(e+1)%(c.length>>1);let u=e,h=uc(n-c[e*2],2)+uc(i-c[e*2+1],2);const f=r[e];let d=f;do{let g=l[d];const m=uc(n-c[g*2],2)+uc(i-c[g*2+1],2);if(m<h&&(h=m,u=g),d=d%3===2?d-2:d+1,l[d]!==e)break;if(d=a[d],d===-1){if(d=s[(o[e]+1)%s.length],d!==g&&uc(n-c[d*2],2)+uc(i-c[d*2+1],2)<h)return d;break}}while(d!==f);return u}render(e){const n=e==null?e=new tl:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;e.moveTo(i[c],i[c+1]),e.lineTo(i[u],i[u+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new tl:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+n,l),e.arc(a,l,n,0,ZG)}return i&&i.value()}renderHull(e){const n=e==null?e=new tl:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];e.lineTo(r[l],r[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new xb;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new tl:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new xb;return this.renderTriangle(e,n),n.value()}}function tU(t,e,n,i){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=t[o];s[o*2]=e.call(i,a,o,t),s[o*2+1]=n.call(i,a,o,t)}return s}function*nU(t,e,n,i){let r=0;for(const s of t)yield e.call(i,s,r,t),yield n.call(i,s,r,t),++r}function iU(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ep(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function yu(t){return t=Ep(Math.abs(t)),t?t[1]:NaN}function rU(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function sU(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var oU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xf(t){if(!(e=oU.exec(t)))throw new Error("invalid format: "+t);var e;return new P2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xf.prototype=P2.prototype;function P2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}P2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aU(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var A$;function lU(t,e){var n=Ep(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(A$=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ep(t,Math.max(0,e+s-1))[0]}function SC(t,e){var n=Ep(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const CC={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:iU,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SC(t*100,e),r:SC,s:lU,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function MC(t){return t}var AC=Array.prototype.map,RC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cU(t){var e=t.grouping===void 0||t.thousands===void 0?MC:rU(AC.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?MC:sU(AC.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Xf(h);var f=h.fill,d=h.align,g=h.sign,m=h.symbol,_=h.zero,y=h.width,p=h.comma,b=h.precision,v=h.trim,E=h.type;E==="n"?(p=!0,E="g"):CC[E]||(b===void 0&&(b=12),v=!0,E="g"),(_||f==="0"&&d==="=")&&(_=!0,f="0",d="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?i:/[%p]/.test(E)?o:"",C=CC[E],M=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function S(R){var I=w,N=T,O,k,L;if(E==="c")N=C(R)+N,R="";else{R=+R;var D=R<0||1/R<0;if(R=isNaN(R)?l:C(Math.abs(R),b),v&&(R=aU(R)),D&&+R==0&&g!=="+"&&(D=!1),I=(D?g==="("?g:a:g==="-"||g==="("?"":g)+I,N=(E==="s"?RC[8+A$/3]:"")+N+(D&&g==="("?")":""),M){for(O=-1,k=R.length;++O<k;)if(L=R.charCodeAt(O),48>L||L>57){N=(L===46?r+R.slice(O+1):R.slice(O))+N,R=R.slice(0,O);break}}}p&&!_&&(R=e(R,1/0));var H=I.length+R.length+N.length,q=H<y?new Array(y-H+1).join(f):"";switch(p&&_&&(R=e(q+R,q.length?y-N.length:1/0),q=""),d){case"<":R=I+R+N+q;break;case"=":R=I+q+R+N;break;case"^":R=q.slice(0,H=q.length>>1)+I+R+N+q.slice(H);break;default:R=q+I+R+N;break}return s(R)}return S.toString=function(){return h+""},S}function u(h,f){var d=c((h=Xf(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(yu(f)/3)))*3,m=Math.pow(10,-g),_=RC[8+g/3];return function(y){return d(m*y)+_}}return{format:c,formatPrefix:u}}var Wg,xa,R$;uU({thousands:",",grouping:[3],currency:["$",""]});function uU(t){return Wg=cU(t),xa=Wg.format,R$=Wg.formatPrefix,Wg}function hU(t){return Math.max(0,-yu(Math.abs(t)))}function fU(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yu(e)/3)))*3-yu(Math.abs(t)))}function dU(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yu(e)-yu(t))+1}var Se=1e-6,Tp=1e-12,Be=Math.PI,Dt=Be/2,IC=Be/4,xi=Be*2,gn=180/Be,Ze=Be/180,nt=Math.abs,eh=Math.atan,Er=Math.atan2,Me=Math.cos,Hg=Math.ceil,I$=Math.exp,Eb=Math.hypot,Sp=Math.log,f1=Math.pow,xe=Math.sin,Pi=Math.sign||function(t){return t>0?1:t<0?-1:0},Yn=Math.sqrt,z2=Math.tan;function k$(t){return t>1?0:t<-1?Be:Math.acos(t)}function ci(t){return t>1?Dt:t<-1?-Dt:Math.asin(t)}function _i(){}function Cp(t,e){t&&$C.hasOwnProperty(t.type)&&$C[t.type](t,e)}var kC={Feature:function(t,e){Cp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Cp(n[i].geometry,e)}},$C={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Tb(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Tb(n[i],e,0)},Polygon:function(t,e){OC(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)OC(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Cp(n[i],e)}};function Tb(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function OC(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Tb(t[n],e,1);e.polygonEnd()}function Vo(t,e){t&&kC.hasOwnProperty(t.type)?kC[t.type](t,e):Cp(t,e)}function Sb(t){return[Er(t[1],t[0]),ci(t[2])]}function vu(t){var e=t[0],n=t[1],i=Me(n);return[i*Me(e),i*xe(e),xe(n)]}function Bg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Mp(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function d1(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Vg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Cb(t){var e=Yn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var of,Ap,Rp,Ip,kp,$p,Op,Lp,Mb,Ab,Rb,$$,O$,Fn,Pn,zn,_r={sphere:_i,point:W2,lineStart:LC,lineEnd:NC,polygonStart:function(){_r.lineStart=pU,_r.lineEnd=_U},polygonEnd:function(){_r.lineStart=LC,_r.lineEnd=NC}};function W2(t,e){t*=Ze,e*=Ze;var n=Me(e);Od(n*Me(t),n*xe(t),xe(e))}function Od(t,e,n){++of,Rp+=(t-Rp)/of,Ip+=(e-Ip)/of,kp+=(n-kp)/of}function LC(){_r.point=gU}function gU(t,e){t*=Ze,e*=Ze;var n=Me(e);Fn=n*Me(t),Pn=n*xe(t),zn=xe(e),_r.point=mU,Od(Fn,Pn,zn)}function mU(t,e){t*=Ze,e*=Ze;var n=Me(e),i=n*Me(t),r=n*xe(t),s=xe(e),o=Er(Yn((o=Pn*s-zn*r)*o+(o=zn*i-Fn*s)*o+(o=Fn*r-Pn*i)*o),Fn*i+Pn*r+zn*s);Ap+=o,$p+=o*(Fn+(Fn=i)),Op+=o*(Pn+(Pn=r)),Lp+=o*(zn+(zn=s)),Od(Fn,Pn,zn)}function NC(){_r.point=W2}function pU(){_r.point=yU}function _U(){L$($$,O$),_r.point=W2}function yU(t,e){$$=t,O$=e,t*=Ze,e*=Ze,_r.point=L$;var n=Me(e);Fn=n*Me(t),Pn=n*xe(t),zn=xe(e),Od(Fn,Pn,zn)}function L$(t,e){t*=Ze,e*=Ze;var n=Me(e),i=n*Me(t),r=n*xe(t),s=xe(e),o=Pn*s-zn*r,a=zn*i-Fn*s,l=Fn*r-Pn*i,c=Eb(o,a,l),u=ci(c),h=c&&-u/c;Mb.add(h*o),Ab.add(h*a),Rb.add(h*l),Ap+=u,$p+=u*(Fn+(Fn=i)),Op+=u*(Pn+(Pn=r)),Lp+=u*(zn+(zn=s)),Od(Fn,Pn,zn)}function vU(t){of=Ap=Rp=Ip=kp=$p=Op=Lp=0,Mb=new Zr,Ab=new Zr,Rb=new Zr,Vo(t,_r);var e=+Mb,n=+Ab,i=+Rb,r=Eb(e,n,i);return r<Tp&&(e=$p,n=Op,i=Lp,Ap<Se&&(e=Rp,n=Ip,i=kp),r=Eb(e,n,i),r<Tp)?[NaN,NaN]:[Er(n,e)*gn,ci(i/r)*gn]}function Ib(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function kb(t,e){return nt(t)>Be&&(t-=Math.round(t/xi)*xi),[t,e]}kb.invert=kb;function N$(t,e,n){return(t%=xi)?e||n?Ib(FC(t),PC(e,n)):FC(t):e||n?PC(e,n):kb}function DC(t){return function(e,n){return e+=t,nt(e)>Be&&(e-=Math.round(e/xi)*xi),[e,n]}}function FC(t){var e=DC(t);return e.invert=DC(-t),e}function PC(t,e){var n=Me(t),i=xe(t),r=Me(e),s=xe(e);function o(a,l){var c=Me(l),u=Me(a)*c,h=xe(a)*c,f=xe(l),d=f*n+u*i;return[Er(h*r-d*s,u*n-f*i),ci(d*r+h*s)]}return o.invert=function(a,l){var c=Me(l),u=Me(a)*c,h=xe(a)*c,f=xe(l),d=f*r-h*s;return[Er(h*r+f*s,u*n+d*i),ci(d*n-u*i)]},o}function bU(t){t=N$(t[0]*Ze,t[1]*Ze,t.length>2?t[2]*Ze:0);function e(n){return n=t(n[0]*Ze,n[1]*Ze),n[0]*=gn,n[1]*=gn,n}return e.invert=function(n){return n=t.invert(n[0]*Ze,n[1]*Ze),n[0]*=gn,n[1]*=gn,n},e}function wU(t,e,n,i,r,s){if(n){var o=Me(e),a=xe(e),l=i*n;r==null?(r=e+i*xi,s=e-l/2):(r=zC(o,r),s=zC(o,s),(i>0?r<s:r>s)&&(r+=i*xi));for(var c,u=r;i>0?u>s:u<s;u-=l)c=Sb([o,-a*Me(u),-a*xe(u)]),t.point(c[0],c[1])}}function zC(t,e){e=vu(e),e[0]-=t,Cb(e);var n=k$(-e[1]);return((-e[2]<0?-n:n)+xi-Se)%xi}function D$(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:_i,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function jm(t,e){return nt(t[0]-e[0])<Se&&nt(t[1]-e[1])<Se}function Gg(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function F$(t,e,n,i,r){var s=[],o=[],a,l;if(t.forEach(function(g){if(!((m=g.length-1)<=0)){var m,_=g[0],y=g[m],p;if(jm(_,y)){if(!_[2]&&!y[2]){for(r.lineStart(),a=0;a<m;++a)r.point((_=g[a])[0],_[1]);r.lineEnd();return}y[0]+=2*Se}s.push(p=new Gg(_,g,null,!0)),o.push(p.o=new Gg(_,null,p,!1)),s.push(p=new Gg(y,g,null,!1)),o.push(p.o=new Gg(y,null,p,!0))}}),!!s.length){for(o.sort(e),WC(s),WC(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,h;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((h=u[a])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,u=f.z,d=!d}while(!f.v);r.lineEnd()}}}function WC(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function g1(t){return nt(t[0])<=Be?t[0]:Pi(t[0])*((nt(t[0])+Be)%xi-Be)}function xU(t,e){var n=g1(e),i=e[1],r=xe(i),s=[xe(n),-Me(n),0],o=0,a=0,l=new Zr;r===1?i=Dt+Se:r===-1&&(i=-Dt-Se);for(var c=0,u=t.length;c<u;++c)if(f=(h=t[c]).length)for(var h,f,d=h[f-1],g=g1(d),m=d[1]/2+IC,_=xe(m),y=Me(m),p=0;p<f;++p,g=v,_=w,y=T,d=b){var b=h[p],v=g1(b),E=b[1]/2+IC,w=xe(E),T=Me(E),C=v-g,M=C>=0?1:-1,S=M*C,R=S>Be,I=_*w;if(l.add(Er(I*M*xe(S),y*T+I*Me(S))),o+=R?C+M*xi:C,R^g>=n^v>=n){var N=Mp(vu(d),vu(b));Cb(N);var O=Mp(s,N);Cb(O);var k=(R^C>=0?-1:1)*ci(O[2]);(i>k||i===k&&(N[0]||N[1]))&&(a+=R^C>=0?1:-1)}}return(o<-Se||o<Se&&l<-Tp)^a&1}function P$(t,e,n,i){return function(r){var s=e(r),o=D$(),a=e(o),l=!1,c,u,h,f={point:d,lineStart:m,lineEnd:_,polygonStart:function(){f.point=y,f.lineStart=p,f.lineEnd=b,u=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=_,u=Pk(u);var v=xU(c,i);u.length?(l||(r.polygonStart(),l=!0),F$(u,TU,v,n,r)):v&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(v,E){t(v,E)&&r.point(v,E)}function g(v,E){s.point(v,E)}function m(){f.point=g,s.lineStart()}function _(){f.point=d,s.lineEnd()}function y(v,E){h.push([v,E]),a.point(v,E)}function p(){a.lineStart(),h=[]}function b(){y(h[0][0],h[0][1]),a.lineEnd();var v=a.clean(),E=o.result(),w,T=E.length,C,M,S;if(h.pop(),c.push(h),h=null,!!T){if(v&1){if(M=E[0],(C=M.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),w=0;w<C;++w)r.point((S=M[w])[0],S[1]);r.lineEnd()}return}T>1&&v&2&&E.push(E.pop().concat(E.shift())),u.push(E.filter(EU))}}return f}}function EU(t){return t.length>1}function TU(t,e){return((t=t.x)[0]<0?t[1]-Dt-Se:Dt-t[1])-((e=e.x)[0]<0?e[1]-Dt-Se:Dt-e[1])}const HC=P$(function(){return!0},SU,MU,[-Be,-Dt]);function SU(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,o){var a=s>0?Be:-Be,l=nt(s-e);nt(l-Be)<Se?(t.point(e,n=(n+o)/2>0?Dt:-Dt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),r=0):i!==a&&l>=Be&&(nt(e-i)<Se&&(e-=i*Se),nt(s-a)<Se&&(s-=a*Se),n=CU(e,n,s,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),r=0),t.point(e=s,n=o),i=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function CU(t,e,n,i){var r,s,o=xe(t-n);return nt(o)>Se?eh((xe(e)*(s=Me(i))*xe(n)-xe(i)*(r=Me(e))*xe(t))/(r*s*o)):(e+i)/2}function MU(t,e,n,i){var r;if(t==null)r=n*Dt,i.point(-Be,r),i.point(0,r),i.point(Be,r),i.point(Be,0),i.point(Be,-r),i.point(0,-r),i.point(-Be,-r),i.point(-Be,0),i.point(-Be,r);else if(nt(t[0]-e[0])>Se){var s=t[0]<e[0]?Be:-Be;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function AU(t){var e=Me(t),n=6*Ze,i=e>0,r=nt(e)>Se;function s(u,h,f,d){wU(d,t,n,f,u,h)}function o(u,h){return Me(u)*Me(h)>e}function a(u){var h,f,d,g,m;return{lineStart:function(){g=d=!1,m=1},point:function(_,y){var p=[_,y],b,v=o(_,y),E=i?v?0:c(_,y):v?c(_+(_<0?Be:-Be),y):0;if(!h&&(g=d=v)&&u.lineStart(),v!==d&&(b=l(h,p),(!b||jm(h,b)||jm(p,b))&&(p[2]=1)),v!==d)m=0,v?(u.lineStart(),b=l(p,h),u.point(b[0],b[1])):(b=l(h,p),u.point(b[0],b[1],2),u.lineEnd()),h=b;else if(r&&h&&i^v){var w;!(E&f)&&(w=l(p,h,!0))&&(m=0,i?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}v&&(!h||!jm(h,p))&&u.point(p[0],p[1]),h=p,d=v,f=E},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return m|(g&&d)<<1}}}function l(u,h,f){var d=vu(u),g=vu(h),m=[1,0,0],_=Mp(d,g),y=Bg(_,_),p=_[0],b=y-p*p;if(!b)return!f&&u;var v=e*y/b,E=-e*p/b,w=Mp(m,_),T=Vg(m,v),C=Vg(_,E);d1(T,C);var M=w,S=Bg(T,M),R=Bg(M,M),I=S*S-R*(Bg(T,T)-1);if(!(I<0)){var N=Yn(I),O=Vg(M,(-S-N)/R);if(d1(O,T),O=Sb(O),!f)return O;var k=u[0],L=h[0],D=u[1],H=h[1],q;L<k&&(q=k,k=L,L=q);var G=L-k,J=nt(G-Be)<Se,W=J||G<Se;if(!J&&H<D&&(q=D,D=H,H=q),W?J?D+H>0^O[1]<(nt(O[0]-k)<Se?D:H):D<=O[1]&&O[1]<=H:G>Be^(k<=O[0]&&O[0]<=L)){var ie=Vg(M,(-S+N)/R);return d1(ie,T),[O,Sb(ie)]}}}function c(u,h){var f=i?t:Be-t,d=0;return u<-f?d|=1:u>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return P$(o,a,s,i?[0,-t]:[-Be,t-Be])}function RU(t,e,n,i,r,s){var o=t[0],a=t[1],l=e[0],c=e[1],u=0,h=1,f=l-o,d=c-a,g;if(g=n-o,!(!f&&g>0)){if(g/=f,f<0){if(g<u)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>u&&(u=g)}if(g=r-o,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>u&&(u=g)}else if(f>0){if(g<u)return;g<h&&(h=g)}if(g=i-a,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<h&&(h=g)}else if(d>0){if(g>h)return;g>u&&(u=g)}if(g=s-a,!(!d&&g<0)){if(g/=d,d<0){if(g>h)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<h&&(h=g)}return u>0&&(t[0]=o+u*f,t[1]=a+u*d),h<1&&(e[0]=o+h*f,e[1]=a+h*d),!0}}}}}var af=1e9,Ug=-af;function z$(t,e,n,i){function r(c,u){return t<=c&&c<=n&&e<=u&&u<=i}function s(c,u,h,f){var d=0,g=0;if(c==null||(d=o(c,h))!==(g=o(u,h))||l(c,u)<0^h>0)do f.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+h+4)%4)!==g);else f.point(u[0],u[1])}function o(c,u){return nt(c[0]-t)<Se?u>0?0:3:nt(c[0]-n)<Se?u>0?2:1:nt(c[1]-e)<Se?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),f=o(u,1);return h!==f?h-f:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=D$(),f,d,g,m,_,y,p,b,v,E,w,T={point:C,lineStart:I,lineEnd:N,polygonStart:S,polygonEnd:R};function C(k,L){r(k,L)&&u.point(k,L)}function M(){for(var k=0,L=0,D=d.length;L<D;++L)for(var H=d[L],q=1,G=H.length,J=H[0],W,ie,se=J[0],le=J[1];q<G;++q)W=se,ie=le,J=H[q],se=J[0],le=J[1],ie<=i?le>i&&(se-W)*(i-ie)>(le-ie)*(t-W)&&++k:le<=i&&(se-W)*(i-ie)<(le-ie)*(t-W)&&--k;return k}function S(){u=h,f=[],d=[],w=!0}function R(){var k=M(),L=w&&k,D=(f=Pk(f)).length;(L||D)&&(c.polygonStart(),L&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),D&&F$(f,a,k,s,c),c.polygonEnd()),u=c,f=d=g=null}function I(){T.point=O,d&&d.push(g=[]),E=!0,v=!1,p=b=NaN}function N(){f&&(O(m,_),y&&v&&h.rejoin(),f.push(h.result())),T.point=C,v&&u.lineEnd()}function O(k,L){var D=r(k,L);if(d&&g.push([k,L]),E)m=k,_=L,y=D,E=!1,D&&(u.lineStart(),u.point(k,L));else if(D&&v)u.point(k,L);else{var H=[p=Math.max(Ug,Math.min(af,p)),b=Math.max(Ug,Math.min(af,b))],q=[k=Math.max(Ug,Math.min(af,k)),L=Math.max(Ug,Math.min(af,L))];RU(H,q,t,e,n,i)?(v||(u.lineStart(),u.point(H[0],H[1])),u.point(q[0],q[1]),D||u.lineEnd(),w=!1):D&&(u.lineStart(),u.point(k,L),w=!1)}p=k,b=L,v=D}return T}}function BC(t,e,n){var i=Fi(t,e-Se,n).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function VC(t,e,n){var i=Fi(t,e-Se,n).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function IU(){var t,e,n,i,r,s,o,a,l=10,c=l,u=90,h=360,f,d,g,m,_=2.5;function y(){return{type:"MultiLineString",coordinates:p()}}function p(){return Fi(Hg(i/u)*u,n,u).map(g).concat(Fi(Hg(a/h)*h,o,h).map(m)).concat(Fi(Hg(e/l)*l,t,l).filter(function(b){return nt(b%u)>Se}).map(f)).concat(Fi(Hg(s/c)*c,r,c).filter(function(b){return nt(b%h)>Se}).map(d))}return y.lines=function(){return p().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(m(o).slice(1),g(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(i=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],i>n&&(b=i,i=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(_)):[[i,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(e=+b[0][0],t=+b[1][0],s=+b[0][1],r=+b[1][1],e>t&&(b=e,e=t,t=b),s>r&&(b=s,s=r,r=b),y.precision(_)):[[e,s],[t,r]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],h=+b[1],y):[u,h]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(_=+b,f=BC(s,r,90),d=VC(e,t,_),g=BC(a,o,90),m=VC(i,n,_),y):_},y.extentMajor([[-180,-90+Se],[180,90-Se]]).extentMinor([[-180,-80-Se],[180,80+Se]])}function kU(){return IU()()}const $b=t=>t;var m1=new Zr,Ob=new Zr,W$,H$,Lb,Nb,Go={point:_i,lineStart:_i,lineEnd:_i,polygonStart:function(){Go.lineStart=$U,Go.lineEnd=LU},polygonEnd:function(){Go.lineStart=Go.lineEnd=Go.point=_i,m1.add(nt(Ob)),Ob=new Zr},result:function(){var t=m1/2;return m1=new Zr,t}};function $U(){Go.point=OU}function OU(t,e){Go.point=B$,W$=Lb=t,H$=Nb=e}function B$(t,e){Ob.add(Nb*t-Lb*e),Lb=t,Nb=e}function LU(){B$(W$,H$)}const GC=Go;var bu=1/0,Np=bu,Zf=-bu,Dp=Zf,NU={point:DU,lineStart:_i,lineEnd:_i,polygonStart:_i,polygonEnd:_i,result:function(){var t=[[bu,Np],[Zf,Dp]];return Zf=Dp=-(Np=bu=1/0),t}};function DU(t,e){t<bu&&(bu=t),t>Zf&&(Zf=t),e<Np&&(Np=e),e>Dp&&(Dp=e)}const Fp=NU;var Db=0,Fb=0,lf=0,Pp=0,zp=0,Dc=0,Pb=0,zb=0,cf=0,V$,G$,Hr,Br,mr={point:Dl,lineStart:UC,lineEnd:YC,polygonStart:function(){mr.lineStart=zU,mr.lineEnd=WU},polygonEnd:function(){mr.point=Dl,mr.lineStart=UC,mr.lineEnd=YC},result:function(){var t=cf?[Pb/cf,zb/cf]:Dc?[Pp/Dc,zp/Dc]:lf?[Db/lf,Fb/lf]:[NaN,NaN];return Db=Fb=lf=Pp=zp=Dc=Pb=zb=cf=0,t}};function Dl(t,e){Db+=t,Fb+=e,++lf}function UC(){mr.point=FU}function FU(t,e){mr.point=PU,Dl(Hr=t,Br=e)}function PU(t,e){var n=t-Hr,i=e-Br,r=Yn(n*n+i*i);Pp+=r*(Hr+t)/2,zp+=r*(Br+e)/2,Dc+=r,Dl(Hr=t,Br=e)}function YC(){mr.point=Dl}function zU(){mr.point=HU}function WU(){U$(V$,G$)}function HU(t,e){mr.point=U$,Dl(V$=Hr=t,G$=Br=e)}function U$(t,e){var n=t-Hr,i=e-Br,r=Yn(n*n+i*i);Pp+=r*(Hr+t)/2,zp+=r*(Br+e)/2,Dc+=r,r=Br*t-Hr*e,Pb+=r*(Hr+t),zb+=r*(Br+e),cf+=r*3,Dl(Hr=t,Br=e)}const jC=mr;function Y$(t){this._context=t}Y$.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,xi);break}}},result:_i};var Wb=new Zr,p1,j$,q$,uf,hf,Wp={point:_i,lineStart:function(){Wp.point=BU},lineEnd:function(){p1&&X$(j$,q$),Wp.point=_i},polygonStart:function(){p1=!0},polygonEnd:function(){p1=null},result:function(){var t=+Wb;return Wb=new Zr,t}};function BU(t,e){Wp.point=X$,j$=uf=t,q$=hf=e}function X$(t,e){uf-=t,hf-=e,Wb.add(Yn(uf*uf+hf*hf)),uf=t,hf=e}const qC=Wp;let XC,Hp,ZC,KC;class JC{constructor(e){this._append=e==null?Z$:VU(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==ZC||this._append!==Hp){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,ZC=i,Hp=this._append,KC=this._,this._=r}this._+=KC;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Z$(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function VU(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Z$;if(e!==XC){const n=10**e;XC=e,Hp=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return Hp}function Ea(t,e){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Vo(a,r(s))),s.result()}return o.area=function(a){return Vo(a,r(GC)),GC.result()},o.measure=function(a){return Vo(a,r(qC)),qC.result()},o.bounds=function(a){return Vo(a,r(Fp)),Fp.result()},o.centroid=function(a){return Vo(a,r(jC)),jC.result()},o.projection=function(a){return arguments.length?(r=a==null?(t=null,$b):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new JC(n)):new Y$(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(s=new JC(n)),o},o.projection(t).digits(n).context(e)}function Bp(t){return{stream:b_(t)}}function b_(t){return function(e){var n=new Hb;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Hb(){}Hb.prototype={constructor:Hb,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function H2(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Vo(n,t.stream(Fp)),e(Fp.result()),i!=null&&t.clipExtent(i),t}function B2(t,e,n){return H2(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function K$(t,e,n){return B2(t,[[0,0],e],n)}function J$(t,e,n){return H2(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];t.scale(150*s).translate([o,a])},n)}function Q$(t,e,n){return H2(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var QC=16,GU=Me(30*Ze);function eM(t,e){return+e?YU(t,e):UU(t)}function UU(t){return b_({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function YU(t,e){function n(i,r,s,o,a,l,c,u,h,f,d,g,m,_){var y=c-i,p=u-r,b=y*y+p*p;if(b>4*e&&m--){var v=o+f,E=a+d,w=l+g,T=Yn(v*v+E*E+w*w),C=ci(w/=T),M=nt(nt(w)-1)<Se||nt(s-h)<Se?(s+h)/2:Er(E,v),S=t(M,C),R=S[0],I=S[1],N=R-i,O=I-r,k=p*N-y*O;(k*k/b>e||nt((y*N+p*O)/b-.5)>.3||o*f+a*d+l*g<GU)&&(n(i,r,s,o,a,l,R,I,M,v/=T,E/=T,w,m,_),_.point(R,I),n(R,I,M,v,E,w,c,u,h,f,d,g,m,_))}}return function(i){var r,s,o,a,l,c,u,h,f,d,g,m,_={point:y,lineStart:p,lineEnd:v,polygonStart:function(){i.polygonStart(),_.lineStart=E},polygonEnd:function(){i.polygonEnd(),_.lineStart=p}};function y(C,M){C=t(C,M),i.point(C[0],C[1])}function p(){h=NaN,_.point=b,i.lineStart()}function b(C,M){var S=vu([C,M]),R=t(C,M);n(h,f,u,d,g,m,h=R[0],f=R[1],u=C,d=S[0],g=S[1],m=S[2],QC,i),i.point(h,f)}function v(){_.point=y,i.lineEnd()}function E(){p(),_.point=w,_.lineEnd=T}function w(C,M){b(r=C,M),s=h,o=f,a=d,l=g,c=m,_.point=b}function T(){n(h,f,u,d,g,m,s,o,r,a,l,c,QC,i),_.lineEnd=v,v()}return _}}var jU=b_({point:function(t,e){this.stream.point(t*Ze,e*Ze)}});function qU(t){return b_({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function XU(t,e,n,i,r){function s(o,a){return o*=i,a*=r,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},s}function tM(t,e,n,i,r,s){if(!s)return XU(t,e,n,i,r);var o=Me(s),a=xe(s),l=o*t,c=a*t,u=o/t,h=a/t,f=(a*n-o*e)/t,d=(a*e+o*n)/t;function g(m,_){return m*=i,_*=r,[l*m-c*_+e,n-c*m-l*_]}return g.invert=function(m,_){return[i*(u*m-h*_+f),r*(d-h*m-u*_)]},g}function Ta(t){return eO(function(){return t})()}function eO(t){var e,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,h=0,f=1,d=1,g=null,m=HC,_=null,y,p,b,v=$b,E=.5,w,T,C,M,S;function R(k){return C(k[0]*Ze,k[1]*Ze)}function I(k){return k=C.invert(k[0],k[1]),k&&[k[0]*gn,k[1]*gn]}R.stream=function(k){return M&&S===k?M:M=jU(qU(u)(m(w(v(S=k)))))},R.preclip=function(k){return arguments.length?(m=k,g=void 0,O()):m},R.postclip=function(k){return arguments.length?(v=k,_=y=p=b=null,O()):v},R.clipAngle=function(k){return arguments.length?(m=+k?AU(g=k*Ze):(g=null,HC),O()):g*gn},R.clipExtent=function(k){return arguments.length?(v=k==null?(_=y=p=b=null,$b):z$(_=+k[0][0],y=+k[0][1],p=+k[1][0],b=+k[1][1]),O()):_==null?null:[[_,y],[p,b]]},R.scale=function(k){return arguments.length?(n=+k,N()):n},R.translate=function(k){return arguments.length?(i=+k[0],r=+k[1],N()):[i,r]},R.center=function(k){return arguments.length?(s=k[0]%360*Ze,o=k[1]%360*Ze,N()):[s*gn,o*gn]},R.rotate=function(k){return arguments.length?(a=k[0]%360*Ze,l=k[1]%360*Ze,c=k.length>2?k[2]%360*Ze:0,N()):[a*gn,l*gn,c*gn]},R.angle=function(k){return arguments.length?(h=k%360*Ze,N()):h*gn},R.reflectX=function(k){return arguments.length?(f=k?-1:1,N()):f<0},R.reflectY=function(k){return arguments.length?(d=k?-1:1,N()):d<0},R.precision=function(k){return arguments.length?(w=eM(T,E=k*k),O()):Yn(E)},R.fitExtent=function(k,L){return B2(R,k,L)},R.fitSize=function(k,L){return K$(R,k,L)},R.fitWidth=function(k,L){return J$(R,k,L)},R.fitHeight=function(k,L){return Q$(R,k,L)};function N(){var k=tM(n,0,0,f,d,h).apply(null,e(s,o)),L=tM(n,i-k[0],r-k[1],f,d,h);return u=N$(a,l,c),T=Ib(e,L),C=Ib(u,T),w=eM(T,E),O()}function O(){return M=S=null,R}return function(){return e=t.apply(this,arguments),R.invert=e.invert&&I,N()}}function V2(t){var e=0,n=Be/3,i=eO(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*Ze,n=s[1]*Ze):[e*gn,n*gn]},r}function ZU(t){var e=Me(t);function n(i,r){return[i*e,xe(r)/e]}return n.invert=function(i,r){return[i/e,ci(r*e)]},n}function KU(t,e){var n=xe(t),i=(n+xe(e))/2;if(nt(i)<Se)return ZU(t);var r=1+n*(2*i-n),s=Yn(r)/i;function o(a,l){var c=Yn(r-2*i*xe(l))/i;return[c*xe(a*=i),s-c*Me(a)]}return o.invert=function(a,l){var c=s-l,u=Er(a,nt(c))*Pi(c);return c*i<0&&(u-=Be*Pi(a)*Pi(c)),[u/i,ci((r-(a*a+c*c)*i*i)/(2*i))]},o}function Vp(){return V2(KU).scale(155.424).center([0,33.6442])}function tO(){return Vp().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function JU(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function QU(){var t,e,n=tO(),i,r=Vp().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Vp().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(f,d){l=[f,d]}};function u(f){var d=f[0],g=f[1];return l=null,i.point(d,g),l||(s.point(d,g),l)||(a.point(d,g),l)}u.invert=function(f){var d=n.scale(),g=n.translate(),m=(f[0]-g[0])/d,_=(f[1]-g[1])/d;return(_>=.12&&_<.234&&m>=-.425&&m<-.214?r:_>=.166&&_<.234&&m>=-.214&&m<-.115?o:n).invert(f)},u.stream=function(f){return t&&e===f?t:t=JU([n.stream(e=f),r.stream(f),o.stream(f)])},u.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),o.precision(f),h()):n.precision()},u.scale=function(f){return arguments.length?(n.scale(f),r.scale(f*.35),o.scale(f),u.translate(n.translate())):n.scale()},u.translate=function(f){if(!arguments.length)return n.translate();var d=n.scale(),g=+f[0],m=+f[1];return i=n.translate(f).clipExtent([[g-.455*d,m-.238*d],[g+.455*d,m+.238*d]]).stream(c),s=r.translate([g-.307*d,m+.201*d]).clipExtent([[g-.425*d+Se,m+.12*d+Se],[g-.214*d-Se,m+.234*d-Se]]).stream(c),a=o.translate([g-.205*d,m+.212*d]).clipExtent([[g-.214*d+Se,m+.166*d+Se],[g-.115*d-Se,m+.234*d-Se]]).stream(c),h()},u.fitExtent=function(f,d){return B2(u,f,d)},u.fitSize=function(f,d){return K$(u,f,d)},u.fitWidth=function(f,d){return J$(u,f,d)},u.fitHeight=function(f,d){return Q$(u,f,d)};function h(){return t=e=null,u}return u.scale(1070)}function nO(t){return function(e,n){var i=Me(e),r=Me(n),s=t(i*r);return s===1/0?[2,0]:[s*r*xe(e),s*xe(n)]}}function Ld(t){return function(e,n){var i=Yn(e*e+n*n),r=t(i),s=xe(r),o=Me(r);return[Er(e*s,i*o),ci(i&&n*s/i)]}}var iO=nO(function(t){return Yn(2/(1+t))});iO.invert=Ld(function(t){return 2*ci(t/2)});function eY(){return Ta(iO).scale(124.75).clipAngle(180-.001)}var rO=nO(function(t){return(t=k$(t))&&t/xe(t)});rO.invert=Ld(function(t){return t});function tY(){return Ta(rO).scale(79.4188).clipAngle(180-.001)}function w_(t,e){return[t,Sp(z2((Dt+e)/2))]}w_.invert=function(t,e){return[t,2*eh(I$(e))-Dt]};function nY(){return sO(w_).scale(961/xi)}function sO(t){var e=Ta(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,c;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(n(h),u()):n()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=c=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var h=Be*i(),f=e(bU(e.rotate()).invert([0,0]));return s(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:t===w_?[[Math.max(f[0]-h,o),a],[Math.min(f[0]+h,l),c]]:[[o,Math.max(f[1]-h,a)],[l,Math.min(f[1]+h,c)]])}return u()}function Yg(t){return z2((Dt+t)/2)}function iY(t,e){var n=Me(t),i=t===e?xe(t):Sp(n/Me(e))/Sp(Yg(e)/Yg(t)),r=n*f1(Yg(t),i)/i;if(!i)return w_;function s(o,a){r>0?a<-Dt+Se&&(a=-Dt+Se):a>Dt-Se&&(a=Dt-Se);var l=r/f1(Yg(a),i);return[l*xe(i*o),r-l*Me(i*o)]}return s.invert=function(o,a){var l=r-a,c=Pi(i)*Yn(o*o+l*l),u=Er(o,nt(l))*Pi(l);return l*i<0&&(u-=Be*Pi(o)*Pi(l)),[u/i,2*eh(f1(r/c,1/i))-Dt]},s}function rY(){return V2(iY).scale(109.5).parallels([30,30])}function Gp(t,e){return[t,e]}Gp.invert=Gp;function sY(){return Ta(Gp).scale(152.63)}function oY(t,e){var n=Me(t),i=t===e?xe(t):(n-Me(e))/(e-t),r=n/i+t;if(nt(i)<Se)return Gp;function s(o,a){var l=r-a,c=i*o;return[l*xe(c),r-l*Me(c)]}return s.invert=function(o,a){var l=r-a,c=Er(o,nt(l))*Pi(l);return l*i<0&&(c-=Be*Pi(o)*Pi(l)),[c/i,r-Pi(i)*Yn(o*o+l*l)]},s}function aY(){return V2(oY).scale(131.154).center([0,13.9389])}var xf=1.340264,Ef=-.081106,Tf=893e-6,Sf=.003796,Up=Yn(3)/2,lY=12;function oO(t,e){var n=ci(Up*xe(e)),i=n*n,r=i*i*i;return[t*Me(n)/(Up*(xf+3*Ef*i+r*(7*Tf+9*Sf*i))),n*(xf+Ef*i+r*(Tf+Sf*i))]}oO.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,o,a,l;s<lY&&(a=n*(xf+Ef*i+r*(Tf+Sf*i))-e,l=xf+3*Ef*i+r*(7*Tf+9*Sf*i),n-=o=a/l,i=n*n,r=i*i*i,!(nt(o)<Tp));++s);return[Up*t*(xf+3*Ef*i+r*(7*Tf+9*Sf*i))/Me(n),ci(xe(n)/Up)]};function cY(){return Ta(oO).scale(177.158)}function aO(t,e){var n=Me(e),i=Me(t)*n;return[n*xe(t)/i,xe(e)/i]}aO.invert=Ld(eh);function uY(){return Ta(aO).scale(144.049).clipAngle(60)}function lO(t,e){return[Me(e)*xe(t),xe(e)]}lO.invert=Ld(ci);function hY(){return Ta(lO).scale(249.5).clipAngle(90+Se)}function cO(t,e){var n=Me(e),i=1+Me(t)*n;return[n*xe(t)/i,xe(e)/i]}cO.invert=Ld(function(t){return 2*eh(t)});function fY(){return Ta(cO).scale(250).clipAngle(142)}function uO(t,e){return[Sp(z2((Dt+e)/2)),-t]}uO.invert=function(t,e){return[-e,2*eh(I$(t))-Dt]};function dY(){var t=sO(uO),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function gY(t,e){return t.parent===e.parent?1:2}function mY(t){return t.reduce(pY,0)/t.length}function pY(t,e){return t+e.x}function _Y(t){return 1+t.reduce(yY,0)}function yY(t,e){return Math.max(t,e.y)}function vY(t){for(var e;e=t.children;)t=e[0];return t}function bY(t){for(var e;e=t.children;)t=e[e.length-1];return t}function hO(){var t=gY,e=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(f){var d=f.children;d?(f.x=mY(d),f.y=_Y(d)):(f.x=o?a+=t(f,o):0,f.y=0,o=f)});var l=vY(s),c=bY(s),u=l.x-t(l,c)/2,h=c.x+t(c,l)/2;return s.eachAfter(i?function(f){f.x=(f.x-s.x)*e,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-u)/(h-u)*e,f.y=(1-(s.y?f.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(t=s,r):t},r.size=function(s){return arguments.length?(i=!1,e=+s[0],n=+s[1],r):i?null:[e,n]},r.nodeSize=function(s){return arguments.length?(i=!0,e=+s[0],n=+s[1],r):i?[e,n]:null},r}function wY(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function xY(){return this.eachAfter(wY)}function EY(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function TY(t,e){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(t.call(e,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function SY(t,e){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function CY(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function MY(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function AY(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function RY(t){for(var e=this,n=IY(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function IY(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function kY(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function $Y(){return Array.from(this)}function OY(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function LY(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*NY(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function fO(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=PY)):e===void 0&&(e=FY);for(var n=new wu(t),i,r=[n],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new wu(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(dO)}function DY(){return fO(this).eachBefore(zY)}function FY(t){return t.children}function PY(t){return Array.isArray(t)?t[1]:null}function zY(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function dO(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function wu(t){this.data=t,this.depth=this.height=0,this.parent=null}wu.prototype=fO.prototype={constructor:wu,count:xY,each:EY,eachAfter:SY,eachBefore:TY,find:CY,sum:MY,sort:AY,path:RY,ancestors:kY,descendants:$Y,leaves:OY,links:LY,copy:DY,[Symbol.iterator]:NY};function _1(t){return t==null?null:WY(t)}function WY(t){if(typeof t!="function")throw new Error;return t}var HY={depth:-1},nM={},y1={};function BY(t){return t.id}function VY(t){return t.parentId}function gO(){var t=BY,e=VY,n;function i(r){var s=Array.from(r),o=t,a=e,l,c,u,h,f,d,g,m,_=new Map;if(n!=null){const y=s.map((v,E)=>GY(n(v,E,r))),p=y.map(iM),b=new Set(y).add("");for(const v of p)b.has(v)||(b.add(v),y.push(v),p.push(iM(v)),s.push(y1));o=(v,E)=>y[E],a=(v,E)=>p[E]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new wu(c),(g=o(c,u,r))!=null&&(g+="")&&(m=d.id=g,_.set(m,_.has(m)?nM:d)),(g=a(c,u,r))!=null&&(g+="")&&(d.parent=g);for(u=0;u<l;++u)if(d=s[u],g=d.parent){if(f=_.get(g),!f)throw new Error("missing: "+g);if(f===nM)throw new Error("ambiguous: "+g);f.children?f.children.push(d):f.children=[d],d.parent=f}else{if(h)throw new Error("multiple roots");h=d}if(!h)throw new Error("no root");if(n!=null){for(;h.data===y1&&h.children.length===1;)h=h.children[0],--l;for(let y=s.length-1;y>=0&&(d=s[y],d.data===y1);--y)d.data=null}if(h.parent=HY,h.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(dO),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(t=_1(r),i):t},i.parentId=function(r){return arguments.length?(e=_1(r),i):e},i.path=function(r){return arguments.length?(n=_1(r),i):n},i}function GY(t){t=`${t}`;let e=t.length;return Bb(t,e-1)&&!Bb(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function iM(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Bb(t,e););return t.slice(0,e)}function Bb(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function UY(t,e){return t.parent===e.parent?1:2}function v1(t){var e=t.children;return e?e[0]:t.t}function b1(t){var e=t.children;return e?e[e.length-1]:t.t}function YY(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function jY(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function qY(t,e,n){return t.a.parent===e.parent?t.a:n}function qm(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}qm.prototype=Object.create(wu.prototype);function XY(t){for(var e=new qm(t,0),n,i=[e],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new qm(s[o],o)),r.parent=n;return(e.parent=new qm(null,0)).children=[e],e}function Yp(){var t=UY,e=1,n=1,i=null;function r(c){var u=XY(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),i)c.eachBefore(l);else{var h=c,f=c,d=c;c.eachBefore(function(p){p.x<h.x&&(h=p),p.x>f.x&&(f=p),p.depth>d.depth&&(d=p)});var g=h===f?1:t(h,f)/2,m=g-h.x,_=e/(f.x+g+m),y=n/(d.depth||1);c.eachBefore(function(p){p.x=(p.x+m)*_,p.y=p.depth*y})}return c}function s(c){var u=c.children,h=c.parent.children,f=c.i?h[c.i-1]:null;if(u){jY(c);var d=(u[0].z+u[u.length-1].z)/2;f?(c.z=f.z+t(c._,f._),c.m=c.z-d):c.z=d}else f&&(c.z=f.z+t(c._,f._));c.parent.A=a(c,f,c.parent.A||h[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,h){if(u){for(var f=c,d=c,g=u,m=f.parent.children[0],_=f.m,y=d.m,p=g.m,b=m.m,v;g=b1(g),f=v1(f),g&&f;)m=v1(m),d=b1(d),d.a=c,v=g.z+p-f.z-_+t(g._,f._),v>0&&(YY(qY(g,c,h),c,v),_+=v,y+=v),p+=g.m,_+=f.m,b+=m.m,y+=d.m;g&&!b1(d)&&(d.t=g,d.m+=p-y),f&&!v1(m)&&(m.t=f,m.m+=_-b,h=c)}return h}function l(c){c.x*=e,c.y=c.depth*n}return r.separation=function(c){return arguments.length?(t=c,r):t},r.size=function(c){return arguments.length?(i=!1,e=+c[0],n=+c[1],r):i?null:[e,n]},r.nodeSize=function(c){return arguments.length?(i=!0,e=+c[0],n=+c[1],r):i?[e,n]:null},r}const ZY=1664525,KY=1013904223,rM=1/4294967296;function G2(t=Math.random()){let e=(0<=t&&t<1?t/rM:Math.abs(t))|0;return()=>(e=ZY*e+KY|0,rM*(e>>>0))}function us(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Nd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Vb=Symbol("implicit");function U2(){var t=new Il,e=[],n=[],i=Vb;function r(s){let o=t.get(s);if(o===void 0){if(i!==Vb)return i;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Il;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return U2(e,n).unknown(i)},us.apply(r,arguments),r}function x_(){var t=U2().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,d=r<i,g=d?r:i,m=d?i:r;s=(m-g)/Math.max(1,f-l+c*2),a&&(s=Math.floor(s)),g+=(m-g-s*(f-l))*u,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var _=Fi(f).map(function(y){return g+s*y});return n(d?_.reverse():_)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([i,r]=f,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(f){return[i,r]=f,i=+i,r=+r,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,h()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return x_(e(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},us.apply(h(),arguments)}function mO(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return mO(e())},t}function JY(){return mO(x_.apply(null,arguments).paddingInner(1))}function QY(t){return function(){return t}}function Gb(t){return+t}var sM=[0,1];function si(t){return t}function Ub(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:QY(isNaN(e)?NaN:.5)}function ej(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function tj(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=Ub(r,i),s=n(o,s)):(i=Ub(i,r),s=n(s,o)),function(a){return s(i(a))}}function nj(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=Ub(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=c_(t,a,1,i)-1;return s[l](r[l](a))}}function Dd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function E_(){var t=sM,e=sM,n=Qu,i,r,s,o=si,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==si&&(o=ej(t[0],t[f-1])),a=f>2?nj:tj,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(i),e,n)))(i(o(f)))}return h.invert=function(f){return o(r((c||(c=a(e,t.map(i),xn)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Gb),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=p_,u()},h.clamp=function(f){return arguments.length?(o=f?!0:si,u()):o!==si},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return i=f,r=d,u()}}function pO(){return E_()(si,si)}function ij(t,e,n,i){var r=lb(t,e,n),s;switch(i=Xf(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=fU(r,o))&&(i.precision=s),R$(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=dU(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=hU(r))&&(i.precision=s-(i.type==="%")*2);break}}return xa(i)}function th(t){var e=t.domain;return t.ticks=function(n){var i=e();return sa(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return ij(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=Gf(o,a,n),c===l)return i[r]=o,i[s]=a,e(i);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Vs(){var t=pO();return t.copy=function(){return Dd(t,Vs())},us.apply(t,arguments),th(t)}function _O(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Gb),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return _O(t).unknown(e)},t=arguments.length?Array.from(t,Gb):[0,1],th(n)}function yO(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function oM(t){return Math.log(t)}function aM(t){return Math.exp(t)}function rj(t){return-Math.log(-t)}function sj(t){return-Math.exp(-t)}function oj(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aj(t){return t===10?oj:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lj(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lM(t){return(e,n)=>-t(-e,n)}function vO(t){const e=t(oM,aM),n=e.domain;let i=10,r,s;function o(){return r=lj(i),s=aj(i),n()[0]<0?(r=lM(r),s=lM(s),t(rj,sj)):t(oM,aM),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=r(c),d=r(u),g,m;const _=a==null?10:+a;let y=[];if(!(i%1)&&d-f<_){if(f=Math.floor(f),d=Math.ceil(d),c>0){for(;f<=d;++f)for(g=1;g<i;++g)if(m=f<0?g/s(-f):g*s(f),!(m<c)){if(m>u)break;y.push(m)}}else for(;f<=d;++f)for(g=i-1;g>=1;--g)if(m=f>0?g/s(-f):g*s(f),!(m<c)){if(m>u)break;y.push(m)}y.length*2<_&&(y=sa(c,u,_))}else y=sa(f,d,Math.min(d-f,_)).map(s);return h?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Xf(l)).precision==null&&(l.trim=!0),l=xa(l)),a===1/0)return l;const c=Math.max(1,i*a/e.ticks().length);return u=>{let h=u/s(Math.round(r(u)));return h*i<i-.5&&(h*=i),h<=c?l(u):""}},e.nice=()=>n(yO(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),e}function bO(){const t=vO(E_()).domain([1,10]);return t.copy=()=>Dd(t,bO()).base(t.base()),us.apply(t,arguments),t}function cM(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function wO(t){var e=1,n=t(cM(e),uM(e));return n.constant=function(i){return arguments.length?t(cM(e=+i),uM(e)):e},th(n)}function xO(){var t=wO(E_());return t.copy=function(){return Dd(t,xO()).constant(t.constant())},us.apply(t,arguments)}function hM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function cj(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uj(t){return t<0?-t*t:t*t}function EO(t){var e=t(si,si),n=1;function i(){return n===1?t(si,si):n===.5?t(cj,uj):t(hM(n),hM(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},th(e)}function TO(){var t=EO(E_());return t.copy=function(){return Dd(t,TO()).exponent(t.exponent())},us.apply(t,arguments),t}function SO(){var t=[],e=[],n=[],i;function r(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=NW(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:e[c_(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Rt),r()},s.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return SO().domain(t).range(e).unknown(i)},us.apply(s,arguments)}function CO(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[c_(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return CO().domain(t).range(e).unknown(n)},us.apply(r,arguments)}const w1=new Date,x1=new Date;function tn(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},r.filter=s=>tn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(r.count=(s,o)=>(w1.setTime(+s),x1.setTime(+o),t(w1),t(x1),Math.floor(n(w1,x1))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const jp=tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):jp);jp.range;const Ns=1e3,zi=Ns*60,Ds=zi*60,Js=Ds*24,Y2=Js*7,fM=Js*30,E1=Js*365,Ur=tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ns)},(t,e)=>(e-t)/Ns,t=>t.getUTCSeconds());Ur.range;const T_=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ns)},(t,e)=>{t.setTime(+t+e*zi)},(t,e)=>(e-t)/zi,t=>t.getMinutes());T_.range;const Fd=tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*zi)},(t,e)=>(e-t)/zi,t=>t.getUTCMinutes());Fd.range;const S_=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ns-t.getMinutes()*zi)},(t,e)=>{t.setTime(+t+e*Ds)},(t,e)=>(e-t)/Ds,t=>t.getHours());S_.range;const Pd=tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ds)},(t,e)=>(e-t)/Ds,t=>t.getUTCHours());Pd.range;const Gl=tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zi)/Js,t=>t.getDate()-1);Gl.range;const C_=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Js,t=>t.getUTCDate()-1);C_.range;const M_=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Js,t=>Math.floor(t/Js));M_.range;function Ul(t){return tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*zi)/Y2)}const xu=Ul(0),Kf=Ul(1),MO=Ul(2),AO=Ul(3),Fl=Ul(4),RO=Ul(5),IO=Ul(6);xu.range;Kf.range;MO.range;AO.range;Fl.range;RO.range;IO.range;function Yl(t){return tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Y2)}const Eu=Yl(0),Jf=Yl(1),kO=Yl(2),$O=Yl(3),Pl=Yl(4),OO=Yl(5),LO=Yl(6);Eu.range;Jf.range;kO.range;$O.range;Pl.range;OO.range;LO.range;const zd=tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());zd.range;const Wd=tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Wd.range;const Tr=tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Tr.range;const Sr=tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Sr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Sr.range;function NO(t,e,n,i,r,s){const o=[[Ur,1,Ns],[Ur,5,5*Ns],[Ur,15,15*Ns],[Ur,30,30*Ns],[s,1,zi],[s,5,5*zi],[s,15,15*zi],[s,30,30*zi],[r,1,Ds],[r,3,3*Ds],[r,6,6*Ds],[r,12,12*Ds],[i,1,Js],[i,2,2*Js],[n,1,Y2],[e,1,fM],[e,3,3*fM],[t,1,E1]];function a(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),g=d?d.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,h){const f=Math.abs(u-c)/h,d=l_(([,,_])=>_).right(o,f);if(d===o.length)return t.every(lb(c/E1,u/E1,h));if(d===0)return jp.every(Math.max(lb(c,u,h),1));const[g,m]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return g.every(m)}return[a,l]}const[hj,DO]=NO(Sr,Wd,Eu,M_,Pd,Fd),[fj,dj]=NO(Tr,zd,xu,Gl,S_,T_);function T1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function S1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Lh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function gj(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Nh(r),u=Dh(r),h=Nh(s),f=Dh(s),d=Nh(o),g=Dh(o),m=Nh(a),_=Dh(a),y=Nh(l),p=Dh(l),b={a:D,A:H,b:q,B:G,c:null,d:yM,e:yM,f:Fj,g:jj,G:Xj,H:Lj,I:Nj,j:Dj,L:FO,m:Pj,M:zj,p:J,q:W,Q:wM,s:xM,S:Wj,u:Hj,U:Bj,V:Vj,w:Gj,W:Uj,x:null,X:null,y:Yj,Y:qj,Z:Zj,"%":bM},v={a:ie,A:se,b:le,B:ce,c:null,d:vM,e:vM,f:eq,g:uq,G:fq,H:Kj,I:Jj,j:Qj,L:zO,m:tq,M:nq,p:z,q:U,Q:wM,s:xM,S:iq,u:rq,U:sq,V:oq,w:aq,W:lq,x:null,X:null,y:cq,Y:hq,Z:dq,"%":bM},E={a:S,A:R,b:I,B:N,c:O,d:pM,e:pM,f:Ij,g:mM,G:gM,H:_M,I:_M,j:Cj,L:Rj,m:Sj,M:Mj,p:M,q:Tj,Q:$j,s:Oj,S:Aj,u:vj,U:bj,V:wj,w:yj,W:xj,x:k,X:L,y:mM,Y:gM,Z:Ej,"%":kj};b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),v.x=w(n,v),v.X=w(i,v),v.c=w(e,v);function w(P,Y){return function(te){var A=[],$=-1,F=0,B=P.length,V,Z,ue;for(te instanceof Date||(te=new Date(+te));++$<B;)P.charCodeAt($)===37&&(A.push(P.slice(F,$)),(Z=dM[V=P.charAt(++$)])!=null?V=P.charAt(++$):Z=V==="e"?" ":"0",(ue=Y[V])&&(V=ue(te,Z)),A.push(V),F=$+1);return A.push(P.slice(F,$)),A.join("")}}function T(P,Y){return function(te){var A=Lh(1900,void 0,1),$=C(A,P,te+="",0),F,B;if($!=te.length)return null;if("Q"in A)return new Date(A.Q);if("s"in A)return new Date(A.s*1e3+("L"in A?A.L:0));if(Y&&!("Z"in A)&&(A.Z=0),"p"in A&&(A.H=A.H%12+A.p*12),A.m===void 0&&(A.m="q"in A?A.q:0),"V"in A){if(A.V<1||A.V>53)return null;"w"in A||(A.w=1),"Z"in A?(F=S1(Lh(A.y,0,1)),B=F.getUTCDay(),F=B>4||B===0?Jf.ceil(F):Jf(F),F=C_.offset(F,(A.V-1)*7),A.y=F.getUTCFullYear(),A.m=F.getUTCMonth(),A.d=F.getUTCDate()+(A.w+6)%7):(F=T1(Lh(A.y,0,1)),B=F.getDay(),F=B>4||B===0?Kf.ceil(F):Kf(F),F=Gl.offset(F,(A.V-1)*7),A.y=F.getFullYear(),A.m=F.getMonth(),A.d=F.getDate()+(A.w+6)%7)}else("W"in A||"U"in A)&&("w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0),B="Z"in A?S1(Lh(A.y,0,1)).getUTCDay():T1(Lh(A.y,0,1)).getDay(),A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(B+5)%7:A.w+A.U*7-(B+6)%7);return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,S1(A)):T1(A)}}function C(P,Y,te,A){for(var $=0,F=Y.length,B=te.length,V,Z;$<F;){if(A>=B)return-1;if(V=Y.charCodeAt($++),V===37){if(V=Y.charAt($++),Z=E[V in dM?Y.charAt($++):V],!Z||(A=Z(P,te,A))<0)return-1}else if(V!=te.charCodeAt(A++))return-1}return A}function M(P,Y,te){var A=c.exec(Y.slice(te));return A?(P.p=u.get(A[0].toLowerCase()),te+A[0].length):-1}function S(P,Y,te){var A=d.exec(Y.slice(te));return A?(P.w=g.get(A[0].toLowerCase()),te+A[0].length):-1}function R(P,Y,te){var A=h.exec(Y.slice(te));return A?(P.w=f.get(A[0].toLowerCase()),te+A[0].length):-1}function I(P,Y,te){var A=y.exec(Y.slice(te));return A?(P.m=p.get(A[0].toLowerCase()),te+A[0].length):-1}function N(P,Y,te){var A=m.exec(Y.slice(te));return A?(P.m=_.get(A[0].toLowerCase()),te+A[0].length):-1}function O(P,Y,te){return C(P,e,Y,te)}function k(P,Y,te){return C(P,n,Y,te)}function L(P,Y,te){return C(P,i,Y,te)}function D(P){return o[P.getDay()]}function H(P){return s[P.getDay()]}function q(P){return l[P.getMonth()]}function G(P){return a[P.getMonth()]}function J(P){return r[+(P.getHours()>=12)]}function W(P){return 1+~~(P.getMonth()/3)}function ie(P){return o[P.getUTCDay()]}function se(P){return s[P.getUTCDay()]}function le(P){return l[P.getUTCMonth()]}function ce(P){return a[P.getUTCMonth()]}function z(P){return r[+(P.getUTCHours()>=12)]}function U(P){return 1+~~(P.getUTCMonth()/3)}return{format:function(P){var Y=w(P+="",b);return Y.toString=function(){return P},Y},parse:function(P){var Y=T(P+="",!1);return Y.toString=function(){return P},Y},utcFormat:function(P){var Y=w(P+="",v);return Y.toString=function(){return P},Y},utcParse:function(P){var Y=T(P+="",!0);return Y.toString=function(){return P},Y}}}var dM={"-":"",_:" ",0:"0"},dn=/^\s*\d+/,mj=/^%/,pj=/[\\^$*+?|[\]().{}]/g;function Je(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function _j(t){return t.replace(pj,"\\$&")}function Nh(t){return new RegExp("^(?:"+t.map(_j).join("|")+")","i")}function Dh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yj(t,e,n){var i=dn.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function vj(t,e,n){var i=dn.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function bj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function wj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function xj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function gM(t,e,n){var i=dn.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function mM(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ej(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Tj(t,e,n){var i=dn.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Sj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function pM(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Cj(t,e,n){var i=dn.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function _M(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Mj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Aj(t,e,n){var i=dn.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Rj(t,e,n){var i=dn.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Ij(t,e,n){var i=dn.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function kj(t,e,n){var i=mj.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function $j(t,e,n){var i=dn.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Oj(t,e,n){var i=dn.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function yM(t,e){return Je(t.getDate(),e,2)}function Lj(t,e){return Je(t.getHours(),e,2)}function Nj(t,e){return Je(t.getHours()%12||12,e,2)}function Dj(t,e){return Je(1+Gl.count(Tr(t),t),e,3)}function FO(t,e){return Je(t.getMilliseconds(),e,3)}function Fj(t,e){return FO(t,e)+"000"}function Pj(t,e){return Je(t.getMonth()+1,e,2)}function zj(t,e){return Je(t.getMinutes(),e,2)}function Wj(t,e){return Je(t.getSeconds(),e,2)}function Hj(t){var e=t.getDay();return e===0?7:e}function Bj(t,e){return Je(xu.count(Tr(t)-1,t),e,2)}function PO(t){var e=t.getDay();return e>=4||e===0?Fl(t):Fl.ceil(t)}function Vj(t,e){return t=PO(t),Je(Fl.count(Tr(t),t)+(Tr(t).getDay()===4),e,2)}function Gj(t){return t.getDay()}function Uj(t,e){return Je(Kf.count(Tr(t)-1,t),e,2)}function Yj(t,e){return Je(t.getFullYear()%100,e,2)}function jj(t,e){return t=PO(t),Je(t.getFullYear()%100,e,2)}function qj(t,e){return Je(t.getFullYear()%1e4,e,4)}function Xj(t,e){var n=t.getDay();return t=n>=4||n===0?Fl(t):Fl.ceil(t),Je(t.getFullYear()%1e4,e,4)}function Zj(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Je(e/60|0,"0",2)+Je(e%60,"0",2)}function vM(t,e){return Je(t.getUTCDate(),e,2)}function Kj(t,e){return Je(t.getUTCHours(),e,2)}function Jj(t,e){return Je(t.getUTCHours()%12||12,e,2)}function Qj(t,e){return Je(1+C_.count(Sr(t),t),e,3)}function zO(t,e){return Je(t.getUTCMilliseconds(),e,3)}function eq(t,e){return zO(t,e)+"000"}function tq(t,e){return Je(t.getUTCMonth()+1,e,2)}function nq(t,e){return Je(t.getUTCMinutes(),e,2)}function iq(t,e){return Je(t.getUTCSeconds(),e,2)}function rq(t){var e=t.getUTCDay();return e===0?7:e}function sq(t,e){return Je(Eu.count(Sr(t)-1,t),e,2)}function WO(t){var e=t.getUTCDay();return e>=4||e===0?Pl(t):Pl.ceil(t)}function oq(t,e){return t=WO(t),Je(Pl.count(Sr(t),t)+(Sr(t).getUTCDay()===4),e,2)}function aq(t){return t.getUTCDay()}function lq(t,e){return Je(Jf.count(Sr(t)-1,t),e,2)}function cq(t,e){return Je(t.getUTCFullYear()%100,e,2)}function uq(t,e){return t=WO(t),Je(t.getUTCFullYear()%100,e,2)}function hq(t,e){return Je(t.getUTCFullYear()%1e4,e,4)}function fq(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Pl(t):Pl.ceil(t),Je(t.getUTCFullYear()%1e4,e,4)}function dq(){return"+0000"}function bM(){return"%"}function wM(t){return+t}function xM(t){return Math.floor(+t/1e3)}var hc,j2,Hd;gq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gq(t){return hc=gj(t),j2=hc.format,hc.parse,Hd=hc.utcFormat,hc.utcParse,hc}function mq(t){return new Date(t)}function pq(t){return t instanceof Date?+t:+new Date(+t)}function q2(t,e,n,i,r,s,o,a,l,c){var u=pO(),h=u.invert,f=u.domain,d=c(".%L"),g=c(":%S"),m=c("%I:%M"),_=c("%I %p"),y=c("%a %d"),p=c("%b %d"),b=c("%B"),v=c("%Y");function E(w){return(l(w)<w?d:a(w)<w?g:o(w)<w?m:s(w)<w?_:i(w)<w?r(w)<w?y:p:n(w)<w?b:v)(w)}return u.invert=function(w){return new Date(h(w))},u.domain=function(w){return arguments.length?f(Array.from(w,pq)):f().map(mq)},u.ticks=function(w){var T=f();return t(T[0],T[T.length-1],w??10)},u.tickFormat=function(w,T){return T==null?E:c(T)},u.nice=function(w){var T=f();return(!w||typeof w.range!="function")&&(w=e(T[0],T[T.length-1],w??10)),w?f(yO(T,w)):u},u.copy=function(){return Dd(u,q2(t,e,n,i,r,s,o,a,l,c))},u}function HO(){return us.apply(q2(fj,dj,Tr,zd,xu,Gl,S_,T_,Ur,j2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _q(){return us.apply(q2(hj,DO,Sr,Wd,Eu,C_,Pd,Fd,Ur,Hd).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yq(){var t=0,e=1,n,i,r,s,o=si,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(r===0?.5:(h=(s(h)-n)*r,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(f){var d,g;return arguments.length?([d,g]=f,o=h(d,g),c):[o(0),o(1)]}}return c.range=u(Qu),c.rangeRound=u(p_),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),i=h(e),r=n===i?0:1/(i-n),c}}function Bd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function BO(){var t=th(yq()(si));return t.copy=function(){return Bd(t,BO())},Nd.apply(t,arguments)}function A_(){var t=0,e=.5,n=1,i=1,r,s,o,a,l,c=si,u,h=!1,f;function d(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-s)*(i*m<i*s?a:l),c(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),s=u(e=+e),o=u(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(c=m,d):c};function g(m){return function(_){var y,p,b;return arguments.length?([y,p,b]=_,c=__(m,[y,p,b]),d):[c(0),c(.5),c(1)]}}return d.range=g(Qu),d.rangeRound=g(p_),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return u=m,r=m(t),s=m(e),o=m(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function VO(){var t=th(A_()(si));return t.copy=function(){return Bd(t,VO())},Nd.apply(t,arguments)}function GO(){var t=vO(A_()).domain([.1,1,10]);return t.copy=function(){return Bd(t,GO()).base(t.base())},Nd.apply(t,arguments)}function UO(){var t=wO(A_());return t.copy=function(){return Bd(t,UO()).constant(t.constant())},Nd.apply(t,arguments)}function YO(){var t=EO(A_());return t.copy=function(){return Bd(t,YO()).exponent(t.exponent())},Nd.apply(t,arguments)}function Fe(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const vq=Fe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bq=Fe("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),wq=Fe("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xq=Fe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Eq=Fe("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Tq=Fe("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Sq=Fe("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Cq=Fe("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Mq=Fe("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Aq=Fe("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),gt=t=>d$(t[t.length-1]);var jO=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Fe);const qO=gt(jO);var XO=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Fe);const ZO=gt(XO);var KO=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Fe);const JO=gt(KO);var QO=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Fe);const eL=gt(QO);var Yb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Fe);const qp=gt(Yb);var tL=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Fe);const nL=gt(tL);var jb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Fe);const Xp=gt(jb);var iL=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Fe);const rL=gt(iL);var sL=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Fe);const oL=gt(sL);var aL=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Fe);const lL=gt(aL);var cL=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Fe);const uL=gt(cL);var hL=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Fe);const fL=gt(hL);var dL=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Fe);const gL=gt(dL);var mL=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Fe);const pL=gt(mL);var _L=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Fe);const yL=gt(_L);var vL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Fe);const bL=gt(vL);var wL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Fe);const xL=gt(wL);var EL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Fe);const TL=gt(EL);var SL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Fe);const CL=gt(SL);var ML=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Fe);const AL=gt(ML);var RL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Fe);const IL=gt(RL);var kL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Fe);const $L=gt(kL);var OL=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Fe);const LL=gt(OL);var NL=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Fe);const DL=gt(NL);var FL=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Fe);const PL=gt(FL);var zL=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Fe);const WL=gt(zL);var HL=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Fe);const BL=gt(HL);function VL(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const GL=L2(as(300,.5,0),as(-240,.5,1));var UL=L2(as(-100,.75,.35),as(80,1.5,.8)),YL=L2(as(260,.75,.35),as(80,1.5,.8)),jg=as();function jL(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return jg.h=360*t-100,jg.s=1.5-1.5*e,jg.l=.8-.9*e,jg+""}var qg=os(),Rq=Math.PI/3,Iq=Math.PI*2/3;function qL(t){var e;return t=(.5-t)*Math.PI,qg.r=255*(e=Math.sin(t))*e,qg.g=255*(e=Math.sin(t+Rq))*e,qg.b=255*(e=Math.sin(t+Iq))*e,qg+""}function XL(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function R_(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const ZL=R_(Fe("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var KL=R_(Fe("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),JL=R_(Fe("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),QL=R_(Fe("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function an(t){return function(){return t}}const e5=Math.cos,X2=Math.min,Zp=Math.sin,nn=Math.sqrt,EM=1e-12,Kp=Math.PI,I_=2*Kp;function t5(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new C$(e)}function n5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function i5(t){this._context=t}i5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Vd(t){return new i5(t)}function r5(t){return t[0]}function s5(t){return t[1]}function Z2(t,e){var n=an(!0),i=null,r=Vd,s=null,o=t5(a);t=typeof t=="function"?t:t===void 0?r5:an(t),e=typeof e=="function"?e:e===void 0?s5:an(e);function a(l){var c,u=(l=n5(l)).length,h,f=!1,d;for(i==null&&(s=r(d=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,c,l),+e(h,c,l));if(d)return s=null,d+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:an(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:an(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:an(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function Tu(t,e,n){var i=null,r=an(!0),s=null,o=Vd,a=null,l=t5(c);t=typeof t=="function"?t:t===void 0?r5:an(+t),e=typeof e=="function"?e:an(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?s5:an(+n);function c(h){var f,d,g,m=(h=n5(h)).length,_,y=!1,p,b=new Array(m),v=new Array(m);for(s==null&&(a=o(p=l())),f=0;f<=m;++f){if(!(f<m&&r(_=h[f],f,h))===y)if(y=!y)d=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=f-1;g>=d;--g)a.point(b[g],v[g]);a.lineEnd(),a.areaEnd()}y&&(b[f]=+t(_,f,h),v[f]=+e(_,f,h),a.point(i?+i(_,f,h):b[f],n?+n(_,f,h):v[f]))}if(p)return a=null,p+""||null}function u(){return Z2().defined(r).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:an(+h),i=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:an(+h),c):t},c.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:an(+h),c):i},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:an(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:an(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:an(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(i).y(e)},c.defined=function(h){return arguments.length?(r=typeof h=="function"?h:an(!!h),c):r},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}class o5{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function kq(t){return new o5(t,!0)}function $q(t){return new o5(t,!1)}const Oq=nn(3),a5={draw(t,e){const n=nn(e+X2(e/28,.75))*.59436,i=n/2,r=i*Oq;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Qf={draw(t,e){const n=nn(e/Kp);t.moveTo(n,0),t.arc(0,0,n,0,I_)}},l5={draw(t,e){const n=nn(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},c5=nn(1/3),Lq=c5*2,u5={draw(t,e){const n=nn(e/Lq),i=n*c5;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},h5={draw(t,e){const n=nn(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},f5={draw(t,e){const n=nn(e-X2(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},d5={draw(t,e){const n=nn(e),i=-n/2;t.rect(i,i,n,n)}},g5={draw(t,e){const n=nn(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},Nq=.8908130915292852,m5=Zp(Kp/10)/Zp(7*Kp/10),Dq=Zp(I_/10)*m5,Fq=-e5(I_/10)*m5,p5={draw(t,e){const n=nn(e*Nq),i=Dq*n,r=Fq*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const o=I_*s/5,a=e5(o),l=Zp(o);t.lineTo(l*n,-a*n),t.lineTo(a*i-l*r,l*i+a*r)}t.closePath()}},C1=nn(3),_5={draw(t,e){const n=-nn(e/(C1*3));t.moveTo(0,n*2),t.lineTo(-C1*n,-n),t.lineTo(C1*n,-n),t.closePath()}},Pq=nn(3),y5={draw(t,e){const n=nn(e)*.6824,i=n/2,r=n*Pq/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},$i=-.5,Oi=nn(3)/2,qb=1/nn(12),zq=(qb/2+1)*3,v5={draw(t,e){const n=nn(e/zq),i=n/2,r=n*qb,s=i,o=n*qb+n,a=-s,l=o;t.moveTo(i,r),t.lineTo(s,o),t.lineTo(a,l),t.lineTo($i*i-Oi*r,Oi*i+$i*r),t.lineTo($i*s-Oi*o,Oi*s+$i*o),t.lineTo($i*a-Oi*l,Oi*a+$i*l),t.lineTo($i*i+Oi*r,$i*r-Oi*i),t.lineTo($i*s+Oi*o,$i*o-Oi*s),t.lineTo($i*a+Oi*l,$i*l-Oi*a),t.closePath()}},b5={draw(t,e){const n=nn(e-X2(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},Wq=[Qf,l5,u5,d5,p5,_5,v5],Hq=[Qf,f5,b5,y5,a5,g5,h5];function aa(){}function Jp(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function k_(t){this._context=t}k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ed(t){return new k_(t)}function w5(t){this._context=t}w5.prototype={areaStart:aa,areaEnd:aa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Jp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bq(t){return new w5(t)}function x5(t){this._context=t}x5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Jp(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vq(t){return new x5(t)}function E5(t,e){this._basis=new k_(t),this._beta=e}E5.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],s=t[n]-i,o=e[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Gq=function t(e){function n(i){return e===1?new k_(i):new E5(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Qp(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function K2(t,e){this._context=t,this._k=(1-e)/6}K2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qp(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Qp(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Uq=function t(e){function n(i){return new K2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function J2(t,e){this._context=t,this._k=(1-e)/6}J2.prototype={areaStart:aa,areaEnd:aa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Qp(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Yq=function t(e){function n(i){return new J2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Q2(t,e){this._context=t,this._k=(1-e)/6}Q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qp(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const jq=function t(e){function n(i){return new Q2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ex(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>EM){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>EM){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function T5(t,e){this._context=t,this._alpha=e}T5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ex(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qq=function t(e){function n(i){return e?new T5(i,e):new K2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function S5(t,e){this._context=t,this._alpha=e}S5.prototype={areaStart:aa,areaEnd:aa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ex(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Xq=function t(e){function n(i){return e?new S5(i,e):new J2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function C5(t,e){this._context=t,this._alpha=e}C5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ex(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Zq=function t(e){function n(i){return e?new C5(i,e):new Q2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function M5(t){this._context=t}M5.prototype={areaStart:aa,areaEnd:aa,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Kq(t){return new M5(t)}function TM(t){return t<0?-1:1}function SM(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(TM(s)+TM(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function CM(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function M1(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function e0(t){this._context=t}e0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:M1(this,this._t0,CM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,M1(this,CM(this,n=SM(this,t,e)),n);break;default:M1(this,this._t0,n=SM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function A5(t){this._context=new R5(t)}(A5.prototype=Object.create(e0.prototype)).point=function(t,e){e0.prototype.point.call(this,e,t)};function R5(t){this._context=t}R5.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function Jq(t){return new e0(t)}function Qq(t){return new A5(t)}function I5(t){this._context=t}I5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=MM(t),r=MM(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function MM(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function eX(t){return new I5(t)}function $_(t,e){this._context=t,this._t=e}$_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function tX(t){return new $_(t,.5)}function nX(t){return new $_(t,0)}function iX(t){return new $_(t,1)}function ff(t,e,n){this.k=t,this.x=e,this.y=n}ff.prototype={constructor:ff,scale:function(t){return t===1?this:new ff(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ff(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ff.prototype;class qi{constructor(e){ee(this,"title","");ee(this,"value","");const n=e;this.title=n==null?void 0:n.title,this.value=n==null?void 0:n.value}}const rX={props:{name:{type:String,required:!0},icon:String,recordField:{type:String,required:!0},graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},yLabel:{type:String,required:!0},unit:{type:String,required:!0},color:{type:String,required:!0},pointerColor:{type:String,default:"#78e08f"},receivedRecord:Ke,receivedRecordFreeze:Boolean,details:Array},data(){return{elemWidth:0,hoveredRecord:new Ke,hoveredRecordFreeze:new Boolean,recordView:new Ke,scaleByDistanceOrTimestamp:null}},watch:{receivedRecord:{handler(t){this.recordView=t;const e=ai(this.$refs[`${this.graphName}`]).select("g#pointer");if(JSON.stringify(t)==JSON.stringify(new Ke)){e.style("opacity",0);return}this.scaleByDistanceOrTimestamp!=null&&(e.style("opacity",1),e.attr("transform",`translate(${this.scaleByDistanceOrTimestamp(t)}, 0)`))}},receivedRecordFreeze:{handler(t){this.hoveredRecordFreeze=t,t||ai(this.$refs[`${this.graphName}`]).select("g#pointer").style("opacity",0)}},hoveredRecord:{handler(t){this.recordView=t,this.$emit("hoveredRecord",t)}},hoveredRecordFreeze:{handler(t){this.$emit("hoveredRecordFreeze",t)}},graphRecords:{handler(){this.$nextTick(()=>requestAnimationFrame(()=>this.renderGraph()))}}},computed:{hasDistance(){for(let t=0;t<this.graphRecords.length;t++)if(this.graphRecords[t].distance)return!0;return!1},graphName(){return this.name.toLowerCase().replace(/\s/g,"-")+"-graph"},graphContainerName(){return this.graphName+"-container"},xAxisLabel(){return this.hasDistance?"Dist. (km)":"Time"}},methods:{formatLabel(t){const e=typeof t=="number"?t:t.valueOf();return this.name=="Pace"?gu(e):(this.name=="Speed"&&(t=e*3600/1e3),xa("~s")(e))},renderGraph(){const t=this.graphRecords,e=5,n=10,i=20,r=40,s=this.elemWidth,o=190-i,a=s>720?10:5,l=3,c=ai(this.$refs[`${this.graphName}`]);if(c.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove(),t.length==0)return;const u=c.append("svg").attr("width",s).attr("height",o).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),h=Vs().domain(St(t,M=>(M.distance??0)/1e3)).range([r,s-n]),f=HO().domain(St(t,M=>new Date(M.timestamp).getTime())).range([r,s-n]),d=this.hasDistance?h:f;this.scaleByDistanceOrTimestamp=M=>this.hasDistance?d((M.distance??0)/1e3):d(new Date(M.timestamp).getTime());let g=St(t,M=>M.altitude);const m=100,_=g[1]-g[0];_<m&&(g[1]+=m-_);const y=Vs().domain(g).rangeRound([o-i,e]).nice(),p=St(t,M=>this.scaleUnit(M[this.recordField])??0),b=Vs().domain(p).rangeRound([o-i,e]).nice();this.name=="Pace"&&b.domain([p[1],p[0]]),u.append("g").style("font-size","0.8em").attr("transform",`translate(0,${o-i})`).call(C2(d).ticks(a)),u.append("g").style("font-size","0.8em").attr("transform",`translate(${r},0)`).call(Bk(b).ticks(l).tickFormat(this.formatLabel)),u.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(M=>M.append("g").selectAll("line").data(d.ticks(a)).join("line").attr("x1",S=>.5+d(S)).attr("x2",S=>.5+d(S)).attr("y1",e).attr("y2",o-i)).call(M=>M.append("g").selectAll("line").data(b.ticks(l)).join("line").attr("y1",S=>.5+b(S)).attr("y2",S=>.5+b(S)).attr("x1",r).attr("x2",s-n));const v=fn(y.domain()),E=Tu().curve(ed).x(this.scaleByDistanceOrTimestamp).y0(y(v)).y1(M=>y(M.altitude??v));u.append("g").append("path").datum(t).transition().attr("fill","lightgrey").style("opacity",.9).attr("d",E);const w=Tu().curve(ed).x(this.scaleByDistanceOrTimestamp).y0(b(fn(b.domain()))).y1(M=>{let S=M[this.recordField];return S=S??b.domain()[0],b(this.scaleUnit(S))});this.name=="Pace"&&w.y0(b(Kt(b.domain()))),u.append("g").append("path").datum(t).transition().attr("fill",`${this.color}`).style("opacity",.8).attr("d",w);const T=u.append("g").attr("id","pointer").style("opacity",0).call(M=>{M.append("line").attr("x1",0).attr("y1",e).attr("x2",0).attr("y2",o-i).attr("stroke",`${this.pointerColor}`).attr("stroke-width",1.5)}).call(M=>{M.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill",`${this.pointerColor}`).attr("transform",`translate(0, ${-e-10})`)}),C=M=>{if(M.type=="pointerdown"&&this.hoveredRecordFreeze&&(this.hoveredRecordFreeze=!1),this.hoveredRecordFreeze==!0)return;const[S]=R2(M),[R,I]=d.range();if(T.style("opacity",1),S<=R){T.attr("transform",`translate(${R}, 0)`),this.hoveredRecord=this.records[0];return}else if(S>=I){T.attr("transform",`translate(${I}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}const N=(S-R)/(I-R),O=Math.round(N*(this.records.length-1));let k=new Ke,L=Number.MAX_VALUE;if(this.scaleByDistanceOrTimestamp(this.records[O])<=S)for(let D=O;D<this.records.length;D++){const H=Math.abs(S-this.scaleByDistanceOrTimestamp(this.records[D]));if(H>L)break;k=this.records[D],L=H}else for(let D=O;D>=0;D--){const H=Math.abs(S-this.scaleByDistanceOrTimestamp(this.records[D]));if(H>L)break;k=this.records[D],L=H}T.attr("transform",`translate(${this.scaleByDistanceOrTimestamp(k)}, 0)`),this.hoveredRecord=k,this.hoveredRecordFreeze=M.type=="pointerup"};u.on("pointerdown",C),u.on("pointerup",C),u.on("pointermove",C,{passive:!0}),u.on("mouseleave",()=>{this.hoveredRecordFreeze||(this.hoveredRecord=new Ke,T.style("opacity",0))})},formatUnit(t){return this.recordField==="pace"?t?gu(t):"-:-":t?t.toFixed(2):"0.00"},scaleUnit(t){return this.recordField==="speed"&&(t=t*3600/1e3),isNaN(t)?null:t},onResize(){this.$nextTick(()=>{const t=this.$el;t.clientWidth!=0&&t.clientWidth!=this.elemWidth&&(this.elemWidth=t.clientWidth,this.renderGraph())})}},mounted(){const t=this.$el;this.$nextTick(()=>{this.elemWidth=t.clientWidth,requestAnimationFrame(()=>this.renderGraph())}),new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&this.elemWidth==0&&(this.elemWidth=t.clientWidth,this.renderGraph())})},{root:null,rootMargin:"0px",threshold:.5}).observe(t),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const Ct=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},sX=t=>(Qt("data-v-5c26800e"),t=t(),en(),t),oX={class:"col-12 h-100"},aX=["data-bs-target","aria-controls"],lX={class:"d-flex pb-1 pe-2"},cX={class:"title mb-0 col text-start"},uX=sX(()=>x("i",{class:"fa-solid fa-caret-right collapse-indicator"},null,-1)),hX={class:"lh-sm pe-1 fs-6 col text-end"},fX=["id"],dX={class:"row label mx-0 pt-1 pb-1"},gX={class:"col text-start"},mX={class:"col text-end"},pX={class:"graph-summary pt-2 pb-1 px-0"},_X={class:"d-flex px-0"},yX={class:"col text-start summary-text"},vX={class:"col-auto summary-text fs-6 pe-1"},bX={class:"col-auto summary-text pe-0"};function wX(t,e,n,i,r,s){return j(),K("div",oX,[x("div",{class:"line-graph-hover row m-0 collapsible",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":`#${s.graphContainerName}`,"aria-expanded":"false","aria-controls":s.graphContainerName},[x("div",lX,[x("h6",cX,[uX,pe(" "+X(n.name)+" ",1),x("i",{class:Xt(["fa-solid",n.icon])},null,2)]),x("span",hX,[pe(X(s.formatUnit(s.scaleUnit(r.recordView[n.recordField])))+" ",1),x("span",null,X(n.unit),1)])])],8,aX),x("div",{class:"collapse show",id:s.graphContainerName},[x("div",dX,[x("span",gX," "+X(n.yLabel),1),x("span",mX,X(s.xAxisLabel)+" ",1)]),x("div",{ref:s.graphName},null,512),x("div",pX,[(j(!0),K(yt,null,ji(n.details,(o,a)=>(j(),K("div",{class:"row mx-0 px-0",key:a},[x("div",_X,[x("span",yX,X(o.title),1),x("span",vX,X(o.value),1),x("span",bX,X(n.unit),1)])]))),128))])],8,fX)])}const nh=Ct(rX,[["render",wX],["__scopeId","data-v-5c26800e"]]);class hs{constructor(){ee(this,"sport",null);ee(this,"subSport",null);ee(this,"totalMovingTime",null);ee(this,"totalElapsedTime",null);ee(this,"totalTimerTime",null);ee(this,"totalDistance",null);ee(this,"totalAscent",null);ee(this,"totalDescent",null);ee(this,"totalCycles",null);ee(this,"totalCalories",null);ee(this,"avgSpeed",null);ee(this,"maxSpeed",null);ee(this,"avgHeartRate",null);ee(this,"maxHeartRate",null);ee(this,"avgCadence",null);ee(this,"maxCadence",null);ee(this,"avgPower",null);ee(this,"maxPower",null);ee(this,"avgTemperature",null);ee(this,"maxTemperature",null);ee(this,"avgAltitude",null);ee(this,"maxAltitude",null);ee(this,"avgPace",null);ee(this,"avgElapsedPace",null)}}const xX={class:"col-12 h-100 pt-2"},EX={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){var t,e;return[new qi({title:"Avg Cadence",value:((t=this.summary.avgCadence)==null?void 0:t.toFixed(0))??"0"}),new qi({title:"Max Cadence",value:((e=this.summary.maxCadence)==null?void 0:e.toFixed(0))??"0"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},TX=xt({...EX,__name:"CadenceGraph",setup(t){return(e,n)=>(j(),K("div",xX,[me(nh,{name:"Cadence",icon:"fa-rotate","record-field":"cadence",records:t.records,details:e.details,"graph-records":t.graphRecords,color:"darkslateblue","y-label":"Cad. (rpm)",unit:"rpm","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}});class jl extends Error{}class SX extends jl{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class CX extends jl{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class MX extends jl{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Fc extends jl{}class k5 extends jl{constructor(e){super(`Invalid unit ${e}`)}}class ei extends jl{}class xo extends jl{constructor(){super("Zone is an abstract class")}}const fe="numeric",Cr="short",bi="long",t0={year:fe,month:fe,day:fe},$5={year:fe,month:Cr,day:fe},AX={year:fe,month:Cr,day:fe,weekday:Cr},O5={year:fe,month:bi,day:fe},L5={year:fe,month:bi,day:fe,weekday:bi},N5={hour:fe,minute:fe},D5={hour:fe,minute:fe,second:fe},F5={hour:fe,minute:fe,second:fe,timeZoneName:Cr},P5={hour:fe,minute:fe,second:fe,timeZoneName:bi},z5={hour:fe,minute:fe,hourCycle:"h23"},W5={hour:fe,minute:fe,second:fe,hourCycle:"h23"},H5={hour:fe,minute:fe,second:fe,hourCycle:"h23",timeZoneName:Cr},B5={hour:fe,minute:fe,second:fe,hourCycle:"h23",timeZoneName:bi},V5={year:fe,month:fe,day:fe,hour:fe,minute:fe},G5={year:fe,month:fe,day:fe,hour:fe,minute:fe,second:fe},U5={year:fe,month:Cr,day:fe,hour:fe,minute:fe},Y5={year:fe,month:Cr,day:fe,hour:fe,minute:fe,second:fe},RX={year:fe,month:Cr,day:fe,weekday:Cr,hour:fe,minute:fe},j5={year:fe,month:bi,day:fe,hour:fe,minute:fe,timeZoneName:Cr},q5={year:fe,month:bi,day:fe,hour:fe,minute:fe,second:fe,timeZoneName:Cr},X5={year:fe,month:bi,day:fe,weekday:bi,hour:fe,minute:fe,timeZoneName:bi},Z5={year:fe,month:bi,day:fe,weekday:bi,hour:fe,minute:fe,second:fe,timeZoneName:bi};class Gd{get type(){throw new xo}get name(){throw new xo}get ianaName(){return this.name}get isUniversal(){throw new xo}offsetName(e,n){throw new xo}formatOffset(e,n){throw new xo}offset(e){throw new xo}equals(e){throw new xo}get isValid(){throw new xo}}let A1=null;class O_ extends Gd{static get instance(){return A1===null&&(A1=new O_),A1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return s6(e,n,i)}formatOffset(e,n){return Cf(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Xm={};function IX(t){return Xm[t]||(Xm[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Xm[t]}const kX={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function $X(t,e){const n=t.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,s,o,a,l,c,u]=i;return[o,r,s,a,l,c,u]}function OX(t,e){const n=t.formatToParts(e),i=[];for(let r=0;r<n.length;r++){const{type:s,value:o}=n[r],a=kX[s];s==="era"?i[a]=o:Le(a)||(i[a]=parseInt(o,10))}return i}let Xg={};class Qs extends Gd{static create(e){return Xg[e]||(Xg[e]=new Qs(e)),Xg[e]}static resetCache(){Xg={},Xm={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Qs.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return s6(e,n,i,this.name)}formatOffset(e,n){return Cf(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const i=IX(this.name);let[r,s,o,a,l,c,u]=i.formatToParts?OX(i,n):$X(i,n);a==="BC"&&(r=-Math.abs(r)+1);const f=N_({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(f-d)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let AM={};function LX(t,e={}){const n=JSON.stringify([t,e]);let i=AM[n];return i||(i=new Intl.ListFormat(t,e),AM[n]=i),i}let Xb={};function Zb(t,e={}){const n=JSON.stringify([t,e]);let i=Xb[n];return i||(i=new Intl.DateTimeFormat(t,e),Xb[n]=i),i}let Kb={};function NX(t,e={}){const n=JSON.stringify([t,e]);let i=Kb[n];return i||(i=new Intl.NumberFormat(t,e),Kb[n]=i),i}let Jb={};function DX(t,e={}){const{base:n,...i}=e,r=JSON.stringify([t,i]);let s=Jb[r];return s||(s=new Intl.RelativeTimeFormat(t,e),Jb[r]=s),s}let df=null;function FX(){return df||(df=new Intl.DateTimeFormat().resolvedOptions().locale,df)}let RM={};function PX(t){let e=RM[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,RM[t]=e}return e}function zX(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let i,r;try{i=Zb(t).resolvedOptions(),r=t}catch{const l=t.substring(0,n);i=Zb(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=i;return[r,s,o]}}function WX(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function HX(t){const e=[];for(let n=1;n<=12;n++){const i=Oe.utc(2009,n,1);e.push(t(i))}return e}function BX(t){const e=[];for(let n=1;n<=7;n++){const i=Oe.utc(2016,11,13+n);e.push(t(i))}return e}function Zg(t,e,n,i){const r=t.listingMode();return r==="error"?null:r==="en"?n(e):i(e)}function VX(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class GX{constructor(e,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:r,floor:s,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=NX(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):rx(e,3);return Ut(n,this.padTo)}}}class UX{constructor(e,n,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Qs.create(a).valid?(r=a,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=Zb(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:i}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class YX{constructor(e,n,i){this.opts={style:"long",...i},!n&&i6()&&(this.rtf=DX(e,i))}format(e,n){return this.rtf?this.rtf.format(e,n):fZ(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const jX={firstDay:1,minimalDays:4,weekend:[6,7]};class ht{static fromOpts(e){return ht.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,i,r,s=!1){const o=e||Wt.defaultLocale,a=o||(s?"en-US":FX()),l=n||Wt.defaultNumberingSystem,c=i||Wt.defaultOutputCalendar,u=Qb(r)||Wt.defaultWeekSettings;return new ht(a,l,c,u,o)}static resetCache(){df=null,Xb={},Kb={},Jb={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:i,weekSettings:r}={}){return ht.create(e,n,i,r)}constructor(e,n,i,r,s){const[o,a,l]=zX(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=i||l||null,this.weekSettings=r,this.intl=WX(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=VX(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:ht.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Qb(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Zg(this,e,l6,()=>{const i=n?{month:e,day:"numeric"}:{month:e},r=n?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=HX(s=>this.extract(s,i,"month"))),this.monthsCache[r][e]})}weekdays(e,n=!1){return Zg(this,e,h6,()=>{const i=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=n?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=BX(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return Zg(this,void 0,()=>f6,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Oe.utc(2016,11,13,9),Oe.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Zg(this,e,d6,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Oe.utc(-40,1,1),Oe.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[e]})}extract(e,n,i){const r=this.dtFormatter(e,n),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new GX(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new UX(e,this.intl,n)}relFormatter(e={}){return new YX(this.intl,this.isEnglish(),e)}listFormatter(e={}){return LX(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:r6()?PX(this.locale):jX}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let R1=null;class Hn extends Gd{static get utcInstance(){return R1===null&&(R1=new Hn(0)),R1}static instance(e){return e===0?Hn.utcInstance:new Hn(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Hn(D_(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Cf(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Cf(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Cf(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class qX extends Gd{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Uo(t,e){if(Le(t)||t===null)return e;if(t instanceof Gd)return t;if(KX(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?O_.instance:n==="utc"||n==="gmt"?Hn.utcInstance:Hn.parseSpecifier(n)||Qs.create(t)}else return vl(t)?Hn.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new qX(t)}let IM=()=>Date.now(),kM="system",$M=null,OM=null,LM=null,NM=60,DM,FM=null;class Wt{static get now(){return IM}static set now(e){IM=e}static set defaultZone(e){kM=e}static get defaultZone(){return Uo(kM,O_.instance)}static get defaultLocale(){return $M}static set defaultLocale(e){$M=e}static get defaultNumberingSystem(){return OM}static set defaultNumberingSystem(e){OM=e}static get defaultOutputCalendar(){return LM}static set defaultOutputCalendar(e){LM=e}static get defaultWeekSettings(){return FM}static set defaultWeekSettings(e){FM=Qb(e)}static get twoDigitCutoffYear(){return NM}static set twoDigitCutoffYear(e){NM=e%100}static get throwOnInvalid(){return DM}static set throwOnInvalid(e){DM=e}static resetCaches(){ht.resetCache(),Qs.resetCache()}}class yr{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const K5=[0,31,59,90,120,151,181,212,243,273,304,334],J5=[0,31,60,91,121,152,182,213,244,274,305,335];function Wi(t,e){return new yr("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function tx(t,e,n){const i=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const r=i.getUTCDay();return r===0?7:r}function Q5(t,e,n){return n+(Ud(t)?J5:K5)[e-1]}function e6(t,e){const n=Ud(t)?J5:K5,i=n.findIndex(s=>s<e),r=e-n[i];return{month:i+1,day:r}}function nx(t,e){return(t-e+7)%7+1}function n0(t,e=4,n=1){const{year:i,month:r,day:s}=t,o=Q5(i,r,s),a=nx(tx(i,r,s),n);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=i-1,l=td(c,e,n)):l>td(i,e,n)?(c=i+1,l=1):c=i,{weekYear:c,weekNumber:l,weekday:a,...F_(t)}}function PM(t,e=4,n=1){const{weekYear:i,weekNumber:r,weekday:s}=t,o=nx(tx(i,1,e),n),a=Qc(i);let l=r*7+s-o-7+e,c;l<1?(c=i-1,l+=Qc(c)):l>a?(c=i+1,l-=Qc(i)):c=i;const{month:u,day:h}=e6(c,l);return{year:c,month:u,day:h,...F_(t)}}function I1(t){const{year:e,month:n,day:i}=t,r=Q5(e,n,i);return{year:e,ordinal:r,...F_(t)}}function zM(t){const{year:e,ordinal:n}=t,{month:i,day:r}=e6(e,n);return{year:e,month:i,day:r,...F_(t)}}function WM(t,e){if(!Le(t.localWeekday)||!Le(t.localWeekNumber)||!Le(t.localWeekYear)){if(!Le(t.weekday)||!Le(t.weekNumber)||!Le(t.weekYear))throw new Fc("Cannot mix locale-based week fields with ISO-based week fields");return Le(t.localWeekday)||(t.weekday=t.localWeekday),Le(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Le(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function XX(t,e=4,n=1){const i=L_(t.weekYear),r=Hi(t.weekNumber,1,td(t.weekYear,e,n)),s=Hi(t.weekday,1,7);return i?r?s?!1:Wi("weekday",t.weekday):Wi("week",t.weekNumber):Wi("weekYear",t.weekYear)}function ZX(t){const e=L_(t.year),n=Hi(t.ordinal,1,Qc(t.year));return e?n?!1:Wi("ordinal",t.ordinal):Wi("year",t.year)}function t6(t){const e=L_(t.year),n=Hi(t.month,1,12),i=Hi(t.day,1,i0(t.year,t.month));return e?n?i?!1:Wi("day",t.day):Wi("month",t.month):Wi("year",t.year)}function n6(t){const{hour:e,minute:n,second:i,millisecond:r}=t,s=Hi(e,0,23)||e===24&&n===0&&i===0&&r===0,o=Hi(n,0,59),a=Hi(i,0,59),l=Hi(r,0,999);return s?o?a?l?!1:Wi("millisecond",r):Wi("second",i):Wi("minute",n):Wi("hour",e)}function Le(t){return typeof t>"u"}function vl(t){return typeof t=="number"}function L_(t){return typeof t=="number"&&t%1===0}function KX(t){return typeof t=="string"}function JX(t){return Object.prototype.toString.call(t)==="[object Date]"}function i6(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function r6(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function QX(t){return Array.isArray(t)?t:[t]}function HM(t,e,n){if(t.length!==0)return t.reduce((i,r)=>{const s=[e(r),r];return i&&n(i[0],s[0])===i[0]?i:s},null)[1]}function eZ(t,e){return e.reduce((n,i)=>(n[i]=t[i],n),{})}function Su(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qb(t){if(t==null)return null;if(typeof t!="object")throw new ei("Week settings must be an object");if(!Hi(t.firstDay,1,7)||!Hi(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Hi(e,1,7)))throw new ei("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Hi(t,e,n){return L_(t)&&t>=e&&t<=n}function tZ(t,e){return t-e*Math.floor(t/e)}function Ut(t,e=2){const n=t<0;let i;return n?i="-"+(""+-t).padStart(e,"0"):i=(""+t).padStart(e,"0"),i}function Po(t){if(!(Le(t)||t===null||t===""))return parseInt(t,10)}function Wa(t){if(!(Le(t)||t===null||t===""))return parseFloat(t)}function ix(t){if(!(Le(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function rx(t,e,n=!1){const i=10**e;return(n?Math.trunc:Math.round)(t*i)/i}function Ud(t){return t%4===0&&(t%100!==0||t%400===0)}function Qc(t){return Ud(t)?366:365}function i0(t,e){const n=tZ(e-1,12)+1,i=t+(e-n)/12;return n===2?Ud(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function N_(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function BM(t,e,n){return-nx(tx(t,1,e),n)+e-1}function td(t,e=4,n=1){const i=BM(t,e,n),r=BM(t+1,e,n);return(Qc(t)-i+r)/7}function ew(t){return t>99?t:t>Wt.twoDigitCutoffYear?1900+t:2e3+t}function s6(t,e,n,i=null){const r=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function D_(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const i=parseInt(e,10)||0,r=n<0||Object.is(n,-0)?-i:i;return n*60+r}function o6(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ei(`Invalid unit value ${t}`);return e}function r0(t,e){const n={};for(const i in t)if(Su(t,i)){const r=t[i];if(r==null)continue;n[e(i)]=o6(r)}return n}function Cf(t,e){const n=Math.trunc(Math.abs(t/60)),i=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${Ut(n,2)}:${Ut(i,2)}`;case"narrow":return`${r}${n}${i>0?`:${i}`:""}`;case"techie":return`${r}${Ut(n,2)}${Ut(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function F_(t){return eZ(t,["hour","minute","second","millisecond"])}const nZ=["January","February","March","April","May","June","July","August","September","October","November","December"],a6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],iZ=["J","F","M","A","M","J","J","A","S","O","N","D"];function l6(t){switch(t){case"narrow":return[...iZ];case"short":return[...a6];case"long":return[...nZ];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const c6=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],u6=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],rZ=["M","T","W","T","F","S","S"];function h6(t){switch(t){case"narrow":return[...rZ];case"short":return[...u6];case"long":return[...c6];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const f6=["AM","PM"],sZ=["Before Christ","Anno Domini"],oZ=["BC","AD"],aZ=["B","A"];function d6(t){switch(t){case"narrow":return[...aZ];case"short":return[...oZ];case"long":return[...sZ];default:return null}}function lZ(t){return f6[t.hour<12?0:1]}function cZ(t,e){return h6(e)[t.weekday-1]}function uZ(t,e){return l6(e)[t.month-1]}function hZ(t,e){return d6(e)[t.year<0?0:1]}function fZ(t,e,n="always",i=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${r[t][0]}`;case-1:return h?"yesterday":`last ${r[t][0]}`;case 0:return h?"today":`this ${r[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=r[t],u=i?l?c[1]:c[2]||c[1]:l?r[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function VM(t,e){let n="";for(const i of t)i.literal?n+=i.val:n+=e(i.val);return n}const dZ={D:t0,DD:$5,DDD:O5,DDDD:L5,t:N5,tt:D5,ttt:F5,tttt:P5,T:z5,TT:W5,TTT:H5,TTTT:B5,f:V5,ff:U5,fff:j5,ffff:X5,F:G5,FF:Y5,FFF:q5,FFFF:Z5};class Sn{static create(e,n={}){return new Sn(e,n)}static parseFormat(e){let n=null,i="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),n=null,i="",r=!r):r||a===n?i+=a:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=a,n=a)}return i.length>0&&s.push({literal:r||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return dZ[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Ut(e,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(e,d,g),o=d=>e.isOffsetFixed&&e.offset===0&&d.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,d.format):"",a=()=>i?lZ(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>i?uZ(e,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>i?cZ(e,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=Sn.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(e,g):d},h=d=>i?hZ(e,d):s({era:d},"era"),f=d=>{switch(d){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(d)}};return VM(Sn.parseFormat(n),f)}formatDurationFromString(e,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},s=Sn.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=e.shiftTo(...o.map(i).filter(l=>l));return VM(s,r(a))}}const g6=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ih(...t){const e=t.reduce((n,i)=>n+i.source,"");return RegExp(`^${e}$`)}function rh(...t){return e=>t.reduce(([n,i,r],s)=>{const[o,a,l]=s(e,r);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function sh(t,...e){if(t==null)return[null,null];for(const[n,i]of e){const r=n.exec(t);if(r)return i(r)}return[null,null]}function m6(...t){return(e,n)=>{const i={};let r;for(r=0;r<t.length;r++)i[t[r]]=Po(e[n+r]);return[i,null,n+r]}}const p6=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,gZ=`(?:${p6.source}?(?:\\[(${g6.source})\\])?)?`,sx=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,_6=RegExp(`${sx.source}${gZ}`),ox=RegExp(`(?:T${_6.source})?`),mZ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,pZ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,_Z=/(\d{4})-?(\d{3})/,yZ=m6("weekYear","weekNumber","weekDay"),vZ=m6("year","ordinal"),bZ=/(\d{4})-(\d\d)-(\d\d)/,y6=RegExp(`${sx.source} ?(?:${p6.source}|(${g6.source}))?`),wZ=RegExp(`(?: ${y6.source})?`);function eu(t,e,n){const i=t[e];return Le(i)?n:Po(i)}function xZ(t,e){return[{year:eu(t,e),month:eu(t,e+1,1),day:eu(t,e+2,1)},null,e+3]}function oh(t,e){return[{hours:eu(t,e,0),minutes:eu(t,e+1,0),seconds:eu(t,e+2,0),milliseconds:ix(t[e+3])},null,e+4]}function Yd(t,e){const n=!t[e]&&!t[e+1],i=D_(t[e+1],t[e+2]),r=n?null:Hn.instance(i);return[{},r,e+3]}function jd(t,e){const n=t[e]?Qs.create(t[e]):null;return[{},n,e+1]}const EZ=RegExp(`^T?${sx.source}$`),TZ=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function SZ(t){const[e,n,i,r,s,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",f=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:f(Wa(n)),months:f(Wa(i)),weeks:f(Wa(r)),days:f(Wa(s)),hours:f(Wa(o)),minutes:f(Wa(a)),seconds:f(Wa(l),l==="-0"),milliseconds:f(ix(c),h)}]}const CZ={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ax(t,e,n,i,r,s,o){const a={year:e.length===2?ew(Po(e)):Po(e),month:a6.indexOf(n)+1,day:Po(i),hour:Po(r),minute:Po(s)};return o&&(a.second=Po(o)),t&&(a.weekday=t.length>3?c6.indexOf(t)+1:u6.indexOf(t)+1),a}const MZ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function AZ(t){const[,e,n,i,r,s,o,a,l,c,u,h]=t,f=ax(e,r,i,n,s,o,a);let d;return l?d=CZ[l]:c?d=0:d=D_(u,h),[f,new Hn(d)]}function RZ(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const IZ=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,kZ=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$Z=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function GM(t){const[,e,n,i,r,s,o,a]=t;return[ax(e,r,i,n,s,o,a),Hn.utcInstance]}function OZ(t){const[,e,n,i,r,s,o,a]=t;return[ax(e,a,n,i,r,s,o),Hn.utcInstance]}const LZ=ih(mZ,ox),NZ=ih(pZ,ox),DZ=ih(_Z,ox),FZ=ih(_6),v6=rh(xZ,oh,Yd,jd),PZ=rh(yZ,oh,Yd,jd),zZ=rh(vZ,oh,Yd,jd),WZ=rh(oh,Yd,jd);function HZ(t){return sh(t,[LZ,v6],[NZ,PZ],[DZ,zZ],[FZ,WZ])}function BZ(t){return sh(RZ(t),[MZ,AZ])}function VZ(t){return sh(t,[IZ,GM],[kZ,GM],[$Z,OZ])}function GZ(t){return sh(t,[TZ,SZ])}const UZ=rh(oh);function YZ(t){return sh(t,[EZ,UZ])}const jZ=ih(bZ,wZ),qZ=ih(y6),XZ=rh(oh,Yd,jd);function ZZ(t){return sh(t,[jZ,v6],[qZ,XZ])}const UM="Invalid Duration",b6={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},KZ={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...b6},Li=146097/400,fc=146097/4800,JZ={years:{quarters:4,months:12,weeks:Li/7,days:Li,hours:Li*24,minutes:Li*24*60,seconds:Li*24*60*60,milliseconds:Li*24*60*60*1e3},quarters:{months:3,weeks:Li/28,days:Li/4,hours:Li*24/4,minutes:Li*24*60/4,seconds:Li*24*60*60/4,milliseconds:Li*24*60*60*1e3/4},months:{weeks:fc/7,days:fc,hours:fc*24,minutes:fc*24*60,seconds:fc*24*60*60,milliseconds:fc*24*60*60*1e3},...b6},nl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],QZ=nl.slice(0).reverse();function Eo(t,e,n=!1){const i={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Pe(i)}function w6(t,e){let n=e.milliseconds??0;for(const i of QZ.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function YM(t,e){const n=w6(t,e)<0?-1:1;nl.reduceRight((i,r)=>{if(Le(e[r]))return i;if(i){const s=e[i]*n,o=t[r][i],a=Math.floor(s/o);e[r]+=a*n,e[i]-=a*o*n}return r},null),nl.reduce((i,r)=>{if(Le(e[r]))return i;if(i){const s=e[i]%1;e[i]-=s,e[r]+=s*t[i][r]}return r},null)}function eK(t){const e={};for(const[n,i]of Object.entries(t))i!==0&&(e[n]=i);return e}class Pe{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let i=n?JZ:KZ;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||ht.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,n){return Pe.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ei(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Pe({values:r0(e,Pe.normalizeUnit),loc:ht.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(vl(e))return Pe.fromMillis(e);if(Pe.isDuration(e))return e;if(typeof e=="object")return Pe.fromObject(e);throw new ei(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[i]=GZ(e);return i?Pe.fromObject(i,n):Pe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[i]=YZ(e);return i?Pe.fromObject(i,n):Pe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ei("need to specify a reason the Duration is invalid");const i=e instanceof yr?e:new yr(e,n);if(Wt.throwOnInvalid)throw new MX(i);return new Pe({invalid:i})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new k5(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Sn.create(this.loc,i).formatDurationFromString(this,e):UM}toHuman(e={}){if(!this.isValid)return UM;const n=nl.map(i=>{const r=this.values[i];return Le(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=rx(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Oe.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?w6(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Pe.fromDurationLike(e),i={};for(const r of nl)(Su(n.values,r)||Su(this.values,r))&&(i[r]=n.get(r)+this.get(r));return Eo(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const n=Pe.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=o6(e(this.values[i],i));return Eo(this,{values:n},!0)}get(e){return this[Pe.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...r0(e,Pe.normalizeUnit)};return Eo(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:i,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:r,conversionAccuracy:i};return Eo(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return YM(this.matrix,e),Eo(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=eK(this.normalize().shiftToAll().toObject());return Eo(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Pe.normalizeUnit(o));const n={},i={},r=this.toObject();let s;for(const o of nl)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;vl(r[o])&&(a+=r[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else vl(r[o])&&(i[o]=r[o]);for(const o in i)i[o]!==0&&(n[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return YM(this.matrix,n),Eo(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Eo(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(const i of nl)if(!n(this.values[i],e.values[i]))return!1;return!0}}const dc="Invalid Interval";function tK(t,e){return!t||!t.isValid?$t.invalid("missing or invalid start"):!e||!e.isValid?$t.invalid("missing or invalid end"):e<t?$t.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class $t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ei("need to specify a reason the Interval is invalid");const i=e instanceof yr?e:new yr(e,n);if(Wt.throwOnInvalid)throw new CX(i);return new $t({invalid:i})}static fromDateTimes(e,n){const i=Ph(e),r=Ph(n),s=tK(i,r);return s??new $t({start:i,end:r})}static after(e,n){const i=Pe.fromDurationLike(n),r=Ph(e);return $t.fromDateTimes(r,r.plus(i))}static before(e,n){const i=Pe.fromDurationLike(n),r=Ph(e);return $t.fromDateTimes(r.minus(i),r)}static fromISO(e,n){const[i,r]=(e||"").split("/",2);if(i&&r){let s,o;try{s=Oe.fromISO(i,n),o=s.isValid}catch{o=!1}let a,l;try{a=Oe.fromISO(r,n),l=a.isValid}catch{l=!1}if(o&&l)return $t.fromDateTimes(s,a);if(o){const c=Pe.fromISO(r,n);if(c.isValid)return $t.after(s,c)}else if(l){const c=Pe.fromISO(i,n);if(c.isValid)return $t.before(a,c)}}return $t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const i=this.start.startOf(e,n);let r;return n!=null&&n.useLocaleWeeks?r=this.end.reconfigure({locale:i.locale}):r=this.end,r=r.startOf(e,n),Math.floor(r.diff(i,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?$t.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Ph).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s:r}=this,s=0;for(;r<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;i.push($t.fromDateTimes(r,a)),r=a,s+=1}return i}splitBy(e){const n=Pe.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,r=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push($t.fromDateTimes(i,s)),i=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return n>=i?null:$t.fromDateTimes(n,i)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return $t.fromDateTimes(n,i)}static merge(e){const[n,i]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return i&&n.push(i),n}static xor(e){let n=null,i=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&r.push($t.fromDateTimes(n,l.time)),n=null);return $t.merge(r)}difference(...e){return $t.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:dc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=t0,n={}){return this.isValid?Sn.create(this.s.loc.clone(n),e).formatInterval(this):dc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:dc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:dc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:dc}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:dc}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Pe.invalid(this.invalidReason)}mapEndpoints(e){return $t.fromDateTimes(e(this.s),e(this.e))}}class Kg{static hasDST(e=Wt.defaultZone){const n=Oe.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Qs.isValidZone(e)}static normalizeZone(e){return Uo(e,Wt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||ht.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||ht.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||ht.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ht.create(n,i,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||ht.create(n,i,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ht.create(n,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:r=null}={}){return(r||ht.create(n,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ht.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return ht.create(n,null,"gregory").eras(e)}static features(){return{relative:i6(),localeWeek:r6()}}}function jM(t,e){const n=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(e)-n(t);return Math.floor(Pe.fromMillis(i).as("days"))}function nK(t,e,n){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=jM(l,c);return(u-u%7)/7}],["days",jM]],r={},s=t;let o,a;for(const[l,c]of i)n.indexOf(l)>=0&&(o=l,r[l]=c(t,e),a=s.plus(r),a>e?(r[l]--,t=s.plus(r),t>e&&(a=t,r[l]--,t=s.plus(r))):t=a);return[t,r,a,o]}function iK(t,e,n,i){let[r,s,o,a]=nK(t,e,n);const l=e-r,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const u=Pe.fromObject(s,i);return c.length>0?Pe.fromMillis(l,i).shiftTo(...c).plus(u):u}const lx={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},qM={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},rK=lx.hanidec.replace(/[\[|\]]/g,"").split("");function sK(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(t[n].search(lx.hanidec)!==-1)e+=rK.indexOf(t[n]);else for(const r in qM){const[s,o]=qM[r];i>=s&&i<=o&&(e+=i-s)}}return parseInt(e,10)}else return e}function sr({numberingSystem:t},e=""){return new RegExp(`${lx[t||"latn"]}${e}`)}const oK="missing Intl.DateTimeFormat.formatToParts support";function Qe(t,e=n=>n){return{regex:t,deser:([n])=>e(sK(n))}}const aK=String.fromCharCode(160),x6=`[ ${aK}]`,E6=new RegExp(x6,"g");function lK(t){return t.replace(/\./g,"\\.?").replace(E6,x6)}function XM(t){return t.replace(/\./g,"").replace(E6," ").toLowerCase()}function or(t,e){return t===null?null:{regex:RegExp(t.map(lK).join("|")),deser:([n])=>t.findIndex(i=>XM(n)===XM(i))+e}}function ZM(t,e){return{regex:t,deser:([,n,i])=>D_(n,i),groups:e}}function Jg(t){return{regex:t,deser:([e])=>e}}function cK(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function uK(t,e){const n=sr(e),i=sr(e,"{2}"),r=sr(e,"{3}"),s=sr(e,"{4}"),o=sr(e,"{6}"),a=sr(e,"{1,2}"),l=sr(e,"{1,3}"),c=sr(e,"{1,6}"),u=sr(e,"{1,9}"),h=sr(e,"{2,4}"),f=sr(e,"{4,6}"),d=_=>({regex:RegExp(cK(_.val)),deser:([y])=>y,literal:!0}),m=(_=>{if(t.literal)return d(_);switch(_.val){case"G":return or(e.eras("short"),0);case"GG":return or(e.eras("long"),0);case"y":return Qe(c);case"yy":return Qe(h,ew);case"yyyy":return Qe(s);case"yyyyy":return Qe(f);case"yyyyyy":return Qe(o);case"M":return Qe(a);case"MM":return Qe(i);case"MMM":return or(e.months("short",!0),1);case"MMMM":return or(e.months("long",!0),1);case"L":return Qe(a);case"LL":return Qe(i);case"LLL":return or(e.months("short",!1),1);case"LLLL":return or(e.months("long",!1),1);case"d":return Qe(a);case"dd":return Qe(i);case"o":return Qe(l);case"ooo":return Qe(r);case"HH":return Qe(i);case"H":return Qe(a);case"hh":return Qe(i);case"h":return Qe(a);case"mm":return Qe(i);case"m":return Qe(a);case"q":return Qe(a);case"qq":return Qe(i);case"s":return Qe(a);case"ss":return Qe(i);case"S":return Qe(l);case"SSS":return Qe(r);case"u":return Jg(u);case"uu":return Jg(a);case"uuu":return Qe(n);case"a":return or(e.meridiems(),0);case"kkkk":return Qe(s);case"kk":return Qe(h,ew);case"W":return Qe(a);case"WW":return Qe(i);case"E":case"c":return Qe(n);case"EEE":return or(e.weekdays("short",!1),1);case"EEEE":return or(e.weekdays("long",!1),1);case"ccc":return or(e.weekdays("short",!0),1);case"cccc":return or(e.weekdays("long",!0),1);case"Z":case"ZZ":return ZM(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return ZM(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Jg(/[a-z_+-/]{1,256}?/i);case" ":return Jg(/[^\S\n\r]/);default:return d(_)}})(t)||{invalidReason:oK};return m.token=t,m}const hK={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function fK(t,e,n){const{type:i,value:r}=t;if(i==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=hK[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function dK(t){return[`^${t.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,t]}function gK(t,e,n){const i=t.match(e);if(i){const r={};let s=1;for(const o in n)if(Su(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,r]}else return[i,{}]}function mK(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return Le(t.z)||(n=Qs.create(t.z)),Le(t.Z)||(n||(n=new Hn(t.Z)),i=t.Z),Le(t.q)||(t.M=(t.q-1)*3+1),Le(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Le(t.u)||(t.S=ix(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,i]}let k1=null;function pK(){return k1||(k1=Oe.fromMillis(1555555555555)),k1}function _K(t,e){if(t.literal)return t;const n=Sn.macroTokenToFormatOpts(t.val),i=C6(n,e);return i==null||i.includes(void 0)?t:i}function T6(t,e){return Array.prototype.concat(...t.map(n=>_K(n,e)))}function S6(t,e,n){const i=T6(Sn.parseFormat(n),t),r=i.map(o=>uK(o,t)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:i,invalidReason:s.invalidReason};{const[o,a]=dK(r),l=RegExp(o,"i"),[c,u]=gK(e,l,a),[h,f,d]=u?mK(u):[null,null,void 0];if(Su(u,"a")&&Su(u,"H"))throw new Fc("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:l,rawMatches:c,matches:u,result:h,zone:f,specificOffset:d}}}function yK(t,e,n){const{result:i,zone:r,specificOffset:s,invalidReason:o}=S6(t,e,n);return[i,r,s,o]}function C6(t,e){if(!t)return null;const i=Sn.create(e,t).dtFormatter(pK()),r=i.formatToParts(),s=i.resolvedOptions();return r.map(o=>fK(o,t,s))}const $1="Invalid DateTime",KM=864e13;function Qg(t){return new yr("unsupported zone",`the zone "${t.name}" is not supported`)}function O1(t){return t.weekData===null&&(t.weekData=n0(t.c)),t.weekData}function L1(t){return t.localWeekData===null&&(t.localWeekData=n0(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Ha(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Oe({...n,...e,old:n})}function M6(t,e,n){let i=t-e*60*1e3;const r=n.offset(i);if(e===r)return[i,e];i-=(r-e)*60*1e3;const s=n.offset(i);return r===s?[i,r]:[t-Math.min(r,s)*60*1e3,Math.max(r,s)]}function em(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Zm(t,e,n){return M6(N_(t),e,n)}function JM(t,e){const n=t.o,i=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:i,month:r,day:Math.min(t.c.day,i0(i,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Pe.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=N_(s);let[l,c]=M6(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function Fh(t,e,n,i,r,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=Oe.fromObject(t,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Oe.invalid(new yr("unparsable",`the input "${r}" can't be parsed as ${i}`))}function tm(t,e,n=!0){return t.isValid?Sn.create(ht.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function N1(t,e){const n=t.c.year>9999||t.c.year<0;let i="";return n&&t.c.year>=0&&(i+="+"),i+=Ut(t.c.year,n?6:4),e?(i+="-",i+=Ut(t.c.month),i+="-",i+=Ut(t.c.day)):(i+=Ut(t.c.month),i+=Ut(t.c.day)),i}function QM(t,e,n,i,r,s){let o=Ut(t.c.hour);return e?(o+=":",o+=Ut(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Ut(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Ut(t.c.second),(t.c.millisecond!==0||!i)&&(o+=".",o+=Ut(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Ut(Math.trunc(-t.o/60)),o+=":",o+=Ut(Math.trunc(-t.o%60))):(o+="+",o+=Ut(Math.trunc(t.o/60)),o+=":",o+=Ut(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const A6={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},vK={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},bK={ordinal:1,hour:0,minute:0,second:0,millisecond:0},R6=["year","month","day","hour","minute","second","millisecond"],wK=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],xK=["year","ordinal","hour","minute","second","millisecond"];function EK(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new k5(t);return e}function eA(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return EK(t)}}function tA(t,e){const n=Uo(e.zone,Wt.defaultZone),i=ht.fromObject(e),r=Wt.now();let s,o;if(Le(t.year))s=r;else{for(const c of R6)Le(t[c])&&(t[c]=A6[c]);const a=t6(t)||n6(t);if(a)return Oe.invalid(a);const l=n.offset(r);[s,o]=Zm(t,l,n)}return new Oe({ts:s,zone:n,loc:i,o})}function nA(t,e,n){const i=Le(n.round)?!0:n.round,r=(o,a)=>(o=rx(o,i||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return r(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(t>e?-0:0,n.units[n.units.length-1])}function iA(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class Oe{constructor(e){const n=e.zone||Wt.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new yr("invalid input"):null)||(n.isValid?null:Qg(n));this.ts=Le(e.ts)?Wt.now():e.ts;let r=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[r,s]=[e.old.c,e.old.o];else{const a=n.offset(this.ts);r=em(this.ts,a),i=Number.isNaN(r.year)?new yr("invalid input"):null,r=i?null:r,s=i?null:a}this._zone=n,this.loc=e.loc||ht.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Oe({})}static local(){const[e,n]=iA(arguments),[i,r,s,o,a,l,c]=n;return tA({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=iA(arguments),[i,r,s,o,a,l,c]=n;return e.zone=Hn.utcInstance,tA({year:i,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const i=JX(e)?e.valueOf():NaN;if(Number.isNaN(i))return Oe.invalid("invalid input");const r=Uo(n.zone,Wt.defaultZone);return r.isValid?new Oe({ts:i,zone:r,loc:ht.fromObject(n)}):Oe.invalid(Qg(r))}static fromMillis(e,n={}){if(vl(e))return e<-KM||e>KM?Oe.invalid("Timestamp out of range"):new Oe({ts:e,zone:Uo(n.zone,Wt.defaultZone),loc:ht.fromObject(n)});throw new ei(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(vl(e))return new Oe({ts:e*1e3,zone:Uo(n.zone,Wt.defaultZone),loc:ht.fromObject(n)});throw new ei("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const i=Uo(n.zone,Wt.defaultZone);if(!i.isValid)return Oe.invalid(Qg(i));const r=ht.fromObject(n),s=r0(e,eA),{minDaysInFirstWeek:o,startOfWeek:a}=WM(s,r),l=Wt.now(),c=Le(n.specificOffset)?i.offset(l):n.specificOffset,u=!Le(s.ordinal),h=!Le(s.year),f=!Le(s.month)||!Le(s.day),d=h||f,g=s.weekYear||s.weekNumber;if((d||u)&&g)throw new Fc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new Fc("Can't mix ordinal dates with month/day");const m=g||s.weekday&&!d;let _,y,p=em(l,c);m?(_=wK,y=vK,p=n0(p,o,a)):u?(_=xK,y=bK,p=I1(p)):(_=R6,y=A6);let b=!1;for(const S of _){const R=s[S];Le(R)?b?s[S]=y[S]:s[S]=p[S]:b=!0}const v=m?XX(s,o,a):u?ZX(s):t6(s),E=v||n6(s);if(E)return Oe.invalid(E);const w=m?PM(s,o,a):u?zM(s):s,[T,C]=Zm(w,c,i),M=new Oe({ts:T,zone:i,o:C,loc:r});return s.weekday&&d&&e.weekday!==M.weekday?Oe.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${M.toISO()}`):M}static fromISO(e,n={}){const[i,r]=HZ(e);return Fh(i,r,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[i,r]=BZ(e);return Fh(i,r,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[i,r]=VZ(e);return Fh(i,r,n,"HTTP",n)}static fromFormat(e,n,i={}){if(Le(e)||Le(n))throw new ei("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=i,o=ht.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=yK(o,e,n);return u?Oe.invalid(u):Fh(a,l,i,`format ${n}`,e,c)}static fromString(e,n,i={}){return Oe.fromFormat(e,n,i)}static fromSQL(e,n={}){const[i,r]=ZZ(e);return Fh(i,r,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ei("need to specify a reason the DateTime is invalid");const i=e instanceof yr?e:new yr(e,n);if(Wt.throwOnInvalid)throw new SX(i);return new Oe({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const i=C6(e,ht.fromObject(n));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(e,n={}){return T6(Sn.parseFormat(e),ht.fromObject(n)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?O1(this).weekYear:NaN}get weekNumber(){return this.isValid?O1(this).weekNumber:NaN}get weekday(){return this.isValid?O1(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?L1(this).weekday:NaN}get localWeekNumber(){return this.isValid?L1(this).weekNumber:NaN}get localWeekYear(){return this.isValid?L1(this).weekYear:NaN}get ordinal(){return this.isValid?I1(this.c).ordinal:NaN}get monthShort(){return this.isValid?Kg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Kg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Kg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Kg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,i=N_(this.c),r=this.zone.offset(i-e),s=this.zone.offset(i+e),o=this.zone.offset(i-r*n),a=this.zone.offset(i-s*n);if(o===a)return[this];const l=i-o*n,c=i-a*n,u=em(l,o),h=em(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[Ha(this,{ts:l}),Ha(this,{ts:c})]:[this]}get isInLeapYear(){return Ud(this.year)}get daysInMonth(){return i0(this.year,this.month)}get daysInYear(){return this.isValid?Qc(this.year):NaN}get weeksInWeekYear(){return this.isValid?td(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?td(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:i,calendar:r}=Sn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:r}}toUTC(e=0,n={}){return this.setZone(Hn.instance(e),n)}toLocal(){return this.setZone(Wt.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(e=Uo(e,Wt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(n||i){const s=e.offset(this.ts),o=this.toObject();[r]=Zm(o,s,e)}return Ha(this,{ts:r,zone:e})}else return Oe.invalid(Qg(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:i}={}){const r=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:i});return Ha(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=r0(e,eA),{minDaysInFirstWeek:i,startOfWeek:r}=WM(n,this.loc),s=!Le(n.weekYear)||!Le(n.weekNumber)||!Le(n.weekday),o=!Le(n.ordinal),a=!Le(n.year),l=!Le(n.month)||!Le(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new Fc("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Fc("Can't mix ordinal dates with month/day");let h;s?h=PM({...n0(this.c,i,r),...n},i,r):Le(n.ordinal)?(h={...this.toObject(),...n},Le(n.day)&&(h.day=Math.min(i0(h.year,h.month),h.day))):h=zM({...I1(this.c),...n});const[f,d]=Zm(h,this.o,this.zone);return Ha(this,{ts:f,o:d})}plus(e){if(!this.isValid)return this;const n=Pe.fromDurationLike(e);return Ha(this,JM(this,n))}minus(e){if(!this.isValid)return this;const n=Pe.fromDurationLike(e).negate();return Ha(this,JM(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const i={},r=Pe.normalizeUnit(e);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Sn.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):$1}toLocaleString(e=t0,n={}){return this.isValid?Sn.create(this.loc.clone(n),e).formatDateTime(this):$1}toLocaleParts(e={}){return this.isValid?Sn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=N1(this,o);return a+="T",a+=QM(this,o,n,i,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?N1(this,e==="extended"):null}toISOWeekDate(){return tm(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+QM(this,o==="extended",n,e,i,s):null}toRFC2822(){return tm(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return tm(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?N1(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(n||e)&&(i&&(r+=" "),n?r+="z":e&&(r+="ZZ")),tm(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():$1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",i={}){if(!this.isValid||!e.isValid)return Pe.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=QX(n).map(Pe.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=iK(a,l,s,r);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(Oe.now(),e,n)}until(e){return this.isValid?$t.fromDateTimes(this,e):this}hasSame(e,n,i){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,i)<=r&&r<=s.endOf(n,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||Oe.fromObject({},{zone:this.zone}),i=e.padding?this<n?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),nA(n,this.plus(i),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?nA(e.base||Oe.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Oe.isDateTime))throw new ei("min requires all arguments be DateTimes");return HM(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(Oe.isDateTime))throw new ei("max requires all arguments be DateTimes");return HM(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,i={}){const{locale:r=null,numberingSystem:s=null}=i,o=ht.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return S6(o,e,n)}static fromStringExplain(e,n,i={}){return Oe.fromFormatExplain(e,n,i)}static get DATE_SHORT(){return t0}static get DATE_MED(){return $5}static get DATE_MED_WITH_WEEKDAY(){return AX}static get DATE_FULL(){return O5}static get DATE_HUGE(){return L5}static get TIME_SIMPLE(){return N5}static get TIME_WITH_SECONDS(){return D5}static get TIME_WITH_SHORT_OFFSET(){return F5}static get TIME_WITH_LONG_OFFSET(){return P5}static get TIME_24_SIMPLE(){return z5}static get TIME_24_WITH_SECONDS(){return W5}static get TIME_24_WITH_SHORT_OFFSET(){return H5}static get TIME_24_WITH_LONG_OFFSET(){return B5}static get DATETIME_SHORT(){return V5}static get DATETIME_SHORT_WITH_SECONDS(){return G5}static get DATETIME_MED(){return U5}static get DATETIME_MED_WITH_SECONDS(){return Y5}static get DATETIME_MED_WITH_WEEKDAY(){return RX}static get DATETIME_FULL(){return j5}static get DATETIME_FULL_WITH_SECONDS(){return q5}static get DATETIME_HUGE(){return X5}static get DATETIME_HUGE_WITH_SECONDS(){return Z5}}function Ph(t){if(Oe.isDateTime(t))return t;if(t&&t.valueOf&&vl(t.valueOf()))return Oe.fromJSDate(t);if(t&&typeof t=="object")return Oe.fromObject(t);throw new ei(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function I6(t,e=0){let n=Oe.fromISO(t),i="";return e>0?i="+"+(e==null?void 0:e.toString()):e<0&&(i=e==null?void 0:e.toString()),e&&(n=n.setZone(`UTC${i}`)),n}function cx(t,e=0){return I6(t,e).toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function k6(t){if(!t)return"UTC";let e="GMT";return t>0&&(e+="+"),e+t.toString()}function P_(t){const e=Math.floor(t/86400);t-=e*(60*60*24);const n=Math.floor(t/(60*60));t-=n*(60*60);const i=Math.floor(t/60);return t-=i*60,t=Math.round(t),e>0?`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(t).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(t).padStart(2,"0")}`}function rA(t,e="seconds",n){const i=["years","months","days","hours","minutes","seconds","milliseconds"],r=i.indexOf(e),s=Object.entries(t.shiftTo(...i).normalize().toObject()).filter(([,a],l)=>a>0&&l<=r);return Pe.fromObject(s.length===0?{[e]:0}:Object.fromEntries(s)).toHuman(n)}function TK(t){if(t<=0)return"0s";const e=Math.floor(t/(1e3*60*60*24)),n=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(t%(1e3*60*60)/(1e3*60)),r=Math.floor(t%(1e3*60)/1e3);let s="";return e>0&&(s+=e+"d "),n>0&&(s+=n+"h "),i>0&&(s+=i+"m "),r>0&&(s+=r+"s"),s}const SK={props:{name:{type:String,required:!0},hasAltitude:Boolean,graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},summary:hs,receivedRecord:Ke,receivedRecordFreeze:Boolean},data(){return{begin:new Date,elapsed:0,hoveredRecord:new Ke,hoveredRecordFreeze:new Boolean,recordView:new Ke,elemWidth:0,xScale:Vs(),color:BO().domain([-45,45]).interpolator(d$(["darkgreen","darkgreen","darkgreen","darkgreen","darkgreen","limegreen","limegreen","lemonchiffon","lemonchiffon","red","red","darkred","darkred","darkred","darkred","darkred"]))}},watch:{graphRecords:{async handler(){this.$nextTick(()=>{requestAnimationFrame(()=>this.renderGraph())})}},receivedRecord:{handler(t){this.recordView=t;const e=ai(this.$refs[`${this.name}`]).select("g#pointer");if(JSON.stringify(t)==JSON.stringify(new Ke)){e.style("opacity",0);return}e.style("opacity",1),e.attr("transform",`translate(${this.xScale((t.distance??0)/1e3)}, 0)`)}},receivedRecordFreeze:{handler(t){this.hoveredRecordFreeze=t,t||ai(this.$refs[`${this.name}`]).select("g#pointer").style("opacity",0)}},hoveredRecord:{handler(t){this.recordView=t,this.$emit("hoveredRecord",t)}},hoveredRecordFreeze:{handler(t){this.$emit("hoveredRecordFreeze",t)}}},methods:{formatDuration:TK,renderGraph(){const t=this.graphRecords;if(t.length==0)return;this.hoveredRecord=new Ke,this.begin=fn(t.map(M=>new Date(M.timestamp)));const e=5,n=5,i=35,r=35,s=this.elemWidth,o=this.$el,a=this.$refs[`title-${this.name}`],c=o.clientHeight-a.clientHeight-i,u=s>720?10:5,h=3,f=ai(this.$refs[`${this.name}`]);f.select("svg").on("pointerdown",null).on("pointermove",null).on("mouseleave",null).remove();const d=f.append("svg").attr("width",s).attr("height",c).style("touch-action","none").style("user-select","none").style("--webkit-user-select","none").style("--ms-user-select","none"),g=Vs().domain(St(t,M=>(M.distance??0)/1e3)).range([r,s-n]);this.xScale=g;let m=St(t,M=>M.altitude);const _=100,y=m[1]-m[0];y<_&&(m[1]+=_-y);const p=Vs().domain(m).rangeRound([c-i,e]).nice();d.append("g").style("font-size","0.8em").attr("transform",`translate(0,${c-i})`).call(C2(g).ticks(u)),d.append("g").style("font-size","0.8em").attr("transform",`translate(${r},0)`).call(Bk(p).ticks(h).tickFormat(xa("~s"))),d.append("text").attr("class","x-axis-label").attr("x",s-n-70).attr("y",e-15).style("fill","currentColor").style("font-size","0.9em").text("Dist. (km) "),d.append("g").attr("stroke","currentColor").attr("stroke-opacity",.1).style("stroke","lightgray").style("stroke-dasharray","2,2").call(M=>M.append("g").selectAll("line").data(g.ticks(u)).join("line").attr("x1",S=>.5+g(S)).attr("x2",S=>.5+g(S)).attr("y1",e).attr("y2",c-i)).call(M=>M.append("g").selectAll("line").data(p.ticks(h)).join("line").attr("y1",S=>.5+p(S)).attr("y2",S=>.5+p(S)).attr("x1",r).attr("x2",s-n));const b=fn(p.domain()),v=Tu().curve(ed).x(M=>g((M.distance??0)/1e3)).y0(p(b)).y1(M=>p(M.altitude??b));d.append("g").append("path").datum(t).transition().attr("fill","#222222").style("opacity",.9).attr("d",v);const E=`linearGradient-${this.name}`;d.append("linearGradient").attr("id",E).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",s).selectAll("stop").data(t).join("stop").attr("offset",M=>g((M.distance??0)/1e3)/s).attr("stop-color",M=>this.color(M.grade??0));const w=Z2().curve(ed).x(M=>g((M.distance??0)/1e3)).y(M=>p(M.altitude??b));d.append("g").append("path").datum(t).transition().attr("fill","none").attr("stroke",`url(#${E})`).attr("stroke-width",3).attr("d",w);const T=d.append("g").attr("id","pointer").style("opacity",0).call(M=>{M.append("line").attr("x1",0).attr("y1",e).attr("x2",0).attr("y2",c-i).attr("stroke","#78e08f").attr("stroke-width",1.5)}).call(M=>{M.append("polygon").attr("points","0,30 -5,20 5,20").attr("fill","#78e08f").attr("transform",`translate(0, ${-e-10})`)}),C=M=>{if(M.type=="pointerdown"&&this.hoveredRecordFreeze&&(this.hoveredRecordFreeze=!1),this.hoveredRecordFreeze==!0)return;const[S]=R2(M),[R,I]=g.range();if(T.style("opacity",1),S<=R){T.attr("transform",`translate(${R}, 0)`),this.hoveredRecord=this.records[0];return}else if(S>=I){T.attr("transform",`translate(${I}, 0)`),this.hoveredRecord=this.records[this.records.length-1];return}T.attr("transform",`translate(${S}, 0)`);const N=(S-R)/(I-R),O=Math.round(N*(this.records.length-1));let k=new Ke,L=Number.MAX_VALUE;if(g((this.records[O].distance??0)/1e3)<=S)for(let D=O;D<this.records.length;D++){const H=Math.abs(S-g((this.records[D].distance??0)/1e3));if(H>L)break;k=this.records[D],L=H}else for(let D=O;D>=0;D--){const H=Math.abs(S-g((this.records[D].distance??0)/1e3));if(H>L)break;k=this.records[D],L=H}this.hoveredRecord=k,this.hoveredRecordFreeze=M.type=="pointerup"};d.on("pointerdown",C),d.on("pointerup",C),d.on("pointermove",C,{passive:!0}),d.on("mouseleave",()=>{this.hoveredRecordFreeze||(this.hoveredRecord=new Ke,T.style("opacity",0))})},onResize(){this.$nextTick(()=>{const t=this.$el;t.clientWidth!=0&&t.clientWidth!=this.elemWidth&&(this.elemWidth=t.clientWidth,this.renderGraph())})}},mounted(){this.$nextTick(()=>{const t=this.$el;this.elemWidth=t.clientWidth,requestAnimationFrame(()=>this.renderGraph())}),window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)}};const fs=t=>(Qt("data-v-0c7788cc"),t=t(),en(),t),CK={class:"col-12 h-100 pt-2"},MK=fs(()=>x("div",{class:"col-auto"},[x("h6",{class:"pt-1 title"},[pe(" Elevation "),x("i",{class:"fa-solid fa-solid fa-mountain"})])],-1)),AK={key:0,class:"text-md-end text-sm-center elevation-hover"},RK={class:"text-start pe-1"},IK=fs(()=>x("i",{class:"fa-solid fa-hourglass-half"},null,-1)),kK={class:"text-end pe-1"},$K=fs(()=>x("i",{class:"fa-solid fa-road"},null,-1)),OK={class:"text-end pe-1"},LK=fs(()=>x("i",{class:"fa-solid fa-mountain"},null,-1)),NK={class:"text-end"},DK=fs(()=>x("i",{class:"fa-solid fa-arrow-up-right-dots fa-sm"},null,-1)),FK={key:0,class:"h-75 d-flex text-center align-middle no-altitude-data"},PK={key:1},zK={class:"row label mx-0 pb-1"},WK=fs(()=>x("span",{class:"col-auto px-0"}," Alt. (m)",-1)),HK={class:"col-auto pe-0 fw-bold"},BK=fs(()=>x("i",{class:"fa-solid fa-solid fa-mountain"},null,-1)),VK={class:"col-auto pe-0 fw-bold"},GK=fs(()=>x("i",{class:"fa-solid fa-arrow-trend-up"},null,-1)),UK={class:"col-auto pe-0 fw-bold"},YK=fs(()=>x("i",{class:"fa-solid fa-arrow-trend-down"},null,-1)),jK=fs(()=>x("span",{class:"col pe-0 text-end"},"Dist. (km) ",-1));function qK(t,e,n,i,r,s){var o,a,l,c,u,h,f;return j(),K("div",CK,[x("div",{class:"row pb-0 pt-0",ref:"title-"+n.name},[MK,n.hasAltitude?(j(),K("div",AK,[x("span",RK,[IK,pe(" "+X(r.recordView.timestamp?s.formatDuration(new Date(r.recordView.timestamp).getTime()-r.begin.getTime()):"0 s"),1)]),x("span",kK,[$K,pe(" "+X(typeof r.recordView.distance=="number"?((r.recordView.distance??0)/1e3).toFixed(2):"0.00")+" km ",1)]),x("span",OK,[LK,pe(" "+X(((o=r.recordView.altitude)==null?void 0:o.toFixed(0))??"0")+" m ",1)]),x("span",NK,[DK,pe(" "+X(r.recordView.grade?Math.round(r.recordView.grade):"0")+" % ",1)])])):Ee("",!0)],512),n.hasAltitude?(j(),K("div",PK,[x("div",zK,[WK,x("span",HK,[BK,pe(" "+X((l=(a=n.summary)==null?void 0:a.maxAltitude)==null?void 0:l.toFixed(0))+" m ",1)]),x("span",VK,[GK,pe(" "+X((u=(c=n.summary)==null?void 0:c.totalAscent)==null?void 0:u.toFixed(0))+" m ",1)]),x("span",UK,[YK,pe(" "+X((f=(h=n.summary)==null?void 0:h.totalDescent)==null?void 0:f.toFixed(0))+" m ",1)]),jK]),x("div",{ref:n.name},null,512)])):(j(),K("div",FK," No altitude data "))])}const XK=Ct(SK,[["render",qK],["__scopeId","data-v-0c7788cc"]]),ZK={class:"col-12 h-100 pt-2"},KK={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){var t,e;return[new qi({title:"Avg Heart Rate",value:((t=this.summary.avgHeartRate)==null?void 0:t.toFixed(0))??"0"}),new qi({title:"Max Heart Rate",value:((e=this.summary.maxHeartRate)==null?void 0:e.toFixed(0))??"0"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},JK=xt({...KK,__name:"HeartRateGraph",setup(t){return(e,n)=>(j(),K("div",ZK,[me(nh,{name:"Heart Rate",icon:"fa-heart-pulse","record-field":"heartRate",records:t.records,details:e.details,"graph-records":t.graphRecords,color:"red","y-label":"HR (bpm)",unit:"bpm","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}}),QK={class:"col-12 h-100 pt-2"},eJ={class:"row"},tJ={class:"col d-flex align-items-end pb-1"},nJ={class:"zone-label fw-bolder text-body-secondary mb-0"},iJ={class:"zone-label small text-body-secondary ms-2 me-1"},rJ={class:"zone-label small text-body-secondary"},sJ={class:"row"},oJ={class:"col d-flex flex-row"},aJ={class:"progress flex-fill",role:"progressbar","aria-label":"","aria-valuenow":"{{ validProsen }}","aria-valuemin":"0","aria-valuemax":"100"},lJ={key:0},cJ={class:"text-body-secondary text-end hr-time"},uJ={class:"text-body-secondary text-end hr-prosen"},hJ={props:{zone:{type:String,default:"Zone 1"},minmax:{type:Array,required:!0},zoneSub:{type:String,default:"Maximum"},timeInSecond:{type:Number,default:0},prosen:{type:Number,default:0},progressText:{type:Boolean},progressClass:{type:Array,default:[]},isLoading:{type:Boolean}},data(){return{}},watch:{},computed:{formattedTime(){return this.timeInSecond>=60*60?Pe.fromMillis(this.timeInSecond*1e3).toFormat("h:mm:ss"):Pe.fromMillis(this.timeInSecond*1e3).toFormat("mm:ss")},validProsen(){return this.prosen>=0&&this.prosen<=100?this.prosen:this.prosen>100?100:0},validMinMax(){return this.max==1/0?`> ${this.min}`:this.min==1/0?`< ${this.max}`:`${this.min} - ${this.max}`},min(){return this.minmax[0]==1/0?1/0:this.minmax[0]||0},max(){return this.minmax[1]==1/0?1/0:this.minmax[1]||0}},methods:{},mounted(){}},fJ=xt({...hJ,__name:"HeartRateZoneBar",setup(t){return(e,n)=>(j(),K("div",QK,[x("div",eJ,[x("div",tJ,[x("h6",nJ,X(t.zone),1),x("span",iJ,X(e.validMinMax)+" bpm",1),x("span",rJ," "+X(t.zoneSub),1)])]),x("div",sJ,[x("div",oJ,[x("div",aJ,[x("div",{class:Xt(["progress-bar",...t.progressClass,t.isLoading?"progress-bar-striped progress-bar-animated":""]),style:Gt({width:`${t.isLoading?100:e.validProsen.toFixed(0)}%`})},[t.progressText?(j(),K("span",lJ,X(e.validProsen.toFixed(1))+"% ",1)):Ee("",!0)],6)]),x("small",cJ,X(e.formattedTime),1),x("small",uJ,X(e.validProsen.toFixed(1))+"%",1)])])]))}});const $6=Ct(fJ,[["__scopeId","data-v-dff3c136"]]);var Bn="top",Ei="bottom",Ti="right",Vn="left",z_="auto",ah=[Bn,Ei,Ti,Vn],zl="start",Cu="end",O6="clippingParents",ux="viewport",Ac="popper",L6="reference",tw=ah.reduce(function(t,e){return t.concat([e+"-"+zl,e+"-"+Cu])},[]),hx=[].concat(ah,[z_]).reduce(function(t,e){return t.concat([e,e+"-"+zl,e+"-"+Cu])},[]),N6="beforeRead",D6="read",F6="afterRead",P6="beforeMain",z6="main",W6="afterMain",H6="beforeWrite",B6="write",V6="afterWrite",G6=[N6,D6,F6,P6,z6,W6,H6,B6,V6];function ls(t){return t?(t.nodeName||"").toLowerCase():null}function Si(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Wl(t){var e=Si(t).Element;return t instanceof e||t instanceof Element}function Ui(t){var e=Si(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fx(t){if(typeof ShadowRoot>"u")return!1;var e=Si(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function dJ(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Ui(s)||!ls(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function gJ(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ui(r)||!ls(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const dx={name:"applyStyles",enabled:!0,phase:"write",fn:dJ,effect:gJ,requires:["computeStyles"]};function Qr(t){return t.split("-")[0]}var bl=Math.max,s0=Math.min,Mu=Math.round;function nw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function U6(){return!/^((?!chrome|android).)*safari/i.test(nw())}function Au(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Ui(t)&&(r=t.offsetWidth>0&&Mu(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Mu(i.height)/t.offsetHeight||1);var o=Wl(t)?Si(t):window,a=o.visualViewport,l=!U6()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,h=i.width/r,f=i.height/s;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function gx(t){var e=Au(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Y6(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fx(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function eo(t){return Si(t).getComputedStyle(t)}function mJ(t){return["table","td","th"].indexOf(ls(t))>=0}function Sa(t){return((Wl(t)?t.ownerDocument:t.document)||window.document).documentElement}function W_(t){return ls(t)==="html"?t:t.assignedSlot||t.parentNode||(fx(t)?t.host:null)||Sa(t)}function sA(t){return!Ui(t)||eo(t).position==="fixed"?null:t.offsetParent}function pJ(t){var e=/firefox/i.test(nw()),n=/Trident/i.test(nw());if(n&&Ui(t)){var i=eo(t);if(i.position==="fixed")return null}var r=W_(t);for(fx(r)&&(r=r.host);Ui(r)&&["html","body"].indexOf(ls(r))<0;){var s=eo(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function qd(t){for(var e=Si(t),n=sA(t);n&&mJ(n)&&eo(n).position==="static";)n=sA(n);return n&&(ls(n)==="html"||ls(n)==="body"&&eo(n).position==="static")?e:n||pJ(t)||e}function mx(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Mf(t,e,n){return bl(t,s0(e,n))}function _J(t,e,n){var i=Mf(t,e,n);return i>n?n:i}function j6(){return{top:0,right:0,bottom:0,left:0}}function q6(t){return Object.assign({},j6(),t)}function X6(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var yJ=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,q6(typeof e!="number"?e:X6(e,ah))};function vJ(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Qr(n.placement),l=mx(a),c=[Vn,Ti].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var h=yJ(r.padding,n),f=gx(s),d=l==="y"?Bn:Vn,g=l==="y"?Ei:Ti,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],_=o[l]-n.rects.reference[l],y=qd(s),p=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,b=m/2-_/2,v=h[d],E=p-f[u]-h[g],w=p/2-f[u]/2+b,T=Mf(v,w,E),C=l;n.modifiersData[i]=(e={},e[C]=T,e.centerOffset=T-w,e)}}function bJ(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Y6(e.elements.popper,r)&&(e.elements.arrow=r))}const Z6={name:"arrow",enabled:!0,phase:"main",fn:vJ,effect:bJ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ru(t){return t.split("-")[1]}var wJ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xJ(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Mu(n*r)/r||0,y:Mu(i*r)/r||0}}function oA(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,d=f===void 0?0:f,g=o.y,m=g===void 0?0:g,_=typeof u=="function"?u({x:d,y:m}):{x:d,y:m};d=_.x,m=_.y;var y=o.hasOwnProperty("x"),p=o.hasOwnProperty("y"),b=Vn,v=Bn,E=window;if(c){var w=qd(n),T="clientHeight",C="clientWidth";if(w===Si(n)&&(w=Sa(n),eo(w).position!=="static"&&a==="absolute"&&(T="scrollHeight",C="scrollWidth")),w=w,r===Bn||(r===Vn||r===Ti)&&s===Cu){v=Ei;var M=h&&w===E&&E.visualViewport?E.visualViewport.height:w[T];m-=M-i.height,m*=l?1:-1}if(r===Vn||(r===Bn||r===Ei)&&s===Cu){b=Ti;var S=h&&w===E&&E.visualViewport?E.visualViewport.width:w[C];d-=S-i.width,d*=l?1:-1}}var R=Object.assign({position:a},c&&wJ),I=u===!0?xJ({x:d,y:m},Si(n)):{x:d,y:m};if(d=I.x,m=I.y,l){var N;return Object.assign({},R,(N={},N[v]=p?"0":"",N[b]=y?"0":"",N.transform=(E.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",N))}return Object.assign({},R,(e={},e[v]=p?m+"px":"",e[b]=y?d+"px":"",e.transform="",e))}function EJ(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Qr(e.placement),variation:Ru(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,oA(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,oA(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const px={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:EJ,data:{}};var nm={passive:!0};function TJ(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Si(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,nm)}),a&&l.addEventListener("resize",n.update,nm),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,nm)}),a&&l.removeEventListener("resize",n.update,nm)}}const _x={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:TJ,data:{}};var SJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Km(t){return t.replace(/left|right|bottom|top/g,function(e){return SJ[e]})}var CJ={start:"end",end:"start"};function aA(t){return t.replace(/start|end/g,function(e){return CJ[e]})}function yx(t){var e=Si(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function vx(t){return Au(Sa(t)).left+yx(t).scrollLeft}function MJ(t,e){var n=Si(t),i=Sa(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=U6();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+vx(t),y:l}}function AJ(t){var e,n=Sa(t),i=yx(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=bl(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=bl(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+vx(t),l=-i.scrollTop;return eo(r||n).direction==="rtl"&&(a+=bl(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function bx(t){var e=eo(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function K6(t){return["html","body","#document"].indexOf(ls(t))>=0?t.ownerDocument.body:Ui(t)&&bx(t)?t:K6(W_(t))}function Af(t,e){var n;e===void 0&&(e=[]);var i=K6(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Si(i),o=r?[s].concat(s.visualViewport||[],bx(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Af(W_(o)))}function iw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function RJ(t,e){var n=Au(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function lA(t,e,n){return e===ux?iw(MJ(t,n)):Wl(e)?RJ(e,n):iw(AJ(Sa(t)))}function IJ(t){var e=Af(W_(t)),n=["absolute","fixed"].indexOf(eo(t).position)>=0,i=n&&Ui(t)?qd(t):t;return Wl(i)?e.filter(function(r){return Wl(r)&&Y6(r,i)&&ls(r)!=="body"}):[]}function kJ(t,e,n,i){var r=e==="clippingParents"?IJ(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var u=lA(t,c,i);return l.top=bl(u.top,l.top),l.right=s0(u.right,l.right),l.bottom=s0(u.bottom,l.bottom),l.left=bl(u.left,l.left),l},lA(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function J6(t){var e=t.reference,n=t.element,i=t.placement,r=i?Qr(i):null,s=i?Ru(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case Bn:l={x:o,y:e.y-n.height};break;case Ei:l={x:o,y:e.y+e.height};break;case Ti:l={x:e.x+e.width,y:a};break;case Vn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?mx(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case zl:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Cu:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Iu(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?O6:a,c=n.rootBoundary,u=c===void 0?ux:c,h=n.elementContext,f=h===void 0?Ac:h,d=n.altBoundary,g=d===void 0?!1:d,m=n.padding,_=m===void 0?0:m,y=q6(typeof _!="number"?_:X6(_,ah)),p=f===Ac?L6:Ac,b=t.rects.popper,v=t.elements[g?p:f],E=kJ(Wl(v)?v:v.contextElement||Sa(t.elements.popper),l,u,o),w=Au(t.elements.reference),T=J6({reference:w,element:b,strategy:"absolute",placement:r}),C=iw(Object.assign({},b,T)),M=f===Ac?C:w,S={top:E.top-M.top+y.top,bottom:M.bottom-E.bottom+y.bottom,left:E.left-M.left+y.left,right:M.right-E.right+y.right},R=t.modifiersData.offset;if(f===Ac&&R){var I=R[r];Object.keys(S).forEach(function(N){var O=[Ti,Ei].indexOf(N)>=0?1:-1,k=[Bn,Ei].indexOf(N)>=0?"y":"x";S[N]+=I[k]*O})}return S}function $J(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?hx:l,u=Ru(i),h=u?a?tw:tw.filter(function(g){return Ru(g)===u}):ah,f=h.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=h);var d=f.reduce(function(g,m){return g[m]=Iu(t,{placement:m,boundary:r,rootBoundary:s,padding:o})[Qr(m)],g},{});return Object.keys(d).sort(function(g,m){return d[g]-d[m]})}function OJ(t){if(Qr(t)===z_)return[];var e=Km(t);return[aA(t),e,aA(e)]}function LJ(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,g=d===void 0?!0:d,m=n.allowedAutoPlacements,_=e.options.placement,y=Qr(_),p=y===_,b=l||(p||!g?[Km(_)]:OJ(_)),v=[_].concat(b).reduce(function(se,le){return se.concat(Qr(le)===z_?$J(e,{placement:le,boundary:u,rootBoundary:h,padding:c,flipVariations:g,allowedAutoPlacements:m}):le)},[]),E=e.rects.reference,w=e.rects.popper,T=new Map,C=!0,M=v[0],S=0;S<v.length;S++){var R=v[S],I=Qr(R),N=Ru(R)===zl,O=[Bn,Ei].indexOf(I)>=0,k=O?"width":"height",L=Iu(e,{placement:R,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),D=O?N?Ti:Vn:N?Ei:Bn;E[k]>w[k]&&(D=Km(D));var H=Km(D),q=[];if(s&&q.push(L[I]<=0),a&&q.push(L[D]<=0,L[H]<=0),q.every(function(se){return se})){M=R,C=!1;break}T.set(R,q)}if(C)for(var G=g?3:1,J=function(le){var ce=v.find(function(z){var U=T.get(z);if(U)return U.slice(0,le).every(function(P){return P})});if(ce)return M=ce,"break"},W=G;W>0;W--){var ie=J(W);if(ie==="break")break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}}const Q6={name:"flip",enabled:!0,phase:"main",fn:LJ,requiresIfExists:["offset"],data:{_skip:!1}};function cA(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function uA(t){return[Bn,Ti,Ei,Vn].some(function(e){return t[e]>=0})}function NJ(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Iu(e,{elementContext:"reference"}),a=Iu(e,{altBoundary:!0}),l=cA(o,i),c=cA(a,r,s),u=uA(l),h=uA(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const eN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:NJ};function DJ(t,e,n){var i=Qr(t),r=[Vn,Bn].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Vn,Ti].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function FJ(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=hx.reduce(function(u,h){return u[h]=DJ(h,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const tN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:FJ};function PJ(t){var e=t.state,n=t.name;e.modifiersData[n]=J6({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const wx={name:"popperOffsets",enabled:!0,phase:"read",fn:PJ,data:{}};function zJ(t){return t==="x"?"y":"x"}function WJ(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,d=f===void 0?!0:f,g=n.tetherOffset,m=g===void 0?0:g,_=Iu(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=Qr(e.placement),p=Ru(e.placement),b=!p,v=mx(y),E=zJ(v),w=e.modifiersData.popperOffsets,T=e.rects.reference,C=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,S=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(w){if(s){var N,O=v==="y"?Bn:Vn,k=v==="y"?Ei:Ti,L=v==="y"?"height":"width",D=w[v],H=D+_[O],q=D-_[k],G=d?-C[L]/2:0,J=p===zl?T[L]:C[L],W=p===zl?-C[L]:-T[L],ie=e.elements.arrow,se=d&&ie?gx(ie):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:j6(),ce=le[O],z=le[k],U=Mf(0,T[L],se[L]),P=b?T[L]/2-G-U-ce-S.mainAxis:J-U-ce-S.mainAxis,Y=b?-T[L]/2+G+U+z+S.mainAxis:W+U+z+S.mainAxis,te=e.elements.arrow&&qd(e.elements.arrow),A=te?v==="y"?te.clientTop||0:te.clientLeft||0:0,$=(N=R==null?void 0:R[v])!=null?N:0,F=D+P-$-A,B=D+Y-$,V=Mf(d?s0(H,F):H,D,d?bl(q,B):q);w[v]=V,I[v]=V-D}if(a){var Z,ue=v==="x"?Bn:Vn,oe=v==="x"?Ei:Ti,ae=w[E],Q=E==="y"?"height":"width",de=ae+_[ue],he=ae-_[oe],ge=[Bn,Vn].indexOf(y)!==-1,_e=(Z=R==null?void 0:R[E])!=null?Z:0,Ae=ge?de:ae-T[Q]-C[Q]-_e+S.altAxis,ze=ge?ae+T[Q]+C[Q]-_e-S.altAxis:he,Ie=d&&ge?_J(Ae,ae,ze):Mf(d?Ae:de,ae,d?ze:he);w[E]=Ie,I[E]=Ie-ae}e.modifiersData[i]=I}}const nN={name:"preventOverflow",enabled:!0,phase:"main",fn:WJ,requiresIfExists:["offset"]};function HJ(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function BJ(t){return t===Si(t)||!Ui(t)?yx(t):HJ(t)}function VJ(t){var e=t.getBoundingClientRect(),n=Mu(e.width)/t.offsetWidth||1,i=Mu(e.height)/t.offsetHeight||1;return n!==1||i!==1}function GJ(t,e,n){n===void 0&&(n=!1);var i=Ui(e),r=Ui(e)&&VJ(e),s=Sa(e),o=Au(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ls(e)!=="body"||bx(s))&&(a=BJ(e)),Ui(e)?(l=Au(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=vx(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function UJ(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function YJ(t){var e=UJ(t);return G6.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function jJ(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function qJ(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var hA={placement:"bottom",modifiers:[],strategy:"absolute"};function fA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function H_(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?hA:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},hA,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,d={state:u,setOptions:function(y){var p=typeof y=="function"?y(u.options):y;m(),u.options=Object.assign({},s,u.options,p),u.scrollParents={reference:Wl(a)?Af(a):a.contextElement?Af(a.contextElement):[],popper:Af(l)};var b=YJ(qJ([].concat(i,u.options.modifiers)));return u.orderedModifiers=b.filter(function(v){return v.enabled}),g(),d.update()},forceUpdate:function(){if(!f){var y=u.elements,p=y.reference,b=y.popper;if(fA(p,b)){u.rects={reference:GJ(p,qd(b),u.options.strategy==="fixed"),popper:gx(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(S){return u.modifiersData[S.name]=Object.assign({},S.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var E=u.orderedModifiers[v],w=E.fn,T=E.options,C=T===void 0?{}:T,M=E.name;typeof w=="function"&&(u=w({state:u,options:C,name:M,instance:d})||u)}}}},update:jJ(function(){return new Promise(function(_){d.forceUpdate(),_(u)})}),destroy:function(){m(),f=!0}};if(!fA(a,l))return d;d.setOptions(c).then(function(_){!f&&c.onFirstUpdate&&c.onFirstUpdate(_)});function g(){u.orderedModifiers.forEach(function(_){var y=_.name,p=_.options,b=p===void 0?{}:p,v=_.effect;if(typeof v=="function"){var E=v({state:u,name:y,instance:d,options:b}),w=function(){};h.push(E||w)}})}function m(){h.forEach(function(_){return _()}),h=[]}return d}}var XJ=H_(),ZJ=[_x,wx,px,dx],KJ=H_({defaultModifiers:ZJ}),JJ=[_x,wx,px,dx,tN,Q6,nN,Z6,eN],xx=H_({defaultModifiers:JJ});const iN=Object.freeze(Object.defineProperty({__proto__:null,afterMain:W6,afterRead:F6,afterWrite:V6,applyStyles:dx,arrow:Z6,auto:z_,basePlacements:ah,beforeMain:P6,beforeRead:N6,beforeWrite:H6,bottom:Ei,clippingParents:O6,computeStyles:px,createPopper:xx,createPopperBase:XJ,createPopperLite:KJ,detectOverflow:Iu,end:Cu,eventListeners:_x,flip:Q6,hide:eN,left:Vn,main:z6,modifierPhases:G6,offset:tN,placements:hx,popper:Ac,popperGenerator:H_,popperOffsets:wx,preventOverflow:nN,read:D6,reference:L6,right:Ti,start:zl,top:Bn,variationPlacements:tw,viewport:ux,write:B6},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const To=new Map,D1={set(t,e,n){To.has(t)||To.set(t,new Map);const i=To.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return To.has(t)&&To.get(t).get(e)||null},remove(t,e){if(!To.has(t))return;const n=To.get(t);n.delete(e),n.size===0&&To.delete(t)}},QJ=1e6,eQ=1e3,rw="transitionend",rN=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),tQ=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),nQ=t=>{do t+=Math.floor(Math.random()*QJ);while(document.getElementById(t));return t},iQ=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*eQ)},sN=t=>{t.dispatchEvent(new Event(rw))},Gs=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),la=t=>Gs(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(rN(t)):null,lh=t=>{if(!Gs(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},ca=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",oN=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?oN(t.parentNode):null},o0=()=>{},Xd=t=>{t.offsetHeight},aN=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,F1=[],rQ=t=>{document.readyState==="loading"?(F1.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of F1)e()}),F1.push(t)):t()},Xi=()=>document.documentElement.dir==="rtl",er=t=>{rQ(()=>{const e=aN();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},ii=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,lN=(t,e,n=!0)=>{if(!n){ii(t);return}const i=5,r=iQ(e)+i;let s=!1;const o=({target:a})=>{a===e&&(s=!0,e.removeEventListener(rw,o),ii(t))};e.addEventListener(rw,o),setTimeout(()=>{s||sN(e)},r)},Ex=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return s===-1?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},sQ=/[^.]*(?=\..*)\.|.*/,oQ=/\..*/,aQ=/::\d+$/,P1={};let dA=1;const cN={mouseenter:"mouseover",mouseleave:"mouseout"},lQ=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function uN(t,e){return e&&`${e}::${dA++}`||t.uidEvent||dA++}function hN(t){const e=uN(t);return t.uidEvent=e,P1[e]=P1[e]||{},P1[e]}function cQ(t,e){return function n(i){return Tx(i,{delegateTarget:t}),n.oneOff&&re.off(t,i.type,e),e.apply(t,[i])}}function uQ(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Tx(r,{delegateTarget:o}),i.oneOff&&re.off(t,r.type,e,n),n.apply(o,[r])}}function fN(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function dN(t,e,n){const i=typeof e=="string",r=i?n:e||n;let s=gN(t);return lQ.has(s)||(s=t),[i,r,s]}function gA(t,e,n,i,r){if(typeof e!="string"||!t)return;let[s,o,a]=dN(e,n,i);e in cN&&(o=(g=>function(m){if(!m.relatedTarget||m.relatedTarget!==m.delegateTarget&&!m.delegateTarget.contains(m.relatedTarget))return g.call(this,m)})(o));const l=hN(t),c=l[a]||(l[a]={}),u=fN(c,o,s?n:null);if(u){u.oneOff=u.oneOff&&r;return}const h=uN(o,e.replace(sQ,"")),f=s?uQ(t,n,o):cQ(t,o);f.delegationSelector=s?n:null,f.callable=o,f.oneOff=r,f.uidEvent=h,c[h]=f,t.addEventListener(a,f,s)}function sw(t,e,n,i,r){const s=fN(e[n],i,r);s&&(t.removeEventListener(n,s,!!r),delete e[n][s.uidEvent])}function hQ(t,e,n,i){const r=e[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&sw(t,e,n,o.callable,o.delegationSelector)}function gN(t){return t=t.replace(oQ,""),cN[t]||t}const re={on(t,e,n,i){gA(t,e,n,i,!1)},one(t,e,n,i){gA(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,s,o]=dN(e,n,i),a=o!==e,l=hN(t),c=l[o]||{},u=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;sw(t,l,o,s,r?n:null);return}if(u)for(const h of Object.keys(l))hQ(t,l,h,e.slice(1));for(const[h,f]of Object.entries(c)){const d=h.replace(aQ,"");(!a||e.includes(d))&&sw(t,l,o,f.callable,f.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=aN(),r=gN(e),s=e!==r;let o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(e,n),i(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=Tx(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function Tx(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}function mA(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function z1(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Us={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${z1(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${z1(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=mA(t.dataset[i])}return e},getDataAttribute(t,e){return mA(t.getAttribute(`data-bs-${z1(e)}`))}};class Zd{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const i=Gs(n)?Us.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...Gs(n)?Us.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[i,r]of Object.entries(n)){const s=e[i],o=Gs(s)?"element":tQ(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}}const fQ="5.3.2";class Rr extends Zd{constructor(e,n){super(),e=la(e),e&&(this._element=e,this._config=this._getConfig(n),D1.set(this._element,this.constructor.DATA_KEY,this))}dispose(){D1.remove(this._element,this.constructor.DATA_KEY),re.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){lN(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return D1.get(la(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return fQ}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const W1=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?rN(n.trim()):null}return e},be={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!ca(n)&&lh(n))},getSelectorFromElement(t){const e=W1(t);return e&&be.findOne(e)?e:null},getElementFromSelector(t){const e=W1(t);return e?be.findOne(e):null},getMultipleElementsFromSelector(t){const e=W1(t);return e?be.find(e):[]}},B_=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;re.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),ca(this))return;const s=be.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(s)[e]()})},dQ="alert",gQ="bs.alert",mN=`.${gQ}`,mQ=`close${mN}`,pQ=`closed${mN}`,_Q="fade",yQ="show";class V_ extends Rr{static get NAME(){return dQ}close(){if(re.trigger(this._element,mQ).defaultPrevented)return;this._element.classList.remove(yQ);const n=this._element.classList.contains(_Q);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),re.trigger(this._element,pQ),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=V_.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}B_(V_,"close");er(V_);const vQ="button",bQ="bs.button",wQ=`.${bQ}`,xQ=".data-api",EQ="active",pA='[data-bs-toggle="button"]',TQ=`click${wQ}${xQ}`;class G_ extends Rr{static get NAME(){return vQ}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(EQ))}static jQueryInterface(e){return this.each(function(){const n=G_.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}re.on(document,TQ,pA,t=>{t.preventDefault();const e=t.target.closest(pA);G_.getOrCreateInstance(e).toggle()});er(G_);const SQ="swipe",ch=".bs.swipe",CQ=`touchstart${ch}`,MQ=`touchmove${ch}`,AQ=`touchend${ch}`,RQ=`pointerdown${ch}`,IQ=`pointerup${ch}`,kQ="touch",$Q="pen",OQ="pointer-event",LQ=40,NQ={endCallback:null,leftCallback:null,rightCallback:null},DQ={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class a0 extends Zd{constructor(e,n){super(),this._element=e,!(!e||!a0.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return NQ}static get DefaultType(){return DQ}static get NAME(){return SQ}dispose(){re.off(this._element,ch)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),ii(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=LQ)return;const n=e/this._deltaX;this._deltaX=0,n&&ii(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(re.on(this._element,RQ,e=>this._start(e)),re.on(this._element,IQ,e=>this._end(e)),this._element.classList.add(OQ)):(re.on(this._element,CQ,e=>this._start(e)),re.on(this._element,MQ,e=>this._move(e)),re.on(this._element,AQ,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===$Q||e.pointerType===kQ)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const FQ="carousel",PQ="bs.carousel",Ca=`.${PQ}`,pN=".data-api",zQ="ArrowLeft",WQ="ArrowRight",HQ=500,zh="next",gc="prev",Rc="left",Jm="right",BQ=`slide${Ca}`,H1=`slid${Ca}`,VQ=`keydown${Ca}`,GQ=`mouseenter${Ca}`,UQ=`mouseleave${Ca}`,YQ=`dragstart${Ca}`,jQ=`load${Ca}${pN}`,qQ=`click${Ca}${pN}`,_N="carousel",im="active",XQ="slide",ZQ="carousel-item-end",KQ="carousel-item-start",JQ="carousel-item-next",QQ="carousel-item-prev",yN=".active",vN=".carousel-item",eee=yN+vN,tee=".carousel-item img",nee=".carousel-indicators",iee="[data-bs-slide], [data-bs-slide-to]",ree='[data-bs-ride="carousel"]',see={[zQ]:Jm,[WQ]:Rc},oee={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},aee={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Kd extends Rr{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=be.findOne(nee,this._element),this._addEventListeners(),this._config.ride===_N&&this.cycle()}static get Default(){return oee}static get DefaultType(){return aee}static get NAME(){return FQ}next(){this._slide(zh)}nextWhenVisible(){!document.hidden&&lh(this._element)&&this.next()}prev(){this._slide(gc)}pause(){this._isSliding&&sN(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){re.one(this._element,H1,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){re.one(this._element,H1,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const r=e>i?zh:gc;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&re.on(this._element,VQ,e=>this._keydown(e)),this._config.pause==="hover"&&(re.on(this._element,GQ,()=>this.pause()),re.on(this._element,UQ,()=>this._maybeEnableCycle())),this._config.touch&&a0.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of be.find(tee,this._element))re.on(i,YQ,r=>r.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Rc)),rightCallback:()=>this._slide(this._directionToOrder(Jm)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),HQ+this._config.interval))}};this._swipeHelper=new a0(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=see[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=be.findOne(yN,this._indicatorsElement);n.classList.remove(im),n.removeAttribute("aria-current");const i=be.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(im),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const i=this._getActive(),r=e===zh,s=n||Ex(this._getItems(),i,r,this._config.wrap);if(s===i)return;const o=this._getItemIndex(s),a=d=>re.trigger(this._element,d,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(a(BQ).defaultPrevented||!i||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const u=r?KQ:ZQ,h=r?JQ:QQ;s.classList.add(h),Xd(s),i.classList.add(u),s.classList.add(u);const f=()=>{s.classList.remove(u,h),s.classList.add(im),i.classList.remove(im,h,u),this._isSliding=!1,a(H1)};this._queueCallback(f,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(XQ)}_getActive(){return be.findOne(eee,this._element)}_getItems(){return be.find(vN,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Xi()?e===Rc?gc:zh:e===Rc?zh:gc}_orderToDirection(e){return Xi()?e===gc?Rc:Jm:e===gc?Jm:Rc}static jQueryInterface(e){return this.each(function(){const n=Kd.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}re.on(document,qQ,iee,function(t){const e=be.getElementFromSelector(this);if(!e||!e.classList.contains(_N))return;t.preventDefault();const n=Kd.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(Us.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});re.on(window,jQ,()=>{const t=be.find(ree);for(const e of t)Kd.getOrCreateInstance(e)});er(Kd);const lee="collapse",cee="bs.collapse",Jd=`.${cee}`,uee=".data-api",hee=`show${Jd}`,fee=`shown${Jd}`,dee=`hide${Jd}`,gee=`hidden${Jd}`,mee=`click${Jd}${uee}`,B1="show",Pc="collapse",rm="collapsing",pee="collapsed",_ee=`:scope .${Pc} .${Pc}`,yee="collapse-horizontal",vee="width",bee="height",wee=".collapse.show, .collapse.collapsing",ow='[data-bs-toggle="collapse"]',xee={parent:null,toggle:!0},Eee={parent:"(null|element)",toggle:"boolean"};class nd extends Rr{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const i=be.find(ow);for(const r of i){const s=be.getSelectorFromElement(r),o=be.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return xee}static get DefaultType(){return Eee}static get NAME(){return lee}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(wee).filter(a=>a!==this._element).map(a=>nd.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||re.trigger(this._element,hee).defaultPrevented)return;for(const a of e)a.hide();const i=this._getDimension();this._element.classList.remove(Pc),this._element.classList.add(rm),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(rm),this._element.classList.add(Pc,B1),this._element.style[i]="",re.trigger(this._element,fee)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||re.trigger(this._element,dee).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Xd(this._element),this._element.classList.add(rm),this._element.classList.remove(Pc,B1);for(const r of this._triggerArray){const s=be.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(rm),this._element.classList.add(Pc),re.trigger(this._element,gee)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(B1)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=la(e.parent),e}_getDimension(){return this._element.classList.contains(yee)?vee:bee}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(ow);for(const n of e){const i=be.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){const n=be.find(_ee,this._config.parent);return be.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const i of e)i.classList.toggle(pee,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const i=nd.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}re.on(document,mee,ow,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of be.getMultipleElementsFromSelector(this))nd.getOrCreateInstance(e,{toggle:!1}).toggle()});er(nd);const _A="dropdown",Tee="bs.dropdown",ql=`.${Tee}`,Sx=".data-api",See="Escape",yA="Tab",Cee="ArrowUp",vA="ArrowDown",Mee=2,Aee=`hide${ql}`,Ree=`hidden${ql}`,Iee=`show${ql}`,kee=`shown${ql}`,bN=`click${ql}${Sx}`,wN=`keydown${ql}${Sx}`,$ee=`keyup${ql}${Sx}`,Ic="show",Oee="dropup",Lee="dropend",Nee="dropstart",Dee="dropup-center",Fee="dropdown-center",il='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Pee=`${il}.${Ic}`,Qm=".dropdown-menu",zee=".navbar",Wee=".navbar-nav",Hee=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Bee=Xi()?"top-end":"top-start",Vee=Xi()?"top-start":"top-end",Gee=Xi()?"bottom-end":"bottom-start",Uee=Xi()?"bottom-start":"bottom-end",Yee=Xi()?"left-start":"right-start",jee=Xi()?"right-start":"left-start",qee="top",Xee="bottom",Zee={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Kee={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class es extends Rr{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=be.next(this._element,Qm)[0]||be.prev(this._element,Qm)[0]||be.findOne(Qm,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Zee}static get DefaultType(){return Kee}static get NAME(){return _A}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ca(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!re.trigger(this._element,Iee,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Wee))for(const i of[].concat(...document.body.children))re.on(i,"mouseover",o0);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ic),this._element.classList.add(Ic),re.trigger(this._element,kee,e)}}hide(){if(ca(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!re.trigger(this._element,Aee,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))re.off(i,"mouseover",o0);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ic),this._element.classList.remove(Ic),this._element.setAttribute("aria-expanded","false"),Us.removeDataAttribute(this._menu,"popper"),re.trigger(this._element,Ree,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Gs(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${_A.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof iN>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Gs(this._config.reference)?e=la(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=xx(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Ic)}_getPlacement(){const e=this._parent;if(e.classList.contains(Lee))return Yee;if(e.classList.contains(Nee))return jee;if(e.classList.contains(Dee))return qee;if(e.classList.contains(Fee))return Xee;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Oee)?n?Vee:Bee:n?Uee:Gee}_detectNavbar(){return this._element.closest(zee)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Us.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...ii(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const i=be.find(Hee,this._menu).filter(r=>lh(r));i.length&&Ex(i,n,e===vA,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=es.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===Mee||e.type==="keyup"&&e.key!==yA)return;const n=be.find(Pee);for(const i of n){const r=es.getInstance(i);if(!r||r._config.autoClose===!1)continue;const s=e.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===yA||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:r._element};e.type==="click"&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),i=e.key===See,r=[Cee,vA].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();const s=this.matches(il)?this:be.prev(this,il)[0]||be.next(this,il)[0]||be.findOne(il,e.delegateTarget.parentNode),o=es.getOrCreateInstance(s);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),s.focus())}}re.on(document,wN,il,es.dataApiKeydownHandler);re.on(document,wN,Qm,es.dataApiKeydownHandler);re.on(document,bN,es.clearMenus);re.on(document,$ee,es.clearMenus);re.on(document,bN,il,function(t){t.preventDefault(),es.getOrCreateInstance(this).toggle()});er(es);const xN="backdrop",Jee="fade",bA="show",wA=`mousedown.bs.${xN}`,Qee={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ete={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class EN extends Zd{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Qee}static get DefaultType(){return ete}static get NAME(){return xN}show(e){if(!this._config.isVisible){ii(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Xd(n),n.classList.add(bA),this._emulateAnimation(()=>{ii(e)})}hide(e){if(!this._config.isVisible){ii(e);return}this._getElement().classList.remove(bA),this._emulateAnimation(()=>{this.dispose(),ii(e)})}dispose(){this._isAppended&&(re.off(this._element,wA),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Jee),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=la(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),re.on(e,wA,()=>{ii(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){lN(e,this._getElement(),this._config.isAnimated)}}const tte="focustrap",nte="bs.focustrap",l0=`.${nte}`,ite=`focusin${l0}`,rte=`keydown.tab${l0}`,ste="Tab",ote="forward",xA="backward",ate={autofocus:!0,trapElement:null},lte={autofocus:"boolean",trapElement:"element"};class TN extends Zd{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ate}static get DefaultType(){return lte}static get NAME(){return tte}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),re.off(document,l0),re.on(document,ite,e=>this._handleFocusin(e)),re.on(document,rte,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,re.off(document,l0))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const i=be.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===xA?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===ste&&(this._lastTabNavDirection=e.shiftKey?xA:ote)}}const EA=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",TA=".sticky-top",sm="padding-right",SA="margin-right";class aw{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,sm,n=>n+e),this._setElementAttributes(EA,sm,n=>n+e),this._setElementAttributes(TA,SA,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,sm),this._resetElementAttributes(EA,sm),this._resetElementAttributes(TA,SA)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(e,n){const i=e.style.getPropertyValue(n);i&&Us.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const s=Us.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}Us.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(Gs(e)){n(e);return}for(const i of be.find(e,this._element))n(i)}}const cte="modal",ute="bs.modal",Zi=`.${ute}`,hte=".data-api",fte="Escape",dte=`hide${Zi}`,gte=`hidePrevented${Zi}`,SN=`hidden${Zi}`,CN=`show${Zi}`,mte=`shown${Zi}`,pte=`resize${Zi}`,_te=`click.dismiss${Zi}`,yte=`mousedown.dismiss${Zi}`,vte=`keydown.dismiss${Zi}`,bte=`click${Zi}${hte}`,CA="modal-open",wte="fade",MA="show",V1="modal-static",xte=".modal.show",Ete=".modal-dialog",Tte=".modal-body",Ste='[data-bs-toggle="modal"]',Cte={backdrop:!0,focus:!0,keyboard:!0},Mte={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ku extends Rr{constructor(e,n){super(e,n),this._dialog=be.findOne(Ete,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new aw,this._addEventListeners()}static get Default(){return Cte}static get DefaultType(){return Mte}static get NAME(){return cte}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||re.trigger(this._element,CN,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CA),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||re.trigger(this._element,dte).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(MA),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){re.off(window,Zi),re.off(this._dialog,Zi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new EN({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new TN({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=be.findOne(Tte,this._dialog);n&&(n.scrollTop=0),Xd(this._element),this._element.classList.add(MA);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,re.trigger(this._element,mte,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){re.on(this._element,vte,e=>{if(e.key===fte){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),re.on(window,pte,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),re.on(this._element,yte,e=>{re.one(this._element,_te,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CA),this._resetAdjustments(),this._scrollBar.reset(),re.trigger(this._element,SN)})}_isAnimated(){return this._element.classList.contains(wte)}_triggerBackdropTransition(){if(re.trigger(this._element,gte).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(V1)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(V1),this._queueCallback(()=>{this._element.classList.remove(V1),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){const r=Xi()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){const r=Xi()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=ku.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}re.on(document,bte,Ste,function(t){const e=be.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),re.one(e,CN,r=>{r.defaultPrevented||re.one(e,SN,()=>{lh(this)&&this.focus()})});const n=be.findOne(xte);n&&ku.getInstance(n).hide(),ku.getOrCreateInstance(e).toggle(this)});B_(ku);er(ku);const Ate="offcanvas",Rte="bs.offcanvas",lo=`.${Rte}`,MN=".data-api",Ite=`load${lo}${MN}`,kte="Escape",AA="show",RA="showing",IA="hiding",$te="offcanvas-backdrop",AN=".offcanvas.show",Ote=`show${lo}`,Lte=`shown${lo}`,Nte=`hide${lo}`,kA=`hidePrevented${lo}`,RN=`hidden${lo}`,Dte=`resize${lo}`,Fte=`click${lo}${MN}`,Pte=`keydown.dismiss${lo}`,zte='[data-bs-toggle="offcanvas"]',Wte={backdrop:!0,keyboard:!0,scroll:!1},Hte={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ua extends Rr{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wte}static get DefaultType(){return Hte}static get NAME(){return Ate}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||re.trigger(this._element,Ote,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new aw().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(RA);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(AA),this._element.classList.remove(RA),re.trigger(this._element,Lte,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||re.trigger(this._element,Nte).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(IA),this._backdrop.hide();const n=()=>{this._element.classList.remove(AA,IA),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new aw().reset(),re.trigger(this._element,RN)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){re.trigger(this._element,kA);return}this.hide()},n=!!this._config.backdrop;return new EN({className:$te,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new TN({trapElement:this._element})}_addEventListeners(){re.on(this._element,Pte,e=>{if(e.key===kte){if(this._config.keyboard){this.hide();return}re.trigger(this._element,kA)}})}static jQueryInterface(e){return this.each(function(){const n=ua.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}re.on(document,Fte,zte,function(t){const e=be.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),ca(this))return;re.one(e,RN,()=>{lh(this)&&this.focus()});const n=be.findOne(AN);n&&n!==e&&ua.getInstance(n).hide(),ua.getOrCreateInstance(e).toggle(this)});re.on(window,Ite,()=>{for(const t of be.find(AN))ua.getOrCreateInstance(t).show()});re.on(window,Dte,()=>{for(const t of be.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&ua.getOrCreateInstance(t).hide()});B_(ua);er(ua);const Bte=/^aria-[\w-]*$/i,IN={"*":["class","dir","id","lang","role",Bte],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Vte=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Gte=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ute=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?Vte.has(n)?!!Gte.test(t.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function Yte(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const u of l)Ute(u,c)||o.removeAttribute(u.nodeName)}return r.body.innerHTML}const jte="TemplateFactory",qte={allowList:IN,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Xte={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zte={entry:"(string|element|function|null)",selector:"(string|element)"};class Kte extends Zd{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return qte}static get DefaultType(){return Xte}static get NAME(){return jte}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,s]of Object.entries(this._config.content))this._setContent(e,s,r);const n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},Zte)}_setContent(e,n,i){const r=be.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(Gs(n)){this._putElementInTemplate(la(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Yte(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return ii(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const Jte="tooltip",Qte=new Set(["sanitize","allowList","sanitizeFn"]),G1="fade",ene="modal",om="show",tne=".tooltip-inner",$A=`.${ene}`,OA="hide.bs.modal",Wh="hover",U1="focus",nne="click",ine="manual",rne="hide",sne="hidden",one="show",ane="shown",lne="inserted",cne="click",une="focusin",hne="focusout",fne="mouseenter",dne="mouseleave",gne={AUTO:"auto",TOP:"top",RIGHT:Xi()?"left":"right",BOTTOM:"bottom",LEFT:Xi()?"right":"left"},mne={allowList:IN,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},pne={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Xl extends Rr{constructor(e,n){if(typeof iN>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return mne}static get DefaultType(){return pne}static get NAME(){return Jte}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),re.off(this._element.closest($A),OA,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=re.trigger(this._element,this.constructor.eventName(one)),i=(oN(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),re.trigger(this._element,this.constructor.eventName(lne))),this._popper=this._createPopper(r),r.classList.add(om),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))re.on(a,"mouseover",o0);const o=()=>{re.trigger(this._element,this.constructor.eventName(ane)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||re.trigger(this._element,this.constructor.eventName(rne)).defaultPrevented)return;if(this._getTipElement().classList.remove(om),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))re.off(r,"mouseover",o0);this._activeTrigger[nne]=!1,this._activeTrigger[U1]=!1,this._activeTrigger[Wh]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),re.trigger(this._element,this.constructor.eventName(sne)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(G1,om),n.classList.add(`bs-${this.constructor.NAME}-auto`);const i=nQ(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(G1),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Kte({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[tne]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(G1)}_isShown(){return this.tip&&this.tip.classList.contains(om)}_createPopper(e){const n=ii(this._config.placement,[this,e,this._element]),i=gne[n.toUpperCase()];return xx(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return ii(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...ii(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")re.on(this._element,this.constructor.eventName(cne),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==ine){const i=n===Wh?this.constructor.eventName(fne):this.constructor.eventName(une),r=n===Wh?this.constructor.eventName(dne):this.constructor.eventName(hne);re.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?U1:Wh]=!0,o._enter()}),re.on(this._element,r,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?U1:Wh]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},re.on(this._element.closest($A),OA,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Us.getDataAttributes(this._element);for(const i of Object.keys(n))Qte.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:la(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(e[n]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Xl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}er(Xl);const _ne="popover",yne=".popover-header",vne=".popover-body",bne={...Xl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},wne={...Xl.DefaultType,content:"(null|string|element|function)"};class Cx extends Xl{static get Default(){return bne}static get DefaultType(){return wne}static get NAME(){return _ne}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[yne]:this._getTitle(),[vne]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Cx.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}er(Cx);const xne="scrollspy",Ene="bs.scrollspy",Mx=`.${Ene}`,Tne=".data-api",Sne=`activate${Mx}`,LA=`click${Mx}`,Cne=`load${Mx}${Tne}`,Mne="dropdown-item",mc="active",Ane='[data-bs-spy="scroll"]',Y1="[href]",Rne=".nav, .list-group",NA=".nav-link",Ine=".nav-item",kne=".list-group-item",$ne=`${NA}, ${Ine} > ${NA}, ${kne}`,One=".dropdown",Lne=".dropdown-toggle",Nne={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Dne={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class U_ extends Rr{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Nne}static get DefaultType(){return Dne}static get NAME(){return xne}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=la(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(re.off(this._config.target,LA),re.on(this._config.target,LA,Y1,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=be.find(Y1,this._config.target);for(const n of e){if(!n.hash||ca(n))continue;const i=be.findOne(decodeURI(n.hash),this._element);lh(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(mc),this._activateParents(e),re.trigger(this._element,Sne,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(Mne)){be.findOne(Lne,e.closest(One)).classList.add(mc);return}for(const n of be.parents(e,Rne))for(const i of be.prev(n,$ne))i.classList.add(mc)}_clearActiveClass(e){e.classList.remove(mc);const n=be.find(`${Y1}.${mc}`,e);for(const i of n)i.classList.remove(mc)}static jQueryInterface(e){return this.each(function(){const n=U_.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}re.on(window,Cne,()=>{for(const t of be.find(Ane))U_.getOrCreateInstance(t)});er(U_);const Fne="tab",Pne="bs.tab",Zl=`.${Pne}`,zne=`hide${Zl}`,Wne=`hidden${Zl}`,Hne=`show${Zl}`,Bne=`shown${Zl}`,Vne=`click${Zl}`,Gne=`keydown${Zl}`,Une=`load${Zl}`,Yne="ArrowLeft",DA="ArrowRight",jne="ArrowUp",FA="ArrowDown",j1="Home",PA="End",rl="active",zA="fade",q1="show",qne="dropdown",kN=".dropdown-toggle",Xne=".dropdown-menu",X1=`:not(${kN})`,Zne='.list-group, .nav, [role="tablist"]',Kne=".nav-item, .list-group-item",Jne=`.nav-link${X1}, .list-group-item${X1}, [role="tab"]${X1}`,$N='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Z1=`${Jne}, ${$N}`,Qne=`.${rl}[data-bs-toggle="tab"], .${rl}[data-bs-toggle="pill"], .${rl}[data-bs-toggle="list"]`;class $u extends Rr{constructor(e){super(e),this._parent=this._element.closest(Zne),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),re.on(this._element,Gne,n=>this._keydown(n)))}static get NAME(){return Fne}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),i=n?re.trigger(n,zne,{relatedTarget:e}):null;re.trigger(e,Hne,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(rl),this._activate(be.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(q1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),re.trigger(e,Bne,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(zA))}_deactivate(e,n){if(!e)return;e.classList.remove(rl),e.blur(),this._deactivate(be.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(q1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),re.trigger(e,Wne,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(zA))}_keydown(e){if(![Yne,DA,jne,FA,j1,PA].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(r=>!ca(r));let i;if([j1,PA].includes(e.key))i=n[e.key===j1?0:n.length-1];else{const r=[DA,FA].includes(e.key);i=Ex(n,e.target,r,!0)}i&&(i.focus({preventScroll:!0}),$u.getOrCreateInstance(i).show())}_getChildren(){return be.find(Z1,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=be.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const i=this._getOuterElement(e);if(!i.classList.contains(qne))return;const r=(s,o)=>{const a=be.findOne(s,i);a&&a.classList.toggle(o,n)};r(kN,rl),r(Xne,q1),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(rl)}_getInnerElement(e){return e.matches(Z1)?e:be.findOne(Z1,e)}_getOuterElement(e){return e.closest(Kne)||e}static jQueryInterface(e){return this.each(function(){const n=$u.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}re.on(document,Vne,$N,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!ca(this)&&$u.getOrCreateInstance(this).show()});re.on(window,Une,()=>{for(const t of be.find(Qne))$u.getOrCreateInstance(t)});er($u);const eie="toast",tie="bs.toast",Ma=`.${tie}`,nie=`mouseover${Ma}`,iie=`mouseout${Ma}`,rie=`focusin${Ma}`,sie=`focusout${Ma}`,oie=`hide${Ma}`,aie=`hidden${Ma}`,lie=`show${Ma}`,cie=`shown${Ma}`,uie="fade",WA="hide",am="show",lm="showing",hie={animation:"boolean",autohide:"boolean",delay:"number"},fie={animation:!0,autohide:!0,delay:5e3};class Y_ extends Rr{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return fie}static get DefaultType(){return hie}static get NAME(){return eie}show(){if(re.trigger(this._element,lie).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(uie);const n=()=>{this._element.classList.remove(lm),re.trigger(this._element,cie),this._maybeScheduleHide()};this._element.classList.remove(WA),Xd(this._element),this._element.classList.add(am,lm),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||re.trigger(this._element,oie).defaultPrevented)return;const n=()=>{this._element.classList.add(WA),this._element.classList.remove(lm,am),re.trigger(this._element,aie)};this._element.classList.add(lm),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(am),super.dispose()}isShown(){return this._element.classList.contains(am)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){re.on(this._element,nie,e=>this._onInteraction(e,!0)),re.on(this._element,iie,e=>this._onInteraction(e,!1)),re.on(this._element,rie,e=>this._onInteraction(e,!0)),re.on(this._element,sie,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Y_.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}B_(Y_);er(Y_);const Ax=t=>(Qt("data-v-6f411a7c"),t=t(),en(),t),die={class:"container"},gie={class:"row"},mie=Ax(()=>x("div",{class:"col text-start collapsible",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#hrzone-graph-content","aria-expanded":"false","aria-controls":"hrzone-graph-content"},[x("h6",{class:"pt-1 mb-0 title"},[x("i",{class:"fa-solid fa-caret-right collapse-indicator"}),pe(" Heart Rate Zone ")])],-1)),pie={class:"col-auto text-end"},_ie={class:"input-group input-group-sm"},yie=Ax(()=>x("span",{class:"input-group-text ps-1"},"Max HR",-1)),vie=["value","readonly"],bie=Ax(()=>x("span",{class:"input-group-text pe-1"},[pe("bpm "),x("i",{class:"fa-solid fa-question-circle ps-1 mt-lg-1","data-bs-toggle":"tooltip","data-bs-html":"true","data-bs-custom-class":"openivity-tooltip","data-bs-title":`
            <span>Common formula: </span><br />
            <b>Max HR = 220 - Age</b>
          `}," ")],-1)),wie={class:"row collapse show pb-3",id:"hrzone-graph-content"},xie=193,Eie={props:{selectedSession:{type:Array,required:!0,default:[]},receivedRecord:Ke,receivedRecordFreeze:Boolean},components:{HeartRateZoneBar:$6},data(){return{isLoading:!1,hrZones:[{zone:"Zone 5",zoneSub:"Maximum",minmax:[174,176],timeInSecond:0,prosen:0,progressClass:["bg-danger"],showProgressText:!1},{zone:"Zone 4",zoneSub:"Threshold",minmax:[155,174],timeInSecond:0,prosen:0,progressClass:["bg-warning","text-dark"],showProgressText:!1},{zone:"Zone 3",zoneSub:"Aaerobic",minmax:[136,154],timeInSecond:0,prosen:0,progressClass:["bg-success"],showProgressText:!1},{zone:"Zone 2",zoneSub:"Easy",minmax:[116,135],timeInSecond:0,prosen:0,progressClass:["bg-primary"],showProgressText:!1},{zone:"Zone 1",zoneSub:"Warm Up",minmax:[97,115],timeInSecond:0,prosen:0,progressClass:["bg-secondary"],showProgressText:!1}],maxHr:xie}},watch:{selectedSession:{handler(t){this.summarizedGraph(t)}}},computed:{},methods:{maxHrOnChange(t,e){this.$nextTick(()=>{this.maxHr=this.validateHr(parseFloat(e.target.value),t),this.$forceUpdate(),t!=this.maxHr&&this.summarizedGraph(this.selectedSession)})},validateHr(t,e){return t>=50&&t<=300?t:e},summarizedGraph(t){if(this.isLoading=!0,console.time("HR Zone Process"),this.hrZones.forEach(e=>{e.prosen=0,e.timeInSecond=0}),this.hrZones[0].minmax=[Math.floor(this.maxHr*.9),1/0],this.hrZones[1].minmax=[Math.floor(this.maxHr*.8),this.hrZones[0].minmax[0]-1],this.hrZones[2].minmax=[Math.floor(this.maxHr*.7),this.hrZones[1].minmax[0]-1],this.hrZones[3].minmax=[Math.floor(this.maxHr*.6),this.hrZones[2].minmax[0]-1],this.hrZones[4].minmax=[Math.floor(this.maxHr*.5),this.hrZones[3].minmax[0]-1],!t){console.timeEnd("HR Zone Process"),this.isLoading=!1;return}this.categorizedByTransition(t),console.timeEnd("HR Zone Process"),this.isLoading=!1},categorizedByDiffData(t,e){var o;let n=[],i=0,r=[];t.forEach(a=>{if(a.records!=null)for(let l=0;l<a.records.length-1;l++){const c=a.records[l];if(c.heartRate==null)continue;let{nextEntry:u,nextIndex:h}=this.getNextValidEntry(a,c,l);l=h==-1?l:h-1;const f=this.getHeartRateZoneIndex(c.heartRate,r),d=this.getHeartRateZoneIndex(u.heartRate??0,r);if(c.timestamp==null||u.timestamp==null)continue;const g=new Date(c.timestamp);let _=(new Date(u.timestamp).valueOf()-g.valueOf())/1e3;(_>30||_<0)&&(_=1),c==u&&(_=1),i+=_;let y=f;e&&(y=d),n[y]||(n[y]=0),n[y]+=_}});const s={};for(const[a,l]of n.entries())if(this.hrZones[a]){const c=l/i*100;s[a]=c,this.hrZones[a].prosen=c||0,this.hrZones[a].timeInSecond=l}console.log("> Heart Rate Zone Breakdown:");for(const[a,l]of n.entries())console.log(` > ${(o=this.hrZones[a])==null?void 0:o.zone}: ${l==null?void 0:l.toFixed(2)} seconds (${s[a].toFixed(2)}%)`);console.log(`> Total Time: ${i.toFixed(2)} seconds`)},categorizedByTransition(t){var o;let e=[],n=0,i=[];t.forEach(a=>{if(a.records!=null)for(let l=0;l<a.records.length;l++){const c=a.records[l];if(c.heartRate==null)continue;let{nextEntry:u,nextIndex:h}=this.getNextValidEntry(a,c,l);l=h==-1?l:h-1;const f=this.getHeartRateZoneIndex(c.heartRate,i),d=this.getHeartRateZoneIndex(u.heartRate??0,i);if(c.timestamp==null||u.timestamp==null)continue;let g=(new Date(u.timestamp).valueOf()-new Date(c.timestamp).valueOf())/1e3;if((g>30||g<0)&&(g=1),c==u&&(g=1),n+=g,e[f]||(e[f]=0),f!==d){const m=this.determineZonesInvolved(f,d),_=m.reduce((y,p)=>{const b=p==-1?c.heartRate??0:Math.min(Math.max(this.hrZones[p].minmax[0],c.heartRate??0),this.hrZones[p].minmax[1]),v=p==-1?u.heartRate??0:Math.min(Math.max(this.hrZones[p].minmax[0],u.heartRate??0),this.hrZones[p].minmax[1]);return 1+y+Math.abs(b-v)},0);for(let y=0;y<m.length;y++){const p=m[y];e[p]=e[p]||0;const b=p==-1?c.heartRate??0:Math.min(Math.max(this.hrZones[p].minmax[0],c.heartRate||0),this.hrZones[p].minmax[1]),v=p==-1?u.heartRate??0:Math.min(Math.max(this.hrZones[p].minmax[0],u.heartRate||0),this.hrZones[p].minmax[1]),E=1+Math.abs(b-v);e[p]+=g*(E/_)}}else e[f]+=g}});const r={},s=e[-1]??0;for(const[a,l]of e.entries())if(this.hrZones[a]){const c=l/(n-s)*100;r[a]=c,this.hrZones[a].prosen=c||0,this.hrZones[a].timeInSecond=l}console.log("> Heart Rate Zone Breakdown:");for(const[a,l]of e.entries())console.log(` > ${(o=this.hrZones[a])==null?void 0:o.zone}: ${l==null?void 0:l.toFixed(2)} seconds (${r[a].toFixed(2)}%)`);console.log(`> Total Time: ${n.toFixed(2)} seconds`)},getNextValidEntry(t,e,n){for(let i=n+1;i<t.records.length;i++){const r=t.records[i];if(r.heartRate!=null)return{nextEntry:r,nextIndex:i}}return{nextEntry:e,nextIndex:-1}},getHeartRateZoneIndex(t,e){if(e[t]!=null)return e[t];for(const[n,i]of this.hrZones.entries())if(t>=i.minmax[0]&&t<=i.minmax[1])return e[t]=n,n;return-1},determineZonesInvolved(t,e){const n=t<e?1:-1,i=[];t==-1&&i.push(-1);for(let r=t;r!==e+n;r+=n)i.push(r);return e==-1&&i.push(-1),i}},mounted(){this.summarizedGraph(this.selectedSession),new Xl(document.body,{selector:"[data-bs-toggle='tooltip']"})}},Tie=xt({...Eie,__name:"HeartRateZoneGraph",setup(t){return(e,n)=>(j(),K("div",die,[x("div",gie,[mie,x("div",pie,[x("div",_ie,[yie,x("input",{type:"text",class:"form-control form-control-sm text-end",placeholder:"-",inputmode:"numeric",maxlength:"3",style:{width:"calc(1.35em + 3ch)"},value:e.maxHr,onChange:n[0]||(n[0]=i=>e.maxHrOnChange(e.maxHr,i)),readonly:e.isLoading},null,40,vie),bie])])]),x("div",wie,[(j(!0),K(yt,null,ji(e.hrZones,i=>(j(),K("div",{class:"col-12 pt-2",key:i.zone},[me($6,{zone:i.zone,zoneSub:i.zoneSub,minmax:i.minmax,timeInSecond:i.timeInSecond,prosen:i.prosen,"progress-class":i.progressClass,"progress-text":i.showProgressText,isLoading:e.isLoading},null,8,["zone","zoneSub","minmax","timeInSecond","prosen","progress-class","progress-text","isLoading"])]))),128))])]))}});const Sie=Ct(Tie,[["__scopeId","data-v-6f411a7c"]]),Cie={class:"col-12 h-100 pt-2"},Mie={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){return[new qi({title:"Avg Pace",value:this.summary.avgPace?gu(this.summary.avgPace):"-:-"}),new qi({title:"Avg Elapsed Pace",value:this.summary.avgElapsedPace?gu(this.summary.avgElapsedPace):"-:-"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},Aie=xt({...Mie,__name:"PaceGraph",setup(t){return(e,n)=>(j(),K("div",Cie,[me(nh,{name:"Pace",icon:"fa-clock-rotate-left","record-field":"pace",records:t.records,details:e.details,"graph-records":t.graphRecords,summary:t.summary,color:"dodgerblue","y-label":"Pace (duration/km)",unit:"/km","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","summary","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}}),Rie={class:"col-12 h-100 pt-2"},Iie={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){var t,e;return[new qi({title:"Avg Power",value:((t=this.summary.avgPower)==null?void 0:t.toFixed(0))??"0"}),new qi({title:"Max Power",value:((e=this.summary.maxPower)==null?void 0:e.toFixed(0))??"0"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},kie=xt({...Iie,__name:"PowerGraph",setup(t){return(e,n)=>(j(),K("div",Rie,[me(nh,{name:"Power",icon:"fa-bolt-lightning","record-field":"power",records:t.records,details:e.details,"graph-records":t.graphRecords,color:"darkslategray","y-label":"Pwr. (W)",unit:"W","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}}),$ie={class:"col-12 h-100 pt-2"},Oie={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){var t,e,n,i;return[new qi({title:"Avg Speed",value:(t=this.summary)!=null&&t.avgSpeed?(((e=this.summary)==null?void 0:e.avgSpeed)*3600/1e3).toFixed(2):"0.00"}),new qi({title:"Max Speed",value:(n=this.summary)!=null&&n.maxSpeed?(((i=this.summary)==null?void 0:i.maxSpeed)*3600/1e3).toFixed(2):"0.00"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},Lie=xt({...Oie,__name:"SpeedGraph",setup(t){return(e,n)=>(j(),K("div",$ie,[me(nh,{name:"Speed",icon:"fa-gauge-high","record-field":"speed",records:t.records,details:e.details,"graph-records":t.graphRecords,color:"lightgreen","pointer-color":"#7f8c8d","y-label":"Spd. (km/h)",unit:"km/h","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}}),Nie={class:"col-12 h-100 pt-2"},Die={props:{graphRecords:{type:Array,required:!0,default:[]},records:{type:Array,required:!0,default:[]},color:String,summary:{type:hs,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean},computed:{details(){var t,e;return[new qi({title:"Avg Temperature",value:((t=this.summary.avgTemperature)==null?void 0:t.toFixed(0))??"0"}),new qi({title:"Max Temperature",value:((e=this.summary.maxTemperature)==null?void 0:e.toFixed(0))??"0"})]}},methods:{onHoveredRecord(t){this.$emit("hoveredRecord",t)},onHoveredRecordFreeze(t){this.$emit("hoveredRecordFreeze",t)}}},Fie=xt({...Die,__name:"TemperatureGraph",setup(t){return(e,n)=>(j(),K("div",Nie,[me(nh,{name:"Temperature",icon:"fa-temperature-low","record-field":"temperature",records:t.records,details:e.details,"graph-records":t.graphRecords,color:"midnightblue","y-label":"Temp (C)",unit:"C","received-record":t.receivedRecord,"received-record-freeze":t.receivedRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","details","graph-records","y-label","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]))}}),Pie={props:{laps:{type:Array,required:!0}},methods:{secondsToDHMS:P_}};const Aa=t=>(Qt("data-v-2617ce68"),t=t(),en(),t),zie={key:0,class:"col-12 h-100"},Wie=["data-bs-target","aria-controls"],Hie={class:"row text-start"},Bie={class:"col-auto d-inline-block",style:{height:"50px"}},Vie={style:{"text-align":"left"}},Gie=Aa(()=>x("i",{class:"fa-solid fa-caret-right collapse-indicator"},null,-1)),Uie={class:"px-1"},Yie={class:"col"},jie=Aa(()=>x("div",{class:"row overview-title"},"Distance",-1)),qie={class:"row overview-value"},Xie={class:"col"},Zie=Aa(()=>x("div",{class:"row overview-title"},"Moving Time",-1)),Kie={class:"row overview-value"},Jie={class:"col"},Qie=Aa(()=>x("div",{class:"row overview-title"},"Avg Cadence",-1)),ere={class:"row overview-value"},tre=["id"],nre={class:"row m-0"},ire=Md('<div class="col ps-4 pe-0" data-v-2617ce68><div data-v-2617ce68></div><div class="right-border" data-v-2617ce68><div class="detail-title" data-v-2617ce68>Speed</div><div class="detail-title" data-v-2617ce68>Cadence</div><div class="detail-title" data-v-2617ce68>Heart Rate</div><div class="detail-title" data-v-2617ce68>Power</div></div></div>',1),rre={class:"col fw-bold text-center px-0"},sre=Aa(()=>x("div",{class:"fw-normal"},"Avg",-1)),ore={class:"right-border"},are={class:"detail-value"},lre={class:"detail-value"},cre={class:"detail-value"},ure={class:"detail-value"},hre={class:"col fw-bold text-center px-0"},fre=Aa(()=>x("div",{class:"fw-normal"},"Max",-1)),dre={class:"right-border"},gre={class:"detail-value"},mre={class:"detail-value"},pre={class:"detail-value"},_re={class:"detail-value"},yre=Md('<div class="col m-0" data-v-2617ce68><div data-v-2617ce68></div><div data-v-2617ce68><div class="ps-2 detail-unit" data-v-2617ce68>km/h</div><div class="ps-2 detail-unit" data-v-2617ce68>rpm</div><div class="ps-2 detail-unit" data-v-2617ce68>bpm</div><div class="ps-2 detail-unit" data-v-2617ce68>W</div></div></div>',1),vre={class:"calories mt-1"},bre={class:"row m-0 pt-1 pb-1"},wre=Aa(()=>x("div",{class:"col ps-4 m-0 text-start detail-title"},"Calories",-1)),xre={class:"col pe-4 m-0 text-end"},Ere={class:"fw-bold pe-1"},Tre=Aa(()=>x("span",{class:"detail-unit"},"Cal",-1));function Sre(t,e,n,i,r,s){var o;return((o=n.laps)==null?void 0:o.length)>0?(j(),K("div",zie,[(j(!0),K(yt,null,ji(n.laps,(a,l)=>(j(),K("div",{key:l},[x("div",{class:"tab row m-0 mt-2 pt-2 collapsible",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#laps-"+l,"aria-expanded":"false","aria-controls":"laps-"+l},[x("div",Hie,[x("div",Bie,[x("h6",Vie,[Gie,x("span",Uie,"Lap "+X(l+1),1)])]),x("div",Yie,[jie,x("div",qie,X(a.totalDistance?(a.totalDistance/1e3).toFixed(2):"-")+" km ",1)]),x("div",Xie,[Zie,x("div",Kie,X(a.totalMovingTime?s.secondsToDHMS(a.totalMovingTime):"-:-"),1)]),x("div",Jie,[Qie,x("div",ere,X(a.avgCadence?a.avgCadence:"-")+" rpm",1)])])],8,Wie),x("div",{class:"collapse show text-start pb-3",id:"laps-"+l},[x("div",nre,[ire,x("div",rre,[sre,x("div",ore,[x("div",are,X(a.avgSpeed?(a.avgSpeed*3600/1e3).toFixed(2):"-"),1),x("div",lre,X(a.avgCadence?a.avgCadence:"-"),1),x("div",cre,X(a.avgHeartRate?a.avgHeartRate:"-"),1),x("div",ure,X(a.avgPower?a.avgPower:"-"),1)])]),x("div",hre,[fre,x("div",dre,[x("div",gre,X(a.maxSpeed?(a.maxSpeed*3600/1e3).toFixed(2):"-"),1),x("div",mre,X(a.maxCadence?a.maxCadence:"-"),1),x("div",pre,X(a.maxHeartRate?a.maxHeartRate:"-"),1),x("div",_re,X(a.maxPower?a.maxPower:"-"),1)])]),yre]),x("div",vre,[x("div",bre,[wre,x("div",xre,[x("span",Ere,X(a.totalCalories?a.totalCalories.toLocaleString():"-"),1),Tre])])])],8,tre)]))),128))])):Ee("",!0)}const Cre=Ct(Pie,[["render",Sre],["__scopeId","data-v-2617ce68"]]),Mre={props:{size:{default:"70px"}},computed:{diamondStyle(){let t=parseInt(this.size);return{width:t/4+"px",height:t/4+"px"}},styles(){let t=parseInt(this.size);return{width:this.size,height:t/4+"px"}}}};const Are={class:"spinner-container"};function Rre(t,e,n,i,r,s){return j(),K("div",Are,[x("span",{style:Gt(s.styles),class:"spinner spinner--rotate-diamond"},[x("div",{style:Gt(s.diamondStyle),class:"diamond"},null,4),x("div",{style:Gt(s.diamondStyle),class:"diamond"},null,4),x("div",{style:Gt(s.diamondStyle),class:"diamond"},null,4)],4)])}const ON=Ct(Mre,[["render",Rre],["__scopeId","data-v-d6d77f04"]]),Ire="/assets/crop-black-072065eb.svg",kre="/assets/destination-point-63b16bda.svg",$re="/assets/eye-off-black-537ff3d4.svg",Ore="/assets/starting-point-c9a465c9.svg";function Nn(...t){let e=0,n=0;for(let i=0;i<t.length;i++){const r=t[i];r&&(n+=r,e++)}return e==0?null:n/e}function Dn(...t){let e=0,n=0;for(let i=0;i<t.length;i++){const r=t[i];r&&(r>e&&(e=r),n++)}return n==0?null:e}function wn(...t){let e=0,n=0;for(let i=0;i<t.length;i++){const r=t[i];r!=null&&(e+=r,n++)}return n==0?null:e}const Fs=-2,id=-1,Lre={props:{isActivityFileReady:Boolean,sessions:{type:Array,required:!0},selectedSessions:{type:Array,required:!0}},data(){return{sessionSelected:Fs}},watch:{sessions:{handler(t){this.updateSelectedSession(t)}},sessionSelected:{handler(t){this.$emit("sessionSelected",parseInt(t))}}},computed:{creatorName(){return this.selectedSessions.length>0?this.selectedSessions[0].creatorName:"Unknown"},timeCreated(){return this.selectedSessions.length>0?this.selectedSessions[0].timeCreated:""},timezone(){return this.selectedSessions.length>0?this.selectedSessions[0].timezone:0},summary(){const t=new hs;let e=new Set;for(let n=0;n<this.selectedSessions.length;n++){let i=0;const r=this.selectedSessions[n];if(n>0){const s=this.selectedSessions[n-1],o=new Date(s.endTime).getTime();i=(new Date(r.startTime).getTime()-o)/1e3}e.add(r.sport),t.totalMovingTime=wn(t.totalMovingTime,r.totalMovingTime),t.totalElapsedTime=wn(t.totalElapsedTime,r.totalElapsedTime),t.totalElapsedTime=t.totalElapsedTime+i,t.totalDistance=wn(t.totalDistance,r.totalDistance),t.totalAscent=wn(t.totalAscent,r.totalAscent),t.totalDescent=wn(t.totalDescent,r.totalDescent),t.totalCycles=wn(t.totalCycles,r.totalCycles),t.totalCalories=wn(t.totalCalories,r.totalCalories),t.avgSpeed=Nn(t.avgSpeed,r.avgSpeed),t.maxSpeed=Dn(t.maxSpeed,r.maxSpeed),t.avgHeartRate=Nn(t.avgHeartRate,r.avgHeartRate),t.maxHeartRate=Dn(t.maxHeartRate,r.maxHeartRate),t.avgCadence=Nn(t.avgCadence,r.avgCadence),t.maxCadence=Dn(t.maxCadence,r.maxCadence),t.avgPower=Nn(t.avgPower,r.avgPower),t.maxPower=Dn(t.maxPower,r.maxPower),t.avgTemperature=Nn(t.avgTemperature,r.avgTemperature),t.maxTemperature=Dn(t.maxTemperature,r.maxTemperature),t.avgAltitude=Nn(t.avgAltitude,r.avgAltitude),t.maxAltitude=Dn(t.maxAltitude,r.maxAltitude),t.avgPace=Nn(t.avgPace,r.avgPace),t.avgElapsedPace=Dn(t.avgElapsedPace,r.avgElapsedPace)}return t.sport=Array.from(e).join(", "),this.$emit("summary",t),t}},methods:{avg:Nn,max:Dn,sum:wn,secondsToDHMS:P_,formatPace:gu,toTimezoneDateString:cx,GMTString:k6,formatCreatedDate(t,e){return I6(t,e).setLocale("en-US").toLocaleString({localeMatcher:"best fit",weekday:void 0,year:"numeric",month:"long",day:"numeric",hour:"2-digit",hour12:!0,minute:"2-digit",second:void 0})},updateSelectedSession(t){t.length==0?this.sessionSelected=Fs:t.length==1?this.sessionSelected=0:this.sessionSelected=id}},mounted(){this.updateSelectedSession(this.sessions)}};const co=t=>(Qt("data-v-6d051623"),t=t(),en(),t),Nre={key:0,class:"summary mt-4"},Dre={class:"px-3 pt-3 pb-4"},Fre={class:"time-created pb-2"},Pre=co(()=>x("i",{class:"fa-solid fa-clock"},null,-1)),zre={class:"row",style:{"font-size":"1em",color:"var(--bs-heading-color)"}},Wre={class:"col text-start fs-8"},Hre={key:0,value:"-2"},Bre={key:1,value:"-1"},Vre=["value"],Gre={class:"col-auto text-end pt-1"},Ure=co(()=>x("i",{class:"fa-solid fa-microchip pe-1"},null,-1)),Yre={class:"row pt-2 text-center"},jre={class:"col px-0"},qre=co(()=>x("div",{class:"summary-title"},"Moving Time",-1)),Xre={class:"summary-value fs-6"},Zre={class:"col px-0"},Kre=co(()=>x("div",{class:"summary-title"},"Distance",-1)),Jre={class:"summary-value fs-6 lr-border"},Qre={class:"col px-0"},ese=co(()=>x("div",{class:"summary-title"},"Elevation Gain",-1)),tse={class:"summary-value fs-6"},nse={class:"row pt-2 text-center"},ise={class:"col px-0"},rse=co(()=>x("div",{class:"summary-title"},"Elapsed",-1)),sse={class:"summary-value fs-6"},ose={class:"col px-0"},ase={key:0},lse=co(()=>x("div",{class:"summary-title"},"Avg Pace",-1)),cse={class:"summary-value fs-6 lr-border"},use={key:1},hse=co(()=>x("div",{class:"summary-title"},"Avg Speed",-1)),fse={class:"summary-value fs-6 lr-border"},dse={class:"col px-0"},gse=co(()=>x("div",{class:"summary-title"},"Calories",-1)),mse={class:"summary-value fs-6"};function pse(t,e,n,i,r,s){var o;return n.isActivityFileReady?(j(),K("div",Nre,[x("div",Dre,[x("div",Fre,[Pre,pe(" "+X(s.formatCreatedDate(s.timeCreated,s.timezone))+" | "+X(s.timezone==0?"UTC":s.timezone>0?"+"+s.timezone:s.timezone),1)]),x("div",zre,[x("div",Wre,[ct(x("select",{class:"form-select form-select-sm",name:"sessions",id:"sessions","onUpdate:modelValue":e[0]||(e[0]=a=>r.sessionSelected=a)},[n.sessions.length==0?(j(),K("option",Hre,"No Session")):Ee("",!0),n.sessions.length>1?(j(),K("option",Bre,"Multi-Sessions")):Ee("",!0),(j(!0),K(yt,null,ji(n.sessions,(a,l)=>(j(),K("option",{key:l,value:l},X(n.sessions.length>1?"S"+(l+1):"Session")+": "+X(a.sport),9,Vre))),128))],512),[[dk,r.sessionSelected]])]),x("div",Gre,[Ure,pe(X(s.creatorName),1)])]),x("div",Yre,[x("div",jre,[x("div",null,[qre,x("div",Xre,X(s.summary.totalMovingTime?s.secondsToDHMS(s.summary.totalMovingTime):"-:-"),1)])]),x("div",Zre,[x("div",null,[Kre,x("div",Jre,X(s.summary.totalDistance?(s.summary.totalDistance/1e3).toFixed(2):"-")+" km ",1)])]),x("div",Qre,[x("div",null,[ese,x("div",tse,X(((o=s.summary.totalAscent)==null?void 0:o.toFixed(0))??"-")+" m",1)])])]),x("div",nse,[x("div",ise,[x("div",null,[rse,x("div",sse,X(s.summary.totalElapsedTime?s.secondsToDHMS(s.summary.totalElapsedTime):"-:-"),1)])]),x("div",ose,[s.summary.sport=="Running"?(j(),K("div",ase,[lse,x("div",cse,X(s.summary.avgPace?s.formatPace(s.summary.avgPace):"-:-")+" /km ",1)])):(j(),K("div",use,[hse,x("div",fse,X(s.summary.avgSpeed?(s.summary.avgSpeed*3600/1e3).toFixed(2):"-")+" km/h ",1)]))]),x("div",dse,[x("div",null,[gse,x("div",mse,X(s.summary.totalCalories?s.summary.totalCalories.toLocaleString():"-")+" Cal ",1)])])])])])):Ee("",!0)}const _se=Ct(Lre,[["render",pse],["__scopeId","data-v-6d051623"]]);class yse{constructor(e){ee(this,"err",null);ee(this,"activities");ee(this,"decodeTook");ee(this,"serializationTook");ee(this,"totalElapsed");const n=e;this.err=n==null?void 0:n.err,this.activities=n==null?void 0:n.activities,this.decodeTook=n==null?void 0:n.decodeTook,this.serializationTook=n==null?void 0:n.serializationTook,this.totalElapsed=n==null?void 0:n.totalElapsed}}class vse{constructor(e){ee(this,"err",null);ee(this,"deserializeInputTook");ee(this,"encodeTook");ee(this,"serializationTook");ee(this,"totalElapsed");ee(this,"fileName");ee(this,"fileType");ee(this,"filesBytes");const n=e;this.err=n==null?void 0:n.err,this.deserializeInputTook=n==null?void 0:n.deserializeInputTook,this.encodeTook=n==null?void 0:n.encodeTook,this.serializationTook=n==null?void 0:n.serializationTook,this.totalElapsed=n==null?void 0:n.totalElapsed,this.fileName=n==null?void 0:n.fileName,this.fileType=n==null?void 0:n.fileType,this.filesBytes=n==null?void 0:n.filesBytes}}class bse{constructor(e){ee(this,"toolMode",0);ee(this,"targetFileType",0);ee(this,"manufacturerId",0);ee(this,"productId",0);ee(this,"deviceName","Unknown");ee(this,"sports",[]);ee(this,"trimMarkers",[]);ee(this,"concealMarkers",[]);ee(this,"removeFields",[]);this.toolMode=e.toolMode,this.targetFileType=e.targetFileType,this.manufacturerId=e.manufacturerId,this.productId=e.productId,this.deviceName=e.deviceName,this.sports=e.sports,this.trimMarkers=e.trimMarkers,this.concealMarkers=e.concealMarkers,this.removeFields=e.removeFields}}var mn=(t=>(t[t.Unknown=0]="Unknown",t[t.Edit=1]="Edit",t[t.Combine=2]="Combine",t[t.SplitPerSession=3]="SplitPerSession",t))(mn||{}),Bt=(t=>(t[t.Unsupported=0]="Unsupported",t[t.FIT=1]="FIT",t[t.GPX=2]="GPX",t[t.TCX=3]="TCX",t))(Bt||{});class wse{constructor(e){ee(this,"startN",0);ee(this,"endN",0);this.startN=(e==null?void 0:e.startN)??0,this.endN=(e==null?void 0:e.endN)??0}}class HA{constructor(e){ee(this,"id",0);ee(this,"name","");ee(this,"products",[]);const n=e;this.id=n==null?void 0:n.id,this.name=n==null?void 0:n.name,this.products=n==null?void 0:n.products}}class xse{constructor(e=[],n=Ese){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:i}=this,r=n[e];for(;e>0;){const s=e-1>>1,o=n[s];if(i(r,o)>=0)break;n[e]=o,e=s}n[e]=r}_down(e){const{data:n,compare:i}=this,r=this.length>>1,s=n[e];for(;e<r;){let o=(e<<1)+1,a=n[o];const l=o+1;if(l<this.length&&i(n[l],a)<0&&(o=l,a=n[l]),i(a,s)>=0)break;n[e]=a,e=o}n[e]=s}}function Ese(t,e){return t<e?-1:t>e?1:0}const Tse=6371,Yr=Math.PI/180;function Sse(t,e,n,i,r,s){let o=1;const a=[];i===void 0&&(i=1/0),r!==void 0&&(o=sl(r/Tse));const l=new xse([],Cse);let c={left:0,right:t.ids.length-1,axis:0,dist:0,minLng:-180,minLat:-90,maxLng:180,maxLat:90};const u=Math.cos(n*Yr);for(;c;){const h=c.right,f=c.left;if(h-f<=t.nodeSize)for(let d=f;d<=h;d++){const g=t.ids[d];(!s||s(g))&&l.push({item:g,dist:VA(e,n,t.coords[2*d],t.coords[2*d+1],u)})}else{const d=f+h>>1,g=t.coords[2*d],m=t.coords[2*d+1],_=t.ids[d];(!s||s(_))&&l.push({item:_,dist:VA(e,n,g,m,u)});const y=(c.axis+1)%2,p={left:f,right:d-1,axis:y,minLng:c.minLng,minLat:c.minLat,maxLng:c.axis===0?g:c.maxLng,maxLat:c.axis===1?m:c.maxLat,dist:0},b={left:d+1,right:h,axis:y,minLng:c.axis===0?g:c.minLng,minLat:c.axis===1?m:c.minLat,maxLng:c.maxLng,maxLat:c.maxLat,dist:0};p.dist=BA(e,n,u,p),b.dist=BA(e,n,u,b),l.push(p),l.push(b)}for(;l.length&&typeof l.peek().item<"u";){const d=l.pop();if(d.dist>o||(a.push(d.item),a.length===i))return a}c=l.pop()}return a}function BA(t,e,n,i){const r=i.minLng,s=i.maxLng,o=i.minLat,a=i.maxLat;if(t>=r&&t<=s)return e<o?sl((e-o)*Yr):e>a?sl((e-a)*Yr):0;const l=Math.min(sl((t-r)*Yr),sl((t-s)*Yr)),c=Mse(e,l);return c>o&&c<a?ep(l,n,e,c):Math.min(ep(l,n,e,o),ep(l,n,e,a))}function Cse(t,e){return t.dist-e.dist}function sl(t){const e=Math.sin(t/2);return e*e}function ep(t,e,n,i){return e*Math.cos(i*Yr)*t+sl((n-i)*Yr)}function VA(t,e,n,i,r){const s=sl((t-n)*Yr);return ep(s,r,e,i)}function Mse(t,e){const n=1-2*e;return n<=0?t>0?90:-90:Math.atan(Math.tan(t*Yr)/n)/Yr}const GA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],K1=1,Hh=8;class j_{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(r!==K1)throw new Error(`Got v${r} data when expected v${K1}.`);const s=GA[i&15];if(!s)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new j_(a,o,s,e)}constructor(e,n=64,i=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const s=GA.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(s<0)throw new Error(`Unexpected typed array class: ${i}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,Hh,e),this.coords=new this.ArrayType(this.data,Hh+a+l,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Hh+o+a+l),this.ids=new this.IndexArrayType(this.data,Hh,e),this.coords=new this.ArrayType(this.data,Hh+a+l,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(K1<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=n,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return lw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:o,nodeSize:a}=this,l=[0,s.length-1,0],c=[];for(;l.length;){const u=l.pop()||0,h=l.pop()||0,f=l.pop()||0;if(h-f<=a){for(let _=f;_<=h;_++){const y=o[2*_],p=o[2*_+1];y>=e&&y<=i&&p>=n&&p<=r&&c.push(s[_])}continue}const d=f+h>>1,g=o[2*d],m=o[2*d+1];g>=e&&g<=i&&m>=n&&m<=r&&c.push(s[d]),(u===0?e<=g:n<=m)&&(l.push(f),l.push(d-1),l.push(1-u)),(u===0?i>=g:r>=m)&&(l.push(d+1),l.push(h),l.push(1-u))}return c}within(e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:s,nodeSize:o}=this,a=[0,r.length-1,0],l=[],c=i*i;for(;a.length;){const u=a.pop()||0,h=a.pop()||0,f=a.pop()||0;if(h-f<=o){for(let _=f;_<=h;_++)UA(s[2*_],s[2*_+1],e,n)<=c&&l.push(r[_]);continue}const d=f+h>>1,g=s[2*d],m=s[2*d+1];UA(g,m,e,n)<=c&&l.push(r[d]),(u===0?e-i<=g:n-i<=m)&&(a.push(f),a.push(d-1),a.push(1-u)),(u===0?e+i>=g:n+i>=m)&&(a.push(d+1),a.push(h),a.push(1-u))}return l}}function lw(t,e,n,i,r,s){if(r-i<=n)return;const o=i+r>>1;LN(t,e,o,i,r,s),lw(t,e,n,i,o-1,1-s),lw(t,e,n,o+1,r,1-s)}function LN(t,e,n,i,r,s){for(;r>i;){if(r-i>600){const c=r-i+1,u=n-i+1,h=Math.log(c),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(c-f)/c)*(u-c/2<0?-1:1),g=Math.max(i,Math.floor(n-u*f/c+d)),m=Math.min(r,Math.floor(n+(c-u)*f/c+d));LN(t,e,n,g,m,s)}const o=e[2*n+s];let a=i,l=r;for(Bh(t,e,i,n),e[2*r+s]>o&&Bh(t,e,i,r);a<l;){for(Bh(t,e,a,l),a++,l--;e[2*a+s]<o;)a++;for(;e[2*l+s]>o;)l--}e[2*i+s]===o?Bh(t,e,i,l):(l++,Bh(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function Bh(t,e,n,i){J1(t,n,i),J1(e,2*n,2*i),J1(e,2*n+1,2*i+1)}function J1(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function UA(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}class Ase{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const uo=Ase,Ou={PROPERTYCHANGE:"propertychange"};class Rse{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Rx=Rse;function Ise(t,e,n){let i,r;n=n||ha;let s=0,o=t.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function ha(t,e){return t>e?1:t<e?-1:0}function Ix(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=t[r];if(s===e)return r;if(s<e)return n(e,t[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function kse(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function ts(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function Ra(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function $se(t,e,n){const i=e||ha;return t.every(function(r,s){if(s===0)return!0;const o=i(t[s-1],r);return!(o>0||n&&o===0)})}function rd(){return!0}function q_(){return!1}function Lu(){}function NN(t){let e=!1,n,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!Ra(s,i))&&(e=!0,r=this,i=s,n=t.apply(this,arguments)),n}}function Ose(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Qd(t){for(const e in t)delete t[e]}function Hl(t){let e;for(e in t)return!1;return!e}class Lse extends Rx{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new uo(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Lu);delete o[i]}return l}disposeInternal(){this.listeners_&&Qd(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Lu,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const eg=Lse,$e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ye(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function c0(t,e,n,i){return Ye(t,e,n,i,!0)}function ft(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Qd(t))}class X_ extends eg{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent($e.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ye(this,e[s],n);return r}return Ye(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=c0(this,e[s],n)}else i=c0(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)Nse(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}}X_.prototype.on;X_.prototype.once;X_.prototype.un;function Nse(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ft(t[e]);else ft(t)}const DN=X_;function ke(){throw new Error("Unimplemented abstract method.")}let Dse=0;function tt(t){return t.ol_uid||(t.ol_uid=String(++Dse))}class YA extends uo{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class Fse extends DN{constructor(e){super(),this.on,this.once,this.un,tt(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new YA(i,e,n)),i=Ou.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new YA(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const r=this.values_||(this.values_={});if(i)r[e]=n;else{const s=r[e];r[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Hl(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const Ir=Fse,ti={ADD:"add",REMOVE:"remove"},jA={LENGTH:"length"};class cm extends uo{constructor(e,n,i){super(e),this.element=n,this.index=i}}class Pse extends Ir{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(jA.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new cm(ti.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new cm(ti.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new cm(ti.REMOVE,r,e)),this.dispatchEvent(new cm(ti.ADD,n,e))}updateLength_(){this.set(jA.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const jr=Pse;function Xe(t,e){if(!t)throw new Error(e)}class kx extends Ir{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new kx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ft(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ye(e,$e.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?zse(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function zse(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(Xe(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const zo=kx,fa=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Wse=fa.includes("firefox"),Hse=fa.includes("safari")&&!fa.includes("chrom");Hse&&(fa.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(fa));const Bse=fa.includes("webkit")&&!fa.includes("edge"),FN=fa.includes("macintosh"),PN=typeof devicePixelRatio<"u"?devicePixelRatio:1,$x=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,zN=typeof Image<"u"&&Image.prototype.decode,WN=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();new Array(6);function Yi(){return[1,0,0,1,0,0]}function Vse(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function Gse(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ht(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Use(t,e,n){return Vse(t,e,0,0,n,0,0)}function Ki(t,e,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=o*i*c-a*i*l+e,t[5]=o*r*l+a*r*c+n,t}function Z_(t,e){const n=Yse(e);Xe(n!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*l-o*a)/n,t[5]=-(i*l-r*a)/n,t}function Yse(t){return t[0]*t[3]-t[1]*t[2]}let qA;function Ox(t){const e="matrix("+t.join(", ")+")";if($x)return e;const n=qA||(qA=document.createElement("div"));return n.style.transform=e,n.style.transform}const ln={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function XA(t){const e=Ji();for(let n=0,i=t.length;n<i;++n)Rf(e,t[n]);return e}function Lx(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function HN(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Kl(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function tg(t,e){return Nx(t,e[0],e[1])}function Xo(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Nx(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function cw(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=ln.UNKNOWN;return o<n?l=l|ln.LEFT:o>r&&(l=l|ln.RIGHT),a<i?l=l|ln.BELOW:a>s&&(l=l|ln.ABOVE),l===ln.UNKNOWN&&(l=ln.INTERSECTING),l}function Ji(){return[1/0,1/0,-1/0,-1/0]}function da(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function ng(t){return da(1/0,1/0,-1/0,-1/0,t)}function BN(t,e){const n=t[0],i=t[1];return da(n,i,n,i,e)}function Dx(t,e,n,i,r){const s=ng(r);return GN(s,t,e,n,i)}function sd(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function VN(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Rf(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function GN(t,e,n,i,r){for(;n<i;n+=r)jse(t,e[n],e[n+1]);return t}function jse(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function UN(t,e){let n;return n=e(K_(t)),n||(n=e(J_(t)),n)||(n=e(Q_(t)),n)||(n=e(Jl(t)),n)?n:!1}function uw(t){let e=0;return Ql(t)||(e=ut(t)*Rn(t)),e}function K_(t){return[t[0],t[1]]}function J_(t){return[t[2],t[1]]}function ga(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function qse(t,e){let n;if(e==="bottom-left")n=K_(t);else if(e==="bottom-right")n=J_(t);else if(e==="top-left")n=Jl(t);else if(e==="top-right")n=Q_(t);else throw new Error("Invalid corner");return n}function hw(t,e,n,i,r){const[s,o,a,l,c,u,h,f]=fw(t,e,n,i);return da(Math.min(s,a,c,h),Math.min(o,l,u,f),Math.max(s,a,c,h),Math.max(o,l,u,f),r)}function fw(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,h=s*a,f=t[0],d=t[1];return[f-l+h,d-c-u,f-l-h,d-c+u,f+l-h,d+c+u,f+l+h,d+c-u,f-l+h,d-c-u]}function Rn(t){return t[3]-t[1]}function tu(t,e,n){const i=n||Ji();return Wn(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):ng(i),i}function Jl(t){return[t[0],t[3]]}function Q_(t){return[t[2],t[3]]}function ut(t){return t[2]-t[0]}function Wn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ql(t){return t[2]<t[0]||t[3]<t[1]}function Xse(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Zse(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function Kse(t,e,n){let i=!1;const r=cw(t,e),s=cw(t,n);if(r===ln.INTERSECTING||s===ln.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],f=n[0],d=n[1],g=(d-h)/(f-u);let m,_;s&ln.ABOVE&&!(r&ln.ABOVE)&&(m=f-(d-c)/g,i=m>=o&&m<=l),!i&&s&ln.RIGHT&&!(r&ln.RIGHT)&&(_=d-(f-l)*g,i=_>=a&&_<=c),!i&&s&ln.BELOW&&!(r&ln.BELOW)&&(m=f-(d-a)/g,i=m>=o&&m<=l),!i&&s&ln.LEFT&&!(r&ln.LEFT)&&(_=d-(f-o)*g,i=_>=a&&_<=c)}return i}function YN(t,e){const n=e.getExtent(),i=ga(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=ut(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}function Jse(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];YN(t,e);const i=ut(n);if(ut(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}const Nu={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Qse{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Nu[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jN=Qse,ig=6378137,zc=Math.PI*ig,eoe=[-zc,-zc,zc,zc],toe=[-180,-85,180,85],um=ig*Math.log(Math.tan(Math.PI/2));class pc extends jN{constructor(e){super({code:e,units:"m",extent:eoe,global:!0,worldExtent:toe,getPointResolution:function(n,i){return n/Math.cosh(i[1]/ig)}})}}const ZA=[new pc("EPSG:3857"),new pc("EPSG:102100"),new pc("EPSG:102113"),new pc("EPSG:900913"),new pc("http://www.opengis.net/def/crs/EPSG/0/3857"),new pc("http://www.opengis.net/gml/srs/epsg.xml#3857")];function noe(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n){e[r]=zc*t[r]/180;let s=ig*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));s>um?s=um:s<-um&&(s=-um),e[r+1]=s}return e}function ioe(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/zc,e[r+1]=360*Math.atan(Math.exp(t[r+1]/ig))/Math.PI-90;return e}const roe=6378137,KA=[-180,-90,180,90],soe=Math.PI*roe/180;class Ba extends jN{constructor(e,n){super({code:e,units:"degrees",extent:KA,axisOrientation:n,global:!0,metersPerUnit:soe,worldExtent:KA})}}const JA=[new Ba("CRS:84"),new Ba("EPSG:4326","neu"),new Ba("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ba("urn:ogc:def:crs:OGC:2:84"),new Ba("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ba("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ba("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let dw={};function ooe(t){return dw[t]||dw[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function aoe(t,e){dw[t]=e}let nu={};function u0(t,e,n){const i=t.getCode(),r=e.getCode();i in nu||(nu[i]={}),nu[i][r]=n}function loe(t,e){let n;return t in nu&&e in nu[t]&&(n=nu[t][e]),n}function jt(t,e,n){return Math.min(Math.max(t,e),n)}function coe(t,e,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return wl(t,e,n,i)}function wl(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function uoe(t){const e=t.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(t[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=t[r];t[r]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const l=-t[a][i]/t[i][i];for(let c=i;c<e+1;c++)i==c?t[a][c]=0:t[a][c]+=l*t[i][c]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function tp(t){return t*Math.PI/180}function xl(t,e){const n=t%e;return n*e<0?n+e:n}function pi(t,e,n){return t+n*(e-t)}function ey(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function hm(t,e){return Math.floor(ey(t,e))}function fm(t,e){return Math.ceil(ey(t,e))}function QA(t,e,n){const i=n!==void 0?t.toFixed(n):""+t;let r=i.indexOf(".");return r=r===-1?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function hoe(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function eR(t,e,n){const i=xl(e+180,360)-180,r=Math.abs(3600*i),s=n||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=ey(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"";return(a!==0||l!==0)&&(c+=" "+QA(a,2)+""),l!==0&&(c+=" "+QA(l,2,s)+""),i!==0&&(c+=" "+t.charAt(i<0?1:0)),c}function h0(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Fx(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function foe(t,e){return t[0]*=e,t[1]*=e,t}function doe(t,e){return t?eR("NS",t[1],e)+" "+eR("EW",t[0],e):""}function qN(t,e){if(e.canWrapX()){const n=ut(e.getExtent()),i=goe(t,e,n);i&&(t[0]-=i*n)}return t}function goe(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||ut(i),r=Math.floor((t[0]-i[0])/n)),r}const moe=63710088e-1;function tR(t,e,n){n=n||moe;const i=tp(t[1]),r=tp(e[1]),s=(r-i)/2,o=tp(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const XN={info:1,warn:2,error:3,none:4};let poe=XN.info;function ZN(...t){poe>XN.warn||console.warn(...t)}let gw=!0;function _oe(t){gw=!(t===void 0?!0:t)}function Px(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function KN(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function yoe(t){aoe(t.getCode(),t),u0(t,t,Px)}function voe(t){t.forEach(yoe)}function qt(t){return typeof t=="string"?ooe(t):t||null}function f0(t,e,n,i){t=qt(t);let r;const s=t.getPointResolutionFunc();if(s){if(r=s(e,n),i&&i!==t.getUnits()){const o=t.getMetersPerUnit();o&&(r=r*o/Nu[i])}}else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=Wx(t,qt("EPSG:4326"));if(a===KN&&o!=="degrees")r=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const u=tR(c.slice(0,2),c.slice(2,4)),h=tR(c.slice(4,6),c.slice(6,8));r=(u+h)/2}const l=i?Nu[i]:t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function nR(t){voe(t),t.forEach(function(e){t.forEach(function(n){e!==n&&u0(e,n,Px)})})}function boe(t,e,n,i){t.forEach(function(r){e.forEach(function(s){u0(r,s,n),u0(s,r,i)})})}function zx(t,e){return t?typeof t=="string"?qt(t):t:qt(e)}function Ka(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Wx(t,e)===Px)&&n}function Wx(t,e){const n=t.getCode(),i=e.getCode();let r=loe(n,i);return r||(r=KN),r}function od(t,e){const n=qt(t),i=qt(e);return Wx(n,i)}function woe(t,e,n){return od(e,n)(t,void 0,t.length)}function mw(t,e){return t}function Ss(t,e){return gw&&!h0(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(gw=!1,ZN("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function JN(t,e){return t}function Ps(t,e){return t}function xoe(){nR(ZA),nR(JA),boe(JA,ZA,noe,ioe)}xoe();function na(t,e,n,i,r,s){s=s||[];let o=0;for(let a=e;a<n;a+=i){const l=t[a],c=t[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function QN(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let f=e;f<n;f+=i){const d=t[f]-c,g=t[f+1]-u;o[h++]=c+d*a-g*l,o[h++]=u+d*l+g*a;for(let m=f+2;m<f+i;++m)o[h++]=t[m]}return o&&o.length!=h&&(o.length=h),o}function Eoe(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=i){const f=t[h]-l,d=t[h+1]-c;a[u++]=l+r*f,a[u++]=c+s*d;for(let g=h+2;g<h+i;++g)a[u++]=t[g]}return a&&a.length!=u&&(a.length=u),a}function Toe(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const iR=Yi();class Soe extends Ir{constructor(){super(),this.extent_=Ji(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=NN((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return ke()}closestPointXY(e,n,i,r){return ke()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&ng(n),this.extentRevision_=this.getRevision()}return Xse(this.extent_,e)}rotate(e,n){ke()}scale(e,n,i){ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ke()}getType(){return ke()}applyTransform(e){ke()}intersectsExtent(e){return ke()}translate(e,n){ke()}transform(e,n){const i=qt(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=Rn(c)/Rn(l);return Ki(iR,c[0],c[3],u,-u,0,0,0),na(s,0,s.length,a,iR,o),od(i,n)(s,o,a)}:od(i,n);return this.applyTransform(r),this}}const eD=Soe;class Coe extends eD{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Dx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=rR(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){ke()}setLayout(e,n,i){let r;if(e)r=rR(e);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=ec(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();QN(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=ga(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();Eoe(r,0,r.length,s,e,n,i,r),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Toe(i,0,i.length,r,e,n,i),this.changed()}}}function ec(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function rR(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Moe(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return na(i,0,i.length,r,e,n)}const tc=Coe;function sR(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(c===0&&u===0)h=e;else{const f=((r-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let d=0;d<i;++d)o[d]=pi(t[e+d],t[n+d],f);o.length=i;return}else h=e}for(let f=0;f<i;++f)o[f]=t[h+f];o.length=i}function Hx(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],l=t[e+1],c=wl(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function Bx(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Hx(t,e,a,i,r),e=a}return r}function Aoe(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=Bx(t,e,a,i,r),e=a[a.length-1]}return r}function Vx(t,e,n,i,r,s,o,a,l,c,u){if(e==n)return c;let h,f;if(r===0){if(f=wl(o,a,t[e],t[e+1]),f<c){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,f}return c}u=u||[NaN,NaN];let d=e+i;for(;d<n;)if(sR(t,d-i,d,i,o,a,u),f=wl(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(s&&(sR(t,n-i,e,i,o,a,u),f=wl(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function Gx(t,e,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=Vx(t,e,d,i,r,s,o,a,l,c,u),e=d}return c}function Roe(t,e,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const d=n[h];c=Gx(t,e,d,i,r,s,o,a,l,c,u),e=d[d.length-1]}return c}function Ioe(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function ty(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function rg(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=ty(t,e,n[o],i);r[s++]=l,e=l}return r.length=s,r}function tD(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=rg(t,e,n[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function ny(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-i];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let d=0;const g=t[f],m=t[f+1],_=t[h],y=t[h+1];for(let p=f+i;p<h;p+=i){const b=t[p],v=t[p+1],E=coe(b,v,g,m,_,y);E>d&&(u=p,d=E)}d>r&&(l[(u-e)/i]=1,f+i<u&&c.push(f,u),u+i<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*i],s[o++]=t[e+h*i+1]);return o}function nD(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=ny(t,e,u,i,r,s,o),a.push(o),e=u}return o}function Ya(t,e){return e*Math.round(t/e)}function koe(t,e,n,i,r,s,o){if(e==n)return o;let a=Ya(t[e],r),l=Ya(t[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=Ya(t[e],r),u=Ya(t[e+1],r),e+=i,e==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<n;){const h=Ya(t[e],r),f=Ya(t[e+1],r);if(e+=i,h==c&&f==u)continue;const d=c-a,g=u-l,m=h-a,_=f-l;if(d*_==g*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(g<0&&_<g||g==_||g>0&&_>g)){c=h,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=f}return s[o++]=c,s[o++]=u,o}function Ux(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=koe(t,e,u,i,r,s,o),a.push(o),e=u}return o}function $oe(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=Ux(t,e,u,i,r,s,o,h),a.push(h),e=u[u.length-1]}return o}function Zo(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function ad(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=Zo(t,e,l,i,r[s]),e=l}return r.length=s,r}function pw(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===e?[]:ad(t,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function iD(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function rD(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=iD(t,e,a,i),e=a}return r}function Ooe(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=rD(t,e,a,i),e=a[a.length-1]}return r}class d0 extends tc{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new d0(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<Kl(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return iD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=ny(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new d0(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ty(this.flatCoordinates,0,e,this.stride),this.changed()}}const oR=d0;class Yx extends tc{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Yx(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=wl(e,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return BN(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Nx(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ioe(this.flatCoordinates,0,e,this.stride),this.changed()}}const Pr=Yx;function Loe(t,e,n,i,r){return!UN(r,function(o){return!ol(t,e,n,i,o[0],o[1])})}function ol(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const c=t[e],u=t[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function jx(t,e,n,i,r,s){if(n.length===0||!ol(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(ol(t,n[o-1],n[o],i,r,s))return!1;return!0}function Noe(t,e,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(jx(t,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function qx(t,e,n,i,r,s,o){let a,l,c,u,h,f,d;const g=r[s+1],m=[];for(let p=0,b=n.length;p<b;++p){const v=n[p];for(u=t[v-i],f=t[v-i+1],a=e;a<v;a+=i)h=t[a],d=t[a+1],(g<=f&&d<=g||f<=g&&g<=d)&&(c=(g-f)/(d-f)*(h-u)+u,m.push(c)),u=h,f=d}let _=NaN,y=-1/0;for(m.sort(ha),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const p=Math.abs(h-u);p>y&&(c=(u+h)/2,jx(t,e,n,i,c,g)&&(_=c,y=p)),u=h}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,y),o):[_,g,y]}function sD(t,e,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=qx(t,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function oD(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function iy(t,e,n,i,r){const s=GN(Ji(),t,e,n,i);return Wn(r,s)?Xo(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:oD(t,e,n,i,function(o,a){return Kse(r,o,a)}):!1}function Doe(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){if(iy(t,e,n[s],i,r))return!0;e=n[s]}return!1}function aD(t,e,n,i,r){return!!(iy(t,e,n,i,r)||ol(t,e,n,i,r[0],r[1])||ol(t,e,n,i,r[0],r[3])||ol(t,e,n,i,r[2],r[1])||ol(t,e,n,i,r[2],r[3]))}function lD(t,e,n,i,r){if(!aD(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(Loe(t,n[s-1],n[s],i,r)&&!iy(t,n[s-1],n[s],i,r))return!1;return!0}function Foe(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(lD(t,e,a,i,r))return!0;e=a[a.length-1]}return!1}function Poe(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function Xx(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function Zx(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Xx(t,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function cD(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!Zx(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function g0(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Xx(t,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Poe(t,e,a,i),e=a}return e}function _w(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=g0(t,e,n[s],i,r);return e}function zoe(t,e){const n=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=Xx(t,i,l,2);if(s===void 0&&(s=c),c===s)n.push(e.slice(r,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[r])}r=o+1,i=l}return n}class ma extends tc{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?ts(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new ma(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Kl(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bx(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Gx(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return jx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return rD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),g0(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,ad(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ga(this.getExtent());this.flatInteriorPoint_=qx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Pr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new oR(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new oR(n.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Zx(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=g0(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=Ux(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new ma(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return lD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=rg(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function yw(t){if(Ql(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new ma(s,"XY",[s.length])}const ns={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Kx{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Kx({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Jx=Kx;function m0(t,e,n,i,r,s,o){let a,l;const c=(n-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=t[e],h=t[e+1],f=0;const d=[0];for(let _=e+i;_<n;_+=i){const y=t[_],p=t[_+1];f+=Math.sqrt((y-u)*(y-u)+(p-h)*(p-h)),d.push(f),u=y,h=p}const g=r*f,m=Ise(d,g);m<0?(l=(g-d[-m-2])/(d[-m-1]-d[-m-2]),a=e+(-m-2)*i):a=e+m*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?t[a+u]:pi(t[a+u],t[a+i+u],l);return s}function vw(t,e,n,i,r,s){if(n==e)return null;let o;if(r<t[e+i-1])return s?(o=t.slice(e,e+i),o[i-1]=r,o):null;if(t[n-1]<r)return s?(o=t.slice(n-i,n),o[i-1]=r,o):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const f=a+l>>1;r<t[(f+1)*i-1]?l=f:a=f+1}const c=t[a*i-1];if(r==c)return t.slice((a-1)*i,(a-1)*i+i);const u=t[(a+1)*i-1],h=(r-c)/(u-c);o=[];for(let f=0;f<i-1;++f)o.push(pi(t[(a-1)*i+f],t[a*i+f],h));return o.push(r),o}function Woe(t,e,n,i,r,s,o){if(o)return vw(t,e,n[n.length-1],i,r,s);let a;if(r<t[i-1])return s?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return s?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(r<t[e+i-1])return null;if(r<=t[u-1])return vw(t,e,u,i,r,!1);e=u}}return null}function uD(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const l=t[a],c=t[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class p0 extends tc{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){ts(this.flatCoordinates,e),this.changed()}clone(){const e=new p0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Kl(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,r))}forEachSegment(e){return oD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,vw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return Zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return m0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return uD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=ny(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new p0(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return iy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ty(this.flatCoordinates,0,e,this.stride),this.changed()}}const Yo=p0;class Qx{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Qx({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const to=Qx,We={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function aR(t){return t[0]>0&&t[1]>0}function Hoe(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function yi(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class eE{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=yi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new eE({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ke()}getImage(e){return ke()}getHitDetectionImage(){return ke()}getPixelRatio(e){return 1}getImageState(){return ke()}getImageSize(){return ke()}getOrigin(){return ke()}getSize(){return ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=yi(e)}listenImageChange(e){ke()}load(){ke()}unlistenImageChange(e){ke()}}const hD=eE,ld={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var _n={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};_n.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};_n.max=_n.whitepoint[2].D65;_n.rgb=function(t,e){e=e||_n.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],r=t[2]/e[2],s,o,a;return s=n*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=n*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};ld.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=n*.41239079926595+i*.35758433938387+r*.18048078840183,o=n*.21263900587151+i*.71516867876775+r*.072192315360733,a=n*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||_n.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const tE={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,c,u,h,f,d,g,m;if(s=t[0],o=t[1],a=t[2],s===0)return[0,0,0];var _=.0011070564598794539;return e=e||"D65",n=n||2,h=_n.whitepoint[n][e][0],f=_n.whitepoint[n][e][1],d=_n.whitepoint[n][e][2],g=4*h/(h+15*f+3*d),m=9*f/(h+15*f+3*d),i=o/(13*s)+g||0,r=a/(13*s)+m||0,c=s>8?f*Math.pow((s+16)/116,3):f*s*_,l=c*9*i/(4*r)||0,u=c*(12-3*i-20*r)/(4*r)||0,[l,c,u]}};_n.luv=function(t,e,n){var i,r,s,o,a,l,c,u,h,f,d,g,m,_=.008856451679035631,y=903.2962962962961;e=e||"D65",n=n||2,h=_n.whitepoint[n][e][0],f=_n.whitepoint[n][e][1],d=_n.whitepoint[n][e][2],g=4*h/(h+15*f+3*d),m=9*f/(h+15*f+3*d),l=t[0],c=t[1],u=t[2],i=4*l/(l+15*c+3*u)||0,r=9*c/(l+15*c+3*u)||0;var p=c/f;return s=p<=_?y*p:116*Math.pow(p,1/3)-16,o=13*s*(i-g),a=13*s*(r-m),[s,o,a]};var fD={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],r,s,o;return o=i/360*2*Math.PI,r=n*Math.cos(o),s=n*Math.sin(o),[e,r,s]},xyz:function(t){return tE.xyz(fD.luv(t))}};tE.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};_n.lchuv=function(t){return tE.lchuv(_n.luv(t))};function dD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Boe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const lR=dD(Boe);var cR={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Voe(t){var u,h;var e,n=[],i=1,r;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),lR[t])n=lR[t].slice(),r="rgb";else if(t==="transparent")i=0,r="rgb",n=[0,0,0];else if(t[0]==="#"){var s=t.slice(1),o=s.length,a=o<=4;i=1,a?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];r=l.replace(/a$/,"");var c=r==="cmyk"?4:r==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=n.shift()),n=n.map(function(f,d){if(f[f.length-1]==="%")return f=parseFloat(f)/100,d===3?f:r==="rgb"?f*255:r[0]==="h"||r[0]==="l"&&!d?f*100:r==="lab"?f*125:r==="lch"?d<2?f*150:f*360:r[0]==="o"&&!d?f:r==="oklab"?f*.4:r==="oklch"?d<2?f*.4:f*360:f;if(r[d]==="h"||d===2&&r[r.length-1]==="h"){if(cR[f]!==void 0)return cR[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),i=n.length>c?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),r=((h=(u=t.match(/([a-z])/ig))==null?void 0:u.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:n,alpha:i}}const Q1={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,s,o,a,l,c=0;if(n===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+n):i+n-i*n,r=2*i-s,a=[0,0,0];c<3;)o=e+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[c++]=l*255;return a}};ld.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=s-r,a,l,c;return s===r?a=0:e===s?a=(n-i)/o:n===s?a=2+(i-e)/o:i===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(r+s)/2,s===r?l=0:c<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,c*100]};function Goe(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=Voe(t);if(!n.space)return[];const i=n.space[0]==="h"?Q1.min:ld.min,r=n.space[0]==="h"?Q1.max:ld.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),n.space[0]==="h"&&(e=Q1.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function gD(t){return typeof t=="string"?t:pD(t)}const Uoe=1024,Vh={};let ev=0;function Yoe(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function uR(t){const e=_n.lchuv(ld.xyz(t));return e[3]=t[3],e}function joe(t){const e=_n.rgb(fD.xyz(t));return e[3]=t[3],e}function nE(t){if(Vh.hasOwnProperty(t))return Vh[t];if(ev>=Uoe){let n=0;for(const i in Vh)n++&3||(delete Vh[i],--ev)}const e=Goe(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return mD(e),Vh[t]=e,++ev,e}function _0(t){return Array.isArray(t)?t:nE(t)}function mD(t){return t[0]=jt(t[0]+.5|0,0,255),t[1]=jt(t[1]+.5|0,0,255),t[2]=jt(t[2]+.5|0,0,255),t[3]=jt(t[3],0,1),t}function pD(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const r=t[3]===void 0?1:Math.round(t[3]*100)/100;return"rgba("+e+","+n+","+i+","+r+")"}function qoe(t){try{return nE(t),!0}catch{return!1}}function qr(t){return Array.isArray(t)?pD(t):t}function jn(t,e,n,i){let r;return n&&n.length?r=n.shift():$x?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}function ry(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Xoe(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function Zoe(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function y0(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function v0(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function _D(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Koe(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){t.appendChild(s);continue}if(!s){t.removeChild(r),--i;continue}t.insertBefore(s,r)}}}const dm="ol-hidden",Joe="ol-selectable",nc="ol-unselectable",hR="ol-unsupported",sg="ol-control",fR="ol-collapsed",Qoe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),dR=["style","variant","weight","size","lineHeight","family"],yD=function(t){const e=t.match(Qoe);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=dR.length;i<r;++i){const s=e[i+1];s!==void 0&&(n[dR[i]]=s)}return n.families=n.family.split(/,\s?/),n},vD="10px sans-serif",ni="#000",Du="round",Ys=[],js=0,Fu="round",cd=10,ud="#000",hd="center",b0="middle",al=[0,0,0,0],fd=1,Cs=new Ir;let kc=null,bw;const ww={},eae=function(){const e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,h){let f=!0;for(let d=0;d<i;++d){const g=n[d];if(o=w0(c+" "+u+" "+e+g,r),h!=g){const m=w0(c+" "+u+" "+e+h+","+g,r);f=f&&m!=o}}return!!f}function l(){let c=!0;const u=Cs.getKeys();for(let h=0,f=u.length;h<f;++h){const d=u[h];Cs.get(d)<100&&(a.apply(this,d.split(`
`))?(Qd(ww),kc=null,bw=void 0,Cs.set(d,100)):(Cs.set(d,Cs.get(d)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=yD(c);if(!u)return;const h=u.families;for(let f=0,d=h.length;f<d;++f){const g=h[f],m=u.style+`
`+u.weight+`
`+g;Cs.get(m)===void 0&&(Cs.set(m,100,!0),a(u.style,u.weight,g)||(Cs.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),tae=function(){let t;return function(e){let n=ww[e];if(n==null){if($x){const i=yD(e),r=bD(e,"g");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);ww[e]=n}return n}}();function bD(t,e){return kc||(kc=jn(1,1)),t!=bw&&(kc.font=t,bw=kc.font),kc.measureText(e)}function w0(t,e){return bD(t,e).width}function gR(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,w0(t,s)),0);return n[e]=i,i}function nae(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const f=e[c+1]||t.font,d=w0(f,h);n.push(d),o+=d;const g=tae(f);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function iae(t,e,n,i,r,s,o,a,l,c,u){t.save(),n!==1&&(t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),rae(i,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function rae(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class iE extends hD{constructor(e){const n=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),n=new iE({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const i=this.renderOptions_,r=jn(i.size*e,i.size*e);this.draw_(i,r,e),n=r.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return We.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const w=r;r=s,s=w}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,h=Math.sqrt(l*l+u*u),f=h/l;if(e==="miter"&&f<=i)return f*n;const d=n/2/f,g=n/2*(u/h),_=Math.sqrt((r+d)*(r+d)+g*g)-r;if(this.radius2_===void 0||e==="bevel")return _*2;const y=r*Math.sin(a),p=Math.sqrt(r*r-y*y),b=s-p,E=Math.sqrt(y*y+b*b)/y;if(E<=i){const w=E*n/2-s-r;return 2*Math.max(_,w)}return _*2}createRenderOptions(){let e=Du,n=Fu,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=qr(this.stroke_.getColor()??ud),a=this.stroke_.getWidth()??fd,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Fu,e=this.stroke_.getLineCap()??Du,i=this.stroke_.getMiterLimit()??cd);const l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=ni),n.fillStyle=qr(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=_0(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=jn(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius_;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=ni,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}}const wD=iE;class rE extends wD{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new rE({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}}const xD=rE;let ED=class TD{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=mR,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new TD({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=mR,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function sae(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(Xe(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let tv=null;function oae(t,e){if(!tv){const n=new Jx({color:"rgba(255,255,255,0.4)"}),i=new to({color:"#3399CC",width:1.25});tv=[new ED({image:new xD({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return tv}function mR(t){return t.getGeometry()}const Gn=ED,aae="#333";let lae=class SD{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=yi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Jx({color:aae}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new SD({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=yi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}};const cae=lae,at={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class uae extends Ir{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[at.OPACITY]=e.opacity!==void 0?e.opacity:1,Xe(typeof n[at.OPACITY]=="number","Layer opacity must be a number"),n[at.VISIBLE]=e.visible!==void 0?e.visible:!0,n[at.Z_INDEX]=e.zIndex,n[at.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[at.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[at.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[at.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=jt(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return ke()}getLayerStatesArray(e){return ke()}getExtent(){return this.get(at.EXTENT)}getMaxResolution(){return this.get(at.MAX_RESOLUTION)}getMinResolution(){return this.get(at.MIN_RESOLUTION)}getMinZoom(){return this.get(at.MIN_ZOOM)}getMaxZoom(){return this.get(at.MAX_ZOOM)}getOpacity(){return this.get(at.OPACITY)}getSourceState(){return ke()}getVisible(){return this.get(at.VISIBLE)}getZIndex(){return this.get(at.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(at.EXTENT,e)}setMaxResolution(e){this.set(at.MAX_RESOLUTION,e)}setMinResolution(e){this.set(at.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(at.MAX_ZOOM,e)}setMinZoom(e){this.set(at.MIN_ZOOM,e)}setOpacity(e){Xe(typeof e=="number","Layer opacity must be a number"),this.set(at.OPACITY,e)}setVisible(e){this.set(at.VISIBLE,e)}setZIndex(e){this.set(at.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const CD=uae,Yt={ANIMATING:0,INTERACTING:1},ar={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},hae=42,sE=256;function pR(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+u,d=t[2]-l/2+u,g=t[1]+c/2+h,m=t[3]-c/2+h;f>d&&(f=(d+f)/2,d=f),g>m&&(g=(m+g)/2,m=g);let _=jt(i[0],f,d),y=jt(i[1],g,m);if(o&&n&&r){const p=30*r;_+=-p*Math.log(1+Math.max(0,f-i[0])/p)+p*Math.log(1+Math.max(0,i[0]-d)/p),y+=-p*Math.log(1+Math.max(0,g-i[1])/p)+p*Math.log(1+Math.max(0,i[1]-m)/p)}return[_,y]}}function fae(t){return t}function oE(t,e,n,i){const r=ut(e)/n[0],s=Rn(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function aE(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),jt(i,n/2,e*2)}function dae(t,e,n,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=t[0],c=t[t.length-1],u=n?oE(l,n,o,i):l;if(a)return e?aE(r,u,c):jt(r,c,u);const h=Math.min(u,r),f=Math.floor(Ix(t,h,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}}}function gae(t,e,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,c){if(o!==void 0){const u=r?oE(e,r,l,s):e;if(c)return i?aE(o,u,n):jt(o,n,u);const h=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-h),d=-a*(.5-h)+.5,g=Math.min(u,o),m=Math.floor(Math.log(e/g)/Math.log(t)+d),_=Math.max(f,m),y=e/Math.pow(t,_);return jt(y,n,u)}}}function _R(t,e,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const c=i?oE(t,i,a,r):t;return!n||!l?jt(s,e,c):aE(s,c,e)}}}function lE(t){if(t!==void 0)return 0}function yR(t){if(t!==void 0)return t}function mae(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function pae(t){const e=t===void 0?tp(5):t;return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function MD(t){return Math.pow(t,3)}function uh(t){return 1-MD(1-t)}function _ae(t){return 3*t*t-2*t*t*t}function yae(t){return t}const nv=0;class vae extends Ir{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=zx(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&_oe(),e.center&&(e.center=Ss(e.center,this.projection_)),e.extent&&(e.extent=Ps(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in ar)delete n[a];this.setProperties(n,!0);const i=wae(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=bae(e),s=i.constraint,o=xae(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Ss(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ss(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&gm(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<n;++r){const u=arguments[r],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||_ae,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=xl(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}Eae(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Yt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Yt.ANIMATING]>0}getInteracting(){return this.hints_[Yt.INTERACTING]>0}cancelAnimations(){this.setHint(Yt.ANIMATING,-this.hints_[Yt.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&gm(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=f+h*(g-f),y=d+h*(m-d);this.targetCenter_=[_,y]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?xl(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Yt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&gm(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],Fx(i,e-this.getRotation()),hoe(i,n)),i}calculateCenterZoom(e,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-r[0])/s,a=n[1]-e*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&mw(e,this.getProjection())}getCenterInternal(){return this.get(ar.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return JN(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Xe(n,"The view center is not defined");const i=this.getResolution();Xe(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Xe(r!==void 0,"The view rotation is not defined"),hw(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ar.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Ps(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=ut(e)/n[0],r=Rn(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(s){return n/Math.pow(e,s*r)}}getRotation(){return this.get(ar.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=iv(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=Ix(this.resolutions_,e,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=jt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,jt(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(Xe(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Xe(!Ql(e),"Cannot fit empty extent provided as `geometry`");const r=Ps(e,this.getProjection());i=yw(r)}else if(e.getType()==="Circle"){const r=Ps(e.getExtent(),this.getProjection());i=yw(r),i.rotate(this.getRotation(),ga(r))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=s.length;h<f;h+=o){const d=s[h]*i-s[h+1]*r,g=s[h]*r+s[h+1]*i;a=Math.min(a,d),l=Math.min(l,g),c=Math.max(c,d),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=ga(a);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const d=f[0]*h-f[1]*u,g=f[1]*h+f[0]*u,m=this.getConstrainedCenter([d,g],l),_=n.callback?n.callback:Lu;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),gm(_,!0))}centerOn(e,n,i){this.centerOnInternal(Ss(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(iv(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=iv(e,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=mw(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Ss(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Ss(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ss(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ar.ROTATION)!==r&&this.set(ar.ROTATION,r),this.get(ar.RESOLUTION)!==o&&(this.set(ar.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ar.CENTER)||!h0(this.get(ar.CENTER),a))&&this.set(ar.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!h0(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:uh,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Yt.INTERACTING,1)}endInteraction(e,n,i){i=i&&Ss(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(Yt.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function gm(t,e){setTimeout(function(){t(e)},0)}function bae(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return pR(t.extent,t.constrainOnlyCenter,n)}const e=zx(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,pR(n,!1,!1)}return fae}function wae(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:nv,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=zx(t.projection,"EPSG:3857"),d=f.getExtent();let g=t.constrainOnlyCenter,m=t.extent;if(!c&&!m&&f.isGlobal()&&(g=!1,m=d),t.resolutions!==void 0){const _=t.resolutions;n=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],t.constrainResolution?e=dae(_,u,!g&&m,h):e=_R(n,i,u,!g&&m,h)}else{const y=(d?Math.max(ut(d),Rn(d)):360*Nu.degrees/f.getMetersPerUnit())/sE/Math.pow(2,nv),p=y/Math.pow(2,28-nv);n=t.maxResolution,n!==void 0?o=0:n=y/Math.pow(l,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=y/Math.pow(l,a):i=p),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),t.constrainResolution?e=gae(l,n,i,u,!g&&m,h):e=_R(n,i,u,!g&&m,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function xae(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?pae():n===!1?yR:typeof n=="number"?mae(n):yR}return lE}function Eae(t){return!(t.sourceCenter&&t.targetCenter&&!h0(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function iv(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const Vr=vae;class Tae extends CD{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(at.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(at.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ft(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ye(e,$e.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Vr?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return cE(r,n.viewState)&&(!s||Wn(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const r=e instanceof Vr?e.getViewStateAndExtent():e;let s=n(r);return Array.isArray(s)||(s=[s]),s}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(at.MAP,e)}getMapInternal(){return this.get(at.MAP)}setMap(e){this.mapPrecomposeKey_&&(ft(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ft(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ye(e,ns.PRECOMPOSE,function(n){const r=n.frameState.layerStatesArray,s=this.getLayerState(!1);Xe(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Ye(this,$e.CHANGE,e.render,e),this.changed())}setSource(e){this.set(at.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function cE(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const sy=Tae;function Sae(t,e,n,i,r){AD(t,e,n||0,i||t.length-1,r||Cae)}function AD(t,e,n,i,r){for(;i>n;){if(i-n>600){var s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(n,Math.floor(e-o*l/s+c)),h=Math.min(i,Math.floor(e+(s-o)*l/s+c));AD(t,e,u,h,r)}var f=t[e],d=n,g=i;for(Gh(t,n,e),r(t[i],f)>0&&Gh(t,n,i);d<g;){for(Gh(t,d,g),d++,g--;r(t[d],f)<0;)d++;for(;r(t[g],f)>0;)g--}r(t[n],f)===0?Gh(t,n,g):(g++,Gh(t,g,i)),g<=e&&(n=g+1),e<=g&&(i=g-1)}}function Gh(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Cae(t,e){return t<e?-1:t>e?1:0}let uE=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!pm(e,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;pm(e,l)&&(n.leaf?i.push(a):sv(e,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(e){let n=this.data;if(!pm(e,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(pm(e,o)){if(n.leaf||sv(e,o))return!0;i.push(s)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=$c([]),this}remove(e,n){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){const u=Mae(e,i.children,n);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&sv(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=$c(e.slice(n,i+1)),_c(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=$c([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));vR(e,n,i,c,this.compareMinX);for(let u=n;u<=i;u+=c){const h=Math.min(u+c-1,i);vR(e,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const d=Math.min(f+l-1,h);a.children.push(this._build(e,f,d,r-1))}}return _c(a,this.toBBox),a}_chooseSubtree(e,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=rv(c),h=Iae(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(e),mf(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(e,n){const i=e[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=$c(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,_c(i,this.toBBox),_c(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=$c([e,n]),this.data.height=e.height+1,this.data.leaf=!1,_c(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=gf(e,0,a,this.toBBox),c=gf(e,a,i,this.toBBox),u=kae(l,c),h=rv(l)+rv(c);u<s?(s=u,r=a,o=h<o?h:o):u===s&&h<o&&(o=h,r=a)}return r||i-n}_chooseSplitAxis(e,n,i){const r=e.leaf?this.compareMinX:Aae,s=e.leaf?this.compareMinY:Rae,o=this._allDistMargin(e,n,i,r),a=this._allDistMargin(e,n,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,n,i,r){e.children.sort(r);const s=this.toBBox,o=gf(e,0,n,s),a=gf(e,i-n,i,s);let l=mm(o)+mm(a);for(let c=n;c<i-n;c++){const u=e.children[c];mf(o,e.leaf?s(u):u),l+=mm(o)}for(let c=i-n-1;c>=n;c--){const u=e.children[c];mf(a,e.leaf?s(u):u),l+=mm(a)}return l}_adjustParentBBoxes(e,n,i){for(let r=i;r>=0;r--)mf(n[r],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():_c(e[n],this.toBBox)}};function Mae(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function _c(t,e){gf(t,0,t.children.length,e,t)}function gf(t,e,n,i,r){r||(r=$c(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];mf(r,t.leaf?i(o):o)}return r}function mf(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Aae(t,e){return t.minX-e.minX}function Rae(t,e){return t.minY-e.minY}function rv(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function mm(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Iae(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function kae(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function sv(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pm(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function $c(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vR(t,e,n,i,r){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;Sae(t,o,e,n,r),s.push(e,o,o,n)}}class $ae extends eg{constructor(e,n,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=n,this.state=typeof r=="function"?We.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent($e.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==We.IDLE&&this.loader){this.state=We.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;Ose(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=We.LOADED}).catch(i=>{this.state=We.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Oae(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[c0(i,$e.LOAD,function(){o=!0,s||e()})];return i.src&&zN?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():n())})):a.push(c0(i,$e.ERROR,n)),function(){r=!1,a.forEach(ft)}}function Lae(t,e){return new Promise((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s),e&&(t.src=e)})}function Nae(t,e){return e&&(t.src=e),t.src&&zN?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):Lae(t)}const Dae=$ae;class Fae{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(e,n,i){const r=bR(e,n,i);return r in this.cache_?this.cache_[r]:null}set(e,n,i,r){const s=bR(e,n,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function bR(t,e,n){const i=n?gD(n):"null";return e+":"+t+":"+i}const x0=new Fae;let Uh=null;class Pae extends eg{constructor(e,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?We.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===We.LOADED){Uh||(Uh=jn(1,1,void 0,{willReadFrequently:!0})),Uh.drawImage(this.image_,0,0);try{Uh.getImageData(0,0,1,1),this.tainted_=!1}catch{Uh=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent($e.CHANGE)}handleImageError_(){this.imageState_=We.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=We.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=jn(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===We.IDLE){this.image_||this.initializeImage_(),this.imageState_=We.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Nae(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==We.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=gD(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}}function zae(t,e,n,i,r){let s=e===void 0?void 0:x0.get(e,n,r);return s||(s=new Pae(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,r),x0.set(e,n,r,s)),s}function wR(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class hE extends hD{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Xe(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||tt(o)),Xe(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Xe(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=We.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?We.LOADED:We.IDLE:l=We.LOADING:l=We.LOADED),this.color_=e.color!==void 0?_0(e.color):null,this.iconImage_=zae(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(wR(d[0],d[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(wR(c,u,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new hE({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==We.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==We.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener($e.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener($e.CHANGE,e)}}const fE=hE;let hh=0;const fh=0,zt=1<<hh++,ye=1<<hh++,vr=1<<hh++,En=1<<hh++,pa=1<<hh++,Kn=Math.pow(2,hh)-1,RD={[zt]:"boolean",[ye]:"number",[vr]:"string",[En]:"color",[pa]:"number[]"},Wae=Object.keys(RD).map(Number).sort(ha);function In(t){const e=[];for(const n of Wae)Hae(t,n)&&e.push(RD[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Hae(t,e){return(t&e)===e}function is(t,e){return!!(t&e)}function oy(t,e){return t===e}class Ko{constructor(e,n){this.type=e,this.value=n}}class Bae{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function ID(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function Vae(t){switch(t){case"string":return vr;case"color":return En;case"number":return ye;case"boolean":return zt;case"number[]":return pa;default:throw new Error(`Unrecognized type hint: ${t}`)}}function ot(t,e,n){switch(typeof t){case"boolean":return new Ko(zt,t);case"number":return new Ko(ye,t);case"string":{let r=vr;return qoe(t)&&(r|=En),oy(r&n,fh)||(r&=n),new Ko(r,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return ele(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=pa;return(t.length===3||t.length===4)&&(i|=En),n&&(i&=n),new Ko(i,t)}const ne={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},Gae={[ne.Get]:Ne(([t,e])=>e!==void 0?Vae(e.value):Kn,He(1,2),Uae),[ne.Var]:Ne(([t])=>t.type,He(1,1),Yae),[ne.Id]:Ne(ye|vr,Yh,jae),[ne.Concat]:Ne(vr,He(2,1/0),et(Kn)),[ne.GeometryType]:Ne(vr,Yh),[ne.Resolution]:Ne(ye,Yh),[ne.Zoom]:Ne(ye,Yh),[ne.Time]:Ne(ye,Yh),[ne.Any]:Ne(zt,He(2,1/0),et(zt)),[ne.All]:Ne(zt,He(2,1/0),et(zt)),[ne.Not]:Ne(zt,He(1,1),et(zt)),[ne.Equal]:Ne(zt,He(2,2),et(Kn),Va),[ne.NotEqual]:Ne(zt,He(2,2),et(Kn),Va),[ne.GreaterThan]:Ne(zt,He(2,2),et(Kn),Va),[ne.GreaterThanOrEqualTo]:Ne(zt,He(2,2),et(Kn),Va),[ne.LessThan]:Ne(zt,He(2,2),et(Kn),Va),[ne.LessThanOrEqualTo]:Ne(zt,He(2,2),et(Kn),Va),[ne.Multiply]:Ne(t=>{let e=ye|En;for(let n=0;n<t.length;n++)e&=t[n].type;return e},He(2,1/0),et(ye|En),Va),[ne.Divide]:Ne(ye,He(2,2),et(ye)),[ne.Add]:Ne(ye,He(2,1/0),et(ye)),[ne.Subtract]:Ne(ye,He(2,2),et(ye)),[ne.Clamp]:Ne(ye,He(3,3),et(ye)),[ne.Mod]:Ne(ye,He(2,2),et(ye)),[ne.Pow]:Ne(ye,He(2,2),et(ye)),[ne.Abs]:Ne(ye,He(1,1),et(ye)),[ne.Floor]:Ne(ye,He(1,1),et(ye)),[ne.Ceil]:Ne(ye,He(1,1),et(ye)),[ne.Round]:Ne(ye,He(1,1),et(ye)),[ne.Sin]:Ne(ye,He(1,1),et(ye)),[ne.Cos]:Ne(ye,He(1,1),et(ye)),[ne.Atan]:Ne(ye,He(1,2),et(ye)),[ne.Sqrt]:Ne(ye,He(1,1),et(ye)),[ne.Match]:Ne(t=>{let e=Kn;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},He(4,1/0),xR,Xae),[ne.Between]:Ne(zt,He(3,3),et(ye)),[ne.Interpolate]:Ne(t=>{let e=En|ye;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},He(6,1/0),xR,Zae),[ne.Case]:Ne(t=>{let e=Kn;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},He(3,1/0),qae,Kae),[ne.In]:Ne(zt,He(2,2),Jae),[ne.Number]:Ne(ye,He(1,1/0),et(Kn)),[ne.String]:Ne(vr,He(1,1/0),et(Kn)),[ne.Array]:Ne(t=>t.length===3||t.length===4?pa|En:pa,He(1,1/0),et(ye)),[ne.Color]:Ne(En,He(3,4),et(ye)),[ne.Band]:Ne(ye,He(1,3),et(ye)),[ne.Palette]:Ne(En,He(2,2),Qae)};function Uae(t,e){const n=ot(t[1],e);if(!(n instanceof Ko))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){const i=ot(t[2],e);return[n,i]}return[n]}function Yae(t,e,n,i){const r=t[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new Ko(Kn,r)];const s=e.style.variables[r],o=ot(s,e);if(o.value=r,i&&!is(i,o.type))throw new Error(`The variable ${r} has type ${In(o.type)} but the following type was expected: ${In(i)}`);return[o]}function jae(t,e){e.featureId=!0}function Yh(t,e){const n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function He(t,e){return function(n,i){const r=n[0],s=n.length-1;if(t===e){if(s!==t){const o=t===1?"":"s";throw new Error(`Expected ${t} argument${o} for ${r}, got ${s}`)}}else if(s<t||s>e){const o=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function et(t){return function(e,n){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=ot(e[o+1],n);if(!is(t,a.type)){const l=In(t),c=In(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${l} but expected ${c}`)}a.type&=t,s[o]=a}return s}}function Va(t,e,n){const i=t[0],r=t.length-1;let s=Kn;for(let a=0;a<n.length;++a)s&=n[a].type;if(s===fh)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=ot(t[a+1],e,s);return o}function qae(t,e){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function xR(t,e){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function Xae(t,e,n,i){const r=t.length-1;let o=ot(t[1],e).type;const a=ot(t[t.length-1],e);let l=i!==void 0?i&a.type:a.type;const c=new Array(r-2);for(let h=0;h<r-2;h+=2){const f=ot(t[h+2],e),d=ot(t[h+3],e);o&=f.type,l&=d.type,c[h]=f,c[h+1]=d}const u=vr|ye|zt;if(!is(u,o))throw new Error(`Expected an input of type ${In(u)} for the interpolate operation, got ${In(o)} instead`);if(oy(l,fh))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let h=0;h<r-2;h+=2){const f=ot(t[h+2],e,o),d=ot(t[h+3],e,l);c[h]=f,c[h+1]=d}return[ot(t[1],e,o),...c,ot(t[t.length-1],e,l)]}function Zae(t,e,n,i){const r=t[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=ot(s,e);let o=ot(t[2],e);if(!is(ye,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${In(o.type)} instead`);o=ot(t[2],e,ye);const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let c=ot(t[l+3],e);if(!is(ye,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${In(c.type)} at position ${l+2} instead`);let u=ot(t[l+4],e);if(!is(ye|En,u.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${In(u.type)} at position ${l+3} instead`);c=ot(t[l+3],e,ye),u=ot(t[l+4],e,ye|En),a[l]=c,a[l+1]=u}return[s,o,...a]}function Kae(t,e,n,i){const r=ot(t[t.length-1],e);let s=i!==void 0?i&r.type:r.type;const o=new Array(t.length-1);for(let a=0;a<o.length-1;a+=2){const l=ot(t[a+1],e),c=ot(t[a+2],e);if(!is(zt,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${In(l.type)} at position ${a} instead`);s&=c.type,o[a]=l,o[a+1]=c}if(oy(s,fh))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<o.length-1;a+=2)o[a+1]=ot(t[a+2],e,s);return o[o.length-1]=ot(t[t.length-1],e,s),o}function Jae(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=vr|ye;const r=new Array(n.length);for(let o=0;o<r.length;o++){const a=ot(n[o],e);i&=a.type,r[o]=a}if(oy(i,fh))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[ot(t[1],e,i),...r]}function Qae(t,e){const n=ot(t[1],e,ye);if(n.type!==ye)throw new Error(`The first argument of palette must be an number, got ${In(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const o=ot(i[s],e,En);if(!(o instanceof Ko))throw new Error(`The palette color at index ${s} must be a literal value`);if(!is(o.type,En))throw new Error(`The palette color at index ${s} should be of type color, got ${In(o.type)} instead`);r[s]=o}return[n,...r]}function Ne(t,...e){return function(n,i,r){const s=n[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](n,i,o,r)||o;let a=typeof t=="function"?t(o):t;if(r!==void 0){if(!is(a,r))throw new Error(`The following expression was expected to return ${In(r)}, but returns ${In(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===fh)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new Bae(a,s,...o)}}function ele(t,e,n){const i=t[0],r=Gae[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}function kD(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function Ia(t,e,n){const i=ot(t,n);if(!is(e,i.type)){const r=In(e),s=In(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return no(i)}function no(t,e){if(t instanceof Ko){if(t.type===En&&typeof t.value=="string"){const i=nE(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case ne.Number:case ne.String:return tle(t);case ne.Get:case ne.Var:return nle(t);case ne.Id:return i=>i.featureId;case ne.Concat:{const i=t.args.map(r=>no(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case ne.Resolution:return i=>i.resolution;case ne.Any:case ne.All:case ne.Not:return rle(t);case ne.Equal:case ne.NotEqual:case ne.LessThan:case ne.LessThanOrEqualTo:case ne.GreaterThan:case ne.GreaterThanOrEqualTo:return ile(t);case ne.Multiply:case ne.Divide:case ne.Add:case ne.Subtract:case ne.Clamp:case ne.Mod:case ne.Pow:case ne.Abs:case ne.Floor:case ne.Ceil:case ne.Round:case ne.Sin:case ne.Cos:case ne.Atan:case ne.Sqrt:return sle(t);case ne.Match:return ole(t);case ne.Interpolate:return ale(t);default:throw new Error(`Unsupported operator ${n}`)}}function tle(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=no(t.args[s]);switch(n){case ne.Number:case ne.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function nle(t,e){const i=t.args[0].value;switch(t.operator){case ne.Get:return r=>r.properties[i];case ne.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function ile(t,e){const n=t.operator,i=no(t.args[0]),r=no(t.args[1]);switch(n){case ne.Equal:return s=>i(s)===r(s);case ne.NotEqual:return s=>i(s)!==r(s);case ne.LessThan:return s=>i(s)<r(s);case ne.LessThanOrEqualTo:return s=>i(s)<=r(s);case ne.GreaterThan:return s=>i(s)>r(s);case ne.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function rle(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=no(t.args[s]);switch(n){case ne.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case ne.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case ne.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function sle(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=no(t.args[s]);switch(n){case ne.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case ne.Divide:return s=>r[0](s)/r[1](s);case ne.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case ne.Subtract:return s=>r[0](s)-r[1](s);case ne.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case ne.Mod:return s=>r[0](s)%r[1](s);case ne.Pow:return s=>Math.pow(r[0](s),r[1](s));case ne.Abs:return s=>Math.abs(r[0](s));case ne.Floor:return s=>Math.floor(r[0](s));case ne.Ceil:return s=>Math.ceil(r[0](s));case ne.Round:return s=>Math.round(r[0](s));case ne.Sin:return s=>Math.sin(r[0](s));case ne.Cos:return s=>Math.cos(r[0](s));case ne.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case ne.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function ole(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=no(t.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function ale(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=no(t.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let c=2;c<n;c+=2){const u=i[c](r);let h=i[c+1](r);const f=Array.isArray(h);if(f&&(h=Yoe(h)),u>=o)return c===2?h:f?lle(s,o,a,l,u,h):pf(s,o,a,l,u,h);a=u,l=h}return l}}function pf(t,e,n,i,r,s){const o=r-n;if(o===0)return i;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(s-i)}function lle(t,e,n,i,r,s){if(r-n===0)return i;const a=uR(i),l=uR(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[pf(t,e,n,a[0],r,l[0]),pf(t,e,n,a[1],r,l[1]),a[2]+pf(t,e,n,0,r,c),pf(t,e,n,i[3],r,s[3])];return mD(joe(u))}function cle(t){return!0}function ule(t){const e=ID(),n=hle(t,e),i=kD();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return n(i)}}function ER(t){const e=ID(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=xw(t[o],e);const r=kD(),s=new Array(n);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<n;++c){const u=i[c](r);u&&(s[l]=u,l+=1)}return s.length=l,s}}function hle(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const s=t[r],o="filter"in s?Ia(s.filter,zt,e):cle;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=xw(s.style[c],e)}else a=[xw(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(t[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function xw(t,e){const n=dd(t,"",e),i=gd(t,"",e),r=fle(t,e),s=dle(t,e),o=ri(t,"z-index",e);if(!n&&!i&&!r&&!s&&!Hl(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Gn;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function dd(t,e,n){const i=$D(t,e+"fill-color",n);if(!i)return null;const r=new Jx;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function gd(t,e,n){const i=ri(t,e+"stroke-width",n),r=$D(t,e+"stroke-color",n);if(!i&&!r)return null;const s=Wo(t,e+"stroke-line-cap",n),o=Wo(t,e+"stroke-line-join",n),a=OD(t,e+"stroke-line-dash",n),l=ri(t,e+"stroke-line-dash-offset",n),c=ri(t,e+"stroke-miter-limit",n),u=new to;return function(h){if(r){const f=r(h);if(f==="none")return null;u.setColor(f)}if(i&&u.setWidth(i(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function fle(t,e){const n="text-",i=Wo(t,n+"value",e);if(!i)return null;const r=dd(t,n,e),s=dd(t,n+"background-",e),o=gd(t,n,e),a=gd(t,n+"background-",e),l=Wo(t,n+"font",e),c=ri(t,n+"max-angle",e),u=ri(t,n+"offset-x",e),h=ri(t,n+"offset-y",e),f=md(t,n+"overflow",e),d=Wo(t,n+"placement",e),g=ri(t,n+"repeat",e),m=ay(t,n+"scale",e),_=md(t,n+"rotate-with-view",e),y=ri(t,n+"rotation",e),p=Wo(t,n+"align",e),b=Wo(t,n+"justify",e),v=Wo(t,n+"baseline",e),E=OD(t,n+"padding",e),w=new cae({});return function(T){if(w.setText(i(T)),r&&w.setFill(r(T)),s&&w.setBackgroundFill(s(T)),o&&w.setStroke(o(T)),a&&w.setBackgroundStroke(a(T)),l&&w.setFont(l(T)),c&&w.setMaxAngle(c(T)),u&&w.setOffsetX(u(T)),h&&w.setOffsetY(h(T)),f&&w.setOverflow(f(T)),d){const C=d(T);if(C!=="point"&&C!=="line")throw new Error("Expected point or line for text-placement");w.setPlacement(C)}if(g&&w.setRepeat(g(T)),m&&w.setScale(m(T)),_&&w.setRotateWithView(_(T)),y&&w.setRotation(y(T)),p){const C=p(T);if(C!=="left"&&C!=="center"&&C!=="right"&&C!=="end"&&C!=="start")throw new Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(C)}if(b){const C=b(T);if(C!=="left"&&C!=="right"&&C!=="center")throw new Error("Expected left, right, or center for text-justify");w.setJustify(C)}if(v){const C=v(T);if(C!=="bottom"&&C!=="top"&&C!=="middle"&&C!=="alphabetic"&&C!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(C)}return E&&w.setPadding(E(T)),w}}function dle(t,e){return"icon-src"in t?gle(t,e):"shape-points"in t?mle(t,e):"circle-radius"in t?ple(t,e):null}function gle(t,e){const n="icon-",i=n+"src",r=LD(t[i],i),s=E0(t,n+"anchor",e),o=ay(t,n+"scale",e),a=ri(t,n+"opacity",e),l=E0(t,n+"displacement",e),c=ri(t,n+"rotation",e),u=md(t,n+"rotate-with-view",e),h=TR(t,n+"anchor-origin"),f=SR(t,n+"anchor-x-units"),d=SR(t,n+"anchor-y-units"),g=ble(t,n+"color"),m=yle(t,n+"cross-origin"),_=vle(t,n+"offset"),y=TR(t,n+"offset-origin"),p=Wc(t,n+"width"),b=Wc(t,n+"height"),v=_le(t,n+"size"),E=dE(t,n+"declutter"),w=new fE({src:r,anchorOrigin:h,anchorXUnits:f,anchorYUnits:d,color:g,crossOrigin:m,offset:_,offsetOrigin:y,height:b,width:p,size:v,declutterMode:E});return function(T){return a&&w.setOpacity(a(T)),l&&w.setDisplacement(l(T)),c&&w.setRotation(c(T)),u&&w.setRotateWithView(u(T)),o&&w.setScale(o(T)),s&&w.setAnchor(s(T)),w}}function mle(t,e){const n="shape-",i=n+"points",r=ND(t[i],i),s=dd(t,n,e),o=gd(t,n,e),a=ay(t,n+"scale",e),l=E0(t,n+"displacement",e),c=ri(t,n+"rotation",e),u=md(t,n+"rotate-with-view",e),h=Wc(t,n+"radius"),f=Wc(t,n+"radius1"),d=Wc(t,n+"radius2"),g=Wc(t,n+"angle"),m=dE(t,n+"declutter-mode"),_=new wD({points:r,radius:h,radius1:f,radius2:d,angle:g,declutterMode:m});return function(y){return s&&_.setFill(s(y)),o&&_.setStroke(o(y)),l&&_.setDisplacement(l(y)),c&&_.setRotation(c(y)),u&&_.setRotateWithView(u(y)),a&&_.setScale(a(y)),_}}function ple(t,e){const n="circle-",i=dd(t,n,e),r=gd(t,n,e),s=ri(t,n+"radius",e),o=ay(t,n+"scale",e),a=E0(t,n+"displacement",e),l=ri(t,n+"rotation",e),c=md(t,n+"rotate-with-view",e),u=dE(t,n+"declutter-mode"),h=new xD({radius:5,declutterMode:u});return function(f){return s&&h.setRadius(s(f)),i&&h.setFill(i(f)),r&&h.setStroke(r(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function ri(t,e,n){if(!(e in t))return;const i=Ia(t[e],ye,n);return function(r){return ND(i(r),e)}}function Wo(t,e,n){if(!(e in t))return null;const i=Ia(t[e],vr,n);return function(r){return LD(i(r),e)}}function md(t,e,n){if(!(e in t))return null;const i=Ia(t[e],zt,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function $D(t,e,n){if(!(e in t))return null;const i=Ia(t[e],En|vr,n);return function(r){return DD(i(r),e)}}function OD(t,e,n){if(!(e in t))return null;const i=Ia(t[e],pa,n);return function(r){return og(i(r),e)}}function E0(t,e,n){if(!(e in t))return null;const i=Ia(t[e],pa,n);return function(r){const s=og(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function ay(t,e,n){if(!(e in t))return null;const i=Ia(t[e],pa|ye,n);return function(r){return wle(i(r),e)}}function Wc(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function _le(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return yi(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function yle(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function TR(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function SR(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function vle(t,e){const n=t[e];if(n!==void 0)return og(n,e)}function dE(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function ble(t,e){const n=t[e];if(n!==void 0)return DD(n,e)}function og(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function LD(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function ND(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function DD(t,e){if(typeof t=="string")return t;const n=og(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function wle(t,e){if(typeof t=="number")return t;const n=og(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}const CR={RENDER_ORDER:"renderOrder"};class xle extends sy{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(CR.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new uE(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(CR.RENDER_ORDER,e)}setStyle(e){this.style_=Ele(e),this.styleFunction_=e===null?void 0:sae(this.style_),this.changed()}}function Ele(t){if(t===void 0)return oae;if(!t)return null;if(typeof t=="function"||t instanceof Gn)return t;if(!Array.isArray(t))return ER([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof Gn){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof Gn))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return ule(r)}return ER(t)}const Tle=xle,ag={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},_m=[ag.FILL],Jo=[ag.STROKE],ll=[ag.BEGIN_PATH],MR=[ag.CLOSE_PATH],Ce=ag;class Sle{drawCustom(e,n,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,n){}drawFeature(e,n){}drawGeometryCollection(e,n){}drawLineString(e,n){}drawMultiLineString(e,n){}drawMultiPoint(e,n){}drawMultiPolygon(e,n){}drawPoint(e,n){}drawPolygon(e,n){}drawText(e,n){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const FD=Sle;class Cle extends FD{constructor(e,n,i,r){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)r[0]=e[a],r[1]=e[a+1],tg(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,n,i,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=r);let u=e[n],h=e[n+1];const f=this.tmpCoordinate_;let d=!0,g,m,_;for(g=n+r;g<i;g+=r)f[0]=e[g],f[1]=e[g+1],_=cw(c,f),_!==m?(d&&(a[l++]=u,a[l++]=h,d=!1),a[l++]=f[0],a[l++]=f[1]):_===ln.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],d=!1):d=!0,u=f[0],h=f[1],m=_;return(s&&d||g===n+r)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,n,l,r,!1,!1);s.push(c),n=l}return n}drawCustom(e,n,i,r){this.beginGeometry(e,n);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,h,f;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const d=e.getEndss();f=0;for(let g=0,m=d.length;g<m;++g){const _=[];f=this.drawCustomCoordinates_(l,f,d[g],o,_),h.push(_)}this.instructions.push([Ce.CUSTOM,a,h,e,i,pw]),this.hitDetectionInstructions.push([Ce.CUSTOM,a,h,e,r||i,pw]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([Ce.CUSTOM,a,u,e,i,ad]),this.hitDetectionInstructions.push([Ce.CUSTOM,a,u,e,r||i,ad]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Ce.CUSTOM,a,c,e,i,Zo]),this.hitDetectionInstructions.push([Ce.CUSTOM,a,c,e,r||i,Zo]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([Ce.CUSTOM,a,c,e,i,Zo]),this.hitDetectionInstructions.push([Ce.CUSTOM,a,c,e,r||i,Zo]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Ce.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([Ce.CUSTOM,a,c,e,r||i]);break}this.endGeometry(n)}beginGeometry(e,n){this.beginGeometryInstruction1_=[Ce.BEGIN_GEOMETRY,n,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ce.BEGIN_GEOMETRY,n,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let r,s,o=-1;for(n=0;n<i;++n)r=e[n],s=r[0],s==Ce.END_GEOMETRY?o=n:s==Ce.BEGIN_GEOMETRY&&(r[2]=n,kse(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(e,n){const i=this.state;if(e){const r=e.getColor();i.fillStyle=qr(r||ni)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=qr(r||ud);const s=n.getLineCap();i.lineCap=s!==void 0?s:Du;const o=n.getLineDash();i.lineDash=o?o.slice():Ys;const a=n.getLineDashOffset();i.lineDashOffset=a||js;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Fu;const c=n.getWidth();i.lineWidth=c!==void 0?c:fd;const u=n.getMiterLimit();i.miterLimit=u!==void 0?u:cd,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const n=e.fillStyle,i=[Ce.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ce.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!Ra(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[Ce.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=HN(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Lx(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const lg=Cle;class Mle extends lg{constructor(e,n,i,r){super(e,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n){if(!this.image_)return;this.beginGeometry(e,n);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Ce.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ce.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n){if(!this.image_)return;this.beginGeometry(e,n);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Ce.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ce.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const Ale=Mle;class Rle extends lg{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinates_(e,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,r,!1,!1),a=[Ce.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([Ce.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ys,js],ll);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Jo),this.endGeometry(n)}drawMultiLineString(e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([Ce.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ys,js],ll);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Jo),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Jo),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Jo),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(ll)}}const Ile=Rle;class kle extends lg{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinatess_(e,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(ll),this.hitDetectionInstructions.push(ll);for(let c=0;c<l;++c){const u=i[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,u,r,!0,!a),d=[Ce.MOVE_TO_LINE_TO,h,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(MR),this.hitDetectionInstructions.push(MR)),n=u}return o&&(this.instructions.push(_m),this.hitDetectionInstructions.push(_m)),a&&(this.instructions.push(Jo),this.hitDetectionInstructions.push(Jo)),n}drawCircle(e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_FILL_STYLE,ni]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ys,js]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[Ce.CIRCLE,l];this.instructions.push(ll,c),this.hitDetectionInstructions.push(ll,c),i.fillStyle!==void 0&&(this.instructions.push(_m),this.hitDetectionInstructions.push(_m)),i.strokeStyle!==void 0&&(this.instructions.push(Jo),this.hitDetectionInstructions.push(Jo)),this.endGeometry(n)}drawPolygon(e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_FILL_STYLE,ni]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ys,js]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(n)}drawMultiPolygon(e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_FILL_STYLE,ni]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ce.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ys,js]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=Ya(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const AR=kle;function $le(t,e,n,i,r){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+r<i;){const[c,u]=l.slice(-2),h=e[o+r],f=e[o+r+1],d=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=d,a>=t){const g=(t-a+d)/d,m=pi(c,h,g),_=pi(u,f,g);l.push(m,_),s.push(l),l=[m,_],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const g=d-a,m=pi(c,h,g/d),_=pi(u,f,g/d);l.push(m,_),s.push(l),l=[m,_],a=0,o+=r}}return a>0&&s.push(l),s}function Ole(t,e,n,i,r){let s=n,o=n,a=0,l=0,c=n,u,h,f,d,g,m,_,y,p,b;for(h=n;h<i;h+=r){const v=e[h],E=e[h+1];g!==void 0&&(p=v-g,b=E-m,d=Math.sqrt(p*p+b*b),_!==void 0&&(l+=f,u=Math.acos((_*p+y*b)/(f*d)),u>t&&(l>a&&(a=l,s=c,o=h),l=0,c=h-r)),f=d,_=p,y=b),g=v,m=E}return l+=d,l>a?[c,h]:[s,o]}const T0={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Lle extends lg{constructor(e,n,i,r){super(e,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ni]={fillStyle:ni},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Wn(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();h=[];for(let _=0,y=m.length;_<y;++_)h.push(m[_][0])}this.beginGeometry(e,n);const f=s.repeat,d=f?void 0:s.textAlign;let g=0;for(let m=0,_=h.length;m<_;++m){let y;f?y=$le(f*this.resolution,c,g,h[m],u):y=[c.slice(g,h[m])];for(let p=0,b=y.length;p<b;++p){const v=y[p];let E=0,w=v.length;if(d==null){const C=Ole(s.maxAngle,v,0,v.length,2);E=C[0],w=C[1]}for(let C=E;C<w;C+=u)o.push(v[C],v[C+1]);const T=o.length;g=h[m],this.drawChars_(a,T),a=T}}this.endGeometry(n)}else{let h=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const y=e.getFlatInteriorPoints();c=[];for(let p=0,b=y.length;p<b;p+=3)s.overflow||h.push(y[p+2]/this.resolution),c.push(y[p],y[p+1]);if(c.length===0)return;u=2;break}const f=this.appendFlatPointCoordinates(c,u);if(f===a)return;if(h&&(f-a)/2!==c.length/u){let y=a/2;h=h.filter((p,b)=>{const v=o[(y+b)*2]===c[b*u]&&o[(y+b)*2+1]===c[b*u+1];return v||--y,v})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n);let d=s.padding;if(d!=al&&(s.scale[0]<0||s.scale[1]<0)){let y=s.padding[0],p=s.padding[1],b=s.padding[2],v=s.padding[3];s.scale[0]<0&&(p=-p,v=-v),s.scale[1]<0&&(y=-y,b=-b),d=[y,p,b,v]}const g=this.pixelRatio;this.instructions.push([Ce.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==al?al:d.map(function(y){return y*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=ni,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Ce.DRAW_IMAGE,a,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,d,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ni:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||hd,justify:n.justify,textBaseline:n.textBaseline||b0,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=T0[r.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ce.DRAW_CHARS,e,n,c,r.overflow,a,r.maxAngle,l,u,s,f*l,h,o,1]),this.hitDetectionInstructions.push([Ce.DRAW_CHARS,e,n,c,r.overflow,a&&ni,r.maxAngle,l,u,s,f*l,h,o,1/l])}setTextStyle(e,n){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=qr(o.getColor()||ni)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||Du,s.lineDash=g?g.slice():Ys,s.lineDashOffset=m===void 0?js:m,s.lineJoin=a.getLineJoin()||Fu,s.lineWidth=_===void 0?fd:_,s.miterLimit=y===void 0?cd:y,s.strokeStyle=qr(a.getColor()||ud)}i=this.textState_;const l=e.getFont()||vD;eae(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||b0,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||al,i.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),d=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:tt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+tt(r.fillStyle):""}this.declutterImageWithText_=n}}const Nle={Circle:AR,Default:lg,Image:Ale,LineString:Ile,Polygon:AR,Text:Lle};class Dle{constructor(e,n,i,r){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();e[n][r]=s}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=Nle[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}const RR=Dle;class Fle extends DN{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return ke()}getData(e){return null}prepareFrame(e){return ke()}renderFrame(e,n){return ke()}loadedTileCallback(e,n,i){e[n]||(e[n]={}),e[n][i.tileCoord.toString()]=i}createLoadedTileFinder(e,n,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(n,r,s,o)}}forEachFeatureAtCoordinate(e,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===We.LOADED||n.getState()===We.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=We.LOADED&&n!=We.ERROR&&e.addEventListener($e.CHANGE,this.boundHandleImageChange_),n==We.IDLE&&(e.load(),n=e.getState()),n==We.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Ple=Fle;class zle extends uo{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}}const PD=zle,IR=[];let Oc=null;function Wle(){Oc=jn(1,1,void 0,{willReadFrequently:!0})}class Hle extends Ple{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Yi(),this.pixelTransform=Yi(),this.inversePixelTransform=Yi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,i){Oc||Wle(),Oc.clearRect(0,0,1,1);let r;try{Oc.drawImage(e,n,i,1,1,0,0,1,1),r=Oc.getImageData(0,0,1,1).data}catch{return Oc=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Ra(_0(e.style.backgroundColor),_0(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=jn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const r=Jl(i),s=Q_(i),o=J_(i),a=K_(i);Ht(n.coordinateToPixelTransform,r),Ht(n.coordinateToPixelTransform,s),Ht(n.coordinateToPixelTransform,o),Ht(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ht(l,r),Ht(l,s),Ht(l,o),Ht(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){const s=new PD(e,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(e,n){this.frameState=n,this.dispatchRenderEvent_(ns.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(ns.POSTRENDER,e,n)}getRenderTransform(e,n,i,r,s,o,a){const l=s/2,c=o/2,u=r/n,h=-u,f=-e[0]+a,d=-e[1];return Ki(this.tempTransform,l,c,u,h,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const gE=Hle;function Ble(t,e,n,i,r,s,o,a,l,c,u,h){let f=t[e],d=t[e+1],g=0,m=0,_=0,y=0;function p(){g=f,m=d,e+=i,f=t[e],d=t[e+1],y+=_,_=Math.sqrt((f-g)*(f-g)+(d-m)*(d-m))}do p();while(e<n-i&&y+_<s);let b=_===0?0:(s-y)/_;const v=pi(g,f,b),E=pi(m,d,b),w=e-i,T=y,C=s+a*l(c,r,u);for(;e<n-i&&y+_<C;)p();b=_===0?0:(C-y)/_;const M=pi(g,f,b),S=pi(m,d,b);let R;if(h){const L=[v,E,M,S];QN(L,0,4,2,h,L,L),R=L[0]>L[2]}else R=v>M;const I=Math.PI,N=[],O=w+i===e;e=w,_=0,y=T,f=t[e],d=t[e+1];let k;if(O){p(),k=Math.atan2(d-m,f-g),R&&(k+=k>0?-I:I);const L=(M+v)/2,D=(S+E)/2;return N[0]=[L,D,(C-s)/2,k,r],N}r=r.replace(/\n/g," ");for(let L=0,D=r.length;L<D;){p();let H=Math.atan2(d-m,f-g);if(R&&(H+=H>0?-I:I),k!==void 0){let se=H-k;if(se+=se>I?-2*I:se<-I?2*I:0,Math.abs(se)>o)return null}k=H;const q=L;let G=0;for(;L<D;++L){const se=R?D-L-1:L,le=a*l(c,r[se],u);if(e+i<n&&y+_<s+G+le/2)break;G+=le}if(L===q)continue;const J=R?r.substring(D-q,D-L):r.substring(q,L);b=_===0?0:(s+G/2-y)/_;const W=pi(g,f,b),ie=pi(m,d,b);N.push([W,ie,G/2,H,J]),s+=G}return N}const yc=Ji(),So=[],bs=[],ws=[],Co=[];function kR(t){return t[3].declutterBox}const $R=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ov(t,e){return e==="start"?e=$R.test(t)?"right":"left":e==="end"&&(e=$R.test(t)?"left":"right"),T0[e]}function Vle(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class Gle{constructor(e,n,i,r){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Yi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,n,i,r){const s=e+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(e),f=l.justify?T0[l.justify]:ov(Array.isArray(e)?e[0]:e,l.textAlign||hd),d=r&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(Vle,[]),{width:m,height:_,widths:y,heights:p,lineWidths:b}=nae(l,g),v=m+d,E=[],w=(v+2)*u[0],T=(_+d)*u[1],C={width:w<0?Math.floor(w):Math.ceil(w),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:E};(u[0]!=1||u[1]!=1)&&E.push("scale",u),r&&(E.push("strokeStyle",o.strokeStyle),E.push("lineWidth",d),E.push("lineCap",o.lineCap),E.push("lineJoin",o.lineJoin),E.push("miterLimit",o.miterLimit),E.push("setLineDash",[o.lineDash]),E.push("lineDashOffset",o.lineDashOffset)),i&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const M=.5-f;let S=f*v+M*d;const R=[],I=[];let N=0,O=0,k=0,L=0,D;for(let H=0,q=g.length;H<q;H+=2){const G=g[H];if(G===`
`){O+=N,N=0,S=f*v+M*d,++L;continue}const J=g[H+1]||l.font;J!==D&&(r&&R.push("font",J),i&&I.push("font",J),D=J),N=Math.max(N,p[k]);const W=[G,S+M*y[k]+f*(y[k]-b[L]),.5*(d+N)+O];S+=y[k],r&&R.push("strokeText",W),i&&I.push("fillText",W),++k}return Array.prototype.push.apply(E,R),Array.prototype.push.apply(E,I),this.labels_[s]=C,C}replayTextBackground_(e,n,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,r,s,o,a,l,c,u,h,f,d,g,m,_){a*=f[0],l*=f[1];let y=i-a,p=r-l;const b=s+c>e?e-c:s,v=o+u>n?n-u:o,E=g[3]+b*f[0]+g[1],w=g[0]+v*f[1]+g[2],T=y-g[3],C=p-g[0];(m||h!==0)&&(So[0]=T,Co[0]=T,So[1]=C,bs[1]=C,bs[0]=T+E,ws[0]=bs[0],ws[1]=C+w,Co[1]=ws[1]);let M;return h!==0?(M=Ki(Yi(),i,r,1,1,h,-i,-r),Ht(M,So),Ht(M,bs),Ht(M,ws),Ht(M,Co),da(Math.min(So[0],bs[0],ws[0],Co[0]),Math.min(So[1],bs[1],ws[1],Co[1]),Math.max(So[0],bs[0],ws[0],Co[0]),Math.max(So[1],bs[1],ws[1],Co[1]),yc)):da(Math.min(T,T+E),Math.min(C,C+w),Math.max(T,T+E),Math.max(C,C+w),yc),d&&(y=Math.round(y),p=Math.round(p)),{drawImageX:y,drawImageY:p,drawImageW:b,drawImageH:v,originX:c,originY:u,declutterBox:{minX:yc[0],minY:yc[1],maxX:yc[2],maxY:yc[3],value:_},canvasTransform:M,scale:f}}replayImageOrLabel_(e,n,i,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=e.canvas,h=a?a[2]*r.scale[0]/2:0;return c.minX-h<=u.width/n&&c.maxX+h>=0&&c.minY-h<=u.height/n&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,So,bs,ws,Co,o,a),iae(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const n=Ht(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,r){const s=this.textStates[n],o=this.createLabel(e,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=ov(Array.isArray(e)?e[0]:e,s.textAlign||hd),u=T0[s.textBaseline||b0],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],d=c*f+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:d,anchorY:g}}execute_(e,n,i,r,s,o,a,l){let c;this.pixelCoordinates_&&Ra(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=na(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Gse(this.renderedTransform_,i));let u=0;const h=r.length;let f=0,d,g,m,_,y,p,b,v,E,w,T,C,M=0,S=0,R=null,I=null;const N=this.coordinateCache_,O=this.viewRotation_,k=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,L={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},D=this.instructions!=r||this.overlaps?0:200;let H,q,G,J;for(;u<h;){const W=r[u];switch(W[0]){case Ce.BEGIN_GEOMETRY:H=W[1],J=W[3],H.getGeometry()?a!==void 0&&!Wn(a,J.getExtent())?u=W[2]+1:++u:u=W[2];break;case Ce.BEGIN_PATH:M>D&&(this.fill_(e),M=0),S>D&&(e.stroke(),S=0),!M&&!S&&(e.beginPath(),_=NaN,y=NaN),++u;break;case Ce.CIRCLE:f=W[1];const se=c[f],le=c[f+1],ce=c[f+2],z=c[f+3],U=ce-se,P=z-le,Y=Math.sqrt(U*U+P*P);e.moveTo(se+Y,le),e.arc(se,le,Y,0,2*Math.PI,!0),++u;break;case Ce.CLOSE_PATH:e.closePath(),++u;break;case Ce.CUSTOM:f=W[1],d=W[2];const te=W[3],A=W[4],$=W.length==6?W[5]:void 0;L.geometry=te,L.feature=H,u in N||(N[u]=[]);const F=N[u];$?$(c,f,d,2,F):(F[0]=c[f],F[1]=c[f+1],F.length=2),A(F,L),++u;break;case Ce.DRAW_IMAGE:f=W[1],d=W[2],v=W[3],g=W[4],m=W[5];let B=W[6];const V=W[7],Z=W[8],ue=W[9],oe=W[10];let ae=W[11];const Q=W[12];let de=W[13];const he=W[14],ge=W[15];if(!v&&W.length>=20){E=W[19],w=W[20],T=W[21],C=W[22];const gi=this.drawLabelWithPointPlacement_(E,w,T,C);v=gi.label,W[3]=v;const sc=W[23];g=(gi.anchorX-sc)*this.pixelRatio,W[4]=g;const Ri=W[24];m=(gi.anchorY-Ri)*this.pixelRatio,W[5]=m,B=v.height,W[6]=B,de=v.width,W[13]=de}let _e;W.length>25&&(_e=W[25]);let Ae,ze,Ie;W.length>17?(Ae=W[16],ze=W[17],Ie=W[18]):(Ae=al,ze=!1,Ie=!1),oe&&k?ae+=O:!oe&&!k&&(ae-=O);let st=0;for(;f<d;f+=2){if(_e&&_e[st++]<de/this.pixelRatio)continue;const gi=this.calculateImageOrLabelDimensions_(v.width,v.height,c[f],c[f+1],de,B,g,m,Z,ue,ae,Q,s,Ae,ze||Ie,H),sc=[e,n,v,gi,V,ze?R:null,Ie?I:null];if(l){if(he==="none")continue;if(he==="obstacle"){l.insert(gi.declutterBox);continue}else{let Ri,ms;if(ge){const mi=d-f;if(!ge[mi]){ge[mi]=sc;continue}if(Ri=ge[mi],delete ge[mi],ms=kR(Ri),l.collides(ms))continue}if(l.collides(gi.declutterBox))continue;Ri&&(l.insert(ms),this.replayImageOrLabel_.apply(this,Ri)),l.insert(gi.declutterBox)}}this.replayImageOrLabel_.apply(this,sc)}++u;break;case Ce.DRAW_CHARS:const It=W[1],Et=W[2],_o=W[3],Ai=W[4];C=W[5];const kn=W[6],Tt=W[7],$n=W[8];T=W[9];const rc=W[10];E=W[11],w=W[12];const UT=[W[13],W[13]],Gy=this.textStates[w],Sh=Gy.font,Ch=[Gy.scale[0]*Tt,Gy.scale[1]*Tt];let Mh;Sh in this.widths_?Mh=this.widths_[Sh]:(Mh={},this.widths_[Sh]=Mh);const YT=uD(c,It,Et,2),jT=Math.abs(Ch[0])*gR(Sh,E,Mh);if(Ai||jT<=YT){const gi=this.textStates[w].textAlign,sc=(YT-jT)*ov(E,gi),Ri=Ble(c,It,Et,2,E,sc,kn,Math.abs(Ch[0]),gR,Sh,Mh,k?0:this.viewRotation_);e:if(Ri){const ms=[];let mi,Cg,Mg,Xn,Ii;if(T)for(mi=0,Cg=Ri.length;mi<Cg;++mi){Ii=Ri[mi],Mg=Ii[4],Xn=this.createLabel(Mg,w,"",T),g=Ii[2]+(Ch[0]<0?-rc:rc),m=_o*Xn.height+(.5-_o)*2*rc*Ch[1]/Ch[0]-$n;const ps=this.calculateImageOrLabelDimensions_(Xn.width,Xn.height,Ii[0],Ii[1],Xn.width,Xn.height,g,m,0,0,Ii[3],UT,!1,al,!1,H);if(l&&l.collides(ps.declutterBox))break e;ms.push([e,n,Xn,ps,1,null,null])}if(C)for(mi=0,Cg=Ri.length;mi<Cg;++mi){Ii=Ri[mi],Mg=Ii[4],Xn=this.createLabel(Mg,w,C,""),g=Ii[2],m=_o*Xn.height-$n;const ps=this.calculateImageOrLabelDimensions_(Xn.width,Xn.height,Ii[0],Ii[1],Xn.width,Xn.height,g,m,0,0,Ii[3],UT,!1,al,!1,H);if(l&&l.collides(ps.declutterBox))break e;ms.push([e,n,Xn,ps,1,null,null])}l&&l.load(ms.map(kR));for(let ps=0,N8=ms.length;ps<N8;++ps)this.replayImageOrLabel_.apply(this,ms[ps])}}++u;break;case Ce.END_GEOMETRY:if(o!==void 0){H=W[1];const gi=o(H,J);if(gi)return gi}++u;break;case Ce.FILL:D?M++:this.fill_(e),++u;break;case Ce.MOVE_TO_LINE_TO:for(f=W[1],d=W[2],q=c[f],G=c[f+1],p=q+.5|0,b=G+.5|0,(p!==_||b!==y)&&(e.moveTo(q,G),_=p,y=b),f+=2;f<d;f+=2)q=c[f],G=c[f+1],p=q+.5|0,b=G+.5|0,(f==d-2||p!==_||b!==y)&&(e.lineTo(q,G),_=p,y=b);++u;break;case Ce.SET_FILL_STYLE:R=W,this.alignFill_=W[2],M&&(this.fill_(e),M=0,S&&(e.stroke(),S=0)),e.fillStyle=W[1],++u;break;case Ce.SET_STROKE_STYLE:I=W,S&&(e.stroke(),S=0),this.setStrokeStyle_(e,W),++u;break;case Ce.STROKE:D?S++:e.stroke(),++u;break;default:++u;break}}M&&this.fill_(e),S&&e.stroke()}execute(e,n,i,r,s,o){this.viewRotation_=r,this.execute_(e,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,i,r,s){return this.viewRotation_=i,this.execute_(e,1,n,this.hitDetectionInstructions,!0,r,s)}}const Ule=Gle,av=["Polygon","Circle","LineString","Image","Text","Default"];class Yle{constructor(e,n,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yi(),this.createExecutors_(s)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const r=e[n];for(const s in r){const o=r[s];i[s]=new Ule(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Ki(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=jn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Ji(),Rf(h,e),Lx(h,n*(this.renderBuffer_+r),h));const f=jle(r);let d;function g(E,w){const T=u.getImageData(0,0,a,a).data;for(let C=0,M=f.length;C<M;C++)if(T[f[C]]>0){if(!o||d!=="Image"&&d!=="Text"||o.includes(E)){const S=(f[C]-3)/4,R=r-S%a,I=r-(S/a|0),N=s(E,w,R*R+I*I);if(N)return N}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(ha);let _,y,p,b,v;for(_=m.length-1;_>=0;--_){const E=m[_].toString();for(p=this.executorsByZIndex_[E],y=av.length-1;y>=0;--y)if(d=av[y],b=p[d],b!==void 0&&(v=b.executeHitDetection(u,l,i,g,h),v))return v}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return na(a,0,8,2,e,a),a}isEmpty(){return Hl(this.executorsByZIndex_)}execute(e,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ha),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||av;let c,u,h,f,d,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(d=this.executorsByZIndex_[m],h=0,f=o.length;h<f;++h){const _=o[h];g=d[_],g!==void 0&&g.execute(e,n,i,r,s,a)}}this.maxExtent_&&e.restore()}}const lv={};function jle(t){if(lv[t]!==void 0)return lv[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return lv[t]=r,r}const OR=Yle;class qle extends FD{constructor(e,n,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?ey(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yi()}drawImages_(e,n,i,r){if(!this.image_)return;const s=na(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const f=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=f+this.imageAnchorX_,m=d+this.imageAnchorY_;Ki(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=na(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,n,i,r,s){const o=this.context_,a=na(e,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),i}drawRings_(e,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(e,n,i[s],r,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=Moe(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(Wn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(i,r,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),Ra(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:hd;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=r,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:qr(i||ni)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Ys;this.strokeState_={lineCap:r!==void 0?r:Du,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||js)*this.pixelRatio_,lineJoin:a!==void 0?a:Fu,lineWidth:(l!==void 0?l:fd)*this.pixelRatio_,miterLimit:c!==void 0?c:cd,strokeStyle:qr(i||ud)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const d=n.getColor();this.textFillState_={fillStyle:qr(d||ni)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),y=i.getLineJoin(),p=i.getWidth(),b=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Du,lineDash:m||Ys,lineDashOffset:_||js,lineJoin:y!==void 0?y:Fu,lineWidth:p!==void 0?p:fd,miterLimit:b!==void 0?b:cd,strokeStyle:qr(d||ud)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:r!==void 0?r:vD,textAlign:h!==void 0?h:hd,textBaseline:f!==void 0?f:b0},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,g,m)=>d+=m%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Xle=qle,Gr=.5;function Zle(t,e,n,i,r,s,o){const a=t[0]*Gr,l=t[1]*Gr,c=jn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new Xle(c,Gr,r,null,o),f=n.length,d=Math.floor((256*256*256-1)/f),g={};for(let _=1;_<=f;++_){const y=n[_-1],p=y.getStyleFunction()||i;if(!p)continue;let b=p(y,s);if(!b)continue;Array.isArray(b)||(b=[b]);const E=(_*d).toString(16).padStart(7,"#00000");for(let w=0,T=b.length;w<T;++w){const C=b[w],M=C.getGeometryFunction()(y);if(!M||!Wn(r,M.getExtent()))continue;const S=C.clone(),R=S.getFill();R&&R.setColor(E);const I=S.getStroke();I&&(I.setColor(E),I.setLineDash(null)),S.setText(void 0);const N=C.getImage();if(N){const D=N.getImageSize();if(!D)continue;const H=jn(D[0],D[1],void 0,{alpha:!1}),q=H.canvas;H.fillStyle=E,H.fillRect(0,0,q.width,q.height),S.setImage(new fE({img:q,anchor:N.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:N.getOrigin(),opacity:1,size:N.getSize(),scale:N.getScale(),rotation:N.getRotation(),rotateWithView:N.getRotateWithView()}))}const O=S.getZIndex()||0;let k=g[O];k||(k={},g[O]=k,k.Polygon=[],k.Circle=[],k.LineString=[],k.Point=[]);const L=M.getType();if(L==="GeometryCollection"){const D=M.getGeometriesArrayRecursive();for(let H=0,q=D.length;H<q;++H){const G=D[H];k[G.getType().replace("Multi","")].push(G,S)}}else k[L.replace("Multi","")].push(M,S)}}const m=Object.keys(g).map(Number).sort(ha);for(let _=0,y=m.length;_<y;++_){const p=g[m[_]];for(const b in p){const v=p[b];for(let E=0,w=v.length;E<w;E+=2){h.setStyle(v[E+1]);for(let T=0,C=e.length;T<C;++T)h.setTransform(e[T]),h.drawGeometry(v[E])}}}return c.getImageData(0,0,u.width,u.height)}function Kle(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*Gr),s=Math.floor(Math.round(t[1])*Gr),o=(jt(r,0,n.width-1)+jt(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&i.push(e[u/h-1])}return i}const Jle=.5,zD={Point:ace,LineString:rce,Polygon:cce,MultiPoint:lce,MultiLineString:sce,MultiPolygon:oce,GeometryCollection:ice,Circle:tce};function Qle(t,e){return parseInt(tt(t),10)-parseInt(tt(e),10)}function ece(t,e){const n=Ew(t,e);return n*n}function Ew(t,e){return Jle*t/e}function tce(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const l=(r||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function LR(t,e,n,i,r,s,o){let a=!1;const l=n.getImage();if(l){const c=l.getImageState();c==We.LOADED||c==We.ERROR?l.unlistenImageChange(r):(c==We.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return nce(t,e,n,i,s,o),a}function nce(t,e,n,i,r,s){const o=n.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);if(n.getRenderer())WD(t,a,n,e);else{const c=zD[a.getType()];c(t,a,n,e,s)}}function WD(t,e,n,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)WD(t,s[o],n,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer())}function ice(t,e,n,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=zD[s[o].getType()];l(t,s[o],n,i,r)}}function rce(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=n.getText();if(o&&o.getText()){const a=(r||t).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function sce(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=n.getText();if(o&&o.getText()){const a=(r||t).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function oce(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const l=(r||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function ace(t,e,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=We.LOADED)return;let l=t;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=t;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function lce(t,e,n,i,r){const s=n.getImage(),o=n.getText();let a;if(s){if(s.getImageState()!=We.LOADED)return;let l=t;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(n.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=t;r&&(l=r);const c=l.getBuilder(n.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function cce(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const l=(r||t).getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}class uce extends gE{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ji(),this.wrappedRenderedExtent_=Ji(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=n.pixelRatio,d=n.viewHints,g=!(d[Yt.ANIMATING]||d[Yt.INTERACTING]),m=this.compositionContext_,_=Math.round(n.size[0]*f),y=Math.round(n.size[1]*f),p=h.getWrapX()&&l.canWrapX(),b=p?ut(u):null,v=p?Math.ceil((r[2]-u[2])/b)+1:1;let E=p?Math.floor((r[0]-u[0])/b):0;do{const w=this.getRenderTransform(o,a,c,f,_,y,E*b);e.execute(m,1,w,c,g,void 0,i)}while(++E<v)}setupCompositionContext_(){if(this.opacity_!==1){const e=jn(this.context.canvas.width,this.context.canvas.height,IR);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,ry(this.compositionContext_),IR.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,n){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];Use(this.pixelTransform,1/i,1/i),Z_(this.inversePixelTransform,this.pixelTransform);const s=Ox(this.pixelTransform);this.useContainer(n,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(ns.PRERENDER)||this.getLayer().hasListener(ns.POSTRENDER)))return null;const h=Math.round(e.size[0]*i),f=Math.round(e.size[1]*i);a.width!=h||a.height!=f?(a.width=h,a.height=f,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,h,f),this.preRender(o,e);const d=e.viewState;d.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const m=Ps(r.extent);u=Wn(m,e.extent),g=u&&!Xo(m,e.extent),g&&this.clipUnrotated(this.compositionContext_,e,m)}return u&&this.renderWorlds(l,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Ht(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=i[0]*Gr,f=i[1]*Gr;u.push(this.getRenderTransform(r,s,o,Gr,h,f,0).slice());const d=c.getSource(),g=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!Xo(g,l)){let m=l[0];const _=ut(g);let y=0,p;for(;m<g[0];)--y,p=_*y,u.push(this.getRenderTransform(r,s,o,Gr,h,f,p).slice()),m+=_;for(y=0,m=l[2];m>g[2];)++y,p=_*y,u.push(this.getRenderTransform(r,s,o,Gr,h,f,p).slice()),m-=_}this.hitDetectionImageData_=Zle(i,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}n(Kle(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(d,g,m){const _=tt(d),y=c[_];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return c[_]=!0,s.splice(s.lastIndexOf(y),1),r(d,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return c[_]=!0,r(d,l,g);s.push(c[_]={feature:d,layer:l,geometry:g,distanceSq:m,callback:r})}};let h;const f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some(d=>h=d.forEachFeatureAtCoordinate(e,o,a,i,u,d===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=e.viewHints[Yt.ANIMATING],s=e.viewHints[Yt.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,f=e.pixelRatio,d=n.getRevision(),g=n.getRenderBuffer();let m=n.getRenderOrder();m===void 0&&(m=Qle);const _=c.center.slice(),y=Lx(l,g*h),p=y.slice(),b=[y.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Xo(v,e.extent)){const k=ut(v),L=Math.max(ut(y)/2,k);y[0]=v[0]-L,y[2]=v[2]+L,qN(_,u);const D=YN(b[0],u);D[0]<v[0]&&D[2]<v[2]?b.push([D[0]+k,D[1],D[2]+k,D[3]]):D[0]>v[0]&&D[2]>v[2]&&b.push([D[0]-k,D[1],D[2]-k,D[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==d&&this.renderedRenderOrder_==m&&Xo(this.wrappedRenderedExtent_,y))return Ra(this.renderedExtent_,p)||(this.hitDetectionImageData_=null,this.renderedExtent_=p),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new RR(Ew(h,f),y,h,f);let w;this.getLayer().getDeclutter()&&(w=new RR(Ew(h,f),y,h,f));let T;for(let k=0,L=b.length;k<L;++k)i.loadFeatures(b[k],h,u);const C=ece(h,f);let M=!0;const S=k=>{let L;const D=k.getStyleFunction()||n.getStyleFunction();if(D&&(L=D(k,h)),L){const H=this.renderFeature(k,C,L,E,T,w);M=M&&!H}},R=JN(y),I=i.getFeaturesInExtent(R);m&&I.sort(m);for(let k=0,L=I.length;k<L;++k)S(I[k]);this.renderedFeatures_=I,this.ready=M;const N=E.finish(),O=new OR(y,h,f,i.getOverlaps(),N,n.getRenderBuffer());return w&&(this.declutterExecutorGroup=new OR(y,h,f,i.getOverlaps(),w.finish(),n.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=d,this.renderedRenderOrder_=m,this.renderedExtent_=p,this.wrappedRenderedExtent_=y,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=LR(r,e,i[l],n,this.boundHandleStyleImageChange_,s,o)||a;else a=LR(r,e,i,n,this.boundHandleStyleImageChange_,s,o);return a}}const hce=uce;class fce{constructor(e){this.rbush_=new uE(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[tt(n)]=i}load(e,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=e[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[tt(a)]=l}this.rbush_.load(i)}remove(e){const n=tt(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[tt(n)],r=[i.minX,i.minY,i.maxX,i.maxY];sd(r,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let r=0,s=e.length;r<s;r++)if(i=n(e[r]),i)return i;return i}isEmpty(){return Hl(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return da(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}const NR=fce;class S0 extends eD{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ft),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,n=this.geometries_.length;e<n;++e)this.changeEventsKeys_.push(Ye(this.geometries_[e],$e.CHANGE,this.changed,this))}clone(){const e=new S0(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<Kl(this.getExtent(),e,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,n,i,r);return r}containsXY(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,n))return!0;return!1}computeExtent(e){ng(e);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)VN(e,n[i].getExtent());return e}getGeometries(){return DR(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?e=e.concat(n[i].getGeometriesArrayRecursive()):e.push(n[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(r=!0)}if(r){const s=new S0(null);return s.setGeometriesArray(n),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,n);this.changed()}scale(e,n,i){i||(i=ga(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,n,i);this.changed()}setGeometries(e){this.setGeometriesArray(DR(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(e);this.changed()}translate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function DR(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}const dce=S0;class C0 extends tc{constructor(e,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,e),this.ends_=i;else{const r=e,s=[],o=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];ts(s,u.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){ts(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new C0(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<Kl(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bx(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Gx(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,i,r))}getCoordinateAtM(e,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,Woe(this.flatCoordinates,0,this.ends_,this.stride,e,n,i))}getCoordinates(){return ad(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Yo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Yo(e.slice(s,l),i);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=m0(n,i,l,s,.5);ts(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=nD(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,i),new C0(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return Doe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=rg(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const gce=C0;class mE extends tc{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){ts(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new mE(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<Kl(this.getExtent(),e,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=wl(e,n,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return Zo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new Pr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Pr(e.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(Nx(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ty(this.flatCoordinates,0,e,this.stride),this.changed()}}const HD=mE;function BD(t,e,n,i){const r=[];let s=Ji();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Dx(t,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class M0 extends tc{constructor(e,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const c=r[a],u=s.length,h=c.getEnds();for(let f=0,d=h.length;f<d;++f)h[f]+=u;ts(s,c.getFlatCoordinates()),o.push(h)}n=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}n!==void 0&&i?(this.setFlatCoordinates(n,e),this.endss_=i):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ts(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=this.endss_[r].slice();const i=new M0(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(e,n,i,r){return r<Kl(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Aoe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Roe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return Noe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return Ooe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),_w(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,pw(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=BD(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=sD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new HD(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;cD(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_w(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=$oe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,i),new M0(n,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new ma(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const e=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const u=new ma(n.slice(s,c),e,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return Foe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=tD(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const mce=M0,FR=Yi();class Pu{constructor(e,n,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?BN(this.flatCoordinates_):Dx(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=ga(this.getExtent());this.flatInteriorPoints_=qx(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=zoe(this.flatCoordinates_,this.ends_),n=BD(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=sD(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=m0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=m0(e,n,o,2,.5);ts(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=qt(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const r=Rn(i)/Rn(n);Ki(FR,i[0],i[3],r,-r,0,0,0),na(this.flatCoordinates_,0,this.flatCoordinates_.length,2,FR,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Pu(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=NN((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=ny(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=nD(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=Ux(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Pu(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Pu.prototype.getFlatCoordinates=Pu.prototype.getOrientedFlatCoordinates;const Rs=Pu;class pce extends Ir{constructor(e){super(),this.projection=qt(e.projection),this.attributions_=PR(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=PR(e),this.changed()}setState(e){this.state_=e,this.changed()}}function PR(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}const VD=pce,lr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function _ce(t,e){return[[-1/0,-1/0,1/0,1/0]]}let yce=!1;function vce(t,e,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,r):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=yce,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"?u=JSON.parse(a.responseText):c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:n,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function zR(t,e){return function(n,i,r,s,o){const a=this;vce(t,e,n,i,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||Lu)}}class Mo extends uo{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class bce extends VD{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Lu,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Xe(this.format_,"`format` must be set when `url` is set"),this.loader_=zR(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:_ce;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new NR:null,this.loadedExtentsRtree_=new NR,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!n&&i===void 0&&(i=new jr(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=tt(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Mo(lr.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Rs||(this.featureChangeKeys_[e]=[Ye(n,$e.CHANGE,this.handleFeatureChange_,this),Ye(n,Ou.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof Rs){const s=this.idIndex_[r];s instanceof Rs?Array.isArray(s)?s.push(n):this.idIndex_[r]=[s,n]:i=!1}else i=!1}return i&&(Xe(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=tt(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=tt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(lr.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Mo(lr.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(lr.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(lr.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(ti.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(ti.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ft);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Mo(lr.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof Rs||s.intersectsCoordinate(e))return n(r)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Rs||r.intersectsExtent(e)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Hl(this.nullGeometryFeatures_)||ts(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=Jse(e,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||rd,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u instanceof Rs?0:u.closestPointXY(i,r,o,a),a<h){s=c;const f=Math.sqrt(a);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=tt(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Mo(lr.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:tt(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Hl(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return Xo(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Mo(lr.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Mo(lr.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Mo(lr.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(e,function(r){if(sd(r.extent,e))return i=r,!0}),i&&n.remove(i)}removeFeature(e){if(!e)return;const n=tt(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=tt(e),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(ft),delete this.featureChangeKeys_[n];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Mo(lr.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(const i in this.idIndex_){const r=this.idIndex_[i];if(e instanceof Rs&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){Xe(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(zR(e,this.format_))}}const ly=bce;class wce extends Dae{constructor(e,n,i,r,s){const o=s!==void 0?We.IDLE:We.LOADED;super(e,n,i,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=We.ERROR):this.state=We.LOADED,this.changed()}load(){this.state==We.IDLE&&(this.state=We.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const xce=wce,we={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ece extends eg{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent($e.CHANGE)}release(){this.state===we.ERROR&&this.setState(we.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==we.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==we.LOADED){e.interimTile=null;break}e.getState()==we.LOADING?n=e:e.getState()==we.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==we.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ke()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:MD(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const GD=Ece;class Tce extends GD{constructor(e,n,i,r,s,o){super(e,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=we.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=we.ERROR,this.unlistenImage_(),this.image_=Sce(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=we.LOADED:this.state=we.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==we.ERROR&&(this.state=we.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==we.IDLE&&(this.state=we.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Oae(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Sce(){const t=jn(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}const UD=Tce;class Cce{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Mce=Cce;class Ace extends Rx{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){ke()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Ki(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Z_(r,i)}forEachFeatureAtCoordinate(e,n,i,r,s,o,a,l){let c;const u=n.viewState;function h(v,E,w,T){return s.call(o,E,v?w:null,T)}const f=u.projection,d=qN(e.slice(),f),g=[[0,0]];if(f.canWrapX()&&r){const v=f.getExtent(),E=ut(v);g.push([-E,0],[E,0])}const m=n.layerStatesArray,_=m.length,y=[],p=[];for(let v=0;v<g.length;v++)for(let E=_-1;E>=0;--E){const w=m[E],T=w.layer;if(T.hasRenderer()&&cE(w,u)&&a.call(l,T)){const C=T.getRenderer(),M=T.getSource();if(C&&M){const S=M.getWrapX()?d:e,R=h.bind(null,w.managed);p[0]=S[0]+g[v][0],p[1]=S[1]+g[v][1],c=C.forEachFeatureAtCoordinate(p,n,i,R,y)}if(c)return c}}if(y.length===0)return;const b=1/y.length;return y.forEach((v,E)=>v.distanceSq+=E*b),y.sort((v,E)=>v.distanceSq-E.distanceSq),y.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(e,n,i,r,s,o){return this.forEachFeatureAtCoordinate(e,n,i,r,rd,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ke()}flushDeclutterItems(e){}scheduleExpireIconCache(e){x0.canExpireCache()&&e.postRenderFunctions.push(Rce)}}function Rce(t,e){x0.expire()}const Ice=Ace;class kce extends Ice{constructor(e){super(e),this.fontChangeListenerKey_=Ye(Cs,Ou.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=nc+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const r=new PD(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){ft(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ns.PRECOMPOSE,e);const n=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=n.length;o<a;++o){const l=n[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!cE(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(e,s);h&&(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(e),Koe(this.element_,this.children_),this.dispatchRenderEvent(ns.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(e);n.length=0}}const $ce=kce;class Ho extends uo{constructor(e,n){super(e),this.layer=n}}const cv={LAYERS:"layers"};class pE extends CD{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(cv.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new jr(i.slice(),{unique:!0}):Xe(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new jr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ft),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ye(e,ti.ADD,this.handleLayersAdd_,this),Ye(e,ti.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ft);Qd(this.listenerKeys_);const n=e.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new Ho("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[Ye(e,Ou.PROPERTYCHANGE,this.handleLayerChange_,this),Ye(e,$e.CHANGE,this.handleLayerChange_,this)];e instanceof pE&&n.push(Ye(e,"addlayer",this.handleLayerGroupAdd_,this),Ye(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tt(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Ho("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ho("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Ho("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=tt(n);this.listenerKeys_[i].forEach(ft),delete this.listenerKeys_[i],this.dispatchEvent(new Ho("removelayer",n)),this.changed()}getLayers(){return this.get(cv.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Ho("removelayer",i[r]))}this.set(cv.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=tu(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}const cy=pE;class Oce extends uo{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}const Lc=Oce;class Lce extends Lc{constructor(e,n,i,r,s,o){super(e,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ko=Lce,Ot={SINGLECLICK:"singleclick",CLICK:$e.CLICK,DBLCLICK:$e.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Tw={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Nce extends eg{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ye(i,Tw.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ye(i,Tw.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener($e.TOUCHMOVE,this.boundHandleTouchMove_,WN?{passive:!1}:!1)}emulateClick_(e){let n=new ko(Ot.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ko(Ot.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new ko(Ot.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==Ot.POINTERUP||n.type==Ot.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==Ot.POINTERDOWN||n.type==Ot.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new ko(Ot.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ft),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new ko(Ot.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ye(i,Ot.POINTERMOVE,this.handlePointerMove_,this),Ye(i,Ot.POINTERUP,this.handlePointerUp_,this),Ye(this.element_,Ot.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ye(this.element_.getRootNode(),Ot.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new ko(Ot.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ko(Ot.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ft(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener($e.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ft(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ft),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Dce=Nce,Is={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},on={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},A0=1/0;class Fce{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Qd(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Xe(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=A0?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,r=n.length,s=n[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;n[e]=n[u],i[e]=i[u],e=u}n[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>e;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==A0?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const Pce=Fce;class zce extends Pce{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener($e.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===we.LOADED||i===we.ERROR||i===we.EMPTY){i!==we.ERROR&&n.removeEventListener($e.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===we.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const Wce=zce;function Hce(t,e,n,i,r){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return A0;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Bce extends Ir{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){v0(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&v0(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)ft(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Lu&&this.listenerKeys.push(Ye(e,Is.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const dh=Bce;class Vce extends dh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener($e.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+nc+" "+sg+(this.collapsed_&&this.collapsible_?" "+fR:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(e),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ra(n,this.renderedAttributions_)){_D(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fR),this.collapsed_?y0(this.collapseLabel_,this.label_):y0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const Gce=Vce;class Uce extends dh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener($e.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+nc+" "+sg,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(dm)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:uh}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(dm);!s&&i===0?this.element.classList.add(dm):s&&i!==0&&this.element.classList.remove(dm)}this.label_.style.transform=r}this.rotation_=i}}const Yce=Uce;class jce extends dh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener($e.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener($e.CLICK,this.handleClick_.bind(this,-i),!1);const f=n+" "+nc+" "+sg,d=this.element;d.className=f,d.appendChild(u),d.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:uh})):i.setZoom(s)}}}const qce=jce;function YD(t){t=t||{};const e=new jr;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new qce(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Yce(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Gce(t.attributionOptions)),e}const WR={ACTIVE:"active"};class Xce extends Ir{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(WR.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(WR.ACTIVE,e)}setMap(e){this.map_=e}}function Zce(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:yae,center:t.getConstrainedCenter(r)})}}function _E(t,e,n,i){const r=t.getZoom();if(r===void 0)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:uh})}const cg=Xce;class Kce extends cg{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==Ot.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();_E(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}const Jce=Kce;class Qce extends cg{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ot.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ot.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ot.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==Ot.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function yE(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}const ug=Qce;function Sw(t){const e=arguments;return function(n){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](n),!!i);++r);return i}}const eue=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},tue=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},jD=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?tue(t):!0},nue=rd,qD=function(t){const e=t.originalEvent;return e.button==0&&!(Bse&&FN&&e.ctrlKey)},XD=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},iue=function(t){const e=t.originalEvent;return FN?e.metaKey:e.ctrlKey},rue=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ZD=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},uv=function(t){const e=t.originalEvent;return Xe(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},sue=function(t){const e=t.originalEvent;return Xe(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class oue extends ug{constructor(e){super({stopDown:q_}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:Sw(XD,sue);this.condition_=e.onFocusOnly?Sw(jD,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(yE(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();foe(s,a.getResolution()),Fx(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:uh})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const aue=oue;class lue extends ug{constructor(e){e=e||{},super({stopDown:q_}),this.condition_=e.condition?e.condition:eue,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!uv(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===lE)return;const r=n.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return uv(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return uv(e)&&qD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const cue=lue;class uue extends Rx{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new ma([r])}getGeometry(){return this.geometry_}}const hue=uue,ym={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class hv extends uo{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class fue extends ug{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new hue(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:qD,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new hv(ym.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new hv(n?ym.BOXEND:ym.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hv(ym.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}const due=fue;class gue extends due{constructor(e){e=e||{};const n=e.condition?e.condition:rue;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:uh})}}const mue=gue,Ga={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class pue extends cg{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return XD(n)&&ZD(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==$e.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Ga.DOWN||r==Ga.LEFT||r==Ga.RIGHT||r==Ga.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==Ga.DOWN?c=-a:r==Ga.LEFT?l=-a:r==Ga.RIGHT?l=a:c=a;const u=[l,c];Fx(u,o.getRotation()),Zce(o,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const _ue=pue;class yue extends cg{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!iue(n)&&ZD(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==$e.KEYDOWN||e.type==$e.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();_E(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const vue=yue;class bue extends cg{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:nue;this.condition_=e.onFocusOnly?Sw(jD,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==$e.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==$e.WHEEL&&(s=r.deltaY,Wse&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=PN),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-jt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),_E(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const wue=bue;class xue extends ug{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=q_),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==lE&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(yE(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Eue=xue;class Tue extends ug{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=q_),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(yE(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const Sue=Tue;function Cue(t){t=t||{};const e=new jr,n=new Mce(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new cue),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new Jce({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new aue({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Eue),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new Sue({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new _ue),e.push(new vue({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new wue({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new mue({duration:t.zoomDuration})),e}function KD(t){if(t instanceof sy){t.setMapInternal(null);return}t instanceof cy&&t.getLayers().forEach(KD)}function JD(t,e){if(t instanceof sy){t.setMapInternal(e);return}if(t instanceof cy){const n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)JD(n[i],e)}}let Mue=class extends Ir{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=Aue(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:PN,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yi(),this.pixelToCoordinateTransform_=Yi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||YD(),this.interactions=n.interactions||Cue({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Wce(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(on.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(on.VIEW,this.handleViewChanged_),this.addChangeListener(on.SIZE,this.handleSizeChanged_),this.addChangeListener(on.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof Vr)&&e.view.then(function(r){i.setView(new Vr(r))}),this.controls.addEventListener(ti.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ti.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ti.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ti.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ti.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ti.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){JD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:rd,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(r){r instanceof cy?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:rd,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(on.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return mw(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Ht(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(on.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof jr){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Ss(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Ht(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(on.SIZE)}getView(){return this.get(on.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return Hce(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;const i=new ko(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===Tw.POINTERDOWN||i===$e.WHEEL||i===$e.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Yt.ANIMATING]||o[Yt.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(ns.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ns.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Lc(Is.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Lc(Is.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ft(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener($e.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener($e.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,v0(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new $ce(this)),this.mapBrowserEventHandler_=new Dce(this,this.moveTolerance_);for(const s in Ot)this.mapBrowserEventHandler_.addEventListener(Ot[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener($e.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener($e.WHEEL,this.boundHandleBrowserEvent_,WN?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Ye(i,$e.KEYDOWN,this.handleBrowserEvent,this),Ye(i,$e.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ft(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ft(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ye(e,Ou.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ye(e,$e.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ft),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ho("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ye(e,Ou.PROPERTYCHANGE,this.render,this),Ye(e,$e.CHANGE,this.render,this),Ye(e,"addlayer",this.handleLayerAdd_,this),Ye(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){KD(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&aR(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:hw(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:tt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=hw(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Ql(this.previousExtent_)&&!sd(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Lc(Is.MOVESTART,this,r)),this.previousExtent_=ng(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Yt.ANIMATING]&&!s.viewHints[Yt.INTERACTING]&&!sd(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Lc(Is.MOVEEND,this,s)),HN(s.extent,this.previousExtent_))),this.dispatchEvent(new Lc(Is.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Is.LOADSTART)||this.hasListener(Is.LOADEND)||this.hasListener(ns.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Ho("removelayer",n)),this.set(on.LAYERGROUP,e)}setSize(e){this.set(on.SIZE,e)}setTarget(e){this.set(on.TARGET,e)}setView(e){if(!e||e instanceof Vr){this.set(on.VIEW,e);return}this.set(on.VIEW,new Vr);const n=this;e.then(function(i){n.setView(new Vr(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[s,o],!aR(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&ZN("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Ra(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function Aue(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new cy({layers:t.layers});n[on.LAYERGROUP]=i,n[on.TARGET]=t.target,n[on.VIEW]=t.view instanceof Vr?t.view:new Vr;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new jr(t.controls.slice()):(Xe(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new jr(t.interactions.slice()):(Xe(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new jr(t.overlays.slice()):(Xe(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new jr,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const Rue=Mue,bn={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Iue extends Ir{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Joe,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(bn.ELEMENT,this.handleElementChanged),this.addChangeListener(bn.MAP,this.handleMapChanged),this.addChangeListener(bn.OFFSET,this.handleOffsetChanged),this.addChangeListener(bn.POSITION,this.handlePositionChanged),this.addChangeListener(bn.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(bn.ELEMENT)}getId(){return this.id}getMap(){return this.get(bn.MAP)||null}getOffset(){return this.get(bn.OFFSET)}getPosition(){return this.get(bn.POSITION)}getPositioning(){return this.get(bn.POSITIONING)}handleElementChanged(){_D(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(v0(this.element),ft(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ye(e,Is.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(bn.ELEMENT,e)}setMap(e){this.set(bn.MAP,e)}setOffset(e){this.set(bn.OFFSET,e)}setPosition(e){this.set(bn.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(bn.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[Xoe(r),Zoe(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Xo(i,s)){const a=s[0]-i[0],l=i[2]-s[2],c=s[1]-i[1],u=i[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const f=n.getView().getCenterInternal(),d=n.getPixelFromCoordinateInternal(f);if(!d)return;const g=[d[0]+h[0],d[1]+h[1]],m=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(e,n){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(e){this.set(bn.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(n),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const kue=Iue;class $ue{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return Xe(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return Xe(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){Xe(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const Oue=$ue;function HR(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function uy(t,e,n){return t+"/"+e+"/"+n}function QD(t){return uy(t[0],t[1],t[2])}function Lue(t){return t.split("/").map(Number)}function Nue(t){return(t[1]<<t[0])+t[2]}function Due(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(i,r):!0}class Fue extends Oue{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Lue(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(QD(r.tileCoord)),r.release())})}}const eF=Fue;class tF{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function vc(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new tF(t,e,n,i)}const nF=tF,BR=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],VR={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class Pue extends dh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const n=e.label!==void 0?e.label:"";this.labelNode_=typeof n=="string"?document.createTextNode(n):n;const i=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener($e.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${nc} ${sg}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const n=e.getOwnerDocument();if(GR(n))if(UR(n))Wue(n);else{let i;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?zue(i):iF(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const n=this.isInFullscreen_;this.isInFullscreen_=UR(e.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(y0(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(VR.ENTERFULLSCREEN)):(y0(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(VR.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,n){n?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const n=this.getMap();n&&n.removeChangeListener(on.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(on.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,r=e.length;i<r;++i)ft(e[i]);e.length=0;const n=this.getMap();if(n){const i=n.getOwnerDocument();GR(i)?this.element.classList.remove(hR):this.element.classList.add(hR);for(let r=0,s=BR.length;r<s;++r)e.push(Ye(i,BR[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function GR(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function UR(t){return!!(t.webkitIsFullScreen||t.fullscreenElement)}function iF(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function zue(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():iF(t)}function Wue(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}const Hue=Pue,fv="units",Bue=[1,2,5],jh=25.4/.28;class Vue extends dh{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+nc,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fv,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(fv)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(fv,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=f0(i,e.resolution,n,s);const a=this.minWidth_*(this.dpi_||jh)/jh,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||jh)/jh:void 0;let c=a*o,u="";if(r=="degrees"){const b=Nu.degrees;c*=b,c<b/60?(u="",o*=3600):c<b?(u="",o*=60):u=""}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,d,g,m,_,y;for(;;){g=Math.floor(h/3);const b=Math.pow(10,g);if(f=Bue[(h%3+3)%3]*b,d=Math.round(f/o),isNaN(d)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&d>=l){f=m,d=_,g=y;break}else if(d>=a)break;m=f,_=d,y=g,++h}const p=this.scaleBar_?this.createScaleBar(d,f,u):f.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=p&&(this.innerElement_.innerHTML=p,this.renderedHTML_=p),this.renderedWidth_!=d&&(this.innerElement_.style.width=d+"px",this.renderedWidth_=d),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,n,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,i,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:n/this.scaleBarSteps_*-1,c=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=f0(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||jh,i=1e3/25.4;return e*i*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const Gue=Vue;class Uue extends dh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const n=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",r=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener($e.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+nc+" "+sg,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const n=this.getMap().getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(yw(i))}}const rF=Uue;class Yue{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=zo,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let i=n.dataProjection?qt(n.dataProjection):this.readProjection(e);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=qt(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ke()}readFeature(e,n){return ke()}readFeatures(e,n){return ke()}readGeometry(e,n){return ke()}readProjection(e){return ke()}writeFeature(e,n){return ke()}writeFeatures(e,n){return ke()}writeGeometry(e,n){return ke()}}function vE(t,e,n){const i=n?qt(n.featureProjection):null,r=n?qt(n.dataProjection):null;let s=t;if(i&&r&&!Ka(i,r)){e&&(s=t.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(od(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const jue={Point:Pr,LineString:Yo,Polygon:ma,MultiPoint:HD,MultiLineString:gce,MultiPolygon:mce};function que(t,e,n){return Array.isArray(e[0])?(cD(t,0,e,n)||(t=t.slice(),_w(t,0,e,n)),t):(Zx(t,0,e,n)||(t=t.slice(),g0(t,0,e,n)),t)}function sF(t,e){var s;const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(o=>sF({...t,geometry:o})).flat();const i=n.type==="MultiPolygon"?"Polygon":n.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=n.layout.length;return vE(new Rs(i,i==="Polygon"?que(n.flatCoordinates,n.ends,r):n.flatCoordinates,(s=n.ends)==null?void 0:s.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function bE(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(r=>bE(r,e));return new dce(i)}const n=jue[t.type];return vE(new n(t.flatCoordinates,t.layout,t.ends),!1,e)}class Xue extends Yue{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(vm(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(vm(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return ke()}readFeaturesFromObject(e,n){return ke()}readGeometry(e,n){return this.readGeometryFromObject(vm(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return ke()}readProjection(e){return this.readProjectionFromObject(vm(e))}readProjectionFromObject(e){return ke()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return ke()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return ke()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return ke()}}function vm(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}const Zue=Xue;class Kue extends Zue{constructor(e){e=e||{},super(),this.dataProjection=qt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=qt(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=wE(i.geometry);if(this.featureClass===Rs)return sF({geometry:r,id:i.id,properties:i.properties},n);const s=new zo;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(bE(r,n)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,n){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&r.push(c)}}else r=[this.readFeatureFromObject(e,n)];return r.flat()}readGeometryFromObject(e,n){return Jue(e,n)}readProjectionFromObject(e){const n=e.crs;let i;if(n)if(n.type=="name")i=qt(n.properties.name);else if(n.type==="EPSG")i=qt("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=Cw(o,n),delete s[e.getGeometryName()]),Hl(s)||(i.properties=s),i}writeFeaturesObject(e,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,n){return Cw(e,this.adaptOptions(n))}}function wE(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=ehe(t);break}case"LineString":{n=the(t);break}case"Polygon":{n=she(t);break}case"MultiPoint":{n=ihe(t);break}case"MultiLineString":{n=nhe(t);break}case"MultiPolygon":{n=rhe(t);break}case"GeometryCollection":{n=Que(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function Jue(t,e){const n=wE(t);return bE(n,e)}function Que(t,e){return t.geometries.map(function(i){return wE(i)})}function ehe(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:ec(e.length)}}function the(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:ec(e[0].length)}}function nhe(t){const e=t.coordinates,n=e[0][0].length,i=[],r=rg(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:ec(n)}}function ihe(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ec(e[0].length)}}function rhe(t){const e=t.coordinates,n=[],i=e[0][0][0].length,r=tD(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:r,layout:ec(i)}}function she(t){const e=t.coordinates,n=[],i=e[0][0].length,r=rg(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:r,layout:ec(i)}}function Cw(t,e){t=vE(t,!0,e);const n=t.getType();let i;switch(n){case"Point":{i=hhe(t);break}case"LineString":{i=ahe(t);break}case"Polygon":{i=fhe(t,e);break}case"MultiPoint":{i=che(t);break}case"MultiLineString":{i=lhe(t);break}case"MultiPolygon":{i=uhe(t,e);break}case"GeometryCollection":{i=ohe(t,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function ohe(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(i){return Cw(i,e)})}}function ahe(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function lhe(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function che(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function uhe(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function hhe(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function fhe(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const R0=Kue,bm={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class dhe extends sy{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(bm.PRELOAD)}setPreload(e){this.set(bm.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(bm.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(bm.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const ghe=dhe,mhe=.5,phe=10,YR=.25;class _he{constructor(e,n,i,r,s,o){this.sourceProj_=e,this.targetProj_=n;let a={};const l=od(this.targetProj_,this.sourceProj_);this.transformInv_=function(p){const b=p[0]+"/"+p[1];return a[b]||(a[b]=l(p)),a[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ut(r)>=ut(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ut(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ut(this.targetProj_.getExtent()):null;const c=Jl(i),u=Q_(i),h=J_(i),f=K_(i),d=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(h),_=this.transformInv_(f),y=phe+(o?Math.max(0,Math.ceil(Math.log2(uw(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,f,d,g,m,_,y),this.wrapsXInSource_){let p=1/0;this.triangles_.forEach(function(b,v,E){p=Math.min(p,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-p>this.sourceWorldWidth_/2){const v=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];v[0][0]-p>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-p>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-p>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const E=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-E<this.sourceWorldWidth_/2&&(b.source=v)}})}a={}}addTriangle_(e,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,n,i]})}addQuad_(e,n,i,r,s,o,a,l,c){const u=XA([s,o,a,l]),h=this.sourceWorldWidth_?ut(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=XA([e,n,i,r]);g=ut(_)/this.targetWorldWidth_>YR||g}!d&&this.sourceProj_.isGlobal()&&h&&(g=h>YR||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Wn(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(_);let p;d?p=(xl(s[0],f)+xl(a[0],f))/2-xl(y[0],f):p=(s[0]+a[0])/2-y[0];const b=(s[1]+a[1])/2-y[1];g=p*p+b*b>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],y=this.transformInv_(_),p=[(r[0]+e[0])/2,(r[1]+e[1])/2],b=this.transformInv_(p);this.addQuad_(e,n,_,p,s,o,y,b,c-1),this.addQuad_(p,_,i,r,b,y,a,l,c-1)}else{const _=[(e[0]+n[0])/2,(e[1]+n[1])/2],y=this.transformInv_(_),p=[(i[0]+r[0])/2,(i[1]+r[1])/2],b=this.transformInv_(p);this.addQuad_(e,_,p,r,s,y,b,l,c-1),this.addQuad_(_,n,i,p,y,o,a,b,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(e,i,r,s,a,l),m&14||this.addTriangle_(e,i,n,s,a,o),m&&(m&13||this.addTriangle_(n,r,e,o,l,s),m&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const e=Ji();return this.triangles_.forEach(function(n,i,r){const s=n.source;Rf(e,s[0]),Rf(e,s[1]),Rf(e,s[2])}),e}getTriangles(){return this.triangles_}}const yhe=_he;let dv;const iu=[];function jR(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function gv(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function vhe(){if(dv===void 0){const t=jn(6,6,iu);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",jR(t,4,5,4,0),jR(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;dv=gv(e,0)||gv(e,4)||gv(e,8),ry(t),iu.push(t.canvas)}return dv}function qR(t,e,n,i){const r=woe(n,e,t);let s=f0(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||tg(l,r)){const c=f0(t,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function bhe(t,e,n,i){const r=ga(n);let s=qR(t,e,r,i);return(!isFinite(s)||s<=0)&&UN(n,function(o){return s=qR(t,e,o,i),isFinite(s)&&s>0}),s}function whe(t,e,n,i,r,s,o,a,l,c,u,h,f){const d=jn(Math.round(n*t),Math.round(n*e),iu);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(n,n);function g(p){return Math.round(p*n)/n}d.globalCompositeOperation="lighter";const m=Ji();l.forEach(function(p,b,v){VN(m,p.extent)});let _;if(!f||l.length!==1||c!==0){const p=ut(m),b=Rn(m);_=jn(Math.round(n*p/i),Math.round(n*b/i),iu),h||(_.imageSmoothingEnabled=!1);const v=n/i;l.forEach(function(E,w,T){const C=E.extent[0]-m[0],M=-(E.extent[3]-m[3]),S=ut(E.extent),R=Rn(E.extent);E.image.width>0&&E.image.height>0&&_.drawImage(E.image,c,c,E.image.width-2*c,E.image.height-2*c,C*v,M*v,S*v,R*v)})}const y=Jl(o);return a.getTriangles().forEach(function(p,b,v){const E=p.source,w=p.target;let T=E[0][0],C=E[0][1],M=E[1][0],S=E[1][1],R=E[2][0],I=E[2][1];const N=g((w[0][0]-y[0])/s),O=g(-(w[0][1]-y[1])/s),k=g((w[1][0]-y[0])/s),L=g(-(w[1][1]-y[1])/s),D=g((w[2][0]-y[0])/s),H=g(-(w[2][1]-y[1])/s),q=T,G=C;T=0,C=0,M-=q,S-=G,R-=q,I-=G;const J=[[M,S,0,0,k-N],[R,I,0,0,D-N],[0,0,M,S,L-O],[0,0,R,I,H-O]],W=uoe(J);if(!W)return;if(d.save(),d.beginPath(),vhe()||!h){d.moveTo(k,L);const se=4,le=N-k,ce=O-L;for(let z=0;z<se;z++)d.lineTo(k+g((z+1)*le/se),L+g(z*ce/(se-1))),z!=se-1&&d.lineTo(k+g((z+1)*le/se),L+g((z+1)*ce/(se-1)));d.lineTo(D,H)}else d.moveTo(k,L),d.lineTo(N,O),d.lineTo(D,H);d.clip(),d.transform(W[0],W[2],W[1],W[3],N,O),d.translate(m[0]-q,m[3]-G);let ie;if(_)ie=_.canvas,d.scale(i/n,-i/n);else{const se=l[0],le=se.extent;ie=se.image,d.scale(ut(le)/ie.width,-Rn(le)/ie.height)}d.drawImage(ie,0,0),d.restore()}),_&&(ry(_),iu.push(_.canvas)),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(p,b,v){const E=p.target,w=(E[0][0]-y[0])/s,T=-(E[0][1]-y[1])/s,C=(E[1][0]-y[0])/s,M=-(E[1][1]-y[1])/s,S=(E[2][0]-y[0])/s,R=-(E[2][1]-y[1])/s;d.beginPath(),d.moveTo(C,M),d.lineTo(w,T),d.lineTo(S,R),d.closePath(),d.stroke()}),d.restore()),d.canvas}class xhe extends GD{constructor(e,n,i,r,s,o,a,l,c,u,h,f){super(s,we.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?tu(d,g):d;if(uw(_)===0){this.state=we.EMPTY;return}const y=e.getExtent();y&&(m?m=tu(m,y):m=y);const p=r.getResolution(this.wrappedTileCoord_[0]),b=bhe(e,i,_,p);if(!isFinite(b)||b<=0){this.state=we.EMPTY;return}const v=u!==void 0?u:mhe;if(this.triangulation_=new yhe(e,i,_,m,b*v,p),this.triangulation_.getTriangles().length===0){this.state=we.EMPTY;return}this.sourceZ_=n.getZForResolution(b);let E=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(E[1]=jt(E[1],m[1],m[3]),E[3]=jt(E[3],m[1],m[3])):E=tu(E,m)),!uw(E))this.state=we.EMPTY;else{const w=n.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let T=w.minX;T<=w.maxX;T++)for(let C=w.minY;C<=w.maxY;C++){const M=c(this.sourceZ_,T,C,a);M&&this.sourceTiles_.push(M)}this.sourceTiles_.length===0&&(this.state=we.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==we.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=we.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=whe(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=we.LOADED}this.changed()}load(){if(this.state==we.IDLE){this.state=we.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==we.IDLE||i==we.LOADING){e++;const r=Ye(n,$e.CHANGE,function(s){const o=n.getState();(o==we.LOADED||o==we.ERROR||o==we.EMPTY)&&(ft(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,r){n.getState()==we.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ft),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ry(this.canvas_.getContext("2d")),iu.push(this.canvas_),this.canvas_=null),super.release()}}const Mw=xhe;class Ehe extends gE{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Ji(),this.tmpTileRange_=new nF(0,0,0,0)}isDrawableTile(e){const n=this.getLayer(),i=e.getState(),r=n.getUseInterimTilesOnError();return i==we.LOADED||i==we.EMPTY||i==we.ERROR&&!r}getTile(e,n,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,n,i,s,o);return c.getState()==we.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ht(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!tg(s,r))return null;const o=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(n.pixelRatio);for(let f=u.getZForResolution(l.resolution);f>=u.getMinZoom();--f){const d=u.getTileCoordForCoordAndZ(r,f),g=c.getTile(f,d[1],d[2],o,a);if(!(g instanceof UD||g instanceof Mw)||g instanceof Mw&&g.getState()===we.EMPTY)return null;if(g.getState()!==we.LOADED)continue;const m=u.getOrigin(f),_=yi(u.getTileSize(f)),y=u.getResolution(f),p=Math.floor(h*((r[0]-m[0])/y-d[1]*_[0])),b=Math.floor(h*((m[1]-r[1])/y-d[2]*_[1])),v=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),p+v,b+v)}return null}loadedTileCallback(e,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,n,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getRevision(),d=h.getTileGridForProjection(s),g=d.getZForResolution(o,h.zDirection),m=d.getResolution(g);let _=e.extent;const y=e.viewState.resolution,p=h.getTilePixelRatio(c),b=Math.round(ut(_)/y*c),v=Math.round(Rn(_)/y*c),E=i.extent&&Ps(i.extent);E&&(_=tu(_,Ps(i.extent)));const w=m*b/2/p,T=m*v/2/p,C=[a[0]-w,a[1]-T,a[0]+w,a[1]+T],M=d.getTileRangeForExtentAndZ(_,g),S={};S[g]={};const R=this.createLoadedTileFinder(h,s,S),I=this.tmpExtent,N=this.tmpTileRange_;this.newTiles_=!1;const O=l?fw(r.center,y,l,e.size):void 0;for(let ie=M.minX;ie<=M.maxX;++ie)for(let se=M.minY;se<=M.maxY;++se){if(l&&!d.tileCoordIntersectsViewport([g,ie,se],O))continue;const le=this.getTile(g,ie,se,e);if(this.isDrawableTile(le)){const U=tt(this);if(le.getState()==we.LOADED){S[g][le.tileCoord.toString()]=le;let P=le.inTransition(U);P&&i.opacity!==1&&(le.endTransition(U),P=!1),!this.newTiles_&&(P||!this.renderedTiles.includes(le))&&(this.newTiles_=!0)}if(le.getAlpha(U,e.time)===1)continue}const ce=d.getTileCoordChildTileRange(le.tileCoord,N,I);let z=!1;ce&&(z=R(g+1,ce)),z||d.forEachTileCoordParentTileRange(le.tileCoord,R,N,I)}const k=m/o*c/p;Ki(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-b/2,-v/2);const L=Ox(this.pixelTransform);this.useContainer(n,L,this.getBackground(e));const D=this.context,H=D.canvas;Z_(this.inversePixelTransform,this.pixelTransform),Ki(this.tempTransform,b/2,v/2,k,k,0,-b/2,-v/2),H.width!=b||H.height!=v?(H.width=b,H.height=v):this.containerReused||D.clearRect(0,0,b,v),E&&this.clipUnrotated(D,e,E),h.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,e),this.renderedTiles.length=0;let q=Object.keys(S).map(Number);q.sort(ha);let G,J,W;i.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?q=q.reverse():(G=[],J=[]);for(let ie=q.length-1;ie>=0;--ie){const se=q[ie],le=h.getTilePixelSize(se,c,s),z=d.getResolution(se)/m,U=le[0]*z*k,P=le[1]*z*k,Y=d.getTileCoordForCoordAndZ(Jl(C),se),te=d.getTileCoordExtent(Y),A=Ht(this.tempTransform,[p*(te[0]-C[0])/m,p*(C[3]-te[3])/m]),$=p*h.getGutterForProjection(s),F=S[se];for(const B in F){const V=F[B],Z=V.tileCoord,ue=Y[1]-Z[1],oe=Math.round(A[0]-(ue-1)*U),ae=Y[2]-Z[2],Q=Math.round(A[1]-(ae-1)*P),de=Math.round(A[0]-ue*U),he=Math.round(A[1]-ae*P),ge=oe-de,_e=Q-he,Ae=g===se,ze=Ae&&V.getAlpha(tt(this),e.time)!==1;let Ie=!1;if(!ze)if(G){W=[de,he,de+ge,he,de+ge,he+_e,de,he+_e];for(let st=0,It=G.length;st<It;++st)if(g!==se&&se<J[st]){const Et=G[st];Wn([de,he,de+ge,he+_e],[Et[0],Et[3],Et[4],Et[7]])&&(Ie||(D.save(),Ie=!0),D.beginPath(),D.moveTo(W[0],W[1]),D.lineTo(W[2],W[3]),D.lineTo(W[4],W[5]),D.lineTo(W[6],W[7]),D.moveTo(Et[6],Et[7]),D.lineTo(Et[4],Et[5]),D.lineTo(Et[2],Et[3]),D.lineTo(Et[0],Et[1]),D.clip())}G.push(W),J.push(se)}else D.clearRect(de,he,ge,_e);this.drawTileImage(V,e,de,he,ge,_e,$,Ae),G&&!ze?(Ie&&D.restore(),this.renderedTiles.unshift(V)):this.renderedTiles.push(V),this.updateUsedTiles(e.usedTiles,h,V)}}return this.renderedRevision=f,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!sd(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,h,d,c,s,_,g,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(D,e),i.extent&&D.restore(),D.imageSmoothingEnabled=!0,L!==H.style.transform&&(H.style.transform=L),this.container}drawTileImage(e,n,i,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=tt(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(l?e.getAlpha(u,n.time):1),d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),d&&this.context.restore(),f!==h.opacity?n.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){const i=(function(r,s,o){const a=tt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(i)}}updateUsedTiles(e,n,i){const r=tt(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,n,i,r,s,o,a,l,c){const u=tt(n);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],f=e.tileQueue,d=i.getMinZoom(),g=e.viewState.rotation,m=g?fw(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let _=0,y,p,b,v,E,w;for(w=d;w<=a;++w)for(p=i.getTileRangeForExtentAndZ(o,w,p),b=i.getResolution(w),v=p.minX;v<=p.maxX;++v)for(E=p.minY;E<=p.maxY;++E)g&&!i.tileCoordIntersectsViewport([w,v,E],m)||(a-w<=l?(++_,y=n.getTile(w,v,E,r,s),y.getState()==we.IDLE&&(h[y.getKey()]=!0,f.isKeyQueued(y.getKey())||f.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),b])),c!==void 0&&c(y)):n.useTile(w,v,E,s));n.updateCacheSize(_,s)}}const The=Ehe;class She extends ghe{constructor(e){super(e)}createRenderer(){return new The(this)}}const Che=She;class Mhe extends gE{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(n.extent!==void 0&&(l=tu(l,Ps(n.extent,r.projection))),!a[Yt.ANIMATING]&&!a[Yt.INTERACTING]&&!Ql(l))if(o){const c=r.projection,u=o.getImage(l,s,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===We.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=Ht(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!tg(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=ut(o),c=Math.floor(a.width*((r[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Rn(o),h=Math.floor(a.height*((o[3]-r[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,n){const i=this.image_,r=i.getExtent(),s=i.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=i.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,f=h.center,d=h.resolution,g=u*o/(d*l),m=u*a/(d*l),_=e.extent,y=h.resolution,p=h.rotation,b=Math.round(ut(_)/y*u),v=Math.round(Rn(_)/y*u);Ki(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,p,-b/2,-v/2),Z_(this.inversePixelTransform,this.pixelTransform);const E=Ox(this.pixelTransform);this.useContainer(n,E,this.getBackground(e));const w=this.context,T=w.canvas;T.width!=b||T.height!=v?(T.width=b,T.height=v):this.containerReused||w.clearRect(0,0,b,v);let C=!1,M=!0;if(c.extent){const O=Ps(c.extent,h.projection);M=Wn(O,e.extent),C=M&&!Xo(O,e.extent),C&&this.clipUnrotated(w,e,O)}const S=i.getImage(),R=Ki(this.tempTransform,b/2,v/2,g,m,0,l*(r[0]-f[0])/o,l*(f[1]-r[3])/a);this.renderedResolution=a*u/l;const I=S.width*R[0],N=S.height*R[3];if(this.getLayer().getSource().getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,e),M&&I>=.5&&N>=.5){const O=R[4],k=R[5],L=c.opacity;let D;L!==1&&(D=w.globalAlpha,w.globalAlpha=L),w.drawImage(S,0,0,+S.width,+S.height,O,k,I,N),L!==1&&(w.globalAlpha=D)}return this.postRender(w,e),C&&w.restore(),w.imageSmoothingEnabled=!0,E!==T.style.transform&&(T.style.transform=E),this.container}}const Ahe=Mhe;function Rhe(t){return Array.isArray(t)?Math.min(...t):t}class Ihe extends Ahe{constructor(e){super(e),this.vectorRenderer_=new hce(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Yi(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const n=Ht(this.coordinateToVectorPixelTransform_,Ht(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const n=e.pixelRatio,i=e.viewState,r=i.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),Zse(a,this.layerImageRatio_));const l=ut(a)/r,c=Rn(a)/r;if(!s[Yt.ANIMATING]&&!s[Yt.INTERACTING]&&!Ql(a)){o.useContainer(null,null);const u=o.context,h=e.layerStatesArray[e.layerIndex],f=Object.assign({},h,{opacity:1}),d=Object.assign({},e,{declutterTree:new uE(9),extent:a,size:[l,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[f],layerIndex:0});let g=!0;const m=new xce(a,r,n,u.canvas,function(_){o.prepareFrame(d)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(d,null)&&(o.renderDeclutter(d),g=!1),_())});m.addEventListener($e.CHANGE,()=>{if(m.getState()!==We.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),y=Rhe(m.getResolution())*n/_;this.renderedResolution=y,this.coordinateToVectorPixelTransform_=Ki(this.coordinateToVectorPixelTransform_,l/2,c/2,1/y,-1/y,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,n,i,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,i,r,s):super.forEachFeatureAtCoordinate(e,n,i,r,s)}}const khe=Ihe;class $he extends Tle{constructor(e){e=e||{};const n=Object.assign({},e);delete n.imageRatio,super(n),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new khe(this)}}const hy=$he,mv={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},bc=[0,0,0],Ao=5;class Ohe{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Xe($se(this.resolutions_,(r,s)=>s-r,!0),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Xe(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Jl(i)),Xe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Xe(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:sE,Xe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new nF(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const r=this.getTileRangeForExtentAndZ(e,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(e,n,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=vc(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return vc(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(n===r)return vc(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(s*l),u=Math.floor(o*l);if(n<r)return vc(c,c,u,u,i);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return vc(c,h,u,f,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,bc);const r=bc[1],s=bc[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,bc);const o=bc[1],a=bc[2];return vc(r,o,s,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=yi(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=yi(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return da(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=yi(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],h=a*(l[1]-n)/i/c[1];return r?(u=fm(u,Ao)-1,h=fm(h,Ao)-1):(u=hm(u,Ao),h=hm(h,Ao)),HR(o,u,h,s)}getTileCoordForXYAndZ_(e,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=yi(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return r?(c=fm(c,Ao)-1,u=fm(u,Ao)-1):(c=hm(c,Ao),u=hm(u,Ao)),HR(i,c,u,s)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=Ix(this.resolutions_,e,n||0);return jt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return aD(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}const oF=Ohe;function aF(t){let e=t.getDefaultTileGrid();return e||(e=Fhe(t),t.setDefaultTileGrid(e)),e}function Lhe(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=xE(n);if(!tg(s,r)){const o=ut(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,t.getTileCoordForCoordAndZ(r,i)}return e}function Nhe(t,e,n,i){i=i!==void 0?i:"top-left";const r=lF(t,e,n);return new oF({extent:t,origin:qse(t,i),resolutions:r,tileSize:n})}function Dhe(t){const e=t||{},n=e.extent||qt("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:lF(n,e.maxZoom,e.tileSize,e.maxResolution)};return new oF(i)}function lF(t,e,n,i){e=e!==void 0?e:hae,n=yi(n!==void 0?n:sE);const r=Rn(t),s=ut(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Fhe(t,e,n,i){const r=xE(t);return Nhe(r,e,n,i)}function xE(t){t=qt(t);let e=t.getExtent();if(!e){const n=180*Nu.degrees/t.getMetersPerUnit();e=da(-n,-n,n,n)}return e}class Phe extends VD{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&yi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new eF(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}forEachLoadedTile(e,n,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)l=uy(n,u,h),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===we.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,s){return ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:aF(e)}getTileCacheForProjection(e){const n=this.getProjection();return Xe(n===null||Ka(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=yi(r.getTileSize(e),this.tmpSize);return s==1?o:Hoe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Lhe(i,e,n)),Due(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){const i=this.getTileCacheForProjection(n);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,n,i,r){}}class zhe extends uo{constructor(e,n){super(e),this.tile=n}}const Whe=Phe;function Hhe(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=e.getFullTileRange(c);if(!u)throw new Error("The {-y} placeholder requires a tile grid with extent");return(u.getHeight()-o[2]-1).toString()})}}function Bhe(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Hhe(t[r],e);return Vhe(i)}function Vhe(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const r=Nue(e),s=xl(r,t.length);return t[s](e,n,i)}}function Ghe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}class EE extends Whe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===EE.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=tt(n),r=n.getState();let s;r==we.LOADING?(this.tileLoadingKeys_[i]=!0,s=mv.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==we.ERROR?mv.TILELOADERROR:r==we.LOADED?mv.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new zhe(s,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=Ghe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Bhe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){const r=uy(e,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const Uhe=EE;class Yhe extends Uhe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:jhe,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:UD,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Ka(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Ka(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Ka(n,e)))return this.tileGrid;const i=tt(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=aF(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||Ka(n,e))return this.tileCache;const i=tt(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new eF(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,r,s,o){const a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?we.IDLE:we.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener($e.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,i,r,s){const o=this.getProjection();if(!o||!s||Ka(o,s))return this.getTileInternal(e,n,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,n,i];let c;const u=QD(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),m=new Mw(o,f,s,d,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,y,p,b)=>this.getTileInternal(_,y,p,b,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,n,i,r,s){let o=null;const a=uy(e,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,n,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,n,i,r,s,l),c.getState()==we.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const i=qt(e);if(i){const r=tt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function jhe(t,e){t.getImage().src=e}const qhe=Yhe;class Xhe extends qhe{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Dhe({extent:xE(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Zhe=Xhe,Khe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Jhe extends Zhe{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[Khe];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const Qhe=Jhe,wc=Jt(new j_(0)),pv=Jt([]),XR=new Ke;let Zn;const Or=()=>new Gn({stroke:new to({color:"rgba(0, 0, 0, 0)",width:0})}),ZR=()=>[new Gn({stroke:new to({color:"#FFFFFF",width:6}),zIndex:-1}),new Gn({stroke:new to({color:"#2ecc71",width:4}),zIndex:0})],KR=()=>[new Gn({stroke:new to({color:"#FFFFFF",width:6}),zIndex:-1}),new Gn({stroke:new to({color:"#f50f30",width:4}),zIndex:0})],efe=new Che({source:new Qhe}),wm=new hy({source:new ly({features:[]}),visible:!0,style:[new Gn({stroke:new to({color:"#FFFFFF",width:6}),zIndex:-1}),new Gn({stroke:new to({color:"#34495e",width:4})})]}),xm=new hy({source:new ly({features:[]}),visible:!0,style:Or()}),Em=new hy({source:new ly({features:[]}),visible:!0,style:Or()}),Ro=new hy({source:new ly({features:[]}),visible:!0}),tfe=new Vr({center:[0,0],zoom:1,enableRotation:!1,projection:"EPSG:4326"}),fy=(t,e=1)=>new fE({crossOrigin:"anonymous",src:t,scale:e}),nfe=new Gn({image:fy(Ore)}),ife=new Gn({image:fy(kre)}),JR=new Gn({image:fy($re,.075)}),QR=new Gn({image:fy(Ire,.075)});let Ni=new kue({}),_v=new rF;const rfe={props:{features:{type:Array,required:!0},sessions:{type:Array,required:!0},selectedSessions:{type:Array,required:!0},selectSession:{type:Number,required:!0},toolConcealActive:{type:Boolean,default:!1},toolTrimActive:{type:Boolean,default:!1},toolConcealMarkers:{type:Array,required:!0},toolTrimMarkers:{type:Array,required:!0},receivedRecord:Ke,receivedRecordFreeze:Boolean,hasPace:Boolean,hasCadence:Boolean,hasHeartRate:Boolean,hasPower:Boolean,hasTemperature:Boolean},data(){return{popupFreeze:new Boolean,popupRecord:new Ke,hoveredRecord:new Ke,popupTimezoneOffsetHours:0,debug:!1}},watch:{features:{handler(t){this.$nextTick(()=>{Zn.setTarget(this.$refs.map),requestAnimationFrame(()=>this.updateMapSource(t))})}},sessions:{handler(){this.kdbushIndexing(this.sessions),this.createConcealFeatures(this.sessions),this.createTrimFeatures(this.sessions)}},selectSession:{handler(){this.showConcealFeaturesHandler(),this.showTrimFeaturesHandler()}},toolConcealActive:{handler(){this.showConcealFeaturesHandler()}},toolTrimActive:{handler(){this.showTrimFeaturesHandler()}},receivedRecord:{handler(t){if(this.popupRecord=t,JSON.stringify(t)==JSON.stringify(new Ke)){Ni.setPosition(void 0);return}Ni.setPosition([t.positionLong,t.positionLat])}},receivedRecordFreeze:{handler(t){this.popupFreeze=t}},hoveredRecord:{handler(t){this.popupRecord=t,this.$emit("hoveredRecord",t)}},popupFreeze:{handler(t){this.$emit("hoveredRecordFreeze",t)}},toolConcealMarkers:{handler(t){t.length==this.sessions.length&&t.forEach((e,n)=>{const i=this.findNearestCoordinateFromStart(n,e.startN),r=this.findNearestCoordinateFromEnd(n,e.endN);this.setConceal(n,i,r)})},deep:!0},toolTrimMarkers:{handler(t){t.length==this.sessions.length&&t.forEach((e,n)=>{const i=this.findNearestCoordinateFromStart(n,e.startN),r=this.findNearestCoordinateFromEnd(n,e.endN);this.setTrim(n,i,r)})},deep:!0}},expose:["showPopUpRecord"],methods:{toStringHDMS:doe,toTimezoneDateString:cx,formatPace:gu,createConcealFeatures(t){t==null&&(t=this.sessions);const e=xm.getSource();e.clear();const n=Ro.getSource();n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("conceal-")&&n.removeFeature(i)}),t.forEach((i,r)=>{["concealStart","concealEnd"].forEach(a=>{const l=new R0().readFeature({id:`conceal-lineString-${a}-${r}`,type:"Feature",style:void 0});e.addFeature(l)});const s=new zo(new Pr([0,0]));s.setStyle(Or()),s.setId(`conceal-startPartLastPoint-${r}`);const o=new zo(new Pr([0,0]));o.setStyle(Or()),o.setId(`conceal-endPartFirstPoint-${r}`),n.addFeatures([s,o])})},showConcealFeaturesHandler(){this.toolConcealActive?this.showConcealFeatures(this.selectSession):this.showConcealFeatures(Fs)},showConcealFeatures(t){const e=xm.getSource(),n=Ro.getSource();t==Fs?(e.getFeatures().forEach(i=>i.setStyle(void 0)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("conceal-")&&i.setStyle(Or())})):t==id?(e.getFeatures().forEach(i=>i.setStyle(ZR)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("conceal-")&&i.setStyle(JR)})):(e.getFeatures().forEach(i=>i.setStyle(void 0)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("conceal-")&&i.setStyle(Or())}),["concealStart","concealEnd"].forEach(i=>{var r;(r=e.getFeatureById(`conceal-lineString-${i}-${t}`))==null||r.setStyle(ZR)}),n.getFeatures().forEach(i=>{var r,s;(r=i.getId())!=null&&r.toString().startsWith("conceal-")&&((s=i.getId())!=null&&s.toString().endsWith(`-${t}`))&&i.setStyle(JR)}))},setConceal(t,e,n){var h,f,d,g;if(t>=this.sessions.length||t<0)return;const i=this.sessions[t].records.slice(0,e+1).reduce((m,_)=>(_.positionLong!=null&&_.positionLat!=null&&m.push([_.positionLong,_.positionLat]),m),[]),r=new Yo(i),s=r.getLastCoordinate(),o=xm.getSource(),a=Ro.getSource();(h=o.getFeatureById(`conceal-lineString-concealStart-${t}`))==null||h.setGeometry(r),((f=a.getFeatureById(`conceal-startPartLastPoint-${t}`))==null?void 0:f.getGeometry()).setCoordinates(s);const l=this.sessions[t].records.slice(n,this.sessions[t].records.length).reduce((m,_)=>(_.positionLong!=null&&_.positionLat!=null&&m.push([_.positionLong,_.positionLat]),m),[]),c=new Yo(l),u=c.getFirstCoordinate();(d=o.getFeatureById(`conceal-lineString-concealEnd-${t}`))==null||d.setGeometry(c),((g=a.getFeatureById(`conceal-endPartFirstPoint-${t}`))==null?void 0:g.getGeometry()).setCoordinates(u)},createTrimFeatures(t){t==null&&(t=this.sessions);const e=Em.getSource();e.clear();const n=Ro.getSource();n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("trim-")&&n.removeFeature(i)}),t.forEach((i,r)=>{["trimStart","trimEnd"].forEach(a=>{const l=new R0().readFeature({id:`trim-lineString-${a}-${r}`,type:"Feature",style:void 0});e.addFeature(l)});const s=new zo(new Pr([0,0]));s.setStyle(Or()),s.setId(`trim-startPartLastPoint-${r}`);const o=new zo(new Pr([0,0]));o.setStyle(Or()),o.setId(`trim-endPartFirstPoint-${r}`),n.addFeatures([s,o])})},showTrimFeaturesHandler(){this.toolTrimActive?this.showTrimFeatures(this.selectSession):this.showTrimFeatures(Fs)},showTrimFeatures(t){const e=Em.getSource(),n=Ro.getSource();t==Fs?(e.getFeatures().forEach(i=>i.setStyle(void 0)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("trim-")&&i.setStyle(Or())})):t==id?(e.getFeatures().forEach(i=>i.setStyle(KR)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("trim-")&&i.setStyle(QR)})):(e.getFeatures().forEach(i=>i.setStyle(void 0)),n.getFeatures().forEach(i=>{var r;(r=i.getId())!=null&&r.toString().startsWith("trim-")&&i.setStyle(Or())}),["trimStart","trimEnd"].forEach(i=>{var r;(r=e.getFeatureById(`trim-lineString-${i}-${t}`))==null||r.setStyle(KR)}),n.getFeatures().forEach(i=>{var r,s;(r=i.getId())!=null&&r.toString().startsWith("trim-")&&((s=i.getId())!=null&&s.toString().endsWith(`-${t}`))&&i.setStyle(QR)}))},setTrim(t,e,n){var h,f,d,g;if(t>=this.sessions.length||t<0)return;const i=this.sessions[t].records.slice(0,e+1).reduce((m,_)=>(_.positionLong!=null&&_.positionLat!=null&&m.push([_.positionLong,_.positionLat]),m),[]),r=new Yo(i),s=r.getLastCoordinate(),o=Em.getSource(),a=Ro.getSource();(h=o.getFeatureById(`trim-lineString-trimStart-${t}`))==null||h.setGeometry(r),((f=a.getFeatureById(`trim-startPartLastPoint-${t}`))==null?void 0:f.getGeometry()).setCoordinates(s);const l=this.sessions[t].records.slice(n,this.sessions[t].records.length).reduce((m,_)=>(_.positionLong!=null&&_.positionLat!=null&&m.push([_.positionLong,_.positionLat]),m),[]),c=new Yo(l),u=c.getFirstCoordinate();(d=o.getFeatureById(`trim-lineString-trimEnd-${t}`))==null||d.setGeometry(c),((g=a.getFeatureById(`trim-endPartFirstPoint-${t}`))==null?void 0:g.getGeometry()).setCoordinates(u)},findNearestCoordinateFromStart(t,e){const n=this.sessions[t].records;if(n.length==0)return e;for(let i=e;i<n.length;i++)if(n[i].positionLong!=null&&n[i].positionLat!=null)return i;return e},findNearestCoordinateFromEnd(t,e){const n=this.sessions[t].records;if(e>n.length-1)return e;for(let i=e;i>=0;i--)if(n[i].positionLong!=null&&n[i].positionLat!=null)return i;return e},updateMapSource(t){var r;Ni.setPosition(void 0);const e=wm.getSource();e.clear();const n=Ro.getSource();if(n.getFeatures().forEach(s=>{var o,a;((o=s.getId())!=null&&o.toString().startsWith("startingPoint")||(a=s.getId())!=null&&a.toString().startsWith("destinationPoint"))&&n.removeFeature(s)}),t.length==0)return;e.addFeatures(t);const i=new Array;for(let s=0;s<t.length;s++){const o=(r=t[s])==null?void 0:r.getGeometry(),[,a]=t[s].getId().split("-").map(u=>parseInt(u)),l=new zo(new Pr(o.getFirstCoordinate()));l.setStyle(nfe),l.setId(`startingPoint-${a}`),i.push(l);const c=new zo(new Pr(o.getLastCoordinate()));c.setStyle(ife),c.setId(`destinationPoint-${a}`),i.push(c)}n.addFeatures(i),this.updateExtent()},async kdbushIndexing(t){console.time("KDtree Indexing");let e=0;for(let n=0;n<t.length;n++)e+=t[n].records.length;wc.value=new j_(e),pv.value=[];for(let n=0;n<t.length;n++){const i=t[n].records;for(let r=0;r<i.length;r++){const s=i[r];if(s.positionLat==null||s.positionLong==null){wc.value.add(0,0);continue}const o=wc.value.add(s.positionLong,s.positionLat);pv.value[o]=`${n}-${r}`}}wc.value.finish(),console.timeEnd("KDtree Indexing")},findNearestRecord(t){const e=Sse(wc.value,t[0],t[1],1);if(e.length==0)return XR;const[n,i]=pv.value[e[0]].split("-").map(r=>parseInt(r));return this.selectedSessions.length==1?this.selectedSessions[0].records[i]:this.selectedSessions[n].records[i]},lineStringFeatureListener(t){if(t.type=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&Ni.getPosition()!=null),this.popupFreeze==!0&&Ni.getPosition()!=null)return;if(!Zn.getFeaturesAtPixel(t.pixel,{hitTolerance:10,layerFilter:function(i){return i===wm}}).find(i=>i.getGeometry()instanceof Yo)){this.hoveredRecord=XR,Ni.setPosition(void 0);return}if(!this.isIndexed){Ni.setPosition(t.coordinate),this.popupFreeze=!1;return}this.debug&&console.time("KDTree"),this.hoveredRecord=this.findNearestRecord(t.coordinate),this.debug&&console.timeEnd("KDTree"),Ni.setPosition([this.hoveredRecord.positionLong,this.hoveredRecord.positionLat]),this.popupFreeze=t.type=="singleclick"},showPopUpRecord(t){Ni.setPosition(void 0),t&&(this.popupRecord=t,Ni.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=!0)},updateExtent(){this.$nextTick(()=>{const t=wm.getSource().getExtent();Ql(t)||(Zn.getView().fit(t,{padding:[50,50,50,50]}),Zn.removeControl(_v),_v=new rF({extent:Zn.getView().getViewStateAndExtent().extent}),Zn.addControl(_v))})}},computed:{titleWidth(){this.popupRecord;let t=0;return document.querySelectorAll('.popup-content > div:not([style*="display: none"]) > span:nth-child(1)').forEach(n=>{const i=n.innerHTML.length*6;t=Math.max(t,i)}),t},isIndexed(){return wc.value._finished}},mounted(){const t=document.createElement("i");t.setAttribute("class","fa-solid fa-expand");const e=document.createElement("i");e.setAttribute("class","fa-solid fa-compress"),Ni.setElement(document.getElementById("popup")),Zn=new Rue({overlays:[Ni],controls:YD(),layers:[efe,wm,xm,Em,Ro],view:tfe}),Zn.setTarget(this.$refs.map),Zn.addControl(new Hue({label:t,labelActive:e})),Zn.addControl(new Gue),Zn.on("change:size",this.updateExtent),Zn.on("pointermove",this.lineStringFeatureListener),Zn.on("singleclick",this.lineStringFeatureListener),this.updateMapSource(this.features),this.kdbushIndexing(this.sessions),this.createConcealFeatures(this.sessions),this.createTrimFeatures(this.sessions)},unmounted(){Zn.dispose()}};const tr=t=>(Qt("data-v-c5d66815"),t=t(),en(),t),sfe={class:"map-container position-relative w-100 h-100"},ofe={key:0,class:"no-map-data"},afe={key:1,class:"map",ref:"map"},lfe={id:"popup",class:"ol-popup"},cfe={key:0,class:"popup-content"},ufe=tr(()=>x("span",null,"km",-1)),hfe=tr(()=>x("span",null,"km/h",-1)),ffe=tr(()=>x("span",null,"/km",-1)),dfe=tr(()=>x("span",null,"rpm",-1)),gfe=tr(()=>x("span",null,"bpm",-1)),mfe=tr(()=>x("span",null,"watts",-1)),pfe=tr(()=>x("span",null,"C",-1)),_fe={style:{display:"grid"}},yfe={style:{"grid-column":"1"}},vfe=tr(()=>x("span",null,"masl",-1)),bfe={style:{"grid-column":"2"}},wfe=tr(()=>x("span",null,"(Grade:",-1)),xfe=tr(()=>x("span",null,"%)",-1)),Efe={key:1,class:"popup-content"},Tfe=tr(()=>x("div",{class:"d-flex justify-content-center"},[x("div",{class:"spinner-border spinner-border-sm",role:"status"},[x("span",{class:"sr-only"},"Indexing...")]),x("div",{class:"px-1"},"Indexing...")],-1)),Sfe=[Tfe],Cfe={class:"options position-absolute d-inline-flex d-none"},Mfe={class:"form-control-sm form-check"},Afe=tr(()=>x("label",{class:"form-check-label",for:"flexCheckDefault"}," Debug ",-1));function Rfe(t,e,n,i,r,s){var o,a;return j(),K("div",sfe,[((o=n.features)==null?void 0:o.length)==0?(j(),K("div",ofe,"No map data")):(j(),K("div",afe,null,512)),x("div",lfe,[s.isIndexed?(j(),K("div",cfe,[x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Time:",4),x("span",null,X(r.popupRecord.timestamp?s.toTimezoneDateString(r.popupRecord.timestamp,r.popupTimezoneOffsetHours):"-"),1)]),x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Distance:",4),x("span",null,X(r.popupRecord.distance?(r.popupRecord.distance/1e3).toFixed(2):"-"),1),ufe]),x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Speed:",4),x("span",null,X(r.popupRecord.speed?(r.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),hfe]),ct(x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Pace:",4),x("span",null,X(r.popupRecord.pace?s.formatPace(r.popupRecord.pace):"-"),1),ffe],512),[[un,n.hasPace]]),ct(x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Cadence:",4),x("span",null,X(r.popupRecord.cadence?r.popupRecord.cadence:"-"),1),dfe],512),[[un,n.hasCadence]]),ct(x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Heart Rate:",4),x("span",null,X(r.popupRecord.heartRate?r.popupRecord.heartRate:"-"),1),gfe],512),[[un,n.hasHeartRate]]),ct(x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Power:",4),x("span",null,X(r.popupRecord.power?r.popupRecord.power:"-"),1),mfe],512),[[un,n.hasPower]]),ct(x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Temperature:",4),x("span",null,X(r.popupRecord.temperature?r.popupRecord.temperature:"-"),1),pfe],512),[[un,n.hasTemperature]]),x("div",_fe,[x("div",yfe,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Altitude:",4),x("span",null,X(r.popupRecord.altitude?(a=r.popupRecord.altitude)==null?void 0:a.toFixed(2):"-"),1),vfe]),x("div",bfe,[wfe,x("span",null,X(r.popupRecord.grade?Math.round(r.popupRecord.grade):"0"),1),xfe])]),x("div",null,[x("span",{style:Gt({width:s.titleWidth+"px"})},"Location:",4),x("span",null,X(r.popupRecord.positionLong&&r.popupRecord.positionLat?s.toStringHDMS([r.popupRecord.positionLong,r.popupRecord.positionLat]):"-"),1)])])):(j(),K("div",Efe,Sfe))]),x("div",Cfe,[x("div",Mfe,[ct(x("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>r.debug=l),id:"flexCheckDefault"},null,512),[[fk,r.debug]]),Afe])])])}const cF=Ct(rfe,[["render",Rfe],["__scopeId","data-v-c5d66815"]]),Ife={props:{id:{type:String,default:"fileInput"},isActivityFileReady:Boolean,isWebAssemblySupported:Boolean},mounted(){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||this.$nextTick(()=>document.getElementById(this.id).accept=".fit, .gpx, .tcx")}};const kfe={class:"navigator"},$fe={class:"navigator-input mx-auto"},Ofe=["id","disabled"];function Lfe(t,e,n,i,r,s){return j(),K("div",kfe,[x("div",$fe,[x("input",{class:"form-control form-control-sm",type:"file",id:n.id,multiple:"",ref:"input",disabled:!n.isWebAssemblySupported},null,8,Ofe)])])}const Aw=Ct(Ife,[["render",Lfe]]),Nfe={props:{sessions:{type:Array,required:!0}},methods:{secondsToDHMS:P_}};const ka=t=>(Qt("data-v-8d4f8a51"),t=t(),en(),t),Dfe={key:0,class:"col-12 h-100"},Ffe=["data-bs-target","aria-controls"],Pfe={class:"row text-start"},zfe={class:"col-auto d-inline-block",style:{height:"50px"}},Wfe={style:{"text-align":"left"},class:"mb-0"},Hfe=ka(()=>x("i",{class:"fa-solid fa-caret-right collapse-indicator"},null,-1)),Bfe={class:"px-1"},Vfe={class:"col"},Gfe=ka(()=>x("div",{class:"row overview-title"},"Distance",-1)),Ufe={class:"row overview-value"},Yfe={class:"col"},jfe=ka(()=>x("div",{class:"row overview-title"},"Moving Time",-1)),qfe={class:"row overview-value"},Xfe={class:"col"},Zfe=ka(()=>x("div",{class:"row overview-title"},"Avg Cadence",-1)),Kfe={class:"row overview-value"},Jfe=["id"],Qfe={class:"row m-0"},ede=Md('<div class="col ps-4 pe-0" data-v-8d4f8a51><div data-v-8d4f8a51></div><div class="right-border" data-v-8d4f8a51><div class="detail-title" data-v-8d4f8a51>Speed</div><div class="detail-title" data-v-8d4f8a51>Cadence</div><div class="detail-title" data-v-8d4f8a51>Heart Rate</div><div class="detail-title" data-v-8d4f8a51>Power</div></div></div>',1),tde={class:"col fw-bold text-center px-0"},nde=ka(()=>x("div",{class:"fw-normal"},"Avg",-1)),ide={class:"right-border"},rde={class:"detail-value"},sde={class:"detail-value"},ode={class:"detail-value"},ade={class:"detail-value"},lde={class:"col fw-bold text-center px-0"},cde=ka(()=>x("div",{class:"fw-normal"},"Max",-1)),ude={class:"right-border"},hde={class:"detail-value"},fde={class:"detail-value"},dde={class:"detail-value"},gde={class:"detail-value"},mde=Md('<div class="col m-0" data-v-8d4f8a51><div data-v-8d4f8a51></div><div data-v-8d4f8a51><div class="ps-2 detail-unit" data-v-8d4f8a51>km/h</div><div class="ps-2 detail-unit" data-v-8d4f8a51>rpm</div><div class="ps-2 detail-unit" data-v-8d4f8a51>bpm</div><div class="ps-2 detail-unit" data-v-8d4f8a51>W</div></div></div>',1),pde={class:"calories mt-1"},_de={class:"row m-0 pt-1 pb-1"},yde=ka(()=>x("div",{class:"col ps-4 m-0 text-start detail-title"},"Calories",-1)),vde={class:"col pe-4 m-0 text-end"},bde={class:"fw-bold pe-1"},wde=ka(()=>x("span",{class:"detail-unit"},"Cal",-1));function xde(t,e,n,i,r,s){var o;return((o=n.sessions)==null?void 0:o.length)>0?(j(),K("div",Dfe,[(j(!0),K(yt,null,ji(n.sessions,(a,l)=>(j(),K("div",{key:l},[x("div",{class:"tab row m-0 mt-2 pt-2 collapsible",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#sessions-"+l,"aria-expanded":"false","aria-controls":"sessions-"+l},[x("div",Pfe,[x("div",zfe,[x("h6",Wfe,[Hfe,x("span",Bfe,"Ses "+X(l+1),1)]),x("span",null,X(a.sport),1)]),x("div",Vfe,[Gfe,x("div",Ufe,X(a.totalDistance?(a.totalDistance/1e3).toFixed(2):"-")+" km ",1)]),x("div",Yfe,[jfe,x("div",qfe,X(a.totalMovingTime?s.secondsToDHMS(a.totalMovingTime):"-:-"),1)]),x("div",Xfe,[Zfe,x("div",Kfe,X(a.avgCadence?a.avgCadence:"-")+" rpm ",1)])])],8,Ffe),x("div",{class:"collapse show text-start pb-3",id:"sessions-"+l},[x("div",Qfe,[ede,x("div",tde,[nde,x("div",ide,[x("div",rde,X(a.avgSpeed?(a.avgSpeed*3600/1e3).toFixed(2):"-"),1),x("div",sde,X(a.avgCadence?a.avgCadence:"-"),1),x("div",ode,X(a.avgHeartRate?a.avgHeartRate:"-"),1),x("div",ade,X(a.avgPower?a.avgPower:"-"),1)])]),x("div",lde,[cde,x("div",ude,[x("div",hde,X(a.maxSpeed?(a.maxSpeed*3600/1e3).toFixed(2):"-"),1),x("div",fde,X(a.maxCadence?a.maxCadence:"-"),1),x("div",dde,X(a.maxHeartRate?a.maxHeartRate:"-"),1),x("div",gde,X(a.maxPower?a.maxPower:"-"),1)])]),mde]),x("div",pde,[x("div",_de,[yde,x("div",vde,[x("span",bde,X(a.totalCalories?a.totalCalories.toLocaleString():"-"),1),wde])])])],8,Jfe)]))),128))])):Ee("",!0)}const Ede=Ct(Nfe,[["render",xde],["__scopeId","data-v-8d4f8a51"]]),dy=t=>(Qt("data-v-f9b88aa7"),t=t(),en(),t),Tde=dy(()=>x("label",null,"Target Device",-1)),Sde={key:0},Cde={class:"col-12 pt-1"},Mde={key:0},Ade={key:1,class:"ps-3"},Rde={class:"col-12"},Ide={class:"row pt-2"},kde=dy(()=>x("i",null,"product_id",-1)),$de=dy(()=>x("i",null,"product_id",-1)),Ode={class:"col"},Lde=dy(()=>x("label",{for:"product",class:"form-label sub-label"},[pe("Product ID "),x("span",{class:"d-inline color-mandatory fs-6"},"*")],-1)),Nde={key:1},Dde={class:"col-12 pt-1"},Fde=["disabled"];class $o{constructor(e){ee(this,"label","");ee(this,"heading",!1);ee(this,"manufacturerId");ee(this,"manufacturerName","");ee(this,"isManualInputProduct",!1);ee(this,"productId");ee(this,"productName");this.label=(e==null?void 0:e.label)??"-- Please select a device --",this.heading=(e==null?void 0:e.heading)??!1,this.manufacturerId=(e==null?void 0:e.manufacturerId)??void 0,this.manufacturerName=(e==null?void 0:e.manufacturerName)??"",this.isManualInputProduct=(e==null?void 0:e.isManualInputProduct)??!1,this.productId=(e==null?void 0:e.productId)??void 0,this.productName=(e==null?void 0:e.productName)??void 0}}class Pde{constructor(e){ee(this,"manufacturer",new HA);ee(this,"productMap",new Map);this.manufacturer=(e==null?void 0:e.manufacturer)??new HA,this.productMap=(e==null?void 0:e.productMap)??new Map}}const zde={props:{toolMode:{type:Number,required:!0},activities:{type:Array,required:!0},manufacturers:{type:Array,required:!0},selectedFileType:{type:Number,required:!0}},data(){return{selected:new $o,deviceName:""}},computed:{deviceFromFitFile(){for(let t=0;t<this.activities.length;t++){const e=this.activities[t];if(e.creator.manufacturer!=null&&e.creator.product!=null){const n=this.manufacturerMap.get(e.creator.manufacturer);if(n==null)continue;const i=n.productMap.get(e.creator.product);if(i==null)continue;return new $o({label:`${n.manufacturer.name} ${i.name}`,manufacturerId:n.manufacturer.id,manufacturerName:n.manufacturer.name,productId:i.id,productName:i.name})}}return new $o},deviceNameFromGpxTcxFile(){for(let t=0;t<this.activities.length;t++){const e=this.activities[t],n=this.deviceMappingForGpxTcx.get(e.creator.name.toLocaleLowerCase());return n!=null?n.label:e.creator.name}return""},dataSource(){const t=new Array;return this.manufacturers.forEach(e=>{t.push(new $o({label:e.name,heading:!0,manufacturerId:e.id,manufacturerName:e.name})),e.products.forEach(n=>t.push(new $o({label:`${e.name} ${n.name}`,manufacturerId:e.id,manufacturerName:e.name,productId:n.id,productName:n.name}))),t.push(new $o({label:`${e.name} <manual input>`,manufacturerId:e.id,manufacturerName:e.name,isManualInputProduct:!0}))}),t},manufacturerMap(){const t=new Map;return this.manufacturers.forEach(e=>{const n=new Map;e.products.forEach(i=>{n.set(i.id,i)}),t.set(e.id,new Pde({manufacturer:e,productMap:n}))}),t},isManufacturerHasProduct(){const t=this.manufacturerMap.get(this.selected.manufacturerId);return t==null?!0:(t==null?void 0:t.productMap.size)>0},isManualInputProduct(){return this.selected.manufacturerId==null?!1:this.isManufacturerHasProduct?this.selected.isManualInputProduct??!1:!0},deviceMappingForGpxTcx(){const t=new Map;return this.manufacturers.forEach(e=>{e.products.forEach(n=>{t.set(`${e.name} ${n.name}`.toLowerCase(),new $o({manufacturerId:e.id,manufacturerName:e.name,productId:n.id,productName:n.name,label:`${e.name} ${n.name}`}))})}),t}},watch:{deviceFromFitFile:{handler(t){this.selected=t}},deviceNameFromGpxTcxFile:{handler(t){this.deviceName=t}},selected:{handler(t){this.updateDeviceNameBySelected(t),isNaN(parseInt(t==null?void 0:t.productId))&&(t.productId=void 0),this.$emit("selectedDevice",t)}},deviceName:{handler(t){this.updateSelectedByDeviceName(t)}}},methods:{isNumber(t){isNaN(parseInt(t.key))&&t.preventDefault()},isSelectable(t){return t.heading!=!0},updateDeviceNameBySelected(t){t.manufacturerId!=null&&(this.deviceName=t.label)},updateSelectedByDeviceName(t){const e=this.deviceMappingForGpxTcx.get(t.toLocaleLowerCase());e!=null&&(this.selected=e)}},mounted(){this.selected=this.deviceFromFitFile,this.deviceName=this.deviceNameFromGpxTcxFile,this.updateSelectedByDeviceName(this.deviceName)}},Wde=xt({...zde,__name:"ToolDeviceSelector",setup(t){return(e,n)=>{const i=Ku("v-select");return j(),K("div",null,[Tde,t.selectedFileType==_t(Bt).FIT?(j(),K("div",Sde,[x("div",Cde,[me(i,{label:"label",placeholder:"Please select a device",selectable:e.isSelectable,clearable:!1,options:e.dataSource,modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=r=>e.selected=r)},{option:Al(({label:r,heading:s})=>[s?(j(),K("strong",Mde,X(r),1)):(j(),K("span",Ade,X(r),1))]),_:1},8,["selectable","options","modelValue"])]),x("div",Rde,[ct(x("div",Ide,[ct(x("p",null,[pe(" Currently, we don't have a device mapping for "),x("strong",null,'"'+X(e.selected.manufacturerName)+'"',1),pe(". We require a valid "),kde,pe(" to generate a FIT file for the targeted device. Without a valid "),$de,pe(", the resulting FIT file may not be recognized by other platforms. ")],512),[[un,!e.isManufacturerHasProduct]]),x("div",Ode,[Lde,ct(x("input",{id:"product",type:"number",step:"1",class:"form-control form-control-sm",placeholder:"-- Please input product_id --",title:"product_id","aria-label":"product_id","aria-describedby":"product_id","onUpdate:modelValue":n[1]||(n[1]=r=>e.selected.productId=r),onKeypress:n[2]||(n[2]=r=>e.isNumber(r))},null,544),[[fp,e.selected.productId]])])],512),[[un,e.isManualInputProduct]])])])):(j(),K("div",Nde,[x("div",Dde,[ct(x("input",{class:"form-control form-control-sm","onUpdate:modelValue":n[3]||(n[3]=r=>e.deviceName=r),placeholder:"-- Please input device name --",disabled:t.selectedFileType==_t(Bt).Unsupported},null,8,Fde),[[fp,e.deviceName]])])]))])}}});const Hde=Ct(Wde,[["__scopeId","data-v-f9b88aa7"]]),Bde=t=>(Qt("data-v-a3137b7b"),t=t(),en(),t),Vde=Md('<div class="row m-0" style="cursor:pointer;" data-bs-toggle="collapse" data-bs-target="#fieldsRemovalTarget" aria-expanded="false" aria-controls="fieldsRemovalTarget" data-v-a3137b7b><div class="text-start p-0" data-v-a3137b7b><label class="pe-1" data-v-a3137b7b>Remove Fields</label><i class="fa-regular fa-circle-question" title="Show or Hide Help Text" data-v-a3137b7b></i></div></div><div class="collapse show" id="fieldsRemovalTarget" data-v-a3137b7b><p data-v-a3137b7b>Select any field you wish to remove from the entire trackpoints.</p></div>',2),Gde={class:"form-check"},Ude=["id","value","disabled"],Yde=["for"],jde={key:0},qde=Bde(()=>x("p",null,"(No available fields to be removed.)",-1)),Xde=[qde],Zde={props:{toolMode:{type:Number,required:!0},sessions:{type:Array,required:!0}},data(){return{dataSource:[{value:"cadence",label:"Cadence"},{value:"heartRate",label:"Heart Rate"},{value:"power",label:"Power"},{value:"temperature",label:"Temperature"}],selectedFields:new Array}},computed:{isNoFieldsData(){return!(this.hasCadence||this.hasHeartRate||this.hasPower||this.hasTemperature)},hasCadence(){for(let t=0;t<this.sessions.length;t++){const e=this.sessions[t];for(let n=0;n<e.records.length;n++)if(e.records[n].cadence!=null)return!0}return!1},hasHeartRate(){for(let t=0;t<this.sessions.length;t++){const e=this.sessions[t];for(let n=0;n<e.records.length;n++)if(e.records[n].heartRate!=null)return!0}return!1},hasPower(){for(let t=0;t<this.sessions.length;t++){const e=this.sessions[t];for(let n=0;n<e.records.length;n++)if(e.records[n].power!=null)return!0}return!1},hasTemperature(){for(let t=0;t<this.sessions.length;t++){const e=this.sessions[t];for(let n=0;n<e.records.length;n++)if(e.records[n].temperature!=null)return!0}return!1}},watch:{sessions:{handler(){this.selectedFields=[]}},selectedFields:{handler(){this.$emit("selectedFields",this.selectedFields)}}},methods:{show(t){switch(t){case"cadence":return this.hasCadence;case"heartRate":return this.hasHeartRate;case"power":return this.hasPower;case"temperature":return this.hasTemperature;default:return!1}},isSelectable(t){return t.heading!=!0}}},Kde=xt({...Zde,__name:"ToolFieldsRemover",setup(t){return(e,n)=>(j(),K("div",null,[Vde,(j(!0),K(yt,null,ji(e.dataSource,(i,r)=>(j(),K("div",{key:r},[x("div",Gde,[ct(x("input",{class:"form-check-input",type:"checkbox",id:i.value,value:i.value,disabled:t.toolMode==_t(mn).Unknown||!e.show(i.value),"onUpdate:modelValue":n[0]||(n[0]=s=>e.selectedFields=s)},null,8,Ude),[[fk,e.selectedFields]]),x("label",{class:"form-check-label",style:{color:"var(--color-text)"},for:i.value},X(i.label),9,Yde)])]))),128)),e.isNoFieldsData?(j(),K("div",jde,Xde)):Ee("",!0)]))}});const Jde=Ct(Kde,[["__scopeId","data-v-a3137b7b"]]),gh=t=>(Qt("data-v-77742212"),t=t(),en(),t),Qde=gh(()=>x("label",{class:"pe-1"},"Target File Type",-1)),ege={class:"col-12 pt-1"},tge={class:"pt-1"},nge=gh(()=>x("a",{href:"https://developer.garmin.com/fit",target:"_blank",rel:"noopener noreferrer"},"Garmin FIT",-1)),ige=gh(()=>x("a",{href:"https://github.com/muktihari/fit",target:"_blank",rel:"noopener noreferrer"},"FIT SDK for Go",-1)),rge=gh(()=>x("p",null,[pe(" GPX is a widely used XML format for geospacial data developed by Topografix. We follow "),x("a",{href:"https://www.topografix.com/gpx/1/1/gpx.xsd",target:"_blank",rel:"noopener noreferrer"},"Schema V1.1"),pe(" with "),x("a",{href:"https://www8.garmin.com/xmlschemas/TrackPointExtensionv1.xsd",target:"_blank",rel:"noopener noreferrer"},"Garmin Trackpoint Extension V1"),pe(" which does not support the "),x("strong",null,"Power"),pe(" data field. ")],-1)),sge=[rge],oge={class:"pt-1"},age=gh(()=>x("p",null,[pe(" The advantage of TCX is its ability to include "),x("strong",null,"Power"),pe(" information. However, it does not support the "),x("strong",null,"Temperature"),pe(" data field. We follow "),x("a",{href:"https://www8.garmin.com/xmlschemas/TrainingCenterDatabasev2.xsd",target:"_blank",rel:"noopener noreferrer"}," Schema V2 "),pe(" with "),x("a",{href:"https://www8.garmin.com/xmlschemas/ActivityExtensionv2.xsd",target:"_blank",rel:"noopener noreferrer"}," Garmin Activity Extension V2 "),pe(" . ")],-1)),lge=[age],cge={class:"pt-2"},uge=gh(()=>x("p",null," Note: If your target platform is Strava, we recommend choosing FIT instead. Strava have shifted their support to FIT files. If you choose GPX or TCX, the target device name may not map correctly with Strava's device mapping database. ",-1)),hge=[uge];class yv{constructor(){ee(this,"label","-- Please select file type -- ");ee(this,"value",Bt.Unsupported)}}const fge={props:{toolMode:{type:Number,required:!0}},data(){return{selected:new yv}},computed:{dataSource(){return[{label:"FIT - Flexible and Interoperable Data Transfer",value:Bt.FIT},{label:"GPX - GPS Exchange Format",value:Bt.GPX},{label:"TCX - Training Center XML",value:Bt.TCX}]}},watch:{toolMode:{handler(){this.selected=new yv}},selected:{handler(t){this.$emit("selectedFileType",t)},deep:!0}},methods:{},mounted(){this.selected=new yv}},dge=xt({...fge,__name:"ToolFileTypeSelector",setup(t){return(e,n)=>{const i=Ku("v-select");return j(),K("div",null,[Qde,x("div",ege,[me(i,{label:"label",placeholder:"Please select file type",clearable:!1,searchable:!1,options:e.dataSource,modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=r=>e.selected=r),disabled:t.toolMode==_t(mn).Unknown},null,8,["options","modelValue","disabled"]),x("div",tge,[ct(x("p",null,[pe(" FIT is currently the most advanced file format for storing activity data developed by Garmin. We strives to comply with the FIT Activity File (FIT_FILE_TYPE = 4) as defined by "),nge,pe(" that being implemented by "),ige,pe(" . ")],512),[[un,e.selected.value==_t(Bt).FIT]]),ct(x("div",null,sge,512),[[un,e.selected.value==_t(Bt).GPX]]),ct(x("div",oge,lge,512),[[un,e.selected.value==_t(Bt).TCX]]),ct(x("div",cge,hge,512),[[un,e.selected.value!=_t(Bt).Unsupported&&e.selected.value!=_t(Bt).FIT]])])])])}}});const gge=Ct(dge,[["__scopeId","data-v-77742212"]]),mge=t=>(Qt("data-v-28ad2d2d"),t=t(),en(),t),pge=mge(()=>x("label",null,"Please select a tool",-1)),_ge={class:"col-12 pt-1"},yge=["title"],vge={key:1},bge={class:"pt-1"},wge={props:{activities:{type:Array,required:!0},sessions:{type:Array,required:!0}},data(){return{selected:null}},computed:{dataSource(){return[{label:"Edit Relevant Data",value:mn.Edit,selectable:!0},{label:"Combine Multiple Activities into One",value:mn.Combine,title:"You have only one activity opened, please open multiple activites to be able to use this feature.",selectable:this.activities.length>1},{label:"Split Activities Per Session",value:mn.SplitPerSession,title:"You have only one session in the opened activity, please open multiple activities or open an activity that have multiple sessions to be able to use this feature.",selectable:this.sessions.length>1}]}},watch:{sessions:{handler(){this.selected=null}},selected:{handler(t){this.$emit("toolMode",(t==null?void 0:t.value)??mn.Unknown)}}},methods:{isSelectable(t){return t.selectable}},mounted(){this.$emit("toolMode",this.selected??mn.Unknown)}},xge=xt({...wge,__name:"ToolModeSelector",setup(t){return(e,n)=>{var r,s,o;const i=Ku("v-select");return j(),K("div",null,[pge,x("div",_ge,[me(i,{label:"label",placeholder:"-- Please select a tool first --",selectable:e.isSelectable,clearable:!1,searchable:!1,options:e.dataSource,modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=a=>e.selected=a)},{option:Al(({label:a,value:l,title:c,selectable:u})=>[u?Ee("",!0):(j(),K("span",{key:0,title:c},X(a),9,yge)),u&&l!=_t(mn).Unknown?(j(),K("span",vge,X(a),1)):Ee("",!0)]),_:1},8,["selectable","options","modelValue"]),x("div",bge,[ct(x("p",null," We will edit relevant data for every input activities. This changes will apply to your entire activities, like a Bulk Edit, if you want to edit one activity, please open only one at a time. ",512),[[un,((r=e.selected)==null?void 0:r.value)==_t(mn).Edit]]),ct(x("p",null," We will combine multiple activities into one continuous activity file. This is how we will do it: we will iterate through all activities. Starting from the current activity's iteration, we will pick the last session and combine it with the first session of the next activity only when the sport is a match. If the sport is different, all sessions of the next activity will be appended as they are. This process will continue until all activities are combined. ",512),[[un,((s=e.selected)==null?void 0:s.value)==_t(mn).Combine]]),ct(x("p",null," We will create new Activity File for every Sessions in all activities. ",512),[[un,((o=e.selected)==null?void 0:o.value)==_t(mn).SplitPerSession]])])])])}}});const Ege=Ct(xge,[["__scopeId","data-v-28ad2d2d"]]),Tge=t=>(Qt("data-v-d4fe729e"),t=t(),en(),t),Sge=Tge(()=>x("label",null,"Change Sport",-1)),Cge={class:"form-label sub-label"},Mge={props:{toolMode:{type:Number,required:!0},sessions:{type:Array,required:!0},sports:{type:Array,required:!0}},data(){return{sessionSports:Array()}},computed:{sportMap(){const t=new Map;for(let e=0;e<this.sports.length;e++)t.set(this.sports[e].name,this.sports[e]);return t}},watch:{sessions:{handler(t){this.updateSessionSports(t)}},sessionSports:{handler(t){this.$emit("sessionSports",t.flatMap(e=>e.name))},deep:!0}},methods:{updateSessionSports(t){for(let e=0;e<t.length;e++){const n=t[e];this.sessionSports[e]=this.sportMap.get(n.sport)??this.sportMap.get("Generic")}}},mounted(){this.updateSessionSports(this.sessions)}},Age=xt({...Mge,__name:"ToolSportChanger",setup(t){return(e,n)=>{const i=Ku("v-select");return j(),K("div",null,[Sge,(j(!0),K(yt,null,ji(t.sessions,(r,s)=>(j(),K("div",{class:"col-12 pb-1",key:s},[x("label",Cge,"Session "+X(s+1)+"'s sport:",1),me(i,{label:"name",placeholder:"Please select a sport",clearable:!1,options:t.sports,modelValue:e.sessionSports[s],"onUpdate:modelValue":o=>e.sessionSports[s]=o,disabled:t.toolMode==_t(mn).Unknown},null,8,["options","modelValue","onUpdate:modelValue","disabled"])]))),128))])}}});const Rge=Ct(Age,[["__scopeId","data-v-d4fe729e"]]),TE=t=>(Qt("data-v-b2f7b133"),t=t(),en(),t),Ige=["data-bs-target","aria-controls"],kge={class:"text-start p-0"},$ge={class:"pe-1"},Oge=TE(()=>x("i",{class:"fa-regular fa-circle-question",title:"Show or Hide Help Text"},null,-1)),Lge=["id"],Nge={class:"col-12 pt-2"},Dge={key:0},Fge={class:"row px-1"},Pge={class:"d-flex"},zge={class:"col"},Wge={class:"sub-label"},Hge={class:"col-auto text-end fs-legend"},Bge=TE(()=>x("div",{class:"col text-start"},[x("p",null,"Distance from the Start")],-1)),Vge={class:"col text-end"},Gge={class:"ps-2"},Uge=["max","onUpdate:modelValue"],Yge={class:"row px-1"},jge=TE(()=>x("div",{class:"col text-start"},[x("p",null,"Distance from the End")],-1)),qge={class:"col text-end"},Xge={class:"ps-2"},Zge=["max","onUpdate:modelValue"];class Kge{constructor(){ee(this,"start",0);ee(this,"end",0);ee(this,"delta",0)}}const Jge={props:{name:{type:String,required:!0},toolMode:{type:Number,required:!0},sessions:{type:Array,required:!0},dataSource:{type:Array,required:!0},title:String,helpText:String,legendLabel:String},data(){return{selected:null,markers:Array()}},computed:{distanceByMarkers(){const t=new Array;for(let e=0;e<this.markers.length;e++){const n=new Kge,i=this.sessions[e].records[this.markers[e].startN];i.distance!=null&&(n.start=i.distance);for(let r=this.markers[e].endN;r>=0;r--){const s=this.sessions[e].records[r];if(s.distance!=null){n.end=s.distance;break}}n.delta=n.end-n.start,t.push(n)}return t}},watch:{sessions:{handler(){this.selected=this.dataSource[0],this.updateMarkers()}},markers:{handler(t){this.limitMarkers(t),this.$emit("markers",t)},deep:!0},selected:{handler(t){this.updateMarkers(),this.$emit("selected",t)}}},methods:{lastDistance(t){for(let e=this.sessions[t].records.length-1;e>=0;e--){const n=this.sessions[t].records[e];if(n.distance!=null)return n.distance}return 0},updateMarkers(){if(this.sessions.length!=0)for(let t=0;t<this.sessions.length;t++){const e=this.sessions[t];this.markers[t]=new wse({startN:0,endN:e.records.length-1})}},limitMarkers(t){for(let e=0;e<t.length;e++){const n=t[e];n.startN=parseInt(n.startN),n.endN=parseInt(n.endN),n.startN>n.endN&&(n.endN=n.startN)}}},mounted(){this.selected=this.dataSource[0],this.updateMarkers()}},Qge=xt({...Jge,__name:"ToolTrackpointsSlider",setup(t){return(e,n)=>{var r;const i=Ku("v-select");return j(),K("div",null,[x("div",{class:"row m-0",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":`#${t.name}-target`,"aria-expanded":"false","aria-controls":`${t.name}-target`},[x("div",kge,[x("label",$ge,X(t.title),1),Oge])],8,Ige),x("div",{class:"collapse show",id:`${t.name}-target`},[x("p",null,X(t.helpText),1)],8,Lge),x("div",Nge,[x("div",null,[me(i,{label:"label",options:t.dataSource,clearable:!1,searchable:!1,modelValue:e.selected,"onUpdate:modelValue":n[0]||(n[0]=s=>e.selected=s),disabled:t.toolMode==_t(mn).Unknown},null,8,["options","modelValue","disabled"])]),((r=e.selected)==null?void 0:r.value)==!0?(j(),K("div",Dge,[(j(!0),K(yt,null,ji(e.markers,(s,o)=>(j(),K("div",{class:"pt-2",key:o},[x("div",Fge,[x("div",Pge,[x("div",zge,[x("label",Wge,"Session "+X(o+1)+": "+X(t.sessions[o].sport),1)]),x("div",Hge,[x("span",null,X(t.legendLabel)+" "+X((e.distanceByMarkers[o].delta/1e3).toFixed(2))+" km ",1),x("span",null," ("+X((e.lastDistance(o)/1e3).toFixed(2))+" km) ",1)])]),Bge,x("div",Vge,[x("span",null,X((e.distanceByMarkers[o].start/1e3).toFixed(2))+" km ",1)]),x("div",Gge,[ct(x("input",{class:"form-range openivity-form-range",type:"range",min:0,max:t.sessions[o].records.length-1,"onUpdate:modelValue":a=>s.startN=a},null,8,Uge),[[fp,s.startN]])])]),x("div",Yge,[jge,x("div",qge,[x("span",null,X(((e.lastDistance(o)-e.distanceByMarkers[o].end)/1e3).toFixed(2))+" km ",1)]),x("div",Xge,[ct(x("input",{class:"form-range openivity-form-range",type:"range",min:0,max:t.sessions[o].records.length-1,"onUpdate:modelValue":a=>s.endN=a},null,8,Zge),[[fp,s.endN]])])])]))),128))])):Ee("",!0)])])}}});const uF=Ct(Qge,[["__scopeId","data-v-b2f7b133"]]),eme={props:{toolMode:{type:Number,required:!0},sessions:{type:Array,required:!0}},data(){return{title:"Conceal GPS Positions",helpText:`Select this option if you wish to conceal your GPS positions at a specific start and end distance 
      while maintaining other trackpoints data. It is useful when you want to share the activity on social media, 
      like Strava, and you want to avoid revealing the exact location of your home for security reasons and 
      you wouldn't want your information stored on any platform's server.`,dataSource:[{label:"Do Not Conceal My GPS Positions",value:!1},{label:"Conceal My GPS positions",value:!0}]}},methods:{onMarkers(t){this.$emit("markers",t)},onSelected(t){this.$emit("active",t==null?void 0:t.value)}},mounted(){}},tme=xt({...eme,__name:"ToolTrackpointsConcealer",setup(t){return(e,n)=>(j(),K("div",null,[me(uF,{name:"concealer",title:e.title,"help-text":e.helpText,"data-source":e.dataSource,sessions:t.sessions,"tool-mode":t.toolMode,"legend-label":"Visible",onSelected:e.onSelected,onMarkers:e.onMarkers},null,8,["title","help-text","data-source","sessions","tool-mode","onSelected","onMarkers"])]))}});const nme=Ct(tme,[["__scopeId","data-v-aca20d97"]]),ime={props:{toolMode:{type:Number,required:!0},sessions:{type:Array,required:!0}},data(){return{title:"Trim Trackpoints",helpText:`Select this option if you want to trim certain trackpoints in your activities. For instance,
        if you finish cycling and transition to another mode of transportation without turning off
        your cyclocomputer, this feature allows you to remove the unwanted trackpoints.`,dataSource:[{label:"Do Not Trim Trackpoints",value:!1},{label:"Trim Trackpoints",value:!0}]}},methods:{onMarkers(t){this.$emit("markers",t)},onSelected(t){this.$emit("active",t==null?void 0:t.value)}},mounted(){}},rme=xt({...ime,__name:"ToolTrackpointsTrimmer",setup(t){return(e,n)=>(j(),K("div",null,[me(uF,{name:"trimmer",title:e.title,"help-text":e.helpText,"data-source":e.dataSource,sessions:t.sessions,"tool-mode":t.toolMode,"legend-label":"New dist.",onSelected:e.onSelected,onMarkers:e.onMarkers},null,8,["title","help-text","data-source","sessions","tool-mode","legend-label","onSelected","onMarkers"])]))}});const sme=Ct(rme,[["__scopeId","data-v-ee624ea9"]]),SE=t=>(Qt("data-v-36d9cd47"),t=t(),en(),t),ome={class:"row m-0 px-2 text-start"},ame=SE(()=>x("label",null,"We have few useful tools to edit your Activity Files.",-1)),lme=SE(()=>x("p",null,"Some tools may be disabled depending on these factors:",-1)),cme=SE(()=>x("ul",{class:"ps-4 m-0",style:{"font-size":"0.8em"}},[x("li",null,"You need at least two activity files to combine them."),x("li",null,"You need at least two sessions (in one or multiple activity files) to split.")],-1)),ume={class:"pt-3"},hme={class:"pt-3"},fme={class:"pt-3"},dme={class:"pt-3"},gme={class:"pt-3"},mme={class:"pt-3"},pme={class:"pt-3"},_me={class:"pt-4"},yme={class:"row"},vme=["disabled"],bme={props:{manufacturers:{type:Array,required:!0},sports:{type:Array,required:!0},activities:{type:Array,required:!0},sessions:{type:Array,required:!0},combinedRecord:Array},data(){return{toolMode:mn.Unknown,selectedFileType:Bt.Unsupported,selectedDevice:new $o,sessionSports:new Array,trimMarkers:new Array,concealMarkers:new Array,selectedFieldRemovers:new Array}},computed:{isValidToProceed(){if(this.toolMode==mn.Unknown||this.selectedFileType==Bt.Unsupported)return!1;if(this.selectedFileType==Bt.FIT){if(this.selectedDevice==null||this.selectedDevice.productId==null)return!1}else if(this.selectedDevice.label=="")return!1;return!0}},watch:{sessions:{handler(){this.toolMode=mn.Unknown}}},methods:{onToolMode(t){this.toolMode=t},onSelectedFileType(t){this.selectedFileType=t.value},onSelectedDevice(t){this.selectedDevice=t},onSessionSports(t){this.sessionSports=t},onTrimMarkers(t){this.trimMarkers=this.validateMarkers(t),this.$emit("onTrimMarkers",this.trimMarkers)},onConcealMarkers(t){this.concealMarkers=this.validateMarkers(t),this.$emit("onConcealMarkers",this.concealMarkers)},onTrimActive(t){this.$emit("onTrimActive",t)},onConcealActive(t){this.$emit("onConcealActive",t)},onSelectedFields(t){this.selectedFieldRemovers=t},validateMarkers(t){return t.forEach(e=>{e.startN=parseInt(e.startN),e.endN=parseInt(e.endN)}),t},proceed(){if(!this.isValidToProceed)return;const t=new bse({toolMode:this.toolMode,targetFileType:this.selectedFileType,manufacturerId:this.selectedDevice.manufacturerId,productId:this.selectedDevice.productId,deviceName:this.selectedDevice.label,sports:Ue(this.sessionSports),trimMarkers:Ue(this.trimMarkers),concealMarkers:Ue(this.concealMarkers),removeFields:Ue(this.selectedFieldRemovers)});this.$emit("encodeSpecifications",t)}},mounted(){},unmounted(){}},wme=xt({...bme,__name:"TheTools",setup(t){return(e,n)=>(j(),K("div",ome,[ame,lme,cme,x("div",ume,[me(Ege,{activities:t.activities,sessions:t.sessions,onToolMode:e.onToolMode},null,8,["activities","sessions","onToolMode"])]),x("div",hme,[me(gge,{"tool-mode":e.toolMode,onSelectedFileType:e.onSelectedFileType},null,8,["tool-mode","onSelectedFileType"])]),x("div",fme,[me(Hde,{manufacturers:t.manufacturers,activities:t.activities,"tool-mode":e.toolMode,"selected-file-type":e.selectedFileType,onSelectedDevice:e.onSelectedDevice},null,8,["manufacturers","activities","tool-mode","selected-file-type","onSelectedDevice"])]),x("div",dme,[me(Rge,{sessions:t.sessions,sports:t.sports,"tool-mode":e.toolMode,onSessionSports:e.onSessionSports},null,8,["sessions","sports","tool-mode","onSessionSports"])]),x("div",gme,[me(sme,{sessions:t.sessions,"tool-mode":e.toolMode,onMarkers:e.onTrimMarkers,onActive:e.onTrimActive},null,8,["sessions","tool-mode","onMarkers","onActive"])]),x("div",mme,[me(nme,{sessions:t.sessions,"tool-mode":e.toolMode,onMarkers:e.onConcealMarkers,onActive:e.onConcealActive},null,8,["sessions","tool-mode","onMarkers","onActive"])]),x("div",pme,[me(Jde,{sessions:t.sessions,"tool-mode":e.toolMode,onSelectedFields:e.onSelectedFields},null,8,["sessions","tool-mode","onSelectedFields"])]),x("div",_me,[x("div",yme,[x("div",null,[x("button",{class:"w-100 btn btn-success",onClick:n[0]||(n[0]=(...i)=>e.proceed&&e.proceed(...i)),disabled:!e.isValidToProceed},X(e.isValidToProceed?"Export as "+_t(Bt)[e.selectedFileType]:"Please fill in all required fields."),9,vme)])])])]))}});const xme=Ct(wme,[["__scopeId","data-v-36d9cd47"]]);function Eme(t){switch(t.sport){case"Hiking":case"Walking":case"Running":case"Swimming":case"Transition":case Mk:for(let e=0;e<t.records.length;e++)if(t.records[e].pace!=null)return!0}return!1}const gy=t=>(Qt("data-v-e2457709"),t=t(),en(),t),Tme={class:"container"},Sme={class:"row"},Cme=gy(()=>x("div",{class:"col text-start collapsible",style:{cursor:"pointer"},"data-bs-toggle":"collapse","data-bs-target":"#split-pace-graph-content","aria-expanded":"false","aria-controls":"split-pace-graph-content"},[x("h6",{class:"pt-1 mb-0 title"},[x("i",{class:"fa-solid fa-caret-right collapse-indicator"}),pe(" Splits ")])],-1)),Mme={class:"col-auto text-end"},Ame={class:"row g-0"},Rme=gy(()=>x("label",{for:"splitDistance",class:"col-auto col-form-label col-form-label-sm me-2"},"Split By",-1)),Ime={class:"col-auto"},kme=["value"],$me={class:"row collapse show",id:"split-pace-graph-content"},Ome={class:"col-12 pt-2"},Lme={class:"table table-sm table-"},Nme=gy(()=>x("thead",null,[x("tr",null,[x("th",{scope:"col",class:"small col-2 text-start"},"KM"),x("th",{scope:"col",class:"small col-2 text-start"},"Pace"),x("th",{scope:"col"}),x("th",{scope:"col",class:"small col-2 text-end"},"Elev"),x("th",{scope:"col",class:"small col-2 text-end"},"HR")])],-1)),Dme={class:"table-group-divider"},Fme={scope:"row",class:"fw-bold small text-start"},Pme={class:"small text-start"},zme={class:"position-relative"},Wme=["aria-valuenow"],Hme={class:"position-absolute top-50 end-0 translate-middle-y small me-1 d-none"},Bme=gy(()=>x("div",{class:"position-relative"},null,-1)),Vme={class:"small text-end"},Gme={class:"small text-end"},I0=new Ke;class eI{constructor(){ee(this,"prosen",0);ee(this,"pace",0);ee(this,"isLeftover",!1);ee(this,"totalDistance",0);ee(this,"overallDistance",0);ee(this,"totalDuration",0);ee(this,"overallDuration",0);ee(this,"totalAscent",0);ee(this,"totalDescent",0);ee(this,"totalRecord",0);ee(this,"totalHeartRate",0);ee(this,"totalHeartRateRecord",0);ee(this,"lastRecord",null)}}class tI{constructor(){ee(this,"firstRecord",I0);ee(this,"prevRecord",I0);ee(this,"currentDuration",0);ee(this,"totalHeartRate",0);ee(this,"totalHeartRateRecord",0);ee(this,"maxPace",0);ee(this,"distance",0);ee(this,"prevAltitude",null);ee(this,"summarized",!1)}}const Ume={props:{selectedSession:{type:Array,required:!0,default:[]},receivedRecord:Ke,receivedRecordFreeze:Boolean},components:{},data(){return{isLoading:!1,summaries:Array(),splitByDistanceInMeter:1e3,splitByOptions:[{text:"1 KM",value:1e3},{text:"5 KM",value:5e3},{text:"10 KM",value:1e4}],listRowBoldBy:[{splitBy:1e3,boldIns:[5,10,21,42]}],omitByMeter:100}},watch:{selectedSession:{handler(t){this.summarize(t)}},splitByDistanceInMeter(){this.summarize(this.selectedSession)}},computed:{},methods:{isRowBold(t){const e=this.listRowBoldBy.find(n=>this.splitByDistanceInMeter==n.splitBy);if(e){let n=Math.round;return t.isLeftover&&(n=Math.ceil),e.boldIns.includes(n(t.overallDistance/1e3))}return!1},formatProsen(t){return t>=0&&t<=100?t:t>100?100:0},formatElev(t,e){return Math.round(t-e).toFixed(0)},formatDuration(t){return t>=60*60*1e3?Pe.fromMillis(t).toFormat("h:mm:ss"):Pe.fromMillis(t).toFormat("mm:ss")},formatPaceTime(t){return t>=60*60?Pe.fromMillis(t*1e3).toFormat("h:mm:ss"):Pe.fromMillis(t*1e3).toFormat("mm:ss")},formatAvgHr(t,e){return e<=0?"-":(t/e).toFixed(0)},summarize(t){console.time("Splits"),this.isLoading=!0,this.summaries.length=0;let e=new eI,n=new tI,i=0;for(const r of t)if(r.records!=null&&Eme(r)){n=new tI;for(const s of r.records){if(s.distance==null)continue;n.summarized=!1,n.firstRecord==I0&&(n.firstRecord=s,i=s.distance);let o=s.distance-n.distance;if(n.distance+=o<=0?0:o,s.timestamp!=null&&n.prevRecord.timestamp!=null){const a=new Date(s.timestamp).valueOf()-new Date(n.prevRecord.timestamp).valueOf();n.currentDuration+=a}if(s.altitude!=null){if(n.prevAltitude!=null){const a=s.altitude-n.prevAltitude;a>0?e.totalAscent+=a:e.totalDescent+=Math.abs(a)}n.prevAltitude=s.altitude}s.heartRate!=null&&(n.totalHeartRate+=s.heartRate,n.totalHeartRateRecord++),n.distance-i>=this.splitByDistanceInMeter&&(e.totalDistance=n.distance-i,e.totalDuration=n.currentDuration,e.totalHeartRate=n.totalHeartRate,e.totalHeartRateRecord=n.totalHeartRateRecord,e.overallDistance=n.distance,e.pace=e.totalDuration/(e.totalDistance==0?1:e.totalDistance),e.lastRecord=s,n.maxPace=e.pace>n.maxPace?e.pace:n.maxPace,this.summaries.push(e),e=new eI,n.summarized=!0,n.currentDuration=0,n.totalHeartRate=0,n.totalHeartRateRecord=0,i=n.distance),n.prevRecord=s}}if(!n.summarized&&n.prevRecord!=I0){if(e.totalDistance=n.distance-i,e.totalDuration=n.currentDuration,e.totalHeartRate=n.totalHeartRate,e.totalHeartRateRecord=n.totalHeartRateRecord,e.overallDistance=n.distance,e.pace=e.totalDuration/(e.totalDistance==0?1:e.totalDistance),e.lastRecord=n.prevRecord,e.totalDistance<this.omitByMeter&&this.summaries.length>0){const s=this.summaries[this.summaries.length-1];s.overallDistance=e.overallDistance,s.totalDistance+=e.totalDistance,s.totalAscent+=e.totalAscent,s.totalDescent+=e.totalDescent,s.totalDuration+=e.totalDuration,s.totalHeartRate+=e.totalHeartRate,s.totalHeartRateRecord+=e.totalHeartRateRecord,s.totalRecord+=e.totalRecord,s.lastRecord=e.lastRecord,s.pace=s.totalDuration/(s.totalDistance==0?1:s.totalDistance),s.isLeftover=!1}else e.isLeftover=!0,this.summaries.push(e);const r=this.summaries[this.summaries.length-1];n.maxPace=r.pace>n.maxPace?r.pace:n.maxPace}for(const[r,s]of this.summaries.entries()){const o=s.pace/n.maxPace*100;s.prosen=o}this.isLoading=!1,console.timeEnd("Splits")}},mounted(){this.summarize(this.selectedSession)}},Yme=xt({...Ume,__name:"SplitPaceGraph",setup(t){return(e,n)=>(j(),K("div",Tme,[x("div",Sme,[Cme,x("div",Mme,[x("div",Ame,[Rme,x("div",Ime,[ct(x("select",{class:"form-select form-select-sm",name:"splitDistance",id:"splitDistance","onUpdate:modelValue":n[0]||(n[0]=i=>e.splitByDistanceInMeter=i)},[(j(!0),K(yt,null,ji(e.splitByOptions,i=>(j(),K("option",{key:i.value,value:i.value},X(i.text),9,kme))),128))],512),[[dk,e.splitByDistanceInMeter]])])])])]),x("div",$me,[x("div",Ome,[x("table",Lme,[Nme,x("tbody",Dme,[(j(!0),K(yt,null,ji(e.summaries,(i,r)=>(j(),K("tr",{key:r,class:Xt([e.isRowBold(i)?"table-active":""])},[x("td",Fme,[i.isLeftover?(j(),K(yt,{key:0},[pe(X((i.totalDistance/1e3).toFixed(1)),1)],64)):(j(),K(yt,{key:1},[pe(X((i.overallDistance/1e3).toFixed(0)),1)],64))]),x("td",Pme,X(e.formatPaceTime(i.pace)),1),x("td",zme,[x("div",{class:"progress",role:"progressbar","aria-valuenow":e.isLoading?100:e.formatProsen(i.prosen).toFixed(0),"aria-valuemin":"0","aria-valuemax":"100"},[x("div",{class:Xt(["progress-bar bg-primary",e.isLoading?"progress-bar-striped progress-bar-animated":""]),style:Gt({width:`${e.isLoading?100:e.formatProsen(i.prosen).toFixed(0)}%`})},null,6)],8,Wme),x("div",Hme,X(e.formatDuration(i.overallDuration)),1),Bme]),x("td",Vme,X(e.formatElev(i.totalAscent,i.totalDescent)),1),x("td",Gme,X(e.formatAvgHr(i.totalHeartRate,i.totalHeartRateRecord)),1)],2))),128))])])])])]))}});const jme=Ct(Yme,[["__scopeId","data-v-e2457709"]]),mh=t=>(Qt("data-v-c236af33"),t=t(),en(),t),qme={class:"activity container-fluid text-center flex-container"},Xme=mh(()=>x("div",{class:"pt-4 pb-2"},[x("h5",{class:"title"},"Open Activity"),x("div",{style:{"font-size":"0.9em"}}," Your data stays in your computer: 100% client-side power. ")],-1)),Zme={style:{"font-size":"0.8em"},class:"pt-1"},Kme={key:0},Jme={key:1},Qme=mh(()=>x("i",{class:"fas fa-spinner fa-spin"},null,-1)),epe={key:0,class:"mb-3"},tpe={key:1},npe=mh(()=>x("ul",{class:"nav nav-tabs ps-2",id:"menu",role:"tablist"},[x("li",{class:"nav-item",role:"presentation"},[x("button",{class:"nav-link flat-green active",id:"tab1-tab","data-bs-toggle":"tab","data-bs-target":"#tab1-body",type:"button",role:"tab","aria-controls":"tab1-body","aria-selected":"true"}," Analysis ")]),x("li",{class:"nav-item",role:"presentation"},[x("button",{class:"nav-link flat-green",id:"tab2-tab","data-bs-toggle":"tab","data-bs-target":"#tab2-body",type:"button",role:"tab","aria-controls":"tab2-body","aria-selected":"false"}," Sessions ")]),x("li",{class:"nav-item",role:"presentation"},[x("button",{class:"nav-link flat-green",id:"tab3-tab","data-bs-toggle":"tab","data-bs-target":"#tab3-body",type:"button",role:"tab","aria-controls":"tab3-body","aria-selected":"false"}," Laps ")]),x("li",{class:"nav-item",role:"presentation"},[x("button",{class:"nav-link flat-green",id:"tab4-tab","data-bs-toggle":"tab","data-bs-target":"#tab4-body",type:"button",role:"tab","aria-controls":"tab4-body","aria-selected":"false"}," Tools ")])],-1)),ipe={class:"tab-content"},rpe={class:"tab-pane fade show active",id:"tab1-body",role:"tabpanel","aria-labelledby":"tab1-tab"},spe={key:0,class:"graph"},ope={key:1,class:"graph"},ape={key:2,class:"graph"},lpe={key:3,class:"graph"},cpe={key:4,class:"graph"},upe={key:5,class:"graph"},hpe={key:6,class:"graph"},fpe={key:7,class:"graph"},dpe={class:"tab-pane fade",id:"tab2-body",role:"tabpanel","aria-labelledby":"tab2-tab"},gpe={key:0},mpe={class:"tab-pane fade",id:"tab3-body",role:"tabpanel","aria-labelledby":"tab2-tab"},ppe={key:0},_pe={class:"tab-pane fade",id:"tab4-body",role:"tabpanel","aria-labelledby":"tab3-tab"},ype={class:"pt-3"},vpe={class:"footer pt-3"},bpe={class:"mx-1"},wpe=mh(()=>x("i",{class:"fa-solid fa-copyright fa-rotate-180"},null,-1)),xpe=mh(()=>x("span",{class:"mx-1"},[x("a",{href:"http://github.com/openivity/openivity.github.io",target:"_blank"},[x("i",{class:"fa-brands fa-github"}),pe(" Code ")])],-1)),Epe=mh(()=>x("div",{class:"mx-1 pt-1"},"Openivity's Open Source Project",-1)),Tpe={key:0,id:"right",class:"col-12 col-xxl-9 col-xl-8 col-lg-7 map-container"},Spe={class:"row"},Cpe={class:"col-12 map pe-0"},Mpe={class:"col-12 elevation-section"},hF=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";hF==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");const Ape=new TextEncoder,Nr=Jt(new Array),np=Jt(new Array),Tm=Jt(new Array),qh=Jt(new Array),vv=Jt(new Array),bv=Jt(new Array),wv=Jt(new Array),xv=Jt(new Map),Sm=Jt(new Map),Lt=Jt(new Array),Di=Jt(new Array),If=Jt(new Array),ip=Jt(new Array),Dr=Jt(new Array),fF=Jt(new Array),dF=Jt(new Array),Rpe={data(){return{loading:!1,activityService:new Worker(new URL("/assets/activity-service-66b44af8.js",self.location),{type:"module"}),sessionSelected:Fs,summary:new hs,hoveredRecord:new Ke,hoveredRecordFreeze:new Boolean,isActivityServiceReady:!1,toolTrimMarkers:new Array,toolConcealMarkers:new Array,toolTrimActive:!1,toolConcealActive:!1}},computed:{isActivityFileReady:function(){return np.value.length>0},hasPace(){for(let t=0;t<Di.value.length;t++){const e=Di.value[t];switch(Di.value[t].sport){case"Hiking":case"Walking":case"Running":case"Swimming":case"Transition":case Mk:for(let n=0;n<e.records.length;n++)if(e.records[n].pace!=null)return!0}}return!1},hasAltitude(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].altitude!=null)return!0;return!1},hasSpeed(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].speed)return!0;return!1},hasCadence(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].cadence)return!0;return!1},hasHeartRate(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].heartRate)return!0;return!1},hasPower(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].power)return!0;return!1},hasTemperature(){for(let t=0;t<Lt.value.length;t++)if(Lt.value[t].temperature!=null)return!0;return!1}},methods:{getExtention(t){if(t=="")return"";const e=t.split(".");return e[e.length-1].toLocaleLowerCase()},getFileType(t){return t=="fit"?Bt.FIT:t=="gpx"?Bt.GPX:t=="tcx"?Bt.TCX:Bt.Unsupported},fileInputEventListener(t){var i;const e=t.target;if(!e.files)return;let n=new Array;for(let r=0;r<((i=e.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=e.files[r];if(!a){o("no file selected");return}const l=this.getExtention(a.name),c=this.getFileType(l);if(c==Bt.Unsupported){o(`file '${a.name}' (type: ${l}) is not supported`);return}const u=new FileReader;u.onload=h=>{const f=h.target.result;s(new Uint8Array([c,...new Uint8Array(f)]))},u.onerror=o,u.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.loading=!0,this.activityService.postMessage({type:"decode",input:r})}).catch(r=>{console.log(r),alert(r)})},activityServiceOnMessage(t){const[e,n,i]=[t.data.type,t.data.result,t.data.elapsed];switch(e){case"isReady":this.isActivityServiceReady=!0;break;case"decode":this.decodeHandler(n,i);break;case"encode":this.encodeHandler(n,i);break;case"manufacturerList":this.manufacturerListHandler(n);break;case"sportList":this.sportListHandler(n);break}},decodeHandler(t,e){if(t=new yse(t),t.err!=null){console.error(`Decode: ${t.err}`),alert(`Decode: ${t.err}`),this.loading=!1;return}console.group("Decoding:"),console.group("Spent on WASM:"),console.debug("Decode took:		",t.decodeTook,"ms"),console.debug("Serialization took:	",t.serializationTook,"ms"),console.debug("Total elapsed:		",t.totalElapsed,"ms"),console.groupEnd(),console.debug("Interop WASM to JS:	",e-t.totalElapsed,"ms"),console.debug("Total elapsed:		",e,"ms"),console.groupEnd(),requestAnimationFrame(()=>{this.preprocessing(t),this.scrollTop()})},encodeHandler(t,e){if(t=new vse(t),t.err!=null){console.error(`Encode: ${t.err}`),alert(`Encode: ${t.err}`),this.loading=!1;return}console.group("Encoding:"),console.group("Spent on WASM:"),console.debug("Encode took:		",t.encodeTook,"ms"),console.debug("Serialization took:	",t.serializationTook,"ms"),console.debug("Total elapsed:		",t.totalElapsed,"ms"),console.groupEnd(),console.debug("Interop WASM to JS:	",e-t.totalElapsed,"ms"),console.debug("Total elapsed:		",e,"ms"),console.groupEnd();for(let n=0;n<t.filesBytes.length;n++){let i=t.fileName;t.filesBytes.length>1&&(i+=`-${n+1}`),this.isMobile()?setTimeout(()=>{this.downloadFile(i,t.fileType,new Uint8Array(t.filesBytes[n]))},n*1e3):this.downloadFile(i,t.fileType,new Uint8Array(t.filesBytes[n]))}this.loading=!1},isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async downloadFile(t,e,n){const i=new Blob([n]),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=`${t}.${e}`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},manufacturerListHandler(t){fF.value=t.manufacturers},sportListHandler(t){dF.value=t.sports},preprocessing(t){console.time("Preprocessing"),np.value=t.activities,qh.value=[],Nr.value=np.value.flatMap(r=>{for(let s=0;s<r.sessions.length;s++){const o=r.sessions[s];o.creatorName=r.creator.name,o.timeCreated=r.creator.timeCreated,o.timezone=r.timezone;const a={...o};a.records=[];for(let l=0;l<o.records.length;l++)a.records.push({...o.records[l]});qh.value.push(a)}return r.sessions});let e=0,n=0;vv.value=[],Tm.value=[],bv.value=[],wv.value=[],xv.value.clear(),Sm.value.clear();for(let r=0;r<qh.value.length;r++){const s=qh.value[r];for(let a=0;a<s.records.length;a++)s.records[a].distance!=null&&(s.records[a].distance+=e,n=s.records[a].distance);e=n,vv.value.push(...s.laps),Tm.value.push(...s.records);const o=this.createFeature(s,r);o!=null&&(bv.value.push(o),xv.value.set(r,o))}wv.value=this.summarizeRecords(Tm.value);const i=Nr.value.length;this.selectSession(i==0?Fs:i==1?0:id),setTimeout(()=>this.loading=!1,200),console.timeEnd("Preprocessing")},createFeature(t,e){let n=[];for(let i=0;i<t.records.length;i++){const r=t.records[i];r.positionLong==null||r.positionLat==null||n.push([r.positionLong,r.positionLat])}return n.length==0?null:new R0().readFeature({id:`lineString-${e}`,type:"Feature",geometry:{type:"LineString",coordinates:n}})},startTime(t){let e=null;for(let n=0;n<t.length&&e==null;n++)e=t[n].timestamp;return e},endTime(t){let e=null;for(let n=t.length-1;n>=0&&e==null;n--)e=t[n].timestamp;return e},hasDistance(t){for(let e=0;e<t.length;e++)if(t[e].distance!=null&&t[e].distance>0)return!0;return!1},lastDistance(t){let e=0;for(let n=t.length-1;n>=0;n--){const i=t[n];if(e>0)break;i.distance!=null&&(e=t[n].distance)}return e},summarizeRecords(t){const n=this.hasDistance(t);let i=0;if(n)i=this.lastDistance(t)*5e-4;else{const p=this.startTime(t),b=this.endTime(t);i=(new Date(b).getTime()-new Date(p).getTime())*5e-4}let r=[],s=[],o=[],a=[],l=[],c=[],u=[],h=[],f=[],d=[],g=[],m=[];const _=[];let y=0;for(let p=0;p<t.length;p++){const b=t[p],v=t[y];let E=0;if(n?E=(b.distance??0)-(v.distance??0):(E=new Date(b.timestamp).getTime()-new Date(v.timestamp).getTime(),v.timestamp==null&&(y=p)),E>i){let w=new Ke;r.length>0&&(w.timestamp=r[0]),s.length>0&&(w.distance=s[0]),o.length>0&&(w.positionLat=o[0]),a.length>0&&(w.positionLong=a[0]),l.length>0&&(w.altitude=l.reduce((T,C)=>T+C,0)/l.length),c.length>0&&(w.cadence=c.reduce((T,C)=>T+C,0)/c.length),g.length>0&&(w.grade=g.reduce((T,C)=>T+C,0)/g.length),u.length>0&&(w.heartRate=u.reduce((T,C)=>T+C,0)/u.length),f.length>0&&(w.power=f.reduce((T,C)=>T+C,0)/f.length),h.length>0&&(w.speed=h.reduce((T,C)=>T+C,0)/h.length),d.length>0&&(w.temperature=d.reduce((T,C)=>T+C,0)/d.length),m.length>0&&(w.pace=m.reduce((T,C)=>T+C,0)/m.length),_.push(w),r=[],s=[],o=[],a=[],l=[],c=[],u=[],h=[],f=[],d=[],g=[],m=[],y=p}t[p].timestamp!=null&&r.push(t[p].timestamp),t[p].distance!=null&&s.push(t[p].distance),t[p].positionLat!=null&&o.push(t[p].positionLat),t[p].positionLong!=null&&a.push(t[p].positionLong),t[p].altitude!=null&&l.push(t[p].altitude),t[p].cadence!=null&&c.push(t[p].cadence),t[p].heartRate!=null&&u.push(t[p].heartRate),t[p].speed!=null&&h.push(t[p].speed),t[p].power!=null&&f.push(t[p].power),t[p].temperature!=null&&d.push(t[p].temperature),t[p].grade!=null&&g.push(t[p].grade),t[p].pace!=null&&m.push(t[p].pace)}return _},selectSession(t){switch(t){case Fs:Lt.value=[],Di.value=[],If.value=[],ip.value=[],Dr.value=[];break;case id:Lt.value=Tm.value,Di.value=qh.value,If.value=vv.value,ip.value=bv.value,Dr.value=wv.value;break;default:{if(t>Nr.value.length-1)return;Lt.value=Nr.value[t].records,Di.value=[Nr.value[t]],If.value=Nr.value[t].laps;const e=xv.value.get(t);if(ip.value=e?[e]:[],Sm.value.get(t)==null){const n=Nr.value[t],i=this.summarizeRecords(n.records);Sm.value.set(t,i)}Dr.value=Sm.value.get(t);break}}},scrollTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},onReceiveSummary(t){this.summary=t},onHoveredRecord(t){this.hoveredRecord=new Ke(t)},onHoveredRecordFreeze(t){this.hoveredRecordFreeze=t},onSessionSelected(t){this.sessionSelected=t,this.selectSession(t)},onEncodeSpecifications(t){const e=Ape.encode(JSON.stringify(t));this.loading=!0,this.activityService.postMessage({type:"encode",input:e})},onTrimMarkers(t){this.toolTrimMarkers=t},onConcealMarkers(t){this.toolConcealMarkers=t},onTrimActive(t){this.toolTrimActive=t},onConcealActive(t){this.toolConcealActive=t}},mounted(){var t;(t=document.getElementById("fileInput"))==null||t.addEventListener("change",this.fileInputEventListener),this.activityService.onmessage=this.activityServiceOnMessage,this.activityService.postMessage({type:"isReady"}),this.activityService.postMessage({type:"manufacturerList"}),this.activityService.postMessage({type:"sportList"}),this.selectSession(this.sessionSelected),window.addEventListener("beforeunload",()=>this.activityService.postMessage({type:"shutdown"}))},unmounted(){this.activityService.postMessage({type:"shutdown"})}},Ipe=xt({...Rpe,__name:"OpenActivity",setup(t){return(e,n)=>(j(),K("div",null,[me(uu,null,{default:Al(()=>[e.loading?(j(),ml(ON,{key:0})):Ee("",!0)]),_:1}),x("div",qme,[x("div",{class:Xt(["row",e.isActivityFileReady?"":"align-items-center"])},[x("div",{id:"left",class:Xt(["sidebar","col-12","px-0",e.isActivityFileReady?"col-xxl-3 col-xl-4 col-lg-5 d-md-block float-sm-right":"col-md-12 landing"])},[x("div",null,[x("div",{class:Xt([e.isActivityFileReady?"default-border-top":""])},[Xme,me(Aw,{isActivityFileReady:e.isActivityFileReady,isWebAssemblySupported:_t(hF)},null,8,["isActivityFileReady","isWebAssemblySupported"]),me(uu,null,{default:Al(()=>[x("div",Zme,[e.isActivityServiceReady?(j(),K("span",Kme," Supported files: *.fit, *.gpx, *.tcx ")):(j(),K("span",Jme,[pe(" Instantiating WebAssembly "),Qme]))])]),_:1})],2),e.isActivityFileReady?(j(),K("div",epe,[me(_se,{sessions:Nr.value,"selected-sessions":Di.value,"is-activity-file-ready":e.isActivityFileReady,onSummary:e.onReceiveSummary,onSessionSelected:e.onSessionSelected},null,8,["sessions","selected-sessions","is-activity-file-ready","onSummary","onSessionSelected"])])):Ee("",!0),e.isActivityFileReady?(j(),K("div",tpe,[npe,x("div",ipe,[x("div",rpe,[e.hasHeartRate?(j(),K("div",spe,[me(Sie,{"selected-session":Di.value,age:20,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze},null,8,["selected-session","received-record","received-record-freeze"])])):Ee("",!0),e.hasPace?(j(),K("div",ope,[me(jme,{"selected-session":Di.value,age:20,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze},null,8,["selected-session","received-record","received-record-freeze"])])):Ee("",!0),e.hasPace?(j(),K("div",ape,[me(Aie,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0),e.hasSpeed?(j(),K("div",lpe,[me(Lie,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0),e.hasCadence?(j(),K("div",cpe,[me(TX,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0),e.hasHeartRate?(j(),K("div",upe,[me(JK,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0),e.hasPower?(j(),K("div",hpe,[me(kie,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0),e.hasTemperature?(j(),K("div",fpe,[me(Fie,{records:Lt.value,"graph-records":Dr.value,summary:e.summary,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["records","graph-records","summary","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])):Ee("",!0)]),x("div",dpe,[Di.value.length>0?(j(),K("div",gpe,[me(Ede,{sessions:Di.value},null,8,["sessions"])])):Ee("",!0)]),x("div",mpe,[If.value.length>0?(j(),K("div",ppe,[me(Cre,{laps:If.value},null,8,["laps"])])):Ee("",!0)]),x("div",_pe,[x("div",ype,[me(xme,{manufacturers:fF.value,sports:dF.value,activities:np.value,sessions:Nr.value,onEncodeSpecifications:e.onEncodeSpecifications,onOnTrimMarkers:e.onTrimMarkers,onOnTrimActive:e.onTrimActive,onOnConcealMarkers:e.onConcealMarkers,onOnConcealActive:e.onConcealActive},null,8,["manufacturers","sports","activities","sessions","onEncodeSpecifications","onOnTrimMarkers","onOnTrimActive","onOnConcealMarkers","onOnConcealActive"])])])])])):Ee("",!0),x("span",vpe,[x("span",bpe,[wpe,pe(" "+X(new Date().getFullYear()),1)]),xpe,Epe])])],2),e.isActivityFileReady?(j(),K("div",Tpe,[x("div",Spe,[x("div",Cpe,[me(cF,{sessions:Nr.value,"selected-sessions":Di.value,features:ip.value,"select-session":e.sessionSelected,"tool-conceal-active":e.toolConcealActive,"tool-conceal-markers":e.toolConcealMarkers,"tool-trim-active":e.toolTrimActive,"tool-trim-markers":e.toolTrimMarkers,hasPace:e.hasPace,hasCadence:e.hasCadence,hasHeartRate:e.hasHeartRate,hasPower:e.hasPower,hasTemperature:e.hasTemperature,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze,ref:"theMap"},null,8,["sessions","selected-sessions","features","select-session","tool-conceal-active","tool-conceal-markers","tool-trim-active","tool-trim-markers","hasPace","hasCadence","hasHeartRate","hasPower","hasTemperature","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])]),x("div",Mpe,[me(XK,{name:"elev","has-altitude":e.hasAltitude,summary:e.summary,records:Lt.value,"graph-records":Dr.value,"received-record":e.hoveredRecord,"received-record-freeze":e.hoveredRecordFreeze,onHoveredRecord:e.onHoveredRecord,onHoveredRecordFreeze:e.onHoveredRecordFreeze},null,8,["has-altitude","summary","records","graph-records","received-record","received-record-freeze","onHoveredRecord","onHoveredRecordFreeze"])])])])):Ee("",!0)],2)])]))}});const kpe=Ct(Ipe,[["__scopeId","data-v-c236af33"]]),$pe=xt({__name:"OpenActivityView",setup(t){return(e,n)=>(j(),K("main",null,[me(kpe)]))}}),Ope={props:{activityFiles:Array,timezoneOffsetHour:Number},computed:{summary(){const t=new hs;for(let e=0;e<this.activityFiles.length;e++)for(let n=0;n<this.activityFiles[e].sessions.length;n++){const i=this.activityFiles[e].sessions[n];t.sport=i.sport,t.totalMovingTime=wn(t.totalMovingTime,i.totalMovingTime),t.totalElapsedTime=wn(t.totalElapsedTime,i.totalElapsedTime),t.totalDistance=wn(t.totalDistance,i.totalDistance),t.totalAscent=wn(t.totalAscent,i.totalAscent),t.totalDescent=wn(t.totalDescent,i.totalDescent),t.totalCycles=wn(t.totalCycles,i.totalCycles),t.totalCalories=wn(t.totalCalories,i.totalCalories),t.avgSpeed=Nn(t.avgSpeed,i.avgSpeed),t.maxSpeed=Dn(t.maxSpeed,i.maxSpeed),t.avgHeartRate=Nn(t.avgHeartRate,i.avgHeartRate),t.maxHeartRate=Dn(t.maxHeartRate,i.maxHeartRate),t.avgCadence=Nn(t.avgCadence,i.avgCadence),t.maxCadence=Dn(t.maxCadence,i.maxCadence),t.avgPower=Nn(t.avgPower,i.avgPower),t.maxPower=Dn(t.maxPower,i.maxPower),t.avgTemperature=Nn(t.avgTemperature,i.avgTemperature),t.maxTemperature=Dn(t.maxTemperature,i.maxTemperature),t.avgAltitude=Nn(t.avgAltitude,i.avgAltitude),t.maxAltitude=Dn(t.maxAltitude,i.maxAltitude)}return t}},methods:{toTimezoneDateString:cx,GMTString:k6,secondsToDHMS:P_,avg:Nn,max:Dn,sum:wn}};const Ve=t=>(Qt("data-v-c7709d93"),t=t(),en(),t),Lpe={class:"navigator"},Npe={class:"navigator-info"},Dpe={key:0,class:"time-created"},Fpe={key:1,class:"manufacturer"},Ppe={class:"navigator-summary analysis"},zpe={class:"summary"},Wpe={key:0,class:"section-title"},Hpe={class:"summary-grid"},Bpe={key:0,class:"summary-item"},Vpe=Ve(()=>x("div",{class:"summary-title"},"Sport",-1)),Gpe={class:"summary-value"},Upe={key:1,class:"summary-item"},Ype=Ve(()=>x("div",{class:"summary-title"},"Sub Sport",-1)),jpe={class:"summary-value"},qpe={class:"summary-grid"},Xpe={key:0,class:"summary-item"},Zpe=Ve(()=>x("div",{class:"summary-title"},"Total Moving Time",-1)),Kpe={class:"summary-value"},Jpe=Ve(()=>x("i",{class:"fa-solid fa-hourglass-half"},null,-1)),Qpe={key:1,class:"summary-item"},e0e=Ve(()=>x("div",{class:"summary-title"},"Total Elapsed Time",-1)),t0e={class:"summary-value"},n0e=Ve(()=>x("i",{class:"fa-solid fa-hourglass-end"},null,-1)),i0e={class:"summary-grid"},r0e={key:0,class:"summary-item"},s0e=Ve(()=>x("div",{class:"summary-title"},"Total Distance",-1)),o0e={class:"summary-value"},a0e=Ve(()=>x("i",{class:"fa-solid fa-road"},null,-1)),l0e={key:1,class:"summary-item"},c0e=Ve(()=>x("div",{class:"summary-title"},"Total Calories",-1)),u0e={class:"summary-value"},h0e=Ve(()=>x("i",{class:"fa-solid fa-droplet"},null,-1)),f0e={class:"summary-grid"},d0e={key:0,class:"summary-item"},g0e=Ve(()=>x("div",{class:"summary-title"},"Avg Speed",-1)),m0e={class:"summary-value"},p0e=Ve(()=>x("i",{class:"fa-solid fa-gauge"},null,-1)),_0e={key:1,class:"summary-item"},y0e=Ve(()=>x("div",{class:"summary-title"},"Max Speed",-1)),v0e={class:"summary-value"},b0e=Ve(()=>x("i",{class:"fa-solid fa-gauge-high"},null,-1)),w0e={class:"summary-grid"},x0e={key:0,class:"summary-item"},E0e=Ve(()=>x("div",{class:"summary-title"},"Avg Heart Rate",-1)),T0e={class:"summary-value"},S0e=Ve(()=>x("i",{class:"fa-solid fa-heart-pulse"},null,-1)),C0e={key:1,class:"summary-item"},M0e=Ve(()=>x("div",{class:"summary-title"},"Max Heart Rate",-1)),A0e={class:"summary-value"},R0e=Ve(()=>x("i",{class:"fa-solid fa-heart-pulse"},null,-1)),I0e={class:"summary-grid"},k0e={key:0,class:"summary-item"},$0e=Ve(()=>x("div",{class:"summary-title"},"Avg Cadence",-1)),O0e={class:"summary-value"},L0e=Ve(()=>x("i",{class:"fa-solid fa-rotate"},null,-1)),N0e={key:1,class:"summary-item"},D0e=Ve(()=>x("div",{class:"summary-title"},"Max Cadence",-1)),F0e={class:"summary-value"},P0e=Ve(()=>x("i",{class:"fa-solid fa-rotate"},null,-1)),z0e={class:"summary-grid"},W0e={key:0,class:"summary-item"},H0e=Ve(()=>x("div",{class:"summary-title"},"Avg Power",-1)),B0e={class:"summary-value"},V0e=Ve(()=>x("i",{class:"fa-solid fa-bolt-lightning"},null,-1)),G0e={key:1,class:"summary-item"},U0e=Ve(()=>x("div",{class:"summary-title"},"Max Power",-1)),Y0e={class:"summary-value"},j0e=Ve(()=>x("i",{class:"fa-solid fa-bolt-lightning"},null,-1)),q0e={class:"summary-grid"},X0e={key:0,class:"summary-item"},Z0e=Ve(()=>x("div",{class:"summary-title"},"Avg Temperature",-1)),K0e={class:"summary-value"},J0e=Ve(()=>x("i",{class:"fa-solid fa-temperature-low"},null,-1)),Q0e={key:1,class:"summary-item"},e_e=Ve(()=>x("div",{class:"summary-title"},"Max Temperature",-1)),t_e={class:"summary-value"},n_e=Ve(()=>x("i",{class:"fa-solid fa-temperature-high"},null,-1)),i_e={class:"summary-grid"},r_e={key:0,class:"summary-item"},s_e=Ve(()=>x("div",{class:"summary-title"},"Total Ascent",-1)),o_e={class:"summary-value"},a_e=Ve(()=>x("i",{class:"fa-solid fa-arrow-trend-up"},null,-1)),l_e={key:1,class:"summary-item"},c_e=Ve(()=>x("div",{class:"summary-title"},"Total Descent",-1)),u_e={class:"summary-value"},h_e=Ve(()=>x("i",{class:"fa-solid fa-arrow-trend-down"},null,-1)),f_e={class:"summary-grid"},d_e={key:0,class:"summary-item"},g_e=Ve(()=>x("div",{class:"summary-title"},"Avg Altitude",-1)),m_e={class:"summary-value"},p_e=Ve(()=>x("i",{class:"fa-solid fa-mountain"},null,-1)),__e={key:1,class:"summary-item"},y_e=Ve(()=>x("div",{class:"summary-title"},"Max Altitude",-1)),v_e={class:"summary-value"},b_e=Ve(()=>x("i",{class:"fa-solid fa-mountain"},null,-1));function w_e(t,e,n,i,r,s){var o,a,l,c,u;return j(),K("div",Lpe,[x("div",Npe,[n.activityFiles&&n.activityFiles.length!=0?(j(),K("div",Dpe," Created on: "+X(s.toTimezoneDateString((a=(o=n.activityFiles[0])==null?void 0:o.creator)==null?void 0:a.timeCreated,n.timezoneOffsetHour))+" "+X(s.GMTString(n.timezoneOffsetHour)),1)):Ee("",!0),n.activityFiles&&n.activityFiles.length!=0?(j(),K("div",Fpe," Device: "+X((c=(l=n.activityFiles[0])==null?void 0:l.creator)==null?void 0:c.name),1)):Ee("",!0)]),x("div",Ppe,[x("div",zpe,[((u=n.activityFiles)==null?void 0:u.length)!=0?(j(),K("h4",Wpe,"Summary")):Ee("",!0),x("div",null,[x("div",Hpe,[s.summary.sport?(j(),K("div",Bpe,[Vpe,x("div",Gpe,X(s.summary.sport),1)])):Ee("",!0),s.summary.subSport?(j(),K("div",Upe,[Ype,x("div",jpe,X(s.summary.subSport),1)])):Ee("",!0)]),x("div",qpe,[s.summary.totalMovingTime?(j(),K("div",Xpe,[Zpe,x("div",Kpe,[Jpe,pe(" "+X(s.secondsToDHMS(s.summary.totalMovingTime)),1)])])):Ee("",!0),s.summary.totalElapsedTime?(j(),K("div",Qpe,[e0e,x("div",t0e,[n0e,pe(" "+X(s.secondsToDHMS(s.summary.totalElapsedTime)),1)])])):Ee("",!0)]),x("div",i0e,[s.summary.totalDistance?(j(),K("div",r0e,[s0e,x("div",o0e,[a0e,pe(" "+X((s.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):Ee("",!0),s.summary.totalCalories?(j(),K("div",l0e,[c0e,x("div",u0e,[h0e,pe(" "+X(s.summary.totalCalories.toLocaleString())+" Cal ",1)])])):Ee("",!0)]),x("div",f0e,[s.summary.avgSpeed?(j(),K("div",d0e,[g0e,x("div",m0e,[p0e,pe(" "+X((s.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Ee("",!0),s.summary.maxSpeed?(j(),K("div",_0e,[y0e,x("div",v0e,[b0e,pe(" "+X((s.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Ee("",!0)]),x("div",w0e,[s.summary.avgHeartRate?(j(),K("div",x0e,[E0e,x("div",T0e,[S0e,pe(" "+X(Math.round(s.summary.avgHeartRate))+" bpm ",1)])])):Ee("",!0),s.summary.maxHeartRate?(j(),K("div",C0e,[M0e,x("div",A0e,[R0e,pe(" "+X(s.summary.maxHeartRate)+" bpm ",1)])])):Ee("",!0)]),x("div",I0e,[s.summary.avgCadence?(j(),K("div",k0e,[$0e,x("div",O0e,[L0e,pe(" "+X(Math.round(s.summary.avgCadence))+" rpm ",1)])])):Ee("",!0),s.summary.maxCadence?(j(),K("div",N0e,[D0e,x("div",F0e,[P0e,pe(" "+X(s.summary.maxCadence)+" rpm ",1)])])):Ee("",!0)]),x("div",z0e,[s.summary.avgPower?(j(),K("div",W0e,[H0e,x("div",B0e,[V0e,pe(" "+X(Math.round(s.summary.avgPower)),1)])])):Ee("",!0),s.summary.maxPower?(j(),K("div",G0e,[U0e,x("div",Y0e,[j0e,pe(" "+X(s.summary.maxPower),1)])])):Ee("",!0)]),x("div",q0e,[s.summary.avgTemperature?(j(),K("div",X0e,[Z0e,x("div",K0e,[J0e,pe(" "+X(Math.round(s.summary.avgTemperature))+" C ",1)])])):Ee("",!0),s.summary.maxTemperature?(j(),K("div",Q0e,[e_e,x("div",t_e,[n_e,pe(" "+X(s.summary.maxTemperature)+" C ",1)])])):Ee("",!0)]),x("div",i_e,[s.summary.totalAscent?(j(),K("div",r_e,[s_e,x("div",o_e,[a_e,pe(" "+X(s.summary.totalAscent)+" m ",1)])])):Ee("",!0),s.summary.totalDescent?(j(),K("div",l_e,[c_e,x("div",u_e,[h_e,pe(" "+X(s.summary.totalDescent)+" m ",1)])])):Ee("",!0)]),x("div",f_e,[s.summary.avgAltitude?(j(),K("div",d_e,[g_e,x("div",m_e,[p_e,pe(" "+X(s.summary.avgAltitude.toFixed(2))+" m ",1)])])):Ee("",!0),s.summary.maxAltitude?(j(),K("div",__e,[y_e,x("div",v_e,[b_e,pe(" "+X(s.summary.maxAltitude.toFixed(2))+" m ",1)])])):Ee("",!0)])])])])])}const nI=Ct(Ope,[["render",w_e],["__scopeId","data-v-c7709d93"]]);function iI(t,e){if(!t)return"0 m";e=e??0;const n=(e??0)<=0?1:10*e;return t<1e3?`${(Math.round(t*n)/n).toLocaleString()} m`:`${(Math.round(t/1e3*n)/n).toLocaleString()} km`}function Un(t){return t!=null&&!Number.isNaN(t)}function Qi(t,e){return+Un(e)-+Un(t)||Rt(t,e)}function k0(t,e){return+Un(e)-+Un(t)||Rl(t,e)}function CE(t){return t!=null&&`${t}`!=""}function $0(t){return isFinite(t)?t:NaN}function qs(t){return t>0&&isFinite(t)?t:NaN}function my(t){return t<0&&isFinite(t)?t:NaN}function x_e(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${E_e(t.getUTCFullYear())}-${ks(t.getUTCMonth()+1,2)}-${ks(t.getUTCDate(),2)}${n||i||r||s?`T${ks(n,2)}:${ks(i,2)}${r||s?`:${ks(r,2)}${s?`.${ks(s,3)}`:""}`:""}Z`:""}`}function E_e(t){return t<0?`-${ks(-t,6)}`:t>9999?`+${ks(t,6)}`:ks(t,4)}function ks(t,e){return`${t}`.padStart(e,"0")}const T_e=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function gF(t,e){return T_e.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Hc=1e3,cl=Hc*60,ul=cl*60,io=ul*24,Lr=io*7,El=io*30,Oo=io*365,Ev=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Hc],["5 seconds",5*Hc],["15 seconds",15*Hc],["30 seconds",30*Hc],["minute",cl],["5 minutes",5*cl],["15 minutes",15*cl],["30 minutes",30*cl],["hour",ul],["3 hours",3*ul],["6 hours",6*ul],["12 hours",12*ul],["day",io],["2 days",2*io],["week",Lr],["2 weeks",2*Lr],["month",El],["3 months",3*El],["6 months",6*El],["year",Oo],["2 years",2*Oo],["5 years",5*Oo],["10 years",10*Oo],["20 years",20*Oo],["50 years",50*Oo],["100 years",100*Oo]],ME=new Map([["second",Hc],["minute",cl],["hour",ul],["day",io],["monday",Lr],["tuesday",Lr],["wednesday",Lr],["thursday",Lr],["friday",Lr],["saturday",Lr],["sunday",Lr],["week",Lr],["month",El],["year",Oo]]),mF=new Map([["second",Ur],["minute",T_],["hour",S_],["day",Gl],["monday",Kf],["tuesday",MO],["wednesday",AO],["thursday",Fl],["friday",RO],["saturday",IO],["sunday",xu],["week",xu],["month",zd],["year",Tr]]),pF=new Map([["second",Ur],["minute",Fd],["hour",Pd],["day",M_],["monday",Jf],["tuesday",kO],["wednesday",$O],["thursday",Pl],["friday",OO],["saturday",LO],["sunday",Eu],["week",Eu],["month",Wd],["year",Sr]]),hg=Symbol("intervalDuration"),py=Symbol("intervalType");for(const[t,e]of mF)e[hg]=ME.get(t),e[py]="time";for(const[t,e]of pF)e[hg]=ME.get(t),e[py]="utc";const S_e=[["year",Sr,"utc"],["year",Tr,"time"],["month",Wd,"utc"],["month",zd,"time"],["day",M_,"utc",6*El],["day",Gl,"time",6*El],["hour",Pd,"utc",3*io],["minute",Fd,"utc",6*ul],["second",Ur,"utc",30*cl]];function _F(t,e,n){let i=`${t}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let o=e.get(i);if(!o)throw new Error(`unknown interval: ${t}`);if(r>1){if(!o.every)throw new Error(`non-periodic interval: ${i}`);o=o.every(r),o[hg]=ME.get(i)*r,o[py]=n}return o}function yF(t){return _F(t,mF,"time")}function AE(t){return _F(t,pF,"utc")}function rI(t,e){if(!(e>1))return;const n=t[hg];if(!Ev.some(([,r])=>r===n)||n%io===0&&io<n&&n<El)return;const[i]=Ev[l_(([,r])=>Math.log(r)).center(Ev,Math.log(n*e))];return(t[py]==="time"?yF:AE)(i)}function sI(t,e,n){const i=e==="time"?j2:Hd;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=C_e(n);switch(t){case"millisecond":return xc(i(".%L"),i(":%M:%S"),r);case"second":return xc(i(":%S"),i("%-I:%M"),r);case"minute":return xc(i("%-I:%M"),i("%p"),r);case"hour":return xc(i("%-I %p"),i("%b %-d"),r);case"day":return xc(i("%-d"),i("%b"),r);case"month":return xc(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function C_e(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function M_e(t,e){const n=Kt(PW(t,(i,r)=>Math.abs(r-i)));if(n<1e3)return sI("millisecond","utc",e);for(const[i,r,s,o]of S_e){if(n>o||i==="hour"&&!n)break;if(t.every(a=>r.floor(a)>=a))return sI(i,s,e)}}function xc(t,e,n){return(i,r,s)=>{const o=t(i,r),a=e(i,r),l=r-Hu(s);return r!==l&&s[l]!==void 0&&a===e(s[l],l)?o:n(o,a)}}const zu=Object.getPrototypeOf(Uint8Array),A_e=Object.prototype.toString,vF=Symbol("reindex");function Ge(t,e,n){const i=typeof e;return i==="string"?oI(t,bF(e),n):i==="function"?oI(t,e,n):i==="number"||e instanceof Date||i==="boolean"?vt(t,Ci(e),n):typeof(e==null?void 0:e.transform)=="function"?aI(e.transform(t),n):R_e(aI(e,n),t==null?void 0:t[vF])}function R_e(t,e){return e?yy(t,e):t}function oI(t,e,n){return vt(t,(n==null?void 0:n.prototype)instanceof zu?I_e(e):e,n)}function aI(t,e){return e===void 0?hi(t):t instanceof e?t:e.prototype instanceof zu&&!(t instanceof zu)?e.from(t,kE):e.from(t)}function I_e(t){return(e,n)=>kE(t(e,n))}const kf=[null],bF=t=>e=>e[t],di={transform:ho},Re={transform:t=>t},RE=()=>1,k_e=()=>!0,Cn=t=>t==null?t:`${t}`,je=t=>t==null?t:+t,fg=t=>t?t[0]:void 0,pd=t=>t?t[1]:void 0,$_e=t=>t?t[2]:void 0,Ci=t=>()=>t;function IE(t){const e=+`${t}`.slice(1)/100;return(n,i)=>oa(n,e,i)}function oi(t){return t instanceof zu?t:vt(t,kE,Float64Array)}function kE(t){return t==null?NaN:Number(t)}function O_e(t){return vt(t,wF)}function wF(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?gF(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function ui(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:gg(t)?[void 0,t]:[t,void 0]}function Vt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function xF(t,e,n){if(t!=null)return Mi(t,e,n)}function Mi(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function hi(t){return t==null||t instanceof Array||t instanceof zu?t:Array.from(t)}function vt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function _d(t,e=Array){return t instanceof e?t.slice():e.from(t)}function EF({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function TF({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function _y(t){return EF(t)||TF(t)||t.interval!==void 0}function nr(t){return(t==null?void 0:t.toString)===A_e}function Tl(t){return nr(t)&&(t.type!==void 0||t.domain!==void 0)}function zr(t){return nr(t)&&typeof t.transform!="function"}function _a(t){return zr(t)&&t.value===void 0&&t.channel===void 0}function SF(t,e,n,i=Re){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function kr(t,e){return t===void 0&&e===void 0?[fg,pd]:[t,e]}function $a({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=ui(e)),t===void 0&&([t]=ui(n)),t}function ho(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function yy(t,e){return vt(e,n=>t[n],t.constructor)}function $E(t){return t.length===1?(e,n)=>t(yy(n,e)):t}function Sl(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function hl(t){return t!==null&&typeof t=="object"?t.valueOf():t}function CF(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function vi(t){let e;return[{transform:()=>e,label:fo(t)},n=>e=n]}function Qn(t){return t==null?[t]:vi(t)}function fo(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function O0(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return qn(i)||qn(r)?vt(i,(s,o)=>new Date((+i[o]+ +r[o])/2)):vt(i,(s,o)=>(+i[o]+ +r[o])/2,Float64Array)},label:t.label}}function L0(t,e){const n=MF(e==null?void 0:e.interval,e==null?void 0:e.type);return n?vt(t,n):t}function MF(t,e){const n=OE(t,e);return n&&(i=>Un(i)?n.floor(i):i)}function OE(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Fi(Math.ceil(i*n),r*n).map(s=>s/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Fi(Math.ceil(i/n),r/n).map(s=>s*n)}}if(typeof t=="string")return(e==="time"?yF:AE)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function ph(t,e){if(t=OE(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function L_e(t,e){if(t=ph(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function N_e(t){return Bc(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Bc(t){return typeof(t==null?void 0:t.range)=="function"}function dg(t){return t===void 0||zr(t)?t:{value:t}}function D_e(t){return t==null?null:{transform:e=>Ge(e,t,Float64Array),label:fo(t)}}function F_e(t){if(!go(t))return!1;for(const e of t)if(e!=null)return typeof e=="object"&&"0"in e&&"1"in e}function go(t){return t&&typeof t[Symbol.iterator]=="function"}function AF(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function kt(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function qn(t){for(const e of t)if(e!=null)return e instanceof Date}function P_e(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&gF(e)}function z_e(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function Vc(t){for(const e of t)if(e!=null)return typeof e=="number"}function Tv(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const W_e=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function gg(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||W_e.has(t))}function H_e(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Ft(t){return t==null||Wu(t)}function Wu(t){return/^\s*none\s*$/i.test(t)}function B_e(t){return/^\s*round\s*$/i.test(t)}function RF(t,e){return xF(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function mg(t="middle"){return RF(t,"frameAnchor")}function Hu(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Rl(e,n)}function V_e(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const s=i[r];n===t?n={...n,[r]:s}:n[r]=s}return n}function G_e(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function LE(t){return go(t)?G_e(t):t}const Xr=Symbol("position"),mo=Symbol("color"),pg=Symbol("radius"),_g=Symbol("length"),yg=Symbol("opacity"),vy=Symbol("symbol"),IF=Symbol("projection"),At=new Map([["x",Xr],["y",Xr],["fx",Xr],["fy",Xr],["r",pg],["color",mo],["opacity",yg],["symbol",vy],["length",_g],["projection",IF]]);function U_e(t){return t===Xr||t===IF}function Y_e(t){return t===Xr||t===pg||t===_g||t===yg}const kF=Math.sqrt(3),$F=2/kF,j_e={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*$F,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},NE=new Map([["asterisk",a5],["circle",Qf],["cross",l5],["diamond",u5],["diamond2",h5],["hexagon",j_e],["plus",f5],["square",d5],["square2",g5],["star",p5],["times",b5],["triangle",_5],["triangle2",y5],["wye",v5]]);function DE(t){return t&&typeof t.draw=="function"}function q_e(t){return DE(t)?!0:typeof t!="string"?!1:NE.has(t.toLowerCase())}function FE(t){if(t==null||DE(t))return t;const e=NE.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function X_e(t){if(t==null||DE(t))return[void 0,t];if(typeof t=="string"){const e=NE.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function ds({filter:t,sort:e,reverse:n,transform:i,initializer:r,...s}={},o){if(i===void 0&&(t!=null&&(i=PE(t)),e!=null&&!_a(e)&&(i=Sv(i,WE(e))),n&&(i=Sv(i,zE))),o!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(e===null||_a(e))&&{sort:e},transform:Sv(i,o)}}function fi({filter:t,sort:e,reverse:n,initializer:i,...r}={},s){return i===void 0&&(t!=null&&(i=PE(t)),e!=null&&!_a(e)&&(i=Cv(i,WE(e))),n&&(i=Cv(i,zE))),{...r,...(e===null||_a(e))&&{sort:e},initializer:Cv(i,s)}}function Sv(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,hi(n),i,r)}}function Cv(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...s){let o,a,l,c,u,h;return{data:a=n,facets:l=i,channels:o}=t.call(this,n,i,r,...s),{data:u=a,facets:h=l,channels:c}=e.call(this,a,l,{...r,...o},...s),{data:u,facets:h,channels:{...o,...c}}}}function by(t,e){return(t.initializer!=null?fi:ds)(t,e)}function Z_e(t,e){return by(e,PE(t))}function PE(t){return(e,n)=>{const i=Ge(e,t);return{data:e,facets:n.map(r=>r.filter(s=>i[s]))}}}function K_e({sort:t,...e}={}){return{...by(e,zE),sort:_a(t)?t:null}}function zE(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function J_e({seed:t,sort:e,...n}={}){return{...by(n,LF(t==null?Math.random:G2(t))),sort:_a(e)?e:null}}function OF(t,{sort:e,...n}={}){return{...(zr(t)&&t.channel!==void 0?fi:by)(n,WE(t)),sort:_a(e)?e:null}}function WE(t){return(typeof t=="function"&&t.length!==1?Q_e:LF)(t)}function Q_e(t){return(e,n)=>{const i=(r,s)=>t(e[r],e[s]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function LF(t){let e,n;({channel:e,value:t,order:n}={...dg(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?k0:Qi),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Qi;break;case"descending":n=k0;break;default:throw new Error(`invalid order: ${n}`)}return(r,s,o)=>{let a;if(e===void 0)a=Ge(r,t);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[e],!a)return{};a=a.value}const l=(c,u)=>n(a[c],a[u]);return{data:r,facets:s.map(c=>c.slice().sort(l))}}}function HE(t,e){return wy(null,null,t,e)}function yd(t={y:"count"},e={}){const{x:n=Re}=e;if(n==null)throw new Error("missing channel: x");return wy(n,null,t,e)}function vd(t={x:"count"},e={}){const{y:n=Re}=e;if(n==null)throw new Error("missing channel: y");return wy(null,n,t,e)}function BE(t={fill:"count"},e={}){let{x:n,y:i}=e;if([n,i]=kr(n,i),n==null)throw new Error("missing channel: x");if(i==null)throw new Error("missing channel: y");return wy(n,i,t,e)}function wy(t,e,{data:n=jE,filter:i,sort:r,reverse:s,...o}={},a={}){o=VE(o,a),n=xy(n,Re),r=r==null?void 0:GE("sort",r,a),i=i==null?void 0:UE("filter",i,a);const[l,c]=Qn(t),[u,h]=Qn(e),{z:f,fill:d,stroke:g,x1:m,x2:_,y1:y,y2:p,...b}=a,[v,E]=Qn(f),[w]=ui(d),[T]=ui(g),[C,M]=Qn(w),[S,R]=Qn(T);return{..."z"in a&&{z:v||f},..."fill"in a&&{fill:C||d},..."stroke"in a&&{stroke:S||g},...ds(b,(I,N,O)=>{const k=L0(Ge(I,t),O==null?void 0:O.x),L=L0(Ge(I,e),O==null?void 0:O.y),D=Ge(I,f),H=Ge(I,w),q=Ge(I,T),G=YE(o,{z:D,fill:H,stroke:q}),J=[],W=[],ie=k&&c([]),se=L&&h([]),le=D&&E([]),ce=H&&M([]),z=q&&R([]);let U=0;for(const P of o)P.initialize(I);r&&r.initialize(I),i&&i.initialize(I);for(const P of N){const Y=[];for(const te of o)te.scope("facet",P);r&&r.scope("facet",P),i&&i.scope("facet",P);for(const[te,A]of ru(P,G))for(const[$,F]of ru(A,L))for(const[B,V]of ru(F,k))if(!(i&&!i.reduce(V))){Y.push(U++),W.push(n.reduceIndex(V,I)),k&&ie.push(B),L&&se.push($),D&&le.push(G===D?te:D[V[0]]),H&&ce.push(G===H?te:H[V[0]]),q&&z.push(G===q?te:q[V[0]]);for(const Z of o)Z.reduce(V);r&&r.reduce(V)}J.push(Y)}return NF(J,r,s),{data:W,facets:J}}),...!Qo(o,"x")&&(l?{x:l}:{x1:m,x2:_}),...!Qo(o,"y")&&(u?{y:u}:{y1:y,y2:p}),...Object.fromEntries(o.map(({name:I,output:N})=>[I,N]))}}function Qo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function VE(t,e,n=GE){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",rye]),e.href!=null&&t.href===void 0&&i.push(["href",qE]),i.filter(([,r])=>r!==void 0).map(([r,s])=>s===null?eye(r):n(r,s,e))}function GE(t,e,n,i=UE){let r;nr(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const s=i(t,e,n),[o,a]=vi(s.label);let l;return{name:t,output:r===void 0?o:{value:o,scale:r},initialize(c){s.initialize(c),l=a([])},scope(c,u){s.scope(c,u)},reduce(c,u){l.push(s.reduce(c,u))}}}function eye(t){return{name:t,initialize(){},scope(){},reduce(){}}}function UE(t,e,n,i=xy){const r=CF(t,n),s=i(e,r);let o,a;return{label:fo(s===N0?null:r,s.label),initialize(l){o=r===void 0?l:Ge(l,r),s.scope==="data"&&(a=s.reduceIndex(ho(l),o))},scope(l,c){s.scope===l&&(a=s.reduceIndex(c,o))},reduce(l,c){return s.scope==null?s.reduceIndex(l,o,c):s.reduceIndex(l,o,a,c)}}}function ru(t,e){return e?Bf(ao(t,n=>e[n]),fg):[[,t]]}function xy(t,e,n=tye){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&nr(t))return nye(t);if(typeof t=="function")return iye(t);if(/^p\d{2}$/i.test(t))return Ms(IE(t));switch(`${t}`.toLowerCase()){case"first":return qE;case"last":return sye;case"identity":return jE;case"count":return N0;case"distinct":return oye;case"sum":return e==null?N0:aye;case"proportion":return cI(e,"data");case"proportion-facet":return cI(e,"facet");case"deviation":return Ms(Ad);case"min":return Ms(fn);case"min-index":return Ms(LW);case"max":return Ms(Kt);case"max-index":return Ms(OW);case"mean":return lI(h_);case"median":return lI(Uf);case"variance":return Ms(b2);case"mode":return Ms(zk)}return n(t)}function tye(t){throw new Error(`invalid reduce: ${t}`)}function YE(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function NF(t,e,n){if(e){const i=e.output.transform(),r=(s,o)=>Qi(i[s],i[o]);t.forEach(s=>s.sort(r))}n&&t.forEach(i=>i.reverse())}function nye(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function iye(t){return{reduceIndex(e,n,i){return t(yy(n,e),i)}}}function Ms(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function lI(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return qn(n)?new Date(i):i}}}const jE={reduceIndex(t,e){return yy(e,t)}},qE={reduceIndex(t,e){return e[t[0]]}},rye={reduceIndex(t,e){const i=Bf(Zc(t,s=>s.length,s=>e[s]),pd),r=i.slice(-5).reverse();if(r.length<i.length){const s=i.slice(0,-4);r[5-1]=[` ${s.length.toLocaleString("en-US")} more`,ss(s,pd)]}return r.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},sye={reduceIndex(t,e){return e[t[t.length-1]]}},N0={label:"Frequency",reduceIndex(t){return t.length}},oye={label:"Distinct",reduceIndex(t,e){const n=new Rd;for(const i of t)n.add(e[i]);return n.size}},aye=Ms(ss);function cI(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>ss(n,s=>i[s])/r}}function bd(t,{scale:e,type:n,value:i,filter:r,hint:s,label:o=fo(i)},a){return s===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(s=i.hint),FF(a,{scale:e,type:n,value:Ge(t,i),label:o,filter:r,hint:s})}function DF(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,bd(e,i,n)]))}function XE(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:s}])=>{const o=r==null?null:e[r];return[i,o==null?s:vt(s,o)]}));return n.channels=t,n}function FF(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Tv(i,gg)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Tv(i,H_e)?null:"opacity";break;case"symbol":n!==!0&&Tv(i,q_e)?(e.scale=null,e.value=vt(i,FE)):e.scale="symbol";break;default:e.scale=At.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!At.has(n))throw new Error(`unknown scale: ${n}`);return e}function lye(t,e,n,i,r){const{order:s,reverse:o,reduce:a=!0,limit:l}=r;for(const c in r){if(!At.has(c))continue;let{value:u,order:h=s,reverse:f=o,reduce:d=a,limit:g=l}=dg(r[c]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),h=h===void 0?m!==(u==="width"||u==="height")?zF:PF:hye(h),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?uye(e,i[c]):cye(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const y=_.value,[p=0,b=1/0]=go(g)?g:g<0?[g]:[0,g];if(u==null)_.domain=()=>{let v=Array.from(new Rd(y));return f&&(v=v.reverse()),(p!==0||b!==1/0)&&(v=v.slice(p,b)),v};else{const v=u==="data"?t:u==="height"?uI(n,"y1","y2"):u==="width"?uI(n,"x1","x2"):Rw(n,u,u==="y"?"y2":u==="x"?"x2":void 0),E=xy(d===!0?"max":d,v);_.domain=()=>{let w=AW(ho(y),T=>E.reduceIndex(T,v),T=>y[T]);return h&&w.sort(h),f&&w.reverse(),(p!==0||b!==1/0)&&(w=w.slice(p,b)),w.map(fg)}}}}function cye(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function uye(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let s=0;s<n.length;++s){const o=i[n[s][0]];for(const a of t[s])r[a]=o}return e}function uI(t,e,n){const i=Rw(t,e),r=Rw(t,n);return vt(r,(s,o)=>Math.abs(s-i[o]),Float64Array)}function Rw(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function hye(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return PF;case"descending":return zF}throw new Error(`invalid order: ${t}`)}function PF([t,e],[n,i]){return Qi(e,i)||Qi(t,n)}function zF([t,e],[n,i]){return k0(e,i)||Qi(t,n)}function Iw(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function ZE(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,s)=>r!==i[s]))&&(n=i,e=t(...i)),e)}const fye=ZE(t=>new Intl.NumberFormat(t)),dye=ZE((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}})),gye=ZE((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function mye(t="en-US"){const e=fye(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function pye(t="en-US",e="short"){const n=dye(t,e);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2e3,+i)))?n.format(i):void 0}function _ye(t="en-US",e="short"){const n=gye(t,e);return i=>i!=null&&!isNaN(i=+new Date(Date.UTC(2001,0,+i)))?n.format(i):void 0}function WF(t){return x_e(t,"Invalid Date")}function yye(t="en-US"){const e=mye(t);return n=>(n instanceof Date?WF:typeof n=="number"?e:Cn)(n)}const Bl=yye();let kw=0,$w;function vye(){const t=kw;return kw=0,$w=void 0,t}function Xs(t){t!==$w&&($w=t,console.warn(t),++kw)}const yn=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let bye=0;function hI(){return`plot-clip-${++bye}`}function HF(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:h,strokeLinejoin:f,strokeLinecap:d,strokeMiterlimit:g,strokeDasharray:m,strokeDashoffset:_,opacity:y,mixBlendMode:p,imageFilter:b,paintOrder:v,pointerEvents:E,shapeRendering:w,channels:T},{ariaLabel:C,fill:M="currentColor",fillOpacity:S,stroke:R="none",strokeOpacity:I,strokeWidth:N,strokeLinecap:O,strokeLinejoin:k,strokeMiterlimit:L,paintOrder:D}){M===null&&(a=null,l=null),R===null&&(c=null,h=null),Ft(M)?!Ft(R)&&(!Ft(a)||T!=null&&T.fill)&&(R="none"):Ft(R)&&(!Ft(c)||T!=null&&T.stroke)&&(M="none");const[H,q]=ui(a,M),[G,J]=Vt(l,S),[W,ie]=ui(c,R),[se,le]=Vt(h,I),[ce,z]=Vt(y);Wu(ie)||(u===void 0&&(u=N),d===void 0&&(d=O),f===void 0&&(f=k),g===void 0&&!B_e(f)&&(g=L),!Wu(q)&&v===void 0&&(v=D));const[U,P]=Vt(u);return M!==null&&(t.fill=Nt(q,"currentColor"),t.fillOpacity=Xh(J,1)),R!==null&&(t.stroke=Nt(ie,"none"),t.strokeWidth=Xh(P,1),t.strokeOpacity=Xh(le,1),t.strokeLinejoin=Nt(f,"miter"),t.strokeLinecap=Nt(d,"butt"),t.strokeMiterlimit=Xh(g,4),t.strokeDasharray=Nt(m,"none"),t.strokeDashoffset=Nt(_,"0")),t.target=Cn(o),t.ariaLabel=Cn(C),t.ariaDescription=Cn(r),t.ariaHidden=Cn(s),t.opacity=Xh(z,1),t.mixBlendMode=Nt(p,"normal"),t.imageFilter=Nt(b,"none"),t.paintOrder=Nt(v,"normal"),t.pointerEvents=Nt(E,"auto"),t.shapeRendering=Nt(w,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:H,scale:"auto",optional:!0},fillOpacity:{value:G,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:se,scale:"auto",optional:!0},strokeWidth:{value:U,optional:!0},opacity:{value:ce,scale:"auto",optional:!0}}}function wye(t,e){e&&t.filter(n=>CE(e[n])).append("title").call(Eye,e)}function xye(t,e){e&&t.filter(([n])=>CE(e[n])).append("title").call(Tye,e)}function Eye(t,e){e&&t.text(n=>Bl(e[n]))}function Tye(t,e){e&&t.text(([n])=>Bl(e[n]))}function rn(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:h}){i&&Te(t,"aria-label",f=>i[f]),s&&Te(t,"fill",f=>s[f]),o&&Te(t,"fill-opacity",f=>o[f]),a&&Te(t,"stroke",f=>a[f]),l&&Te(t,"stroke-opacity",f=>l[f]),c&&Te(t,"stroke-width",f=>c[f]),u&&Te(t,"opacity",f=>u[f]),h&&GF(t,f=>h[f],e),n||wye(t,r)}function D0(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:c,opacity:u,href:h}){i&&Te(t,"aria-label",([f])=>i[f]),s&&Te(t,"fill",([f])=>s[f]),o&&Te(t,"fill-opacity",([f])=>o[f]),a&&Te(t,"stroke",([f])=>a[f]),l&&Te(t,"stroke-opacity",([f])=>l[f]),c&&Te(t,"stroke-width",([f])=>c[f]),u&&Te(t,"opacity",([f])=>u[f]),h&&GF(t,([f])=>h[f],e),n||xye(t,r)}function Sye({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:o,opacity:a,href:l},{tip:c}){return[t,c?void 0:e,n,i,r,s,o,a,l].filter(u=>u!==void 0)}function KE(t,e,n){const i=ao(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Xs("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*BF(t,e,n,i){const{z:r}=n,{z:s}=i,o=Sye(i,n),a=[...e,...o];for(const l of s?KE(t,s,r):[t]){let c,u;e:for(const h of l){for(const f of a)if(!Un(f[h])){u&&u.push(-1);continue e}if(c===void 0){u&&(yield u),c=o.map(f=>hl(f[h])),u=[h];continue}u.push(h);for(let f=0;f<o.length;++f)if(hl(o[f][h])!==c[f]){yield u,c=o.map(g=>hl(g[h])),u=[h];continue e}}u&&(yield u)}}function VF(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Mi(t,"clip",["frame","sphere"])),t}function Cye(t,e,n,i){let r;const{clip:s=i.clip}=e;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:c,marginTop:u,marginBottom:h}=n,f=hI();r=`url(#${f})`,t=rt("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",f).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",a-u-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:o}=i;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=hI();r=`url(#${a})`,t.append("clipPath").attr("id",a).append("path").attr("d",Ea(o)({type:"Sphere"}));break}}Te(t,"aria-label",e.ariaLabel),Te(t,"aria-description",e.ariaDescription),Te(t,"aria-hidden",e.ariaHidden),Te(t,"clip-path",r)}function Mt(t,e,n,i){Cye(t,e,n,i),Te(t,"fill",e.fill),Te(t,"fill-opacity",e.fillOpacity),Te(t,"stroke",e.stroke),Te(t,"stroke-width",e.strokeWidth),Te(t,"stroke-opacity",e.strokeOpacity),Te(t,"stroke-linejoin",e.strokeLinejoin),Te(t,"stroke-linecap",e.strokeLinecap),Te(t,"stroke-miterlimit",e.strokeMiterlimit),Te(t,"stroke-dasharray",e.strokeDasharray),Te(t,"stroke-dashoffset",e.strokeDashoffset),Te(t,"shape-rendering",e.shapeRendering),Te(t,"filter",e.imageFilter),Te(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;Te(t,"pointer-events",r)}function wt(t,e){Mye(t,"mix-blend-mode",e.mixBlendMode),Te(t,"opacity",e.opacity)}function GF(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const s=this.ownerDocument.createElementNS(kl.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(kl.xlink,"href",r),n!=null&&s.setAttribute("target",n),this.parentNode.insertBefore(s,this).appendChild(this)}})}function Te(t,e,n){n!=null&&t.attr(e,n)}function Mye(t,e,n){n!=null&&t.style(e,n)}function mt(t,e,{x:n,y:i},r=yn,s=yn){r+=e.dx,s+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&t.attr("transform",`translate(${r},${s})`)}function Nt(t,e){if((t=Cn(t))!==e)return t}function Xh(t,e){if((t=je(t))!==e)return t}const Aye=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function JE(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!Aye.test(t))throw new Error(`invalid class name: ${t}`);return t}function QE(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function gs({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:o}){return[/left$/.test(t)?o:/right$/.test(t)?e-r:(o+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-s:(i+n-s)/2]}function Ey(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:VF(n)}}function rt(t,{document:e}){return ai(d_(t).call(e.documentElement))}const UF=Math.PI,xs=2*UF,fI=.618;function Rye({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:s=e}={},o){if(t==null)return;if(typeof t.stream=="function")return t;let a,l,c="frame";if(nr(t)){let E;if({type:t,domain:l,inset:E,insetTop:n=E!==void 0?E:n,insetRight:i=E!==void 0?E:i,insetBottom:r=E!==void 0?E:r,insetLeft:s=E!==void 0?E:s,clip:c=c,...a}=t,t==null)return}typeof t!="function"&&({type:t}=YF(t));const{width:u,height:h,marginLeft:f,marginRight:d,marginTop:g,marginBottom:m}=o,_=u-f-d-s-i,y=h-g-m-n-r;if(t=t==null?void 0:t({width:_,height:y,clip:c,...a}),t==null)return;c=Iye(c,f,g,u-d,h-m);let p=f+s,b=g+n,v;if(l!=null){const[[E,w],[T,C]]=Ea(t).bounds(l),M=Math.min(_/(T-E),y/(C-w));M>0?(p-=(M*(E+T)-_)/2,b-=(M*(w+C)-y)/2,v=Bp({point(S,R){this.stream.point(S*M+p,R*M+b)}})):Xs("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=p===0&&b===0?jF():Bp({point(E,w){this.stream.point(E+p,w+b)}})),{stream:E=>t.stream(v.stream(c(E)))}}function YF(t){switch(`${t}`.toLowerCase()){case"albers-usa":return ur(QU,.7463,.4673);case"albers":return Cm(tO,.7463,.4673);case"azimuthal-equal-area":return ur(eY,4,4);case"azimuthal-equidistant":return ur(tY,xs,xs);case"conic-conformal":return Cm(rY,xs,xs);case"conic-equal-area":return Cm(Vp,6.1702,2.9781);case"conic-equidistant":return Cm(aY,7.312,3.6282);case"equal-earth":return ur(cY,5.4133,2.6347);case"equirectangular":return ur(sY,xs,UF);case"gnomonic":return ur(uY,3.4641,3.4641);case"identity":return{type:jF};case"reflect-y":return{type:kye};case"mercator":return ur(nY,xs,xs);case"orthographic":return ur(hY,2,2);case"stereographic":return ur(fY,2,2);case"transverse-mercator":return ur(dY,xs,xs);default:throw new Error(`unknown projection type: ${t}`)}}function Iye(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return s=>s;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return z$(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function ur(t,e,n){return{type:({width:i,height:r,rotate:s,precision:o=.15,clip:a})=>{var c,u,h;const l=t();return o!=null&&((c=l.precision)==null||c.call(l,o)),s!=null&&((u=l.rotate)==null||u.call(l,s)),typeof a=="number"&&((h=l.clipAngle)==null||h.call(l,a)),l.scale(Math.min(i/e,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/e}}function Cm(t,e,n){const{type:i,aspectRatio:r}=ur(t,e,n);return{type:s=>{const{parallels:o,domain:a,width:l,height:c}=s,u=i(s);return o!=null&&(u.parallels(o),a===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:r}}const jF=Ci({stream:t=>t}),kye=Ci(Bp({point(t,e){this.stream.point(t,-e)}}));function qF(t,e,n,i){const r=n[t],s=n[e],o=r.length,a=n[t]=new Float64Array(o).fill(NaN),l=n[e]=new Float64Array(o).fill(NaN);let c;const u=i.stream({point(h,f){a[c]=h,l[c]=f}});for(c=0;c<o;++c)u.point(r[c],s[c])}function $ye({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(nr(t)&&(t=t.type),t!=null)}function Oye(t){if(typeof(t==null?void 0:t.stream)=="function")return fI;if(nr(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=YF(t);if(e)return e}return fI}}function Ty(t,e,{projection:n}){const{x:i,y:r}=t;let s={};return i&&(s.x=i),r&&(s.y=r),s=XE(s,e),n&&(i==null?void 0:i.scale)==="x"&&(r==null?void 0:r.scale)==="y"&&qF("x","y",s,n),i&&(s.x=oi(s.x)),r&&(s.y=oi(s.y)),s}function Lye(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},s={point(o,a){e.push(o),n.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of t.value)Vo(o,s);return[i,r]}const XF=new Map([["accent",bq],["category10",vq],["dark2",wq],["paired",xq],["pastel1",Eq],["pastel2",Tq],["set1",Sq],["set2",Cq],["set3",Mq],["tableau10",Aq]]);function Nye(t){return t!=null&&XF.has(`${t}`.toLowerCase())}const dI=new Map([...XF,["brbg",Es(jO,qO)],["prgn",Es(XO,ZO)],["piyg",Es(KO,JO)],["puor",Es(QO,eL)],["rdbu",Es(Yb,qp)],["rdgy",Es(tL,nL)],["rdylbu",Es(jb,Xp)],["rdylgn",Es(iL,rL)],["spectral",Es(sL,oL)],["burd",gI(Yb,qp)],["buylrd",gI(jb,Xp)],["blues",sn(kL,$L)],["greens",sn(OL,LL)],["greys",sn(NL,DL)],["oranges",sn(HL,BL)],["purples",sn(FL,PL)],["reds",sn(zL,WL)],["turbo",Ts(XL)],["viridis",Ts(ZL)],["magma",Ts(KL)],["inferno",Ts(JL)],["plasma",Ts(QL)],["cividis",Ts(VL)],["cubehelix",Ts(GL)],["warm",Ts(UL)],["cool",Ts(YL)],["bugn",sn(aL,lL)],["bupu",sn(cL,uL)],["gnbu",sn(hL,fL)],["orrd",sn(dL,gL)],["pubu",sn(_L,yL)],["pubugn",sn(mL,pL)],["purd",sn(vL,bL)],["rdpu",sn(wL,xL)],["ylgn",sn(SL,CL)],["ylgnbu",sn(EL,TL)],["ylorbr",sn(ML,AL)],["ylorrd",sn(RL,IL)],["rainbow",mI(jL)],["sinebow",mI(qL)]]);function sn(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?xr(e,n):t[n])}function Es(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?xr(e,n):t[n])}function gI(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?xr(i=>e(1-i),n):t[n].slice().reverse())}function Ts(t){return({length:e})=>xr(t,Math.max(2,Math.floor(e)))}function mI(t){return({length:e})=>xr(t,Math.floor(e)+1).slice(0,-1)}function ZF(t){const e=`${t}`.toLowerCase();if(!dI.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return dI.get(e)}function Sy(t,e){const n=ZF(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function Dye(t,e="greys"){const n=new Set,[i,r]=Sy(e,2);for(const s of t)if(s!=null)if(s===!0)n.add(r);else if(s===!1)n.add(i);else return;return[...n]}const pI=new Map([["brbg",qO],["prgn",ZO],["piyg",JO],["puor",eL],["rdbu",qp],["rdgy",nL],["rdylbu",Xp],["rdylgn",rL],["spectral",oL],["burd",t=>qp(1-t)],["buylrd",t=>Xp(1-t)],["blues",$L],["greens",LL],["greys",DL],["purples",PL],["reds",WL],["oranges",BL],["turbo",XL],["viridis",ZL],["magma",KL],["inferno",JL],["plasma",QL],["cividis",VL],["cubehelix",GL],["warm",UL],["cool",YL],["bugn",lL],["bupu",uL],["gnbu",fL],["orrd",gL],["pubugn",pL],["pubu",yL],["purd",bL],["rdpu",xL],["ylgnbu",TL],["ylgn",CL],["ylorbr",AL],["ylorrd",IL],["rainbow",jL],["sinebow",qL]]);function eT(t){const e=`${t}`.toLowerCase();if(!pI.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return pI.get(e)}const Fye=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Pye(t){return t!=null&&Fye.has(`${t}`.toLowerCase())}const KF=t=>e=>t(1-e),Mv=[0,1],_I=new Map([["number",xn],["rgb",Ll],["hsl",sV],["hcl",lV],["lab",oV]]);function JF(t){const e=`${t}`.toLowerCase();if(!_I.has(e))throw new Error(`unknown interpolator: ${e}`);return _I.get(e)}function vg(t,e,n,{type:i,nice:r,clamp:s,zero:o,domain:a=eP(t,n),unknown:l,round:c,scheme:u,interval:h,range:f=At.get(t)===pg?Xye(n,a):At.get(t)===_g?Zye(n,a):At.get(t)===yg?Mv:void 0,interpolate:d=At.get(t)===mo?u==null&&f!==void 0?Ll:eT(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):c?p_:xn,reverse:g}){if(h=ph(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=JF(d)),g=!!g,f!==void 0){const m=(a=hi(a)).length,_=(f=hi(f)).length;if(m!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=__(d,f),f=void 0}}if(d.length===1?(g&&(d=KF(d),g=!1),f===void 0&&(f=Float64Array.from(a,(m,_)=>_/(a.length-1)),f.length===2&&(f=Mv)),e.interpolate((f===Mv?Ci:nT)(d))):e.interpolate(d),o){const[m,_]=St(a);(m>0||_<0)&&(a=_d(a),Hu(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return g&&(a=mp(a)),e.domain(a).unknown(l),r&&(e.nice(zye(r,i)),a=e.domain()),f!==void 0&&e.range(f),s&&e.clamp(s),{type:i,domain:a,range:f,scale:e,interpolate:d,interval:h}}function zye(t,e){return t===!0?void 0:typeof t=="number"?t:L_e(t,e)}function Wye(t,e,n){return vg(t,Vs(),e,n)}function Hye(t,e,n){return QF(t,e,{...n,exponent:.5})}function QF(t,e,{exponent:n=1,...i}){return vg(t,TO().exponent(n),e,{...i,type:"pow"})}function Bye(t,e,{base:n=10,domain:i=Kye(e),...r}){return vg(t,bO().base(n),e,{...r,domain:i})}function Vye(t,e,{constant:n=1,...i}){return vg(t,xO().constant(n),e,i)}function Gye(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:s="rdylbu",domain:o=Jye(e),unknown:a,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?xr(l,r):At.get(t)===mo?Sy(s,r):void 0),o.length>0&&(o=SO(o,n===void 0?{length:r}:n).quantiles()),tT(t,e,{domain:o,range:n,reverse:c,unknown:a})}function Uye(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:s=eP(t,e),unknown:o,interpolate:a,reverse:l}){const[c,u]=St(s);let h;return n===void 0?(h=sa(c,u,i),h[0]<=c&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),i=h.length+1,n=a!==void 0?xr(a,i):At.get(t)===mo?Sy(r,i):void 0):(h=xr(xn(c,u),i+1).slice(1,-1),c instanceof Date&&(h=h.map(f=>new Date(f)))),Hu(hi(s))<0&&h.reverse(),tT(t,e,{domain:h,range:n,reverse:l,unknown:o})}function tT(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:o=s!==void 0?xr(s,n.length+1):At.get(t)===mo?Sy(r,n.length+1):void 0,reverse:a}){n=hi(n);const l=Hu(n);if(!isNaN(l)&&!Yye(n,l))throw new Error(`the ${t} scale has a non-monotonic domain`);return a&&(o=mp(o)),{type:"threshold",scale:CO(l<0?mp(n):n,o===void 0?[]:o).unknown(i),domain:n,range:o}}function Yye(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const s=Rl(r,r=t[n]);if(s!==0&&s!==e)return!1}return!0}function jye(t){return{type:"identity",scale:Y_e(At.get(t))?_O():e=>e}}function wd(t,e=$0){return t.length?[fn(t,({value:n})=>n===void 0?n:fn(n,e)),Kt(t,({value:n})=>n===void 0?n:Kt(n,e))]:[0,1]}function eP(t,e){const n=At.get(t);return(n===pg||n===yg||n===_g?qye:wd)(e)}function qye(t){return[0,t.length?Kt(t,({value:e})=>e===void 0?e:Kt(e,$0)):1]}function Xye(t,e){const n=t.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const i=oa(t,.5,({value:o})=>o===void 0?NaN:oa(o,.25,qs)),r=e.map(o=>3*Math.sqrt(o/i)),s=30/Kt(r);return s<1?r.map(o=>o*s):r}function Zye(t,e){const n=Uf(t,({value:s})=>s===void 0?NaN:Uf(s,Math.abs)),i=e.map(s=>12*s/n),r=60/Kt(i);return r<1?i.map(s=>s*r):i}function Kye(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return wd(t,qs);if(n<0)return wd(t,my)}return[1,10]}function Jye(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function nT(t){return(e,n)=>i=>t(e+i*(n-e))}function Cy(t,e,n,i,{type:r,nice:s,clamp:o,domain:a=wd(i),unknown:l,pivot:c=0,scheme:u,range:h,symmetric:f=!0,interpolate:d=At.get(t)===mo?u==null&&h!==void 0?Ll:eT(u!==void 0?u:"rdbu"):xn,reverse:g}){c=+c,a=hi(a);let[m,_]=a;if(a.length>2&&Xs(`Warning: the diverging ${t} scale domain contains extra elements.`),Rl(m,_)<0&&([m,_]=[_,m],g=!g),m=Math.min(m,c),_=Math.max(_,c),typeof d!="function"&&(d=JF(d)),h!==void 0&&(d=d.length===1?nT(d)(...h):__(d,h)),g&&(d=KF(d)),f){const y=n.apply(c),p=y-n.apply(m),b=n.apply(_)-y;p<b?m=n.invert(y-b):p>b&&(_=n.invert(y+p))}return e.domain([m,c,_]).unknown(l).interpolator(d),o&&e.clamp(o),s&&e.nice(s),{type:r,domain:[m,_],pivot:c,interpolate:d,scale:e}}function Qye(t,e,n){return Cy(t,VO(),i1e,e,n)}function e1e(t,e,n){return tP(t,e,{...n,exponent:.5})}function tP(t,e,{exponent:n=1,...i}){return Cy(t,YO().exponent(n=+n),o1e(n),e,{...i,type:"diverging-pow"})}function t1e(t,e,{base:n=10,pivot:i=1,domain:r=wd(e,i<0?my:qs),...s}){return Cy(t,GO().base(n=+n),r1e,e,{domain:r,pivot:i,...s})}function n1e(t,e,{constant:n=1,...i}){return Cy(t,UO().constant(n=+n),a1e(n),e,i)}const i1e={apply(t){return t},invert(t){return t}},r1e={apply:Math.log,invert:Math.exp},s1e={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function o1e(t){return t===.5?s1e:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function a1e(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function nP(t,e,n,i){return vg(t,e,n,i)}function l1e(t,e,n){return nP(t,HO(),e,n)}function c1e(t,e,n){return nP(t,_q(),e,n)}const bg=Symbol("ordinal");function iP(t,e,n,{type:i,interval:r,domain:s,range:o,reverse:a,hint:l}){return r=ph(r,i),s===void 0&&(s=sP(n,r,t)),(i==="categorical"||i===bg)&&(i="ordinal"),a&&(s=mp(s)),s=e.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),e.range(o)),{type:i,domain:s,range:o,scale:e,hint:l,interval:r}}function u1e(t,e,{type:n,interval:i,domain:r,range:s,scheme:o,unknown:a,...l}){i=ph(i,n),r===void 0&&(r=sP(e,i,t));let c;if(At.get(t)===vy)c=d1e(e),s=s===void 0?g1e(c):vt(s,FE);else if(At.get(t)===mo&&(s===void 0&&(n==="ordinal"||n===bg)&&(s=Dye(r,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=n==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const u=eT(o),h=s[0],f=s[1]-s[0];s=({length:d})=>xr(g=>u(h+f*g),d)}else s=ZF(o);if(a===Vb)throw new Error(`implicit unknown on ${t} scale is not supported`);return iP(t,U2().unknown(a),e,{...l,type:n,domain:r,range:s,hint:c})}function h1e(t,e,{align:n=.5,padding:i=.5,...r}){return rP(JY().align(n).padding(i),e,r,t)}function f1e(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=t==="fx"||t==="fy"?0:i,...o}){return rP(x_().align(n).paddingInner(r).paddingOuter(s),e,o,t)}function rP(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=iP(i,t,e,n),t.round=r,t}function sP(t,e,n){const i=new Rd;for(const{value:r,domain:s}of t){if(s!==void 0)return s();if(r!==void 0)for(const o of r)i.add(o)}if(e!==void 0){const[r,s]=St(i).map(e.floor,e);return e.range(r,e.offset(s))}if(i.size>1e4&&At.get(n)===Xr)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Bf(i,Qi)}function yI(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function d1e(t){return{fill:yI(t,"fill"),stroke:yI(t,"stroke")}}function g1e(t){return Ft(t.fill)?Hq:Wq}function Ow(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:o=n,round:a,nice:l,clamp:c,zero:u,align:h,padding:f,projection:d,facet:{label:g=e}={},...m}={}){const _={};for(const[y,p]of t){const b=m[y],v=cP(y,p,{round:At.get(y)===Xr?a:void 0,nice:l,clamp:c,zero:u,align:h,padding:f,projection:d,...b});if(v){let{label:E=y==="fx"||y==="fy"?g:e,percent:w,transform:T,inset:C,insetTop:M=C!==void 0?C:y==="y"?i:0,insetRight:S=C!==void 0?C:y==="x"?r:0,insetBottom:R=C!==void 0?C:y==="y"?s:0,insetLeft:I=C!==void 0?C:y==="x"?o:0}=b||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");v.percent=!!w,v.label=E===void 0?p1e(p,v):E,v.transform=T,y==="x"||y==="fx"?(v.insetLeft=+I,v.insetRight=+S):(y==="y"||y==="fy")&&(v.insetTop=+M,v.insetBottom=+R),_[y]=v}}return _}function vI(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:s,type:o,interval:a,label:l}=r;e[i]=hP(r),n[i]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return n}function m1e(t,e){const{x:n,y:i,fx:r,fy:s}=t,o=r||s?iT(e):e;r&&bI(r,o),s&&wI(s,o);const a=r||s?oP(t,e):e;n&&bI(n,a),i&&wI(i,a)}function p1e(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!ic(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function iT(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u}}=t;return{marginTop:Math.max(e,a),marginRight:Math.max(n,l),marginBottom:Math.max(i,c),marginLeft:Math.max(r,u),width:s,height:o}}function oP({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=iT(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:t?t.scale.bandwidth()+o+r:a,height:e?e.scale.bandwidth()+i+s:l,facet:{width:a,height:l}}}function bI(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:s=0,marginRight:o=0}=e,a=s+n,l=r-o-i;t.range=[a,Math.max(a,l)],ic(t)||(t.range=lP(t)),t.scale.range(t.range)}aP(t)}function wI(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:s=0,marginBottom:o=0}=e,a=s+n,l=r-o-i;t.range=[Math.max(a,l),a],ic(t)?t.range.reverse():t.range=lP(t),t.scale.range(t.range)}aP(t)}function aP(t){t.round===void 0&&v1e(t)&&_1e(t)<=30&&t.scale.round(!0)}function _1e({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),o=e-r,a=Math.abs(i-n)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function lP(t){const e=t.scale.domain().length+uP(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,s)=>n+s/(e-1)*(i-n))}function Lw(t,e,n){return cP(t,n===void 0?void 0:[{hint:n}],{...e})}function cP(t,e=[],n={}){const i=y1e(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&ic({type:i})){const r=e.map(({value:s})=>s).filter(s=>s!==void 0);r.some(qn)?Xs(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Ec(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Ec(i)}".`):r.some(P_e)?Xs(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Ec(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Ec(i)}".`):r.some(z_e)&&Xs(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Ec(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Ec(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Mm(e,n,oi);break;case"identity":switch(At.get(t)){case Xr:n=Mm(e,n,oi);break;case vy:n=Mm(e,n,b1e);break}break;case"utc":case"time":n=Mm(e,n,O_e);break}switch(i){case"diverging":return Qye(t,e,n);case"diverging-sqrt":return e1e(t,e,n);case"diverging-pow":return tP(t,e,n);case"diverging-log":return t1e(t,e,n);case"diverging-symlog":return n1e(t,e,n);case"categorical":case"ordinal":case bg:return u1e(t,e,n);case"cyclical":case"sequential":case"linear":return Wye(t,e,n);case"sqrt":return Hye(t,e,n);case"threshold":return tT(t,e,n);case"quantile":return Gye(t,e,n);case"quantize":return Uye(t,e,n);case"pow":return QF(t,e,n);case"log":return Bye(t,e,n);case"symlog":return Vye(t,e,n);case"utc":return c1e(t,e,n);case"time":return l1e(t,e,n);case"point":return h1e(t,e,n);case"band":return f1e(t,e,n);case"identity":return jye(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Ec(t){return typeof t=="symbol"?t.description:t}const xI={toString:()=>"projection"};function y1e(t,e,{type:n,domain:i,range:r,scheme:s,pivot:o,projection:a}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&a!=null&&(n=xI);for(const{type:c}of e)if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}if(n===xI)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:c})=>c!==void 0))return;const l=At.get(t);if(l===pg)return"sqrt";if(l===yg||l===_g)return"linear";if(l===vy)return"ordinal";if((i||r||[]).length>2)return Av(l);if(i!==void 0){if(kt(i))return Av(l);if(qn(i))return"utc"}else{const c=e.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(kt))return Av(l);if(c.some(qn))return"utc"}if(l===mo){if(o!=null||Pye(s))return"diverging";if(Nye(s))return"categorical"}return"linear"}function Av(t){switch(t){case Xr:return"point";case mo:return bg;default:return"ordinal"}}function ic({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===bg}function uP({type:t}){return t==="threshold"}function v1e({type:t}){return t==="point"||t==="band"}function Bi(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Mm(t,{domain:e,...n},i){for(const r of t)r.value!==void 0&&(r.value=i(r.value));return{domain:e===void 0?e:i(e),...n}}function b1e(t){return vt(t,FE)}function w1e(t={}){let e;for(const n in t)if(At.has(n)&&Tl(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=hP(Lw(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function x1e(t){return e=>{if(!At.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function hP({scale:t,type:e,domain:n,range:i,interpolate:r,interval:s,transform:o,percent:a,pivot:l}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=t.unknown?t.unknown():void 0;return{type:e,domain:_d(n),...i!==void 0&&{range:_d(i)},...o!==void 0&&{transform:o},...a&&{percent:a},...c!==void 0&&{unknown:c},...s!==void 0&&{interval:s},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function E1e(t,e,n={}){let i=.5-yn,r=.5+yn,s=.5+yn,o=.5-yn;for(const{marginTop:m,marginRight:_,marginBottom:y,marginLeft:p}of e)m>i&&(i=m),_>r&&(r=_),y>s&&(s=y),p>o&&(o=p);let{margin:a,marginTop:l=a!==void 0?a:i,marginRight:c=a!==void 0?a:r,marginBottom:u=a!==void 0?a:s,marginLeft:h=a!==void 0?a:o}=n;l=+l,c=+c,u=+u,h=+h;let{width:f=640,height:d=T1e(t,n,{width:f,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-i+u-s)}=n;f=+f,d=+d;const g={width:f,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:_=m!==void 0?m:l,marginRight:y=m!==void 0?m:c,marginBottom:p=m!==void 0?m:u,marginLeft:b=m!==void 0?m:h}=n.facet??{};_=+_,y=+y,p=+p,b=+b,g.facet={marginTop:_,marginRight:y,marginBottom:p,marginLeft:b}}return g}function T1e({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,f=Oye(r);if(f){const g=i?i.scale.domain().length:1,m=(1.1*h-.1)/(1.1*g-.1)*f,_=Math.max(.1,Math.min(10,m));return Math.round((o-u-l)*_+a+c)}const d=e?ic(e)?e.scale.domain().length:Math.max(7,17/h):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const g=EI("y",e)/(EI("x",t)*s),m=i?i.scale.bandwidth():1,_=n?n.scale.bandwidth():1,y=m*(o-u-l)-t.insetLeft-t.insetRight;return(g*y+e.insetTop+e.insetBottom)/_+a+c}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!i*30+60}function EI(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const a=e.scale.exponent();r=l=>Math.pow(l,a);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,o]=St(i);return Math.abs(r(o)-r(s))}function S1e(t,e){const{fx:n,fy:i}=Ow(t,e),r=n==null?void 0:n.scale.domain(),s=i==null?void 0:i.scale.domain();return r&&s?CW(r,s).map(([o,a],l)=>({x:o,y:a,i:l})):r?r.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function C1e(t,{x:e,y:n}){return e&&(e=Nw(e)),n&&(n=Nw(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function rT(t,{fx:e,fy:n}){const i=ho(t),r=e==null?void 0:e.value,s=n==null?void 0:n.value;return e&&n?Zc(i,o=>(o.fx=r[o[0]],o.fy=s[o[0]],o),o=>r[o],o=>s[o]):e?Zc(i,o=>(o.fx=r[o[0]],o),o=>r[o]):Zc(i,o=>(o.fy=s[o[0]],o),o=>s[o])}function M1e(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:s})=>`translate(${t(r)-i},${e(s)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function A1e(t){const e=[],n=new Uint32Array(ss(t,i=>i.length));for(const i of t){let r=0;for(const s of t)i!==s&&(n.set(s,r),r+=s.length);e.push(n.slice(0,r))}return e}const R1e=new Map([["top",Rv],["right",$v],["bottom",Iv],["left",kv],["top-left",Am(Rv,kv)],["top-right",Am(Rv,$v)],["bottom-left",Am(Iv,kv)],["bottom-right",Am(Iv,$v)],["top-empty",$1e],["right-empty",N1e],["bottom-empty",O1e],["left-empty",L1e],["empty",D1e]]);function I1e(t){if(t==null)return null;const e=R1e.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const TI=new WeakMap;function Nw(t){let e=TI.get(t);return e||TI.set(t,e=new Il(vt(t,(n,i)=>[n,i]))),e}function Oa(t,e){return Nw(t).get(e)}function k1e(t,e,n){return e=hl(e),n=hl(n),t.find(i=>Object.is(hl(i.x),e)&&Object.is(hl(i.y),n))}function My(t,e,n){var i;return(i=k1e(t,e,n))==null?void 0:i.empty}function Rv(t,{y:e},{y:n}){return e?Oa(e,n)===0:!0}function Iv(t,{y:e},{y:n}){return e?Oa(e,n)===e.length-1:!0}function kv(t,{x:e},{x:n}){return e?Oa(e,n)===0:!0}function $v(t,{x:e},{x:n}){return e?Oa(e,n)===e.length-1:!0}function $1e(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Oa(e,i);if(s>0)return My(t,n,e[s-1])}function O1e(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Oa(e,i);if(s<e.length-1)return My(t,n,e[s+1])}function L1e(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Oa(e,n);if(s>0)return My(t,e[s-1],i)}function N1e(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Oa(e,n);if(s<e.length-1)return My(t,e[s+1],i)}function D1e(t,e,{empty:n}){return n}function Am(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ov(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:s})=>{var o;return((o=i.get(r))==null?void 0:o.get(s))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class pt{constructor(e,n={},i={},r){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:c,dx:u=0,dy:h=0,margin:f=0,marginTop:d=f,marginRight:g=f,marginBottom:m=f,marginLeft:_=f,clip:y=r==null?void 0:r.clip,channels:p,tip:b,render:v}=i;if(this.data=e,this.sort=_a(c)?c:null,this.initializer=fi(i).initializer,this.transform=this.initializer?i.transform:ds(i).transform,s===null||s===!1?this.facet=null:(this.facet=Mi(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=e===kf&&typeof a=="string"?[a]:a,this.fy=e===kf&&typeof l=="string"?[l]:l),this.facetAnchor=I1e(o),n=LE(n),p!==void 0&&(n={...F1e(p),...n}),r!==void 0&&(n={...HF(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([E,w])=>{if(zr(w.value)){const{value:T,label:C=w.label,scale:M=w.scale}=w.value;w={...w,label:C,scale:M,value:T}}if(e===kf&&typeof w.value=="string"){const{value:T}=w;w={...w,value:[T]}}return[E,w]}).filter(([E,{value:w,optional:T}])=>{if(w!=null)return!0;if(T)return!1;throw new Error(`missing channel value: ${E}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+g,this.marginBottom=+m,this.marginLeft=+_,this.clip=VF(y),this.tip=P1e(b),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const E in this.channels){const{scale:w}=n[E];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=fP(v,this.render))}initialize(e,n,i){let r=hi(this.data);e===void 0&&r!=null&&(e=[ho(r)]);const s=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=hi(r)),e!==void 0&&(e.original=s);const o=DF(this.channels,r);return this.sort!=null&&lye(r,e,o,n,this.sort),{data:r,facets:e,channels:o}}filter(e,n,i){for(const r in n){const{filter:s=Un}=n[r];if(s!==null){const o=i[r];e=e.filter(a=>s(o[a]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const s=r.replace(/^x|x$/,"y");s in e&&e[s].scale==="y"&&qF(r,s,n,i.projection)}}scale(e,n,i){const r=XE(e,n);return i.projection&&this.project(e,r,i),r}}function Mr(...t){return t.plot=pt.prototype.plot,t}function fP(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,s,o,a){return t.call(this,n,i,r,s,o,(l,c,u,h,f)=>e.call(this,l,c,u,h,f,a))}}function F1e(t){return Object.fromEntries(Object.entries(LE(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:dg(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function P1e(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Mi(t,"tip",["x","y","xy"]):t}function _h(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:nr(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const SI=new WeakMap;function sT(t,e,{x:n,y:i,px:r,py:s,maxRadius:o=40,channels:a,render:l,...c}={}){return o=+o,r!=null&&(n??(n=null),a={...a,px:{value:r,scale:"x"}}),s!=null&&(i??(i=null),a={...a,py:{value:s,scale:"y"}}),{x:n,y:i,channels:a,...c,render:fP(function(u,h,f,d,g,m){g={...g,pointerSticky:!1};const _=g.ownerSVGElement,{data:y}=g.getMarkState(this);let p=SI.get(_);p||SI.set(_,p={sticky:!1,roots:[],renders:[]});let b=p.renders.push(ie)-1;const{x:v,y:E,fx:w,fy:T}=h;let C=w?w(u.fx)-d.marginLeft:0,M=T?T(u.fy)-d.marginTop:0;v!=null&&v.bandwidth&&(C+=v.bandwidth()/2),E!=null&&E.bandwidth&&(M+=E.bandwidth()/2);const S=u.fi!=null;let R;if(S){let z=p.facetStates;z||(p.facetStates=z=new Map),R=z.get(this),R||z.set(this,R=new Map)}const[I,N]=gs(this,d),{px:O,py:k}=f,L=O?z=>O[z]:dP(f,I),D=k?z=>k[z]:gP(f,N);let H,q,G,J;function W(z,U){if(S)if(J&&(J=cancelAnimationFrame(J)),z==null)R.delete(u.fi);else{R.set(u.fi,U),J=requestAnimationFrame(()=>{J=null;for(const[P,Y]of R)if(Y<U||Y===U&&P<u.fi){z=null;break}ie(z)});return}ie(z)}function ie(z){if(H===z&&G===p.sticky)return;H=z,G=g.pointerSticky=p.sticky;const U=H==null?[]:[H];S&&(U.fx=u.fx,U.fy=u.fy,U.fi=u.fi);const P=m(U,h,f,d,g);if(q){if(S){const Y=q.parentNode,te=q.getAttribute("transform"),A=P.getAttribute("transform");te?P.setAttribute("transform",te):P.removeAttribute("transform"),A?Y.setAttribute("transform",A):Y.removeAttribute("transform"),P.removeAttribute("aria-label"),P.removeAttribute("aria-description"),P.removeAttribute("aria-hidden")}q.replaceWith(P)}return p.roots[b]=q=P,H==null&&(R==null?void 0:R.size)>1||g.dispatchValue(H==null?null:y[H]),P}function se(z){if(p.sticky||z.pointerType==="mouse"&&z.buttons===1)return;let[U,P]=R2(z);U-=C,P-=M;const Y=U<d.marginLeft||U>d.width-d.marginRight?1:t,te=P<d.marginTop||P>d.height-d.marginBottom?1:e;let A=null,$=o*o;for(const F of u){const B=Y*(L(F)-U),V=te*(D(F)-P),Z=B*B+V*V;Z<=$&&(A=F,$=Z)}if(A!=null&&(t!==1||e!==1)){const F=L(A)-U,B=D(A)-P;$=F*F+B*B}W(A,$)}function le(z){z.pointerType==="mouse"&&H!=null&&(p.sticky&&p.roots.some(U=>U==null?void 0:U.contains(z.target))||(p.sticky?(p.sticky=!1,p.renders.forEach(U=>U(null))):(p.sticky=!0,ie(H)),z.stopImmediatePropagation()))}function ce(z){z.pointerType==="mouse"&&(p.sticky||W(null))}return _.addEventListener("pointerenter",se),_.addEventListener("pointermove",se),_.addEventListener("pointerdown",le),_.addEventListener("pointerleave",ce),ie(null)},l)}}function oT(t){return sT(1,1,t)}function xd(t){return sT(1,.01,t)}function aT(t){return sT(.01,1,t)}function dP({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function gP({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function mP(t){return ic(t)&&t.interval===void 0?void 0:"tabular-nums"}function z1e(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:o=18,marginRight:a=0,marginBottom:l=16+i,marginLeft:c=0,style:u,ticks:h=(r-c-a)/64,tickFormat:f,fontVariant:d=mP(t),round:g=!0,opacity:m,className:_}=e;const y=Ey(e);_=JE(_),m=Vt(m)[1],f===null&&(f=()=>null);const p=rt("svg",y).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call(I=>I.append("style").text(`.${_}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${_}-ramp text {
  white-space: pre;
}`)).call(QE,u);let b=I=>I.selectAll(".tick line").attr("y1",o+l-s),v;const E=g?(I,N)=>I.rangeRound(N):(I,N)=>I.range(N),{type:w,domain:T,range:C,interpolate:M,scale:S,pivot:R}=t;if(M){const I=C===void 0?M:__(M.length===1?nT(M):M,C);v=E(S.copy(),xr(xn(c,r-a),Math.min(T.length+(R!==void 0),C===void 0?1/0:C.length)));const N=256,O=y.document.createElement("canvas");O.width=N,O.height=1;const k=O.getContext("2d");for(let L=0,D=N-1;L<N;++L)k.fillStyle=I(L/D),k.fillRect(L,0,1,1);p.append("image").attr("opacity",m).attr("x",c).attr("y",o).attr("width",r-c-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(w==="threshold"){const I=T,N=f===void 0?O=>O:typeof f=="string"?xa(f):f;v=E(Vs().domain([-1,C.length-1]),[c,r-a]),p.append("g").attr("fill-opacity",m).selectAll().data(C).enter().append("rect").attr("x",(O,k)=>v(k-1)).attr("y",o).attr("width",(O,k)=>v(k)-v(k-1)).attr("height",s-o-l).attr("fill",O=>O),h=vt(I,(O,k)=>k),f=O=>N(I[O],O)}else v=E(x_().domain(T),[c,r-a]),p.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-o-l).attr("fill",S),b=()=>{};return p.append("g").attr("transform",`translate(0,${s-l})`).call(C2(v).ticks(Array.isArray(h)?null:h,typeof f=="string"?f:void 0).tickFormat(typeof f=="function"?f:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Nt(d,"normal")).call(b).call(I=>I.select(".domain").remove()),n!==void 0&&p.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),p.node()}const F0=Math.PI/180;function yh(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=Lv(n),t.markerMid=Lv(i),t.markerEnd=Lv(r)}function Lv(t){if(t==null||t===!1)return null;if(t===!0)return MI;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return CI("auto");case"arrow-reverse":return CI("auto-start-reverse");case"dot":return W1e;case"circle":case"circle-fill":return MI;case"circle-stroke":return H1e}throw new Error(`invalid marker: ${t}`)}function CI(t){return(e,n)=>rt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function W1e(t,e){return rt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function MI(t,e){return rt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function H1e(t,e){return rt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let B1e=0;function wg(t,e,{stroke:n},i){return pP(t,e,n&&(r=>n[r]),i)}function V1e(t,e,{stroke:n},i){return pP(t,e,n&&(([r])=>n[r]),i)}function pP(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},s=()=>r,o){const a=new Map;function l(c){return function(u){const h=s(u);let f=a.get(c);f||a.set(c,f=new Map);let d=f.get(h);if(!d){const g=this.parentNode.insertBefore(c(h,o),this),m=`plot-marker-${++B1e}`;g.setAttribute("id",m),f.set(h,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",l(e)),n&&t.attr("marker-mid",l(n)),i&&t.attr("marker-end",l(i))}function xg({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=_P(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function Eg({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=_P(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function _P(t,e,n){return t===void 0&&e===void 0&&n===void 0?yn?[1,0]:[.5,.5]:[e,n]}function yP(t,{interval:e}){return t={...dg(t)},t.interval=OE(t.interval===void 0?e:t.interval),t}function Ay(t,e,n,i){const{[t]:r,[`${t}1`]:s,[`${t}2`]:o}=n,{value:a,interval:l}=yP(r,n);if(a==null||l==null&&!i)return n;const c=fo(r);if(l==null){let d;const g={transform:m=>d||(d=Ge(m,a)),label:c};return{...n,[t]:void 0,[`${t}1`]:s===void 0?g:s,[`${t}2`]:o===void 0?g:o}}let u,h;function f(d){return h!==void 0&&d===u?h:h=vt(Ge(u=d,a),g=>l.floor(g))}return e({...n,[t]:void 0,[`${t}1`]:s===void 0?{transform:f,label:c}:s,[`${t}2`]:o===void 0?{transform:d=>f(d).map(g=>l.offset(g)),label:c}:o})}function vP(t,e,n){const{[t]:i}=n,{value:r,interval:s}=yP(i,n);return r==null||s==null?n:e({...n,[t]:{label:fo(i),transform:o=>{const a=vt(Ge(o,r),c=>s.floor(c)),l=a.map(c=>s.offset(c));return a.map(qn(a)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function bP(t={}){return Ay("x",xg,t,!0)}function wP(t={}){return Ay("y",Eg,t,!0)}function xP(t={}){return Ay("x",xg,t)}function EP(t={}){return Ay("y",Eg,t)}function TP(t={}){return vP("x",xg,t)}function SP(t={}){return vP("y",Eg,t)}const CP={ariaLabel:"rule",fill:null,stroke:"currentColor"};class MP extends pt{constructor(e,n={}){const{x:i,y1:r,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},_h(n,"x"),CP),this.insetTop=je(a),this.insetBottom=je(l),yh(this,n)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y1:c,y2:u}=i,{width:h,height:f,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetTop:y,insetBottom:p}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o},yn,0).call(b=>b.selectAll().data(e).enter().append("line").call(wt,this).attr("x1",l?v=>l[v]:(m+h-g)/2).attr("x2",l?v=>l[v]:(m+h-g)/2).attr("y1",c&&!Bi(a)?v=>c[v]+y:d+y).attr("y2",u&&!Bi(a)?a.bandwidth?v=>u[v]+a.bandwidth()-p:v=>u[v]-p:f-_-p).call(rn,this,i).call(wg,this,i,s)).node()}}class AP extends pt{constructor(e,n={}){const{x1:i,x2:r,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=n;super(e,{y:{value:s,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},_h(n,"y"),CP),this.insetRight=je(a),this.insetLeft=je(l),yh(this,n)}render(e,n,i,r,s){const{x:o,y:a}=n,{y:l,x1:c,x2:u}=i,{width:h,height:f,marginTop:d,marginRight:g,marginLeft:m,marginBottom:_}=r,{insetLeft:y,insetRight:p}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{y:l&&a},0,yn).call(b=>b.selectAll().data(e).enter().append("line").call(wt,this).attr("x1",c&&!Bi(o)?v=>c[v]+y:m+y).attr("x2",u&&!Bi(o)?o.bandwidth?v=>u[v]+o.bandwidth()-p:v=>u[v]-p:h-g-p).attr("y1",l?v=>l[v]:(d+f-_)/2).attr("y2",l?v=>l[v]:(d+f-_)/2).call(rn,this,i).call(wg,this,i,s)).node()}}function ro(t,e){let{x:n=Re,y:i,y1:r,y2:s,...o}=EP(e);return[r,s]=RP(i,r,s),new MP(t,{...o,x:n,y1:r,y2:s})}function ya(t,e){let{y:n=Re,x:i,x1:r,x2:s,...o}=xP(e);return[r,s]=RP(i,r,s),new AP(t,{...o,y:n,x1:r,x2:s})}function RP(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Ry(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let s=0;s<n;++s)r+=e[s](i)+t[s+1];return r}}const G1e={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},IP="";class Iy extends pt{constructor(e,n={}){const{x:i,y:r,text:s=go(e)&&AF(e)?Re:di,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:h,monospace:f,fontFamily:d=f?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:_,fontWeight:y,rotate:p}=n,[b,v]=Vt(p,0),[E,w]=q1e(g);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:E,optional:!0},rotate:{value:D_e(b),optional:!0},text:{value:s,filter:CE,optional:!0}},n,G1e),this.rotate=v,this.textAnchor=Nt(a,"middle"),this.lineAnchor=Mi(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=kP(h),this.monospace=!!f,this.fontFamily=Cn(d),this.fontSize=w,this.fontStyle=Cn(m),this.fontVariant=Cn(_),this.fontWeight=Cn(y),this.frameAnchor=mg(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=NP(this),this.clipLine=DP(this)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,rotate:u,text:h,title:f,fontSize:d}=i,{rotate:g}=this,[m,_]=gs(this,r);return rt("svg:g",s).call(Mt,this,r,s).call(LP,this,h,r).call(mt,this,{x:l&&o,y:c&&a}).call(y=>y.selectAll().data(e).enter().append("text").call(wt,this).call(U1e,this,h,f).attr("transform",Ry`translate(${l?p=>l[p]:m},${c?p=>c[p]:_})${u?p=>` rotate(${u[p]})`:g?` rotate(${g})`:""}`).call(Te,"font-size",d&&(p=>d[p])).call(rn,this,i)).node()}}function kP(t){return t==null?null:Mi(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function U1e(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=e;t.each(function(c){const u=a(Bl(n[c])??"").map(l),h=u.length,f=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let g=0;g<h;++g){if(++d,!u[g])continue;const m=this.ownerDocument.createElementNS(kl.svg,"tspan");m.setAttribute("x",0),g===d-1?m.setAttribute("y",`${(f+g)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=u[g],this.appendChild(m),d=0}}else f&&this.setAttribute("y",`${f*s}em`),this.textContent=u[0];if(o&&!i&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(kl.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function Bu(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=kr(e,n)),new Iy(t,{...i,x:e,y:n})}function $P(t,{x:e=Re,...n}={}){return new Iy(t,SP({...n,x:e}))}function OP(t,{y:e=Re,...n}={}){return new Iy(t,TP({...n,y:e}))}function LP(t,e,n){Te(t,"text-anchor",e.textAnchor),Te(t,"font-family",e.fontFamily),Te(t,"font-size",e.fontSize),Te(t,"font-style",e.fontStyle),Te(t,"font-variant",e.fontVariant===void 0?Y1e(n):e.fontVariant),Te(t,"font-weight",e.fontWeight)}function Y1e(t){return t&&(Vc(t)||qn(t))?"tabular-nums":void 0}const j1e=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function q1e(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),j1e.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function X1e(t,e,n){const i=[];let r,s=0;for(const[o,a,l]of Z1e(t)){if(r===void 0&&(r=o),s>r&&n(t,r,a)>e&&(i.push(t.slice(r,s)+(t[s-1]===IP?"-":"")),r=o),l){i.push(t.slice(r,a)),r=void 0;continue}s=a}return i}function*Z1e(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case IP:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const AI={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function lT(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=vh(t,r))i+=AI[t[r]]??(PP(t,r)?120:AI.e);return i}function cT(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=vh(t,r))i+=PP(t,r)?200:100;return i}function NP({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return s=>s.split(/\r\n?|\n/g);const i=t?cT:lT,r=e*100;return s=>X1e(s,r,i)}function DP({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return s=>s;const i=t?cT:lT,r=e*100;switch(n){case"clip-start":return s=>II(s,r,i,"");case"clip-end":return s=>RI(s,r,i,"");case"ellipsis-start":return s=>II(s,r,i,su);case"ellipsis-middle":return s=>K1e(s,r,i,su);case"ellipsis-end":return s=>RI(s,r,i,su)}}const su="";function Vu(t,e,n,i){const r=[];let s=0;for(let o=0,a=0,l=t.length;o<l;o=a){a=vh(t,o);const c=n(t,o,a);if(s+c>e){for(s+=i;s>e&&o>0;)a=o,o=r.pop(),s-=n(t,o,a);return[o,e-s]}s+=c,r.push(o)}return[-1,0]}function RI(t,e,n,i){t=t.trim();const r=n(i),[s]=Vu(t,e,n,r);return s<0?t:t.slice(0,s).trimEnd()+i}function K1e(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i)/2,[o,a]=Vu(t,e/2,n,s),[l]=Vu(t,r-e/2-a+s,n,-s);return l<0?i:t.slice(0,o).trimEnd()+i+t.slice(vh(t,l)).trimStart()}function II(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i),[o]=Vu(t,r-e+s,n,-s);return o<0?i:i+t.slice(vh(t,o)).trimStart()}const Dw=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,kI=/\p{Extended_Pictographic}/uy;function vh(t,e){return e+=J1e(t,e)?2:1,eve(t,e)&&(e=Dw.lastIndex),Q1e(t,e)?vh(t,e+1):e}function FP(t,e){return t.charCodeAt(e)<128}function J1e(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function Q1e(t,e){return t.charCodeAt(e)===8205}function eve(t,e){return FP(t,e)?!1:(Dw.lastIndex=e,Dw.test(t))}function PP(t,e){return FP(t,e)?!1:(kI.lastIndex=e,kI.test(t))}const zP={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},WP=3.5,tve=WP*5,HP={draw(t,e,n){const i=e*n/tve;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},BP={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},nve=new Map([["arrow",HP],["spike",BP]]);function ive(t){return t&&typeof t.draw=="function"}function rve(t){if(ive(t))return t;const e=nve.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class ky extends pt{constructor(e,n={}){const{x:i,y:r,r:s=WP,length:o,rotate:a,shape:l=HP,anchor:c="middle",frameAnchor:u}=n,[h,f]=Vt(o,12),[d,g]=Vt(a,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,zP),this.r=+s,this.length=f,this.rotate=g,this.shape=rve(l),this.anchor=Mi(c,"anchor",["start","middle","end"]),this.frameAnchor=mg(u)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,length:u,rotate:h}=i,{length:f,rotate:d,anchor:g,shape:m,r:_}=this,[y,p]=gs(this,r);return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(b=>b.selectAll().data(e).enter().append("path").call(wt,this).attr("transform",Ry`translate(${l?v=>l[v]:y},${c?v=>c[v]:p})${h?v=>` rotate(${h[v]})`:d?` rotate(${d})`:""}${g==="start"?"":g==="end"?u?v=>` translate(0,${u[v]})`:` translate(0,${f})`:u?v=>` translate(0,${u[v]/2})`:` translate(0,${f/2})`}`).attr("d",u?v=>{const E=Ls();return m.draw(E,u[v],_),E}:(()=>{const v=Ls();return m.draw(v,f,_),v})()).call(rn,this,i)).node()}}function VP(t,e={}){let{x:n,y:i,...r}=e;return e.frameAnchor===void 0&&([n,i]=kr(n,i)),new ky(t,{...r,x:n,y:i})}function GP(t,e={}){const{x:n=Re,...i}=e;return new ky(t,{...i,x:n})}function UP(t,e={}){const{y:n=Re,...i}=e;return new ky(t,{...i,y:n})}function sve(t,e={}){const{shape:n=BP,stroke:i=zP.stroke,strokeWidth:r=1,fill:s=i,fillOpacity:o=.3,anchor:a="start",...l}=e;return VP(t,{...l,shape:n,stroke:i,strokeWidth:r,fill:s,fillOpacity:o,anchor:a})}function La(t,e){return arguments.length<2&&!go(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function $y({anchor:t}={},e){return t===void 0?e[0]:Mi(t,"anchor",e)}function YP(t){return $y(t,["left","right"])}function jP(t){return $y(t,["right","left"])}function qP(t){return $y(t,["bottom","top"])}function XP(t){return $y(t,["top","bottom"])}function uT(){const[t,e]=La(...arguments);return JP("y",YP(e),t,e)}function ZP(){const[t,e]=La(...arguments);return JP("fy",jP(e),t,e)}function hT(){const[t,e]=La(...arguments);return QP("x",qP(e),t,e)}function KP(){const[t,e]=La(...arguments);return QP("fx",XP(e),t,e)}function JP(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:g=t==="y"?6:0,tickPadding:m,tickRotate:_,x:y,margin:p,marginTop:b=p===void 0?20:p,marginRight:v=p===void 0?e==="right"?40:0:p,marginBottom:E=p===void 0?20:p,marginLeft:w=p===void 0?e==="left"?40:0:p,label:T,labelAnchor:C,labelArrow:M,labelOffset:S,...R}){return g=je(g),m=je(m),_=je(_),C!==void 0&&(C=Mi(C,"labelAnchor",["center","top","bottom"])),M=h4(M),Mr(g&&!Ft(s)?ove(t,e,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,x:y,...R}):null,Ft(l)?null:lve(t,e,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,x:y,marginTop:b,marginRight:v,marginBottom:E,marginLeft:w,...R}),!Ft(l)&&T!==null?Bu([],a4({fill:l,fillOpacity:c,...R},function(I,N,O,k,L){const D=k[t],{marginTop:H,marginRight:q,marginBottom:G,marginLeft:J}=t==="y"&&L.inset||L,W=C??(D.bandwidth?"center":"top"),ie=S??(e==="right"?q:J)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${e}`,this.rotate=0),this.dy=W==="top"?3-H:W==="bottom"?G-3:0,this.dx=e==="right"?ie:-ie,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[u4(t,D,{anchor:e,label:T,labelAnchor:W,labelArrow:M})]}}}})):null)}function QP(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:o=r,strokeWidth:a=1,fill:l=i,fillOpacity:c=r,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:g=t==="x"?6:0,tickPadding:m,tickRotate:_,y,margin:p,marginTop:b=p===void 0?e==="top"?30:0:p,marginRight:v=p===void 0?20:p,marginBottom:E=p===void 0?e==="bottom"?30:0:p,marginLeft:w=p===void 0?20:p,label:T,labelAnchor:C,labelArrow:M,labelOffset:S,...R}){return g=je(g),m=je(m),_=je(_),C!==void 0&&(C=Mi(C,"labelAnchor",["center","left","right"])),M=h4(M),Mr(g&&!Ft(s)?ave(t,e,n,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:g,tickPadding:m,tickRotate:_,y,...R}):null,Ft(l)?null:cve(t,e,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:g,tickPadding:m,tickRotate:_,y,marginTop:b,marginRight:v,marginBottom:E,marginLeft:w,...R}),!Ft(l)&&T!==null?Bu([],a4({fill:l,fillOpacity:c,...R},function(I,N,O,k,L){const D=k[t],{marginTop:H,marginRight:q,marginBottom:G,marginLeft:J}=t==="x"&&L.inset||L,W=C??(D.bandwidth?"center":"right"),ie=S??(e==="top"?H:G)-3;return W==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-ie:ie,this.dx=W==="right"?q-3:W==="left"?3-J:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[u4(t,D,{anchor:e,label:T,labelAnchor:W,labelArrow:M})]}}}})):null)}function ove(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=e+(t==="y"?"-empty":""),frameAnchor:a=e,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:h=c,dx:f=0,y:d=t==="y"?void 0:null,...g}){return bh(UP,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...g,dx:e==="left"?+f-yn+ +u:+f+yn-h,anchor:"start",length:l,shape:e==="left"?dve:gve})}function ave(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:o=e+(t==="x"?"-empty":""),frameAnchor:a=e,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:h=c,dy:f=0,x:d=t==="x"?void 0:null,...g}){return bh(GP,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:o,frameAnchor:a,x:d,...g,dy:e==="bottom"?+f-yn-h:+f+yn+ +u,anchor:"start",length:l,shape:e==="bottom"?hve:fve})}function lve(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*F0):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":e==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:h,inset:f=0,insetLeft:d=f,insetRight:g=f,dx:m=0,y:_=t==="y"?void 0:null,...y}){return bh(OP,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:o,y:_,...y,dx:e==="left"?+m-s-a+ +d:+m+ +s+ +a-g},function(p,b,v,E,w){h===void 0&&(this.fontVariant=c4(p)),l===void 0&&(w.text=l4(p,b,v,E,e))})}function cve(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*F0):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:f=0,insetTop:d=f,insetBottom:g=f,dy:m=0,x:_=t==="x"?void 0:null,...y}){return bh($P,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:o,x:_,...y,dy:e==="bottom"?+m+ +s+ +a-g:+m-s-a+ +d},function(p,b,v,E,w){h===void 0&&(this.fontVariant=c4(p)),l===void 0&&(w.text=l4(p,b,v,E,e))})}function e4(){const[t,e]=La(...arguments);return r4("y",YP(e),t,e)}function t4(){const[t,e]=La(...arguments);return r4("fy",jP(e),t,e)}function n4(){const[t,e]=La(...arguments);return s4("x",qP(e),t,e)}function i4(){const[t,e]=La(...arguments);return s4("fx",XP(e),t,e)}function r4(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:s=e==="left"?r:null,x2:o=e==="right"?r:null,...a}){return bh(ya,t,e,`${t}-grid`,n,{y:i,x1:s,x2:o,...o4(a)})}function s4(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:s=e==="top"?r:null,y2:o=e==="bottom"?r:null,...a}){return bh(ro,t,e,`${t}-grid`,n,{x:i,y1:s,y2:o,...o4(a)})}function o4({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function a4({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u=!1},h){return[,t]=ui(t),[,e]=Vt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:c,clip:u,initializer:h}}function bh(t,e,n,i,r,s,o){let a;function l(h,f,d,g,m,_){const y=h==null&&(e==="fx"||e==="fy"),{[e]:p}=g;if(!p)throw new Error(`missing scale: ${e}`);const b=p.domain();let{interval:v,ticks:E,tickFormat:w,tickSpacing:T=e==="x"?80:35}=s;if(typeof E=="string"&&f4(p)&&(v=E,E=void 0),E===void 0&&(E=ph(v,p.type)??uve(p,T)),h==null){if(go(E))h=hi(E);else if(Bc(E))h=Nv(E,...St(b));else if(p.interval){let M=p.interval;if(p.ticks){const[S,R]=St(b),I=(R-S)/M[hg];M=rI(M,I/E)??M,h=Nv(M,S,R)}else{h=b;const S=h.length;M=rI(M,S/E)??M,M!==p.interval&&(h=Nv(M,...St(h)))}if(M===p.interval){const S=Math.round(h.length/E);S>1&&(h=h.filter((R,I)=>I%S===0))}}else p.ticks?h=p.ticks(E):h=b;if(!p.ticks&&h.length&&h!==b){const M=new Rd(b);h=h.filter(S=>M.has(S)),h.length||Xs(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?f=[ho(h)]:a[e]={scale:e,value:Re}}o==null||o.call(this,p,h,E,w,a);const C=Object.fromEntries(Object.entries(a).map(([M,S])=>[M,{...S,value:Ge(h,S.value)}]));return y&&(f=_.filterFacets(h,C)),{data:h,facets:f,channels:C}}const c=fi(s).initializer,u=t(r,fi({...s,initializer:l},c));return r==null?(a=u.channels,u.channels={}):a={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function uve(t,e){const[n,i]=St(t.range());return(i-n)/e}function l4(t,e,n,i,r){return{value:fT(t,e,n,i,r)}}function fT(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&qn(e)?M_e(e,r)??Bl:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?Bl:typeof i=="string"?(qn(t.domain())?Hd:xa)(i):Ci(i)}function Nv(t,e,n){return t.range(e,t.offset(t.floor(n)))}const hve={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},fve={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},dve={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},gve={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function c4(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function mve(t){return Math.sign(Hu(t.domain()))*Math.sign(Hu(t.range()))}function u4(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:s}={}){if(!(i==null||i.inferred&&f4(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),s==="auto"&&(s=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!s)return i;if(s===!0){const o=mve(e);o&&(s=/x$/.test(t)||r==="center"?/x$/.test(t)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function h4(t="auto"){return Ft(t)?!1:typeof t=="boolean"?t:Mi(t,"labelArrow",["auto","up","right","down","left"])}function f4(t){return qn(t.domain())}function $I(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function pve(t,{opacity:e,...n}={}){if(!ic(t)&&!uP(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return d4(t,n,(i,r,s,o)=>i.append("svg").attr("width",s).attr("height",o).attr("fill",r.scale).attr("fill-opacity",Vt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function _ve(t,{fill:e=(c=>(c=t.hint)==null?void 0:c.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:Ft(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[h,f]=ui(e),[d,g]=ui(i),m=$I(l,h),_=$I(l,d),y=o*o*Math.PI;return n=Vt(n)[1],r=Vt(r)[1],s=Vt(s)[1],d4(t,a,(p,b,v,E)=>p.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",E).attr("fill",h==="color"?w=>m.scale(w):f).attr("fill-opacity",n).attr("stroke",d==="color"?w=>_.scale(w):g).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",w=>{const T=Ls();return t.scale(w).draw(T,y),T}))}function d4(t,e={},n){let{columns:i,tickFormat:r,fontVariant:s=mP(t),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:h,width:f}=e;const d=Ey(e);u=JE(u),r=fT(t.scale,t.domain,void 0,r);const g=rt("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,a,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,a,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),g.call(_=>_.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",c?`${+c}px`:null).style("width",f===void 0?null:`${+f}px`).style("font-variant",Nt(s,"normal")).call(QE,h).node()}const P0=new Map([["symbol",_ve],["color",g4],["opacity",bve]]);function yve(t={}){for(const[e,n]of P0){const i=t[e];if(Tl(i)){const r=Ey(t);let s;if(e==="symbol"){const{fill:o,stroke:a=o===void 0&&Tl(t.color)?"color":void 0}=t;s={fill:o,stroke:a}}return n(Lw(e,i,s),dT(r,i,t),o=>Tl(t[o])?Lw(o,t[o]):null)}}throw new Error("unknown legend type; no scale found")}function vve(t,e,n={}){return(i,r)=>{if(!P0.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return P0.get(i)(t[i],dT(e,n[i],r),s=>t[s])}}function dT({className:t,...e},{label:n,ticks:i,tickFormat:r}={},s){return V_e(s,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function g4(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return pve(t,n);case"ramp":return z1e(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function bve({type:t,interpolate:e,...n},{legend:i=!0,color:r=os(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return g4({type:t,...n,interpolate:wve(r)},{legend:i,...s})}function wve(t){const{r:e,g:n,b:i}=os(t)||os(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function xve(t,e,n){const i=[];for(const[r,s]of P0){const o=n[r];if(o!=null&&o.legend&&r in t){const a=s(t[r],dT(e,t[r],o),l=>t[l]);a!=null&&i.push(a)}}return i}const Eve={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Tve={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class m4 extends pt{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:s=i,insetBottom:o=i,insetLeft:a=i,rx:l,ry:c}=e;super(kf,void 0,e,n==null?Eve:Tve),this.anchor=xF(n,"anchor",["top","right","bottom","left"]),this.insetTop=je(r),this.insetRight=je(s),this.insetBottom=je(o),this.insetLeft=je(a),this.rx=je(l),this.ry=je(c)}render(e,n,i,r,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:c,width:u,height:h}=r,{anchor:f,insetTop:d,insetRight:g,insetBottom:m,insetLeft:_,rx:y,ry:p}=this,b=c+_,v=u-a-g,E=o+d,w=h-l-m;return rt(f?"svg:line":"svg:rect",s).datum(0).call(Mt,this,r,s).call(wt,this).call(rn,this,i).call(mt,this,{}).call(f==="left"?T=>T.attr("x1",b).attr("x2",b).attr("y1",E).attr("y2",w):f==="right"?T=>T.attr("x1",v).attr("x2",v).attr("y1",E).attr("y2",w):f==="top"?T=>T.attr("x1",b).attr("x2",v).attr("y1",E).attr("y2",E):f==="bottom"?T=>T.attr("x1",b).attr("x2",v).attr("y1",w).attr("y2",w):T=>T.attr("x",b).attr("y",E).attr("width",v-b).attr("height",w-E).attr("rx",y).attr("ry",p)).node()}}function gT(t){return new m4(t)}const Dv={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Sve=new Set(["geometry","href","src","ariaLabel","scales"]);class p4 extends pt{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&go(e)&&AF(e)&&(n={...n,title:Re});const{x:i,y:r,x1:s,x2:o,y1:a,y2:l,anchor:c,monospace:u,fontFamily:h=u?"ui-monospace, monospace":void 0,fontSize:f,fontStyle:d,fontVariant:g,fontWeight:m,lineHeight:_=1,lineWidth:y=20,frameAnchor:p,format:b,textAnchor:v="start",textOverflow:E,textPadding:w=8,title:T,pointerSize:C=12,pathFilter:M="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:s!=null&&o!=null?null:i,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:T,optional:!0}},n,Dv),this.anchor=RF(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=mg(p),this.textAnchor=Nt(v,"middle"),this.textPadding=+w,this.pointerSize=+C,this.pathFilter=Cn(M),this.lineHeight=+_,this.lineWidth=+y,this.textOverflow=kP(E),this.monospace=!!u,this.fontFamily=Cn(h),this.fontSize=je(f),this.fontStyle=Cn(d),this.fontVariant=Cn(g),this.fontWeight=Cn(m);for(const S in Dv)S in this.channels&&(this[S]=Dv[S]);this.splitLines=NP(this),this.clipLine=DP(this),this.format={...b}}render(e,n,i,r,s){const o=this,{x:a,y:l,fx:c,fy:u}=n,{ownerSVGElement:h,document:f}=s,{anchor:d,monospace:g,lineHeight:m,lineWidth:_}=this,{textPadding:y,pointerSize:p,pathFilter:b}=this,{marginTop:v,marginLeft:E}=r,{x1:w,y1:T,x2:C,y2:M,x:S=w??C,y:R=T??M}=i,I=c?c(e.fx)-E:0,N=u?u(e.fy)-v:0,[O,k]=gs(this,r),L=dP(i,O),D=gP(i,k),H=g?cT:lT,q=H(su);let G,J;"title"in i?(G=i.channels,J=Ive):(G=Rve.call(this,i,n),J=kve);const W=rt("svg:g",s).call(Mt,this,r,s).call(LP,this).call(mt,this,{x:S&&a,y:R&&l}).call(le=>le.selectAll().data(e).enter().append("g").attr("transform",ce=>`translate(${Math.round(L(ce))},${Math.round(D(ce))})`).call(wt,this).call(ce=>ce.append("path").attr("filter",b)).call(ce=>ce.append("text").each(function(z){const U=ai(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const P=J.call(o,z,e,G,n,i);if(typeof P=="string")for(const Y of o.splitLines(P))ie(U,{value:o.clipLine(Y)});else{const Y=new Set;for(const te of P){const{label:A=""}=te;A&&Y.has(A)||(Y.add(A),ie(U,te))}}})));function ie(le,{label:ce,value:z,color:U,opacity:P}){ce??(ce=""),z??(z="");const Y=U!=null||P!=null;let te,A=_*100;const[$]=Vu(ce,A,H,q);if($>=0)ce=ce.slice(0,$).trimEnd()+su,te=z.trim(),z="";else{(ce||!z&&!Y)&&(z=" "+z);const[B]=Vu(z,A-H(ce),H,q);B>=0&&(z=z.slice(0,B).trimEnd()+su,te=z.trim())}const F=le.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");ce&&F.append("tspan").attr("font-weight","bold").text(ce),z&&F.append(()=>f.createTextNode(z)),Y&&F.append("tspan").text(" ").attr("fill",U).attr("fill-opacity",P).style("user-select","none"),te&&F.append("title").text(te)}function se(){const{width:le,height:ce}=r.facet??r;W.selectChildren().each(function(z){let{x:U,width:P,height:Y}=this.getBBox();P=Math.round(P),Y=Math.round(Y);let te=d;if(te===void 0){te=o.previousAnchor;const F=L(z)+I,B=D(z)+N,V=F+P+y*2<le,Z=F-P-y*2>0,ue=B+Y+p+y*2+7<ce,oe=B-Y-p-y*2>0,ae=(/-left$/.test(te)?V||!Z:V&&!Z)?"left":"right",Q=(/^top-/.test(te)?ue||!oe:ue&&!oe)?"top":"bottom";te=o.previousAnchor=`${Q}-${ae}`}const A=this.firstChild,$=this.lastChild;if(A.setAttribute("d",Ave(te,p,y,P,Y)),U)for(const F of $.childNodes)F.setAttribute("x",-U);$.setAttribute("y",`${+Cve(te,$.childNodes.length,m).toFixed(6)}em`),$.setAttribute("transform",`translate(${Mve(te,p,y,P,Y)})`)}),W.attr("visibility",null)}return e.length&&(W.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(se):typeof requestAnimationFrame<"u"&&requestAnimationFrame(se)),W.node()}}function _4(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=kr(e,n)),new p4(t,{...i,x:e,y:n})}function Cve(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function Mve(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function Ave(t,e,n,i,r){const s=i+n*2,o=r+n*2;switch(t){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${o}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${o}h${-s}v${-o}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${o}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-o/2}h${-s}v${o}h${s}v${e/2-o/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-o}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-o}h${-s}v${o}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-o}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-o/2}h${s}v${o}h${-s}v${e/2-o/2}z`}}function Rve({channels:t},e){var r,s;const n={};let i=this.format;i=OI(i,t,"x"),i=OI(i,t,"y"),this.format=i;for(const o in i){const a=i[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=Iw(t,o);l&&(n[o]=l)}}for(const o in t){if(o in n||o in i||Sve.has(o))continue;const a=Iw(t,o);a&&(n[o]=a)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const o in n){const a=this.format[o];if(typeof a=="string"){const l=((r=n[o])==null?void 0:r.value)??((s=e[o])==null?void 0:s.domain())??[];this.format[o]=(qn(l)?Hd:xa)(a)}else if(a===void 0||a===!0){const l=e[o];this.format[o]=l!=null&&l.bandwidth?fT(l,l.domain()):Bl}}return n}function OI(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const s=Object.entries(t),o=t[n];return s.splice(s.findIndex(([a])=>a===n)+1,0,[i,o],[r,o]),Object.fromEntries(s)}function Ive(t,e,{title:n}){return Bl(n.value[t],t)}function*kve(t,e,n,i,r){for(const s in n){if(s==="fx"||s==="fy"){yield{label:z0(i,n,s),value:this.format[s](e[s],t)};continue}if(s==="x1"&&"x2"in n||s==="y1"&&"y2"in n)continue;const o=n[s];if(s==="x2"&&"x1"in n)yield{label:NI(i,n,"x"),value:LI(this.format.x2,n.x1,o,t)};else if(s==="y2"&&"y1"in n)yield{label:NI(i,n,"y"),value:LI(this.format.y2,n.y1,o,t)};else{const a=o.value[t],l=o.scale;if(!Un(a)&&l==null)continue;yield{label:z0(i,n,s),value:this.format[s](a,t),color:l==="color"?r[s][t]:null,opacity:l==="opacity"?r[s][t]:null}}}}function LI(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function NI(t,e,n){const i=z0(t,e,`${n}1`,n),r=z0(t,e,`${n}2`,n);return i===r?i:`${i}${r}`}function z0(t,e,n,i=n){const r=e[n],s=t[(r==null?void 0:r.scale)??n];return String((s==null?void 0:s.label)??(r==null?void 0:r.label)??i)}function y4(t={}){var q;const{facet:e,style:n,title:i,subtitle:r,caption:s,ariaLabel:o,ariaDescription:a}=t,l=JE(t.className),c=t.marks===void 0?[]:FI(t.marks);c.push(...zve(c));const u=Fve(e,t),h=new Map;for(const G of c){const J=PI(G,u,t);J&&h.set(G,J)}const f=new Map;u&&Zh(f,[u],t),Zh(f,h,t);const d=FI(Wve(c,f,t));for(const G of d){const J=PI(G,u,t);J&&h.set(G,J)}c.unshift(...d);let g=S1e(f,t);if(g!==void 0){const G=u?Ov(g,u):void 0;for(const W of c){if(W.facet===null||W.facet==="super")continue;const ie=h.get(W);ie!==void 0&&(ie.facetsIndex=W.fx!=null||W.fy!=null?Ov(g,ie):G)}const J=new Set;for(const{facetsIndex:W}of h.values())W==null||W.forEach((ie,se)=>{(ie==null?void 0:ie.length)>0&&J.add(se)});g.forEach(0<J.size&&J.size<g.length?(W,ie)=>W.empty=!J.has(ie):W=>W.empty=!1);for(const W of c)if(W.facet==="exclude"){const ie=h.get(W);ie!==void 0&&(ie.facetsIndex=A1e(ie.facetsIndex))}}for(const G of At.keys())Tl(t[G])&&G!=="fx"&&G!=="fy"&&f.set(G,[]);const m=new Map;for(const G of c){if(m.has(G))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:J,channels:W}=h.get(G)??{},{data:ie,facets:se,channels:le}=G.initialize(J,W,t);mT(le,t),m.set(G,{data:ie,facets:se,channels:le})}const _=Ow(Zh(f,m,t),t),y=E1e(_,c,t);m1e(_,y);const p=vI(_),{fx:b,fy:v}=p,E=b||v?oP(_,y):y,w=b||v?jve(p,y):y,T=Ey(t),C=T.document,M=d_("svg").call(C.documentElement);let S=M;T.ownerSVGElement=M,T.className=l,T.projection=Rye(t,E),T.filterFacets=(G,J)=>Ov(g,{channels:J,groups:rT(G,J)}),T.getMarkState=G=>{const J=m.get(G),W=h.get(G);return{...J,channels:{...J.channels,...W==null?void 0:W.channels}}},T.dispatchValue=G=>{S.value!==G&&(S.value=G,S.dispatchEvent(new Event("input",{bubbles:!0})))};const R=new Set;for(const[G,J]of m)if(G.initializer!=null){const W=G.facet==="super"?w:E,ie=G.initializer(J.data,J.facets,J.channels,p,W,T);if(ie.data!==void 0&&(J.data=ie.data),ie.facets!==void 0&&(J.facets=ie.facets),ie.channels!==void 0){const{fx:se,fy:le,...ce}=ie.channels;Dve(ce),Object.assign(J.channels,ce);for(const z of Object.values(ce)){const{scale:U}=z;U!=null&&!U_e(At.get(U))&&(v4(z,t),R.add(U))}(se!=null||le!=null)&&h.set(G,!0)}}if(R.size){const G=new Map;Zh(G,m,t,se=>R.has(se)),Zh(f,m,t,se=>R.has(se));const J=Yve(Ow(G,t),_),{scales:W,...ie}=vI(J);Object.assign(_,J),Object.assign(p,ie),Object.assign(p.scales,W)}let I,N;g!==void 0&&(I={x:b==null?void 0:b.domain(),y:v==null?void 0:v.domain()},g=C1e(g,I),N=M1e(b,v,y));for(const[G,J]of m)J.values=G.scale(J.channels,p,T);const{width:O,height:k}=y;ai(M).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",k).attr("viewBox",`0 0 ${O} ${k}`).attr("aria-label",o).attr("aria-description",a).call(G=>G.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(QE,n);for(const G of c){const{channels:J,values:W,facets:ie}=m.get(G);if(g===void 0||G.facet==="super"){let se=null;if(ie&&(se=ie[0],se=G.filter(se,J,W),se.length===0))continue;const le=G.render(se,p,W,w,T);if(le==null)continue;M.appendChild(le)}else{let se;for(const le of g){if(!(((q=G.facetAnchor)==null?void 0:q.call(G,g,I,le))??!le.empty))continue;let ce=null;if(ie){const U=h.has(G);if(ce=ie[U?le.i:0],ce=G.filter(ce,J,W),ce.length===0)continue;!U&&ce===ie[0]&&(ce=Sl(ce)),ce.fx=le.x,ce.fy=le.y,ce.fi=le.i}const z=G.render(ce,p,W,E,T);if(z!=null){(se??(se=ai(M).append("g"))).append(()=>z).datum(le);for(const U of["aria-label","aria-description","aria-hidden","transform"])z.hasAttribute(U)&&(se.attr(U,z.getAttribute(U)),z.removeAttribute(U))}}se==null||se.selectChildren().attr("transform",N)}}const L=xve(_,T,t),{figure:D=i!=null||r!=null||s!=null||L.length>0}=t;D&&(S=C.createElement("figure"),S.className=`${l}-figure`,S.style.maxWidth="initial",i!=null&&S.append(DI(C,i,"h2")),r!=null&&S.append(DI(C,r,"h3")),S.append(...L,M),s!=null&&S.append($ve(C,s))),S.scale=x1e(p.scales),S.legend=vve(_,T,t);const H=vye();return H>0&&ai(M).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${H.toLocaleString("en-US")} warning${H===1?"":"s"}. Please check the console.`),S}function DI(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function $ve(t,e){const n=t.createElement("figcaption");return n.append(e),n}function Ove({marks:t=[],...e}={}){return y4({...e,marks:[...t,this]})}pt.prototype.plot=Ove;function FI(t){return t.flat(1/0).filter(e=>e!=null).map(Lve)}function Lve(t){return typeof t.render=="function"?t:new Nve(t)}class Nve extends pt{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function mT(t,e){for(const n in t)v4(t[n],e);return t}function v4(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:s,interval:o,transform:a=s?l=>l*100:MF(o,r)}=e[n]??{};a!=null&&(t.value=vt(t.value,a),t.transform=!1)}function Dve(t){for(const e in t)FF(e,t[e])}function Zh(t,e,n,i=k_e){var r,s;for(const{channels:o}of e.values())for(const a in o){const l=o[a],{scale:c}=l;if(c!=null&&i(c))if(c==="projection"){if(!$ye(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,h=((s=n.y)==null?void 0:s.domain)===void 0;if(u||h){const[f,d]=Lye(l);u&&Fv(t,"x",f),h&&Fv(t,"y",d)}}}else Fv(t,c,l)}return t}function Fv(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function Fve(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=hi(t.data);if(r==null)throw new Error("missing facet data");const s={};n!=null&&(s.fx=bd(r,{value:n,scale:"fx"})),i!=null&&(s.fy=bd(r,{value:i,scale:"fy"})),mT(s,e);const o=rT(r,s);return{channels:s,groups:o,data:t.data}}function PI(t,e,n){var l;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const c=hi(t.data??i??r);if(c===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(c===null)return;const u={};return i!=null&&(u.fx=bd(c,{value:i,scale:"fx"})),r!=null&&(u.fy=bd(c,{value:r,scale:"fy"})),mT(u,n),{channels:u,groups:rT(c,u)}}if(e===void 0)return;const{channels:s,groups:o,data:a}=e;if(t.facet!=="auto"||t.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=hi(t.data))==null?void 0:l.length)===a.length&&Xs(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Pve(t,e={}){return fi({...e,x:null,y:null},(n,i,r,s,o,a)=>a.getMarkState(t))}function zve(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?xd:/^y$/i.test(r)?aT:oT,i=r(Pve(n,i)),i.title=null;const s=_4(n.data,i);s.facet=n.facet,s.facetAnchor=n.facetAnchor,e.push(s)}}return e}function Wve(t,e,n){let{projection:i,x:r={},y:s={},fx:o={},fy:a={},axis:l,grid:c,facet:u={},facet:{axis:h=l,grid:f}=u,x:{axis:d=l,grid:g=d===null?null:c}=r,y:{axis:m=l,grid:_=m===null?null:c}=s,fx:{axis:y=h,grid:p=y===null?null:f}=o,fy:{axis:b=h,grid:v=b===null?null:f}=a}=n;(i||!Tl(r)&&!zI("x",t))&&(d=g=null),(i||!Tl(s)&&!zI("y",t))&&(m=_=null),e.has("fx")||(y=p=null),e.has("fy")||(b=v=null),d===void 0&&(d=!km(t,"x")),m===void 0&&(m=!km(t,"y")),y===void 0&&(y=!km(t,"fx")),b===void 0&&(b=!km(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),b===!0&&(b=m==="right"||m===null?"left":"right");const E=[];return Im(E,v,t4,a),Rm(E,b,ZP,"right","left",u,a),Im(E,p,i4,o),Rm(E,y,KP,"top","bottom",u,o),Im(E,_,e4,s),Rm(E,m,uT,"left","right",n,s),Im(E,g,n4,r),Rm(E,d,hT,"bottom","top",n,r),E}function Rm(t,e,n,i,r,s,o){if(!e)return;const a=Hve(e);o=Bve(a?i:e,s,o);const{line:l}=o;(n===uT||n===hT)&&l&&!Wu(l)&&t.push(gT(Vve(o))),t.push(n(o)),a&&t.push(n({...o,anchor:r,label:null}))}function Im(t,e,n,i){!e||Wu(e)||t.push(n(Gve(e,i)))}function Hve(t){return/^\s*both\s*$/i.test(t)}function Bve(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:f=e.label,labelAnchor:d,labelArrow:g=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:f,labelAnchor:d,labelArrow:g,labelOffset:m}}function Vve(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function Gve(t,{stroke:e=gg(t)?t:void 0,ticks:n=Uve(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}function Uve(t){switch(typeof t){case"number":return!0;case"string":return!gg(t)}return go(t)||typeof(t==null?void 0:t.range)=="function"}function km(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function zI(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function Yve(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function jve({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:o,width:a,height:l}=iT(n),c=t&&WI(t),u=e&&WI(e);return{marginTop:e?u[0]:i,marginRight:t?a-c[1]:r,marginBottom:e?l-u[1]:s,marginLeft:t?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:a,height:l}}function WI(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const qve=new Map([["basis",ed],["basis-closed",Bq],["basis-open",Vq],["bundle",Gq],["bump-x",kq],["bump-y",$q],["cardinal",Uq],["cardinal-closed",Yq],["cardinal-open",jq],["catmull-rom",qq],["catmull-rom-closed",Xq],["catmull-rom-open",Zq],["linear",Vd],["linear-closed",Kq],["monotone-x",Jq],["monotone-y",Qq],["natural",eX],["step",tX],["step-after",iX],["step-before",nX]]);function pT(t=Vd,e){if(typeof t=="function")return t;const n=qve.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function b4(t=Gu,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Gu:pT(t,e)}function Gu(t){return Vd(t)}function jo(t={y:"count"},e={}){[t,e]=bT(t,e);const{x:n,y:i}=e;return vT(W0(n,e,Re),null,null,i,t,xg(e))}function qo(t={x:"count"},e={}){[t,e]=bT(t,e);const{x:n,y:i}=e;return vT(null,W0(i,e,Re),n,null,t,Eg(e))}function Ja(t={fill:"count"},e={}){[t,e]=bT(t,e);const{x:n,y:i}=Xve(e);return vT(n,i,null,null,t,xg(Eg(e)))}function w4(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=qE}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function _T(t={}){return w4(jo,"y",_h(t,"x"))}function yT(t={}){return w4(qo,"x",_h(t,"y"))}function vT(t,e,n,i,{data:r=jE,filter:s=N0,sort:o,reverse:a,...l}={},c={}){t=HI(t),e=HI(e),l=Zve(l,c),r=S4(r,Re),o=o==null?void 0:E4("sort",o,c),s=s==null?void 0:T4("filter",s,c),n!=null&&Qo(l,"x","x1","x2")&&(n=null),i!=null&&Qo(l,"y","y1","y2")&&(i=null);const[u,h]=Qn(t),[f,d]=Qn(t),[g,m]=Qn(e),[_,y]=Qn(e),[p,b]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[v,E]=Qn(p),{x:w,y:T,z:C,fill:M,stroke:S,x1:R,x2:I,y1:N,y2:O,domain:k,cumulative:L,thresholds:D,interval:H,...q}=c,[G,J]=Qn(C),[W]=ui(M),[ie]=ui(S),[se,le]=Qn(W),[ce,z]=Qn(ie);return{..."z"in c&&{z:G||C},..."fill"in c&&{fill:se||M},..."stroke"in c&&{stroke:ce||S},...ds(q,(U,P,Y)=>{const te=L0(Ge(U,p),Y==null?void 0:Y[b]),A=Ge(U,C),$=Ge(U,W),F=Ge(U,ie),B=YE(l,{z:A,fill:$,stroke:F}),V=[],Z=[],ue=te&&E([]),oe=A&&J([]),ae=$&&le([]),Q=F&&z([]),de=t&&h([]),he=t&&d([]),ge=e&&m([]),_e=e&&y([]),Ae=Qve(t==null?void 0:t(U),e==null?void 0:e(U));let ze=0;for(const Ie of l)Ie.initialize(U);o&&o.initialize(U),s&&s.initialize(U);for(const Ie of P){const st=[];for(const It of l)It.scope("facet",Ie);o&&o.scope("facet",Ie),s&&s.scope("facet",Ie);for(const[It,Et]of ru(Ie,B))for(const[_o,Ai]of ru(Et,te))for(const[kn,Tt]of Ae(Ai))if(!(s&&!s.reduce(kn,Tt))){st.push(ze++),Z.push(r.reduceIndex(kn,U,Tt)),te&&ue.push(_o),A&&oe.push(B===A?It:A[(kn.length>0?kn:Ai)[0]]),$&&ae.push(B===$?It:$[(kn.length>0?kn:Ai)[0]]),F&&Q.push(B===F?It:F[(kn.length>0?kn:Ai)[0]]),de&&(de.push(Tt.x1),he.push(Tt.x2)),ge&&(ge.push(Tt.y1),_e.push(Tt.y2));for(const $n of l)$n.reduce(kn,Tt);o&&o.reduce(kn)}V.push(st)}return NF(V,o,a),{data:Z,facets:V}}),...!Qo(l,"x")&&(u?{x1:u,x2:f,x:O0(u,f)}:{x:w,x1:R,x2:I}),...!Qo(l,"y")&&(g?{y1:g,y2:_,y:O0(g,_)}:{y:T,y1:N,y2:O}),...v&&{[b]:v},...Object.fromEntries(l.map(({name:U,output:P})=>[U,P]))}}function bT({cumulative:t,domain:e,thresholds:n,interval:i,...r},s){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...s}]}function W0(t,{cumulative:e,domain:n,thresholds:i,interval:r},s){return t={...dg(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=s),t.thresholds=x4(t.thresholds,t.interval),t}function Xve(t){let{x:e,y:n}=t;return e=W0(e,t),n=W0(n,t),[e.value,n.value]=kr(e.value,n.value),{x:e,y:n}}function HI(t){if(t==null)return;const{value:e,cumulative:n,domain:i=St,thresholds:r}=t,s=o=>{let a=Ge(o,e),l;if(qn(a)||Jve(r)){a=vt(a,wF,Float64Array);let[u,h]=typeof i=="function"?i(a):i,f=typeof r=="function"&&!Bc(r)?r(a,u,h):r;typeof f=="number"&&(f=DO(u,h,f)),Bc(f)&&(i===St&&(u=f.floor(u),h=f.offset(f.floor(h))),f=f.range(u,f.offset(h))),l=f}else{a=oi(a);let[u,h]=typeof i=="function"?i(a):i,f=typeof r=="function"&&!Bc(r)?r(a,u,h):r;if(typeof f=="number")if(i===St){let d=Gf(u,h,f);if(isFinite(d))if(d>0){let g=Math.round(u/d),m=Math.round(h/d);g*d<=u||--g,m*d>h||++m;let _=m-g+1;f=new Float64Array(_);for(let y=0;y<_;++y)f[y]=(g+y)*d}else if(d<0){d=-d;let g=Math.round(u*d),m=Math.round(h*d);g/d<=u||--g,m/d>h||++m;let _=m-g+1;f=new Float64Array(_);for(let y=0;y<_;++y)f[y]=(g+y)/d}else f=[u];else f=[u]}else f=sa(u,h,f);else Bc(f)&&(i===St&&(u=f.floor(u),h=f.offset(f.floor(h))),f=f.range(u,f.offset(h)));l=f}const c=[];if(l.length===1)c.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)c.push([l[u-1],l[u]]);return c.bin=(n<0?tbe:n>0?ebe:wT)(c,l,a),c};return s.label=fo(e),s}function x4(t,e,n=BI){if(t===void 0)return e===void 0?n:ph(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return DW;case"scott":return Fk;case"sturges":return T2;case"auto":return BI}return AE(t)}return t}function Zve(t,e){return VE(t,e,E4)}function E4(t,e,n){return GE(t,e,n,T4)}function T4(t,e,n){return UE(t,e,n,S4)}function S4(t,e){return xy(t,e,Kve)}function Kve(t){switch(`${t}`.toLowerCase()){case"x":return nbe;case"x1":return rbe;case"x2":return sbe;case"y":return ibe;case"y1":return obe;case"y2":return abe}throw new Error(`invalid bin reduce: ${t}`)}function BI(t,e,n){return Math.min(200,Fk(t,e,n))}function Jve(t){return N_e(t)||go(t)&&qn(t)}function Qve(t,e){return t&&e?function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries()){const a=e.bin(i[r]);for(const[l,[c,u]]of e.entries())yield[a[l],{x1:s,y1:c,x2:o,y2:u}]}}:t?function*(n){const i=t.bin(n);for(const[r,[s,o]]of t.entries())yield[i[r],{x1:s,x2:o}]}:function*(n){const i=e.bin(n);for(const[r,[s,o]]of e.entries())yield[i[r],{y1:s,y2:o}]}}function wT(t,e,n){return e=oi(e),i=>{var s;const r=t.map(()=>[]);for(const o of i)(s=r[c_(e,n[o])-1])==null||s.push(o);return r}}function ebe(t,e,n){const i=wT(t,e,n);return r=>{const s=i(r);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],c=s[o];for(const u of l)c.push(u)}return s}}function tbe(t,e,n){const i=wT(t,e,n);return r=>{const s=i(r);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const c of a)l.push(c)}return s}}function C4(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const nbe={reduceIndex(t,e,{x1:n,x2:i}){return C4(n,i)}},ibe={reduceIndex(t,e,{y1:n,y2:i}){return C4(n,i)}},rbe={reduceIndex(t,e,{x1:n}){return n}},sbe={reduceIndex(t,e,{x2:n}){return n}},obe={reduceIndex(t,e,{y1:n}){return n}},abe={reduceIndex(t,e,{y2:n}){return n}};function xT(t={}){return EF(t)?t:{...t,x:Re}}function ET(t={}){return TF(t)?t:{...t,y:Re}}function lbe(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const a of e)for(const l of a)i[l]&&++r,i[l]=1;if(r===0)return{data:t,facets:e};t=_d(t);const s=t[vF]=new Uint32Array(n+r);e=e.map(a=>_d(a,Uint32Array));let o=n;i.fill(0);for(const a of e)for(let l=0,c=a.length;l<c;++l){const u=a[l];i[u]?(a[l]=o,t[o]=t[u],s[o]=u,++o):s[u]=u,i[u]=1}return{data:t,facets:e}}function M4(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{y1:n,y:i=n,x:r,...s}=e,[o,a,l,c]=xh(i,r,"y","x",t,s);return{...o,y1:n,y:a,x1:l,x2:c,x:O0(l,c)}}function cbe(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{y1:n,y:i=n,x:r}=e,[s,o,a]=xh(i,r,"y","x",t,e);return{...s,y1:n,y:o,x:a}}function ube(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{y1:n,y:i=n,x:r}=e,[s,o,,a]=xh(i,r,"y","x",t,e);return{...s,y1:n,y:o,x:a}}function A4(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{x1:n,x:i=n,y:r,...s}=e,[o,a,l,c]=xh(i,r,"x","y",t,s);return{...o,x1:n,x:a,y1:l,y2:c,y:O0(l,c)}}function hbe(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{x1:n,x:i=n,y:r}=e,[s,o,a]=xh(i,r,"x","y",t,e);return{...s,x1:n,x:o,y:a}}function fbe(t={},e={}){arguments.length===1&&([t,e]=wh(t));const{x1:n,x:i=n,y:r}=e,[s,o,,a]=xh(i,r,"x","y",t,e);return{...s,x1:n,x:o,y:a}}function TT({x:t,x1:e,x2:n,...i}={}){return i=_h(i,"y"),e===void 0&&n===void 0?M4({x:t,...i}):([e,n]=SF(t,e,n),{...i,x1:e,x2:n})}function ST({y:t,y1:e,y2:n,...i}={}){return i=_h(i,"x"),e===void 0&&n===void 0?A4({y:t,...i}):([e,n]=SF(t,e,n),{...i,y1:e,y2:n})}function wh(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const dbe={length:!0};function xh(t,e=RE,n,i,{offset:r,order:s,reverse:o},a){if(e===null)throw new Error(`stack requires ${i}`);const l=$a(a),[c,u]=Qn(t),[h,f]=vi(e),[d,g]=vi(e);return h.hint=d.hint=dbe,r=gbe(r),s=_be(s,r,i),[ds(a,(m,_,y)=>{({data:m,facets:_}=lbe(m,_));const p=t==null?void 0:u(L0(Ge(m,t),y==null?void 0:y[n])),b=Ge(m,e,Float64Array),v=Ge(m,l),E=s&&s(m,p,b,v),w=m.length,T=f(new Float64Array(w)),C=g(new Float64Array(w)),M=[];for(const S of _){const R=p?Array.from(ao(S,I=>p[I]).values()):[S];if(E)for(const I of R)I.sort(E);for(const I of R){let N=0,O=0;o&&I.reverse();for(const k of I){const L=b[k];L<0?N=C[k]=(T[k]=N)+L:L>0?O=C[k]=(T[k]=O)+L:C[k]=T[k]=O}}M.push(R)}return r&&r(M,T,C,v),{data:m,facets:_}}),c,h,d]}function gbe(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return mbe;case"center":case"silhouette":return pbe;case"wiggle":return I4}throw new Error(`unknown offset: ${t}`)}}function R4(t,e){let n=0,i=0;for(const r of t){const s=e[r];s<n&&(n=s),s>i&&(i=s)}return[n,i]}function mbe(t,e,n){for(const i of t)for(const r of i){const[s,o]=R4(r,n);for(const a of r){const l=1/(o-s||1);e[a]=l*(e[a]-s),n[a]=l*(n[a]-s)}}}function pbe(t,e,n){for(const i of t){for(const r of i){const[s,o]=R4(r,n);for(const a of r){const l=(o+s)/2;e[a]-=l,n[a]-=l}}k4(i,e,n)}$4(t,e,n)}function I4(t,e,n,i){for(const r of t){const s=new Il;let o=0;for(const a of r){let l=-1;const c=a.map(d=>Math.abs(n[d]-e[d])),u=a.map(d=>{l=i?i[d]:++l;const g=n[d]-e[d],m=s.has(l)?g-s.get(l):0;return s.set(l,g),m}),h=[0,...MW(u)];for(const d of a)e[d]+=o,n[d]+=o;const f=ss(c);f&&(o-=ss(c,(d,g)=>(u[g]/2+h[g])*d)/f)}k4(r,e,n)}$4(t,e,n)}function k4(t,e,n){const i=fn(t,r=>fn(r,s=>e[s]));for(const r of t)for(const s of r)e[s]-=i,n[s]-=i}function $4(t,e,n){const i=t.length;if(i===1)return;const r=t.map(a=>a.flat()),s=r.map(a=>(fn(a,l=>e[l])+Kt(a,l=>n[l]))/2),o=fn(s);for(let a=0;a<i;a++){const l=o-s[a];for(const c of r[a])e[c]+=l,n[c]+=l}}function _be(t,e,n){if(t===void 0&&e===I4)return VI(Qi);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?k0:Qi;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return ybe(r);case"z":return vbe(r);case"sum":return bbe(r);case"appearance":return wbe(r);case"inside-out":return VI(r)}return GI(bF(t))}if(typeof t=="function")return(t.length===1?GI:xbe)(t);if(Array.isArray(t))return Ebe(t);throw new Error(`invalid order: ${t}`)}}function ybe(t){return(e,n,i)=>(r,s)=>t(i[r],i[s])}function vbe(t){return(e,n,i,r)=>(s,o)=>t(r[s],r[o])}function bbe(t){return Oy(t,(e,n,i,r)=>E2(ho(e),s=>ss(s,o=>i[o]),s=>r[s]))}function wbe(t){return Oy(t,(e,n,i,r)=>E2(ho(e),s=>n[S2(s,o=>i[o])],s=>r[s]))}function VI(t){return Oy(t,(e,n,i,r)=>{const s=ho(e),o=E2(s,h=>n[S2(h,f=>i[f])],h=>r[h]),a=Zc(s,h=>ss(h,f=>i[f]),h=>r[h]),l=[],c=[];let u=0;for(const h of o)u<0?(u+=a.get(h),l.push(h)):(u-=a.get(h),c.push(h));return c.reverse().concat(l)})}function GI(t){return e=>{const n=Ge(e,t);return(i,r)=>Qi(n[i],n[r])}}function xbe(t){return e=>(n,i)=>t(e[n],e[i])}function Ebe(t){return Oy(Qi,()=>t)}function Oy(t,e){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const o=new Il(e(n,i,r,s).map((a,l)=>[a,l]));return(a,l)=>t(o.get(s[a]),o.get(s[l]))}}const Tbe={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ly extends pt{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:o,z:a,curve:l,tension:c}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:$a(n),optional:!0}},n,Tbe),this.z=a,this.curve=pT(l,c)}filter(e){return e}render(e,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n,0,0).call(u=>u.selectAll().data(BF(e,[o,a,l,c],this,i)).enter().append("path").call(wt,this).call(D0,this,i).attr("d",Tu().curve(this.curve).defined(h=>h>=0).x0(h=>o[h]).y0(h=>a[h]).x1(h=>l[h]).y1(h=>c[h]))).node()}}function Sbe(t,e){return e===void 0?Vl(t,{x:fg,y:pd}):new Ly(t,e)}function Ed(t,e){const{y:n=di,...i}=yT(e);return new Ly(t,TT(xT({...i,y1:n,y2:void 0})))}function Vl(t,e){const{x:n=di,...i}=_T(e);return new Ly(t,ST(ET({...i,x1:n,x2:void 0})))}const Cbe={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class O4 extends pt{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:o,curve:a,tension:l}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Cbe),this.curve=b4(a,l),yh(this,n)}project(e,n,i){this.curve!==Gu&&super.project(e,n,i)}render(e,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a}=i,{curve:u}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(wt,this).attr("d",u===Gu&&s.projection?Mbe(s.projection,o,a,l,c):f=>{const d=Ls(),g=u(d);return g.lineStart(),g.point(o[f],a[f]),g.point(l[f],c[f]),g.lineEnd(),d}).call(rn,this,i).call(wg,this,i,s)).node()}}function Mbe(t,e,n,i,r){const s=Ea(t);return e=oi(e),n=oi(n),i=oi(i),r=oi(r),o=>s({type:"LineString",coordinates:[[e[o],n[o]],[i[o],r[o]]]})}function L4(t,{x:e,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=H0(e,n,i),[s,o]=H0(r,s,o),new O4(t,{...a,x1:n,x2:i,y1:s,y2:o})}function H0(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const Abe={ariaLabel:"arrow",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:1,strokeWidth:1.5};class N4 extends pt{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:o,bend:a=0,headAngle:l=60,headLength:c=8,inset:u=0,insetStart:h=u,insetEnd:f=u,sweep:d}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Abe),this.bend=a===!0?22.5:Math.max(-90,Math.min(90,a)),this.headAngle=+l,this.headLength=+c,this.insetStart=+h,this.insetEnd=+f,this.sweep=Rbe(d)}render(e,n,i,r,s){const{x1:o,y1:a,x2:l=o,y2:c=a,SW:u}=i,{strokeWidth:h,bend:f,headAngle:d,headLength:g,insetStart:m,insetEnd:_}=this,y=u?v=>u[v]:Ci(h===void 0?1:h),p=d*F0/2,b=g/1.5;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(v=>v.selectAll().data(e).enter().append("path").call(wt,this).attr("d",E=>{let w=o[E],T=a[E],C=l[E],M=c[E];const S=Math.hypot(C-w,M-T);if(S<=m+_)return null;let R=Math.atan2(M-T,C-w);const I=Math.min(b*y(E),S/3),N=this.sweep(w,T,C,M)*f*F0,O=Math.hypot(S/Math.tan(N),S)/2;if(m||_)if(O<1e5){const se=Math.sign(N),[le,ce]=Ibe([w,T],[C,M],O,se);if(m&&([w,T]=UI([le,ce,O],[w,T,m],-se*Math.sign(m))),_){const[z,U]=UI([le,ce,O],[C,M,_],se*Math.sign(_));R+=Math.atan2(U-ce,z-le)-Math.atan2(M-ce,C-le),C=z,M=U}}else{const se=C-w,le=M-T,ce=Math.hypot(se,le);m&&(w+=se/ce*m,T+=le/ce*m),_&&(C-=se/ce*_,M-=le/ce*_)}const k=R+N,L=k+p,D=k-p,H=C-I*Math.cos(L),q=M-I*Math.sin(L),G=C-I*Math.cos(D),J=M-I*Math.sin(D),W=O<1e5?`A${O},${O} 0,0,${N>0?1:0} `:"L",ie=I?`M${H},${q}L${C},${M}L${G},${J}`:"";return`M${w},${T}${W}${C},${M}${ie}`}).call(rn,this,i)).node()}}function Rbe(t=1){if(typeof t=="number")return Ci(Math.sign(t));if(typeof t=="function")return(e,n,i,r)=>Math.sign(t(e,n,i,r));switch(Mi(t,"sweep",["+x","-x","+y","-y"])){case"+x":return(e,n,i)=>Rt(e,i);case"-x":return(e,n,i)=>Rl(e,i);case"+y":return(e,n,i,r)=>Rt(n,r);case"-y":return(e,n,i,r)=>Rl(n,r)}}function Ibe([t,e],[n,i],r,s){const o=n-t,a=i-e,l=Math.hypot(o,a),c=s*Math.sqrt(r*r-l*l/4)/l;return[(t+n)/2-a*c,(e+i)/2+o*c]}function UI([t,e,n],[i,r,s],o){const a=i-t,l=r-e,c=Math.hypot(a,l),u=(a*a+l*l-s*s+n*n)/(2*c),h=o*Math.sqrt(n*n-u*u);return[t+(a*u+l*h)/c,e+(l*u-a*h)/c]}function kbe(t,{x:e,x1:n,x2:i,y:r,y1:s,y2:o,...a}={}){return[n,i]=H0(e,n,i),[s,o]=H0(r,s,o),new N4(t,{...a,x1:n,x2:i,y1:s,y2:o})}class CT extends pt{constructor(e,n,i={},r){super(e,n,i,r);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:c=s,rx:u,ry:h}=i;this.insetTop=je(o),this.insetRight=je(a),this.insetBottom=je(l),this.insetLeft=je(c),this.rx=Nt(u,"auto"),this.ry=Nt(h,"auto")}render(e,n,i,r,s){const{rx:o,ry:a}=this;return rt("svg:g",s).call(Mt,this,r,s).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("rect").call(wt,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(Te,"rx",o).call(Te,"ry",a).call(rn,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?s=>n[s]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?s=>n[s]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:o,insetRight:a}=this,l=n&&e?e.bandwidth():s-i-r;return Math.max(0,l-o-a)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:s}){const{insetTop:o,insetBottom:a}=this,l=n&&e?e.bandwidth():s-i-r;return Math.max(0,l-o-a)}}const D4={ariaLabel:"bar"};class F4 extends CT{constructor(e,n={}){const{x1:i,x2:r,y:s}=n;super(e,{x1:{value:i,scale:"x"},x2:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n,D4)}_transform(e,n,{x:i}){e.call(mt,n,{x:i},0,0)}_x({x:e},{x1:n,x2:i},{marginLeft:r}){const{insetLeft:s}=this;return Bi(e)?r+s:o=>Math.min(n[o],i[o])+s}_width({x:e},{x1:n,x2:i},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return Bi(e)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}class P4 extends CT{constructor(e,n={}){const{x:i,y1:r,y2:s}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:s,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,D4)}_transform(e,n,{y:i}){e.call(mt,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:s}=this;return Bi(e)?r+s:o=>Math.min(n[o],i[o])+s}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:s,height:o}){const{insetTop:a,insetBottom:l}=this;return Bi(e)?o-r-s-a-l:c=>Math.max(0,Math.abs(i[c]-n[c])-a-l)}}function fl(t,e={}){return _y(e)||(e={...e,y:di,x2:Re}),new F4(t,TT(xP(xT(e))))}function dl(t,e={}){return _y(e)||(e={...e,x:di,y2:Re}),new P4(t,ST(EP(ET(e))))}const $be={ariaLabel:"cell"};class Ny extends CT{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,$be)}_transform(e,n){e.call(mt,n,{},0,0)}}function Gc(t,{x:e,y:n,...i}={}){return[e,n]=kr(e,n),new Ny(t,{...i,x:e,y:n})}function Obe(t,{x:e=di,fill:n,stroke:i,...r}={}){return n===void 0&&ui(i)[0]===void 0&&(n=Re),new Ny(t,{...r,x:e,fill:n,stroke:i})}function Lbe(t,{y:e=di,fill:n,stroke:i,...r}={}){return n===void 0&&ui(i)[0]===void 0&&(n=Re),new Ny(t,{...r,y:e,fill:n,stroke:i})}const Nbe={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function MT(t){return t.sort===void 0&&t.reverse===void 0?OF({channel:"-r"},t):t}class Dy extends pt{constructor(e,n={}){const{x:i,y:r,r:s,rotate:o,symbol:a=Qf,frameAnchor:l}=n,[c,u]=Vt(o,0),[h,f]=X_e(a),[d,g]=Vt(s,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:qs,optional:!0},rotate:{value:c,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},MT(n),Nbe),this.r=g,this.rotate=u,this.symbol=f,this.frameAnchor=mg(l);const{channels:m}=this,{symbol:_}=m;if(_){const{fill:y,stroke:p}=m;_.hint={fill:y?y.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:p?p.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,r:u,rotate:h,symbol:f}=i,{r:d,rotate:g,symbol:m}=this,[_,y]=gs(this,r),p=m===Qf,b=u?void 0:d*d*Math.PI;return my(d)&&(e=[]),rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(v=>v.selectAll().data(e).enter().append(p?"circle":"path").call(wt,this).call(p?E=>{E.attr("cx",l?w=>l[w]:_).attr("cy",c?w=>c[w]:y).attr("r",u?w=>u[w]:d)}:E=>{E.attr("transform",Ry`translate(${l?w=>l[w]:_},${c?w=>c[w]:y})${h?w=>` rotate(${h[w]})`:g?` rotate(${g})`:""}`).attr("d",u&&f?w=>{const T=Ls();return f[w].draw(T,u[w]*u[w]*Math.PI),T}:u?w=>{const T=Ls();return m.draw(T,u[w]*u[w]*Math.PI),T}:f?w=>{const T=Ls();return f[w].draw(T,b),T}:(()=>{const w=Ls();return m.draw(w,b),w})())}).call(rn,this,i)).node()}}function po(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=kr(e,n)),new Dy(t,{...i,x:e,y:n})}function Dbe(t,{x:e=Re,...n}={}){return new Dy(t,SP({...n,x:e}))}function Fbe(t,{y:e=Re,...n}={}){return new Dy(t,TP({...n,y:e}))}function Pbe(t,e){return po(t,{...e,symbol:"circle"})}function zbe(t,e){return po(t,{...e,symbol:"hexagon"})}const Wbe={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Fy extends pt{constructor(e,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:$a(n),optional:!0}},n,Wbe),this.z=s,this.curve=b4(o,a),yh(this,n)}filter(e){return e}project(e,n,i){this.curve!==Gu&&super.project(e,n,i)}render(e,n,i,r,s){const{x:o,y:a}=i,{curve:l}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(c=>c.selectAll().data(BF(e,[o,a],this,i)).enter().append("path").call(wt,this).call(D0,this,i).call(V1e,this,i,s).attr("d",l===Gu&&s.projection?Hbe(s.projection,o,a):Z2().curve(l).defined(u=>u>=0).x(u=>o[u]).y(u=>a[u]))).node()}}function Hbe(t,e,n){const i=Ea(t);return e=oi(e),n=oi(n),r=>{let s=[];const o=[s];for(const a of r)a===-1?(s=[],o.push(s)):s.push([e[a],n[a]]);return i({type:"MultiLineString",coordinates:o})}}function AT(t,{x:e,y:n,...i}={}){return[e,n]=kr(e,n),new Fy(t,{...i,x:e,y:n})}function Td(t,{x:e=Re,y:n=di,...i}={}){return new Fy(t,yT({...i,x:e,y:n}))}function Uu(t,{x:e=di,y:n=Re,...i}={}){return new Fy(t,_T({...i,x:e,y:n}))}const Bbe={ariaLabel:"rect"};class Py extends pt{constructor(e,n={}){const{x1:i,y1:r,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:c=a,insetBottom:u=a,insetLeft:h=a,rx:f,ry:d}=n;super(e,{x1:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,Bbe),this.insetTop=je(l),this.insetRight=je(c),this.insetBottom=je(u),this.insetLeft=je(h),this.rx=Nt(f,"auto"),this.ry=Nt(d,"auto")}render(e,n,i,r,s){const{x:o,y:a}=n,{x1:l,y1:c,x2:u,y2:h}=i,{marginTop:f,marginRight:d,marginBottom:g,marginLeft:m,width:_,height:y}=r,{projection:p}=s,{insetTop:b,insetRight:v,insetBottom:E,insetLeft:w,rx:T,ry:C}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&u&&o,y:c&&h&&a},0,0).call(M=>M.selectAll().data(e).enter().append("rect").call(wt,this).attr("x",l&&u&&(p||!Bi(o))?S=>Math.min(l[S],u[S])+w:m+w).attr("y",c&&h&&(p||!Bi(a))?S=>Math.min(c[S],h[S])+b:f+b).attr("width",l&&u&&(p||!Bi(o))?S=>Math.max(0,Math.abs(u[S]-l[S])-w-v):_-d-m-v-w).attr("height",c&&h&&(p||!Bi(a))?S=>Math.max(0,Math.abs(c[S]-h[S])-b-E):y-f-g-b-E).call(Te,"rx",T).call(Te,"ry",C).call(rn,this,i)).node()}}function RT(t,e){return new Py(t,bP(wP(e)))}function B0(t,e={}){return _y(e)||(e={...e,y:di,x2:Re,interval:1}),new Py(t,TT(wP(xT(e))))}function V0(t,e={}){return _y(e)||(e={...e,x:di,y2:Re,interval:1}),new Py(t,ST(bP(ET(e))))}function z4(t,e){e=Gbe(e);const{x:n,y:i,color:r,size:s}=e,o=$m(t,n),a=$m(t,i),l=$m(t,r),c=$m(t,s);let{fx:u,fy:h,x:{value:f,reduce:d,zero:g,...m},y:{value:_,reduce:y,zero:p,...b},color:{value:v,color:E,reduce:w},size:{value:T,reduce:C},mark:M}=e;if(d===void 0&&(d=y==null&&f==null&&T==null&&_!=null?"count":null),y===void 0&&(y=d==null&&_==null&&T==null&&f!=null?"count":null),C===void 0&&T==null&&w==null&&d==null&&y==null&&(f==null||kt(o))&&(_==null||kt(a))&&(C="count"),g===void 0&&(g=Om(d)?!0:void 0),p===void 0&&(p=Om(y)?!0:void 0),f==null&&_==null)throw new Error("must specify x or y");if(d!=null&&_==null)throw new Error("reducing x requires y");if(y!=null&&f==null)throw new Error("reducing y requires x");M===void 0&&(M=T!=null||C!=null?"dot":Om(d)||Om(y)||w!=null?"bar":f!=null&&_!=null?kt(o)||kt(a)||d==null&&y==null&&!Kh(o)&&!Kh(a)?"dot":"line":f!=null||_!=null?"rule":null);let S,R,I;switch(M){case"dot":I=po,R="stroke";break;case"line":I=o&&a||d!=null||y!=null?p||y!=null||o&&Kh(o)?Uu:g||d!=null||a&&Kh(a)?Td:AT:o?Td:Uu,R="stroke",jI(l)&&(S=null);break;case"area":I=!(p||y!=null)&&(g||d!=null||a&&Kh(a))?Ed:Vl,R="fill",jI(l)&&(S=null);break;case"rule":I=o?ro:ya,R="stroke";break;case"bar":I=d!=null?kt(a)?YI(d)&&o&&kt(o)?Gc:fl:B0:y!=null?kt(o)?YI(y)&&a&&kt(a)?Gc:dl:V0:w!=null||C!=null?o&&kt(o)&&a&&kt(a)?Gc:o&&kt(o)?dl:a&&kt(a)?fl:RT:o&&Vc(o)&&!(a&&Vc(a))?fl:a&&Vc(a)&&!(o&&Vc(o))?dl:Gc,R="fill";break;default:throw new Error(`invalid mark: ${M}`)}let N={fx:u,fy:h,x:o??void 0,y:a??void 0,[R]:l??E,z:S,r:c??void 0,tip:!0},O,k={[R]:w??void 0,r:C??void 0};if(d!=null&&y!=null)throw new Error("cannot reduce both x and y");return y!=null?(k.y=y,O=kt(o)?yd:jo):d!=null?(k.x=d,O=kt(a)?vd:qo):(w!=null||C!=null)&&(o&&a?O=kt(o)&&kt(a)?BE:kt(o)?qo:kt(a)?jo:Ja:o?O=kt(o)?yd:jo:a&&(O=kt(a)?vd:qo)),(O===Ja||O===jo)&&(N.x={value:o,...m}),(O===Ja||O===qo)&&(N.y={value:a,...b}),g===void 0&&(g=o&&!(O===Ja||O===jo)&&(I===fl||I===Ed||I===B0||I===ya)),p===void 0&&(p=a&&!(O===Ja||O===qo)&&(I===dl||I===Vl||I===V0||I===ro)),{fx:u??null,fy:h??null,x:{value:f??null,reduce:d??null,zero:!!g,...m},y:{value:_??null,reduce:y??null,zero:!!p,...b},color:{value:v??null,reduce:w??null,...E!==void 0&&{color:E}},size:{value:T??null,reduce:C??null},mark:M,markImpl:qI[I],markOptions:N,transformImpl:qI[O],transformOptions:k,colorMode:R}}function Vbe(t,e){const n=z4(t,e),{fx:i,fy:r,x:{zero:s},y:{zero:o},markOptions:a,transformOptions:l,colorMode:c}=n,u=Fw[n.markImpl],h=Fw[n.transformImpl],f=i!=null||r!=null?gT({strokeOpacity:.1}):null,d=[s?ro([0]):null,o?ya([0]):null],g=u(t,h?h(l,a):a);return c==="stroke"?Mr(f,d,g):Mr(f,g,d)}function Kh(t){let e,n;for(const i of t){if(i==null)continue;if(e===void 0){e=i;continue}const r=Math.sign(Rt(e,i));if(r){if(n!==void 0&&r!==n)return!1;e=i,n=r}}return!0}function Gbe({x:t,y:e,color:n,size:i,fx:r,fy:s,mark:o}={}){return zr(t)||(t=Tc(t)),zr(e)||(e=Tc(e)),zr(n)||(n=gg(n)?{color:n}:Tc(n)),zr(i)||(i=Tc(i)),zr(r)&&({value:r}=Tc(r)),zr(s)&&({value:s}=Tc(s)),o!=null&&(o=`${o}`.toLowerCase()),{x:t,y:e,color:n,size:i,fx:r,fy:s,mark:o}}function $m(t,e){const n=Ge(t,e.value);return n&&(n.label=fo(e.value)),n}function Tc(t){return Ube(t)?{reduce:t}:{value:t}}function Om(t){return/^(?:distinct|count|sum|proportion)$/i.test(t)}function YI(t){return/^(?:first|last|mode)$/i.test(t)}function Ube(t){if(t==null)return!1;if(typeof t.reduceIndex=="function"||typeof t.reduce=="function"&&nr(t)||/^p\d{2}$/i.test(t))return!0;switch(`${t}`.toLowerCase()){case"first":case"last":case"count":case"distinct":case"sum":case"proportion":case"proportion-facet":case"deviation":case"min":case"min-index":case"max":case"max-index":case"mean":case"median":case"variance":case"mode":return!0}return!1}function jI(t){return t?new Rd(t).size>t.length>>1:!1}const Fw={dot:po,line:AT,lineX:Td,lineY:Uu,areaX:Ed,areaY:Vl,ruleX:ro,ruleY:ya,barX:fl,barY:dl,rect:RT,rectX:B0,rectY:V0,cell:Gc,bin:Ja,binX:jo,binY:qo,group:BE,groupX:yd,groupY:vd},qI=Object.fromEntries(Object.entries(Fw).map(([t,e])=>[e,t]));function IT(t,e={}){let{x:n,x1:i,x2:r}=e;n===void 0&&i===void 0&&r===void 0&&(e={...e,x:n=Re});const s={};return n!=null&&(s.x=t),i!=null&&(s.x1=t),r!=null&&(s.x2=t),so(s,e)}function kT(t,e={}){let{y:n,y1:i,y2:r}=e;n===void 0&&i===void 0&&r===void 0&&(e={...e,y:n=Re});const s={};return n!=null&&(s.y=t),i!=null&&(s.y1=t),r!=null&&(s.y2=t),so(s,e)}function so(t={},e={}){const n=$a(e),i=Object.entries(t).map(([r,s])=>{const o=CF(r,e);if(o==null)throw new Error(`missing channel: ${r}`);const[a,l]=vi(o);return{key:r,input:o,output:a,setOutput:l,map:Ybe(s)}});return{...ds(e,(r,s)=>{const o=Ge(r,n),a=i.map(({input:c})=>Ge(r,c)),l=i.map(({setOutput:c})=>c(new Array(r.length)));for(const c of s)for(const u of o?ao(c,h=>o[h]).values():[c])i.forEach(({map:h},f)=>h.mapIndex(u,a[f],l[f]));return{data:r,facets:s}}),...Object.fromEntries(i.map(({key:r,output:s})=>[r,s]))}}function Ybe(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&nr(t))return jbe(t);if(typeof t=="function")return Pv($E(t));switch(`${t}`.toLowerCase()){case"cumsum":return Xbe;case"rank":return Pv((e,n)=>Wk(e,i=>n[i]));case"quantile":return Pv((e,n)=>qbe(e,i=>n[i]))}throw new Error(`invalid map: ${t}`)}function jbe(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function qbe(t,e){const n=u_(t,e)-1;return Wk(t,e).map(i=>i/n)}function Pv(t){return{mapIndex(e,n,i){const r=t(e,n);if(r.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,o=e.length;s<o;++s)i[e[s]]=r[s]}}}const Xbe={mapIndex(t,e,n){let i=0;for(const r of t)n[r]=i+=e[r]}};function Zbe(t={},e){return arguments.length===1&&(e=t),IT(zy(t),e)}function Pw(t={},e){return arguments.length===1&&(e=t),kT(zy(t),e)}function zy(t={}){typeof t=="number"&&(t={k:t});let{k:e,reduce:n,shift:i,anchor:r,strict:s}=t;if(r===void 0&&i!==void 0&&(r=Jbe(i),Xs(`Warning: the shift option is deprecated; please use anchor "${r}" instead.`)),!((e=Math.floor(e))>0))throw new Error(`invalid k: ${e}`);return Qbe(n)(e,Kbe(r,e),s)}function Kbe(t="middle",e){switch(`${t}`.toLowerCase()){case"middle":return e-1>>1;case"start":return 0;case"end":return e-1}throw new Error(`invalid anchor: ${t}`)}function Jbe(t){switch(`${t}`.toLowerCase()){case"centered":return"middle";case"leading":return"start";case"trailing":return"end"}throw new Error(`invalid shift: ${t}`)}function Qbe(t="mean"){if(typeof t=="string"){if(/^p\d{2}$/i.test(t))return Lm(IE(t));switch(t.toLowerCase()){case"deviation":return Lm(Ad);case"max":return Nm((e,n)=>Kt(e,i=>n[i]));case"mean":return ewe;case"median":return Lm(Uf);case"min":return Nm((e,n)=>fn(e,i=>n[i]));case"mode":return Nm((e,n)=>zk(e,i=>n[i]));case"sum":return W4;case"variance":return Lm(b2);case"difference":return iwe;case"ratio":return rwe;case"first":return swe;case"last":return owe}}if(typeof t!="function")throw new Error(`invalid reduce: ${t}`);return Nm($E(t))}function Lm(t){return(e,n,i)=>i?{mapIndex(r,s,o){const a=c=>s[c]==null?NaN:+s[c];let l=0;for(let c=0;c<e-1;++c)isNaN(a(c))&&++l;for(let c=0,u=r.length-e+1;c<u;++c)isNaN(a(c+e-1))&&++l,o[r[c+n]]=l===0?t(Sl(r,c,c+e),a):NaN,isNaN(a(c))&&--l}}:{mapIndex(r,s,o){const a=l=>s[l]==null?NaN:+s[l];for(let l=-n;l<0;++l)o[r[l+n]]=t(Sl(r,0,l+e),a);for(let l=0,c=r.length-n;l<c;++l)o[r[l+n]]=t(Sl(r,l,l+e),a)}}}function Nm(t){return(e,n,i)=>i?{mapIndex(r,s,o){let a=0;for(let l=0;l<e-1;++l)a+=Un(s[r[l]]);for(let l=0,c=r.length-e+1;l<c;++l)a+=Un(s[r[l+e-1]]),a===e&&(o[r[l+n]]=t(Sl(r,l,l+e),s)),a-=Un(s[r[l]])}}:{mapIndex(r,s,o){for(let a=-n;a<0;++a)o[r[a+n]]=t(Sl(r,0,a+e),s);for(let a=0,l=r.length-n;a<l;++a)o[r[a+n]]=t(Sl(r,a,a+e),s)}}}function W4(t,e,n){return n?{mapIndex(i,r,s){let o=0,a=0;for(let l=0;l<t-1;++l){const c=r[i[l]];c===null||isNaN(c)?++o:a+=+c}for(let l=0,c=i.length-t+1;l<c;++l){const u=r[i[l]],h=r[i[l+t-1]];h===null||isNaN(h)?++o:a+=+h,s[i[l+e]]=o===0?a:NaN,u===null||isNaN(u)?--o:a-=+u}}}:{mapIndex(i,r,s){let o=0;const a=i.length;for(let l=0,c=Math.min(a,t-e-1);l<c;++l)o+=+r[i[l]]||0;for(let l=-e,c=a-e;l<c;++l)o+=+r[i[l+t-1]]||0,s[i[l+e]]=o,o-=+r[i[l]]||0}}}function ewe(t,e,n){if(n){const i=W4(t,e,n);return{mapIndex(r,s,o){i.mapIndex(r,s,o);for(let a=0,l=r.length-t+1;a<l;++a)o[r[a+e]]/=t}}}else return{mapIndex(i,r,s){let o=0,a=0;const l=i.length;for(let c=0,u=Math.min(l,t-e-1);c<u;++c){let h=r[i[c]];h!==null&&!isNaN(h=+h)&&(o+=h,++a)}for(let c=-e,u=l-e;c<u;++c){let h=r[i[c+t-1]],f=r[i[c]];h!==null&&!isNaN(h=+h)&&(o+=h,++a),s[i[c+e]]=o/a,f!==null&&!isNaN(f=+f)&&(o-=f,--a)}}}}function twe(t,e,n,i){for(let r=n+i;n<r;++n){const s=t[e[n]];if(Un(s))return s}}function nwe(t,e,n,i){for(let r=n+i-1;r>=n;--r){const s=t[e[r]];if(Un(s))return s}}function H4(t,e,n,i){for(let r=n+i;n<r;++n){let s=t[e[n]];if(s!==null&&!isNaN(s=+s))return s}}function B4(t,e,n,i){for(let r=n+i-1;r>=n;--r){let s=t[e[r]];if(s!==null&&!isNaN(s=+s))return s}}function iwe(t,e,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-t;o<a;++o){const l=r[i[o]],c=r[i[o+t-1]];s[i[o+e]]=l===null||c===null?NaN:c-l}}}:{mapIndex(i,r,s){for(let o=-e,a=i.length-t+e+1;o<a;++o)s[i[o+e]]=B4(r,i,o,t)-H4(r,i,o,t)}}}function rwe(t,e,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-t;o<a;++o){const l=r[i[o]],c=r[i[o+t-1]];s[i[o+e]]=l===null||c===null?NaN:c/l}}}:{mapIndex(i,r,s){for(let o=-e,a=i.length-t+e+1;o<a;++o)s[i[o+e]]=B4(r,i,o,t)/H4(r,i,o,t)}}}function swe(t,e,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-t;o<a;++o)s[i[o+e]]=r[i[o]]}}:{mapIndex(i,r,s){for(let o=-e,a=i.length-t+e+1;o<a;++o)s[i[o+e]]=twe(r,i,o,t)}}}function owe(t,e,n){return n?{mapIndex(i,r,s){for(let o=0,a=i.length-t;o<a;++o)s[i[o+e]]=r[i[o+t-1]]}}:{mapIndex(i,r,s){for(let o=-e,a=i.length-t+e+1;o<a;++o)s[i[o+e]]=nwe(r,i,o,t)}}}const Zs={n:20,k:2,color:"currentColor",opacity:.2,strict:!0,anchor:"end"};function awe(t,{x:e=Re,y:n,k:i=Zs.k,color:r=Zs.color,opacity:s=Zs.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...h}={}){return Mr(Ft(o)?null:Ed(t,so({x1:Cl({k:-i,...h}),x2:Cl({k:i,...h})},{x1:e,x2:e,y:n,fill:o,fillOpacity:a,...h})),Ft(l)?null:Td(t,so({x:Cl(h)},{x:e,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...h})))}function lwe(t,{x:e,y:n=Re,k:i=Zs.k,color:r=Zs.color,opacity:s=Zs.opacity,fill:o=r,fillOpacity:a=s,stroke:l=r,strokeOpacity:c,strokeWidth:u,...h}={}){return Mr(Ft(o)?null:Vl(t,so({y1:Cl({k:-i,...h}),y2:Cl({k:i,...h})},{x:e,y1:n,y2:n,fill:o,fillOpacity:a,...h})),Ft(l)?null:Uu(t,so({y:Cl(h)},{x:e,y:n,stroke:l,strokeOpacity:c,strokeWidth:u,...h})))}function Cl({n:t=Zs.n,k:e=0,strict:n=Zs.strict,anchor:i=Zs.anchor}={}){return zy({k:t,reduce:r=>h_(r)+e*(Ad(r)||0),strict:n,anchor:i})}const cwe={ariaLabel:"tick",fill:null,stroke:"currentColor"};class V4 extends pt{constructor(e,n,i){super(e,n,i,cwe),yh(this,i)}render(e,n,i,r,s){return rt("svg:g",s).call(Mt,this,r,s).call(this._transform,this,n).call(o=>o.selectAll().data(e).enter().append("line").call(wt,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(rn,this,i).call(wg,this,i,s)).node()}}class G4 extends V4{constructor(e,n={}){const{x:i,y:r,inset:s=0,insetTop:o=s,insetBottom:a=s}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=je(o),this.insetBottom=je(a)}_transform(e,n,{x:i}){e.call(mt,n,{x:i},yn,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?s=>n[s]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:s}=this;return n&&e?o=>n[o]+e.bandwidth()-s:i-r-s}}class U4 extends V4{constructor(e,n={}){const{x:i,y:r,inset:s=0,insetRight:o=s,insetLeft:a=s}=n;super(e,{y:{value:r,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n),this.insetRight=je(o),this.insetLeft=je(a)}_transform(e,n,{y:i}){e.call(mt,n,{y:i},0,yn)}_x1({x:e},{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n&&e?s=>n[s]+r:i+r}_x2({x:e},{x:n},{width:i,marginRight:r}){const{insetRight:s}=this;return n&&e?o=>n[o]+e.bandwidth()-s:i-r-s}_y1(e,{y:n}){return i=>n[i]}_y2(e,{y:n}){return i=>n[i]}}function Y4(t,{x:e=Re,...n}={}){return new G4(t,{...n,x:e})}function j4(t,{y:e=Re,...n}={}){return new U4(t,{...n,y:e})}function uwe(t,{x:e=Re,y:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?vd:HE;return Mr(ya(t,u({x1:$T,x2:OT},{x:e,y:n,stroke:s,strokeOpacity:o,...c})),fl(t,u({x1:"p25",x2:"p75"},{x:e,y:n,fill:i,fillOpacity:r,...c})),Y4(t,u({x:"p50"},{x:e,y:n,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),po(t,so({x:q4},{x:e,y:n,z:n,stroke:s,strokeOpacity:o,...c})))}function hwe(t,{y:e=Re,x:n=null,fill:i="#ccc",fillOpacity:r,stroke:s="currentColor",strokeOpacity:o,strokeWidth:a=2,sort:l,...c}={}){const u=n!=null?yd:HE;return Mr(ro(t,u({y1:$T,y2:OT},{x:n,y:e,stroke:s,strokeOpacity:o,...c})),dl(t,u({y1:"p25",y2:"p75"},{x:n,y:e,fill:i,fillOpacity:r,...c})),j4(t,u({y:"p50"},{x:n,y:e,stroke:s,strokeOpacity:o,strokeWidth:a,sort:l,...c})),po(t,so({y:q4},{x:n,y:e,z:n,stroke:s,strokeOpacity:o,...c})))}function q4(t){const e=$T(t),n=OT(t);return t.map(i=>i<e||i>n?i:NaN)}function $T(t){const e=X4(t)*2.5-Z4(t)*1.5;return fn(t,n=>n>=e?n:NaN)}function OT(t){const e=Z4(t)*2.5-X4(t)*1.5;return Kt(t,n=>n<=e?n:NaN)}function X4(t){return oa(t,.25)}function Z4(t){return oa(t,.75)}const fwe={ariaLabel:"raster",stroke:null,pixelSize:1};function Sc(t,e){const n=+t;if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}function XI(t,e){const n=Math.floor(t);if(isNaN(n))throw new Error(`invalid ${e}: ${t}`);return n}class K4 extends pt{constructor(e,n,i={},r){let{width:s,height:o,x:a,y:l,x1:c=a==null?0:void 0,y1:u=l==null?0:void 0,x2:h=a==null?s:void 0,y2:f=l==null?o:void 0,pixelSize:d=r.pixelSize,blur:g=0,interpolate:m}=i;if(s!=null&&(s=XI(s,"width")),o!=null&&(o=XI(o,"height")),c!=null&&(c=Sc(c,"x1")),u!=null&&(u=Sc(u,"y1")),h!=null&&(h=Sc(h,"x2")),f!=null&&(f=Sc(f,"y2")),a==null&&(c==null||h==null))throw new Error("missing x");if(l==null&&(u==null||f==null))throw new Error("missing y");e!=null&&s!=null&&o!=null&&(a===void 0&&c!=null&&h!=null&&(a=wwe(c,h,s)),l===void 0&&u!=null&&f!=null&&(l=xwe(u,f,s,o))),super(e,{x:{value:a,scale:"x",optional:!0},y:{value:l,scale:"y",optional:!0},x1:{value:c==null?null:[c],scale:"x",optional:!0,filter:null},y1:{value:u==null?null:[u],scale:"y",optional:!0,filter:null},x2:{value:h==null?null:[h],scale:"x",optional:!0,filter:null},y2:{value:f==null?null:[f],scale:"y",optional:!0,filter:null},...n},i,r),this.width=s,this.height=o,this.pixelSize=Sc(d,"pixelSize"),this.blur=Sc(g,"blur"),this.interpolate=a==null||l==null?null:gwe(m)}}class J4 extends K4{constructor(e,n={}){const{imageRendering:i}=n;if(e==null){const{fill:r,fillOpacity:s}=n;Vt(s)[0]!==void 0&&(n=zw("fillOpacity",n)),ui(r)[0]!==void 0&&(n=zw("fill",n))}super(e,void 0,n,fwe),this.imageRendering=Nt(i,"auto")}scale(e,{color:n,...i},r){return super.scale(e,i,r)}render(e,n,i,r,s){var k;const o=n[(k=i.channels.fill)==null?void 0:k.scale]??(L=>L),{x:a,y:l}=i,{document:c}=s,[u,h,f,d]=e8(i,r,s),g=f-u,m=d-h,{pixelSize:_,width:y=Math.round(Math.abs(g)/_),height:p=Math.round(Math.abs(m)/_)}=this,b=y*p;let{fill:v,fillOpacity:E}=i,w=0;if(this.interpolate){const L=y/g,D=p/m,H=vt(a,G=>(G-u)*L,Float64Array),q=vt(l,G=>(G-h)*D,Float64Array);v&&(v=this.interpolate(e,y,p,H,q,v)),E&&(E=this.interpolate(e,y,p,H,q,E))}else this.data==null&&e&&(w=e.fi*b);const T=c.createElement("canvas");T.width=y,T.height=p;const C=T.getContext("2d"),M=C.createImageData(y,p),S=M.data;let{r:R,g:I,b:N}=os(this.fill)??{r:0,g:0,b:0},O=(this.fillOpacity??1)*255;for(let L=0;L<b;++L){const D=L<<2;if(v){const H=o(v[L+w]);if(H==null){S[D+3]=0;continue}({r:R,g:I,b:N}=os(H))}E&&(O=E[L+w]*255),S[D+0]=R,S[D+1]=I,S[D+2]=N,S[D+3]=O}return this.blur>0&&vW(M,this.blur),C.putImageData(M,0,0),rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(L=>L.append("image").attr("transform",`translate(${u},${h}) scale(${Math.sign(f-u)},${Math.sign(d-h)})`).attr("width",Math.abs(g)).attr("height",Math.abs(m)).attr("preserveAspectRatio","none").call(Te,"image-rendering",this.imageRendering).call(wt,this).attr("xlink:href",T.toDataURL())).node()}}function Q4(t,e,n){arguments.length<3&&(n=e,e=null);let{x:i,y:r,[t]:s,...o}=n;return i===void 0&&r===void 0&&F_e(e)&&(i=fg,r=pd,s===void 0&&(s=$_e)),[e,{...o,x:i,y:r,[t]:s}]}function dwe(){const[t,e]=Q4("fill",...arguments);return new J4(t,t==null||e.fill!==void 0||e.fillOpacity!==void 0?e:{...e,fill:Re})}function e8({x1:t,y1:e,x2:n,y2:i},r,{projection:s}){const{width:o,height:a,marginTop:l,marginRight:c,marginBottom:u,marginLeft:h}=r;return[t&&s==null?t[0]:h,e&&s==null?e[0]:l,n&&s==null?n[0]:o-c,i&&s==null?i[0]:a-u]}function t8({x1:t,y1:e,x2:n,y2:i},r,s,o){const a={};return t&&(a.x1=t),e&&(a.y1=e),n&&(a.x2=n),i&&(a.y2=i),e8(XE(a,r),s,o)}function zw(t,e={}){const{[t]:n}=e;if(typeof n!="function")throw new Error(`invalid ${t}: not a function`);return fi({...e,[t]:void 0},function(i,r,s,o,a,l){const{x:c,y:u}=o;if(!c)throw new Error("missing scale: x");if(!u)throw new Error("missing scale: y");const[h,f,d,g]=t8(s,o,a,l),m=d-h,_=g-f,{pixelSize:y}=this,{width:p=Math.round(Math.abs(m)/y),height:b=Math.round(Math.abs(_)/y)}=e,v=new Array(p*b*(r?r.length:1)),E=m/p,w=_/b;let T=0;for(const C of r??[void 0])for(let M=.5;M<b;++M)for(let S=.5;S<p;++S,++T)v[T]=n(c.invert(h+S*E),u.invert(f+M*w),C);return{data:v,facets:r,channels:{[t]:{value:v,scale:"auto"}}}})}function gwe(t){if(typeof t=="function")return t;if(t==null)return Ww;switch(`${t}`.toLowerCase()){case"none":return Ww;case"nearest":return i8;case"barycentric":return n8();case"random-walk":return r8()}throw new Error(`invalid interpolate: ${t}`)}function Ww(t,e,n,i,r,s){const o=new Array(e*n);for(const a of t)i[a]<0||i[a]>=e||r[a]<0||r[a]>=n||(o[Math.floor(r[a])*e+Math.floor(i[a])]=s[a]);return o}function n8({random:t=G2(42)}={}){return(e,n,i,r,s,o)=>{const{points:a,triangles:l,hull:c}=wa.from(e,d=>r[d],d=>s[d]),u=new o.constructor(n*i).fill(NaN),h=new Uint8Array(n*i),f=bwe(o,t);for(let d=0;d<l.length;d+=3){const g=l[d],m=l[d+1],_=l[d+2],y=a[2*g],p=a[2*m],b=a[2*_],v=a[2*g+1],E=a[2*m+1],w=a[2*_+1],T=Math.min(y,p,b),C=Math.max(y,p,b),M=Math.min(v,E,w),S=Math.max(v,E,w),R=(E-w)*(y-b)+(v-w)*(b-p);if(!R)continue;const I=o[e[g]],N=o[e[m]],O=o[e[_]];for(let k=Math.floor(T);k<C;++k)for(let L=Math.floor(M);L<S;++L){if(k<0||k>=n||L<0||L>=i)continue;const D=k+.5,H=L+.5,q=((E-w)*(D-b)+(H-w)*(b-p))/R;if(q<0)continue;const G=((w-v)*(D-b)+(H-w)*(y-b))/R;if(G<0)continue;const J=1-q-G;if(J<0)continue;const W=k+n*L;u[W]=f(I,q,N,G,O,J,k,L),h[W]=1}}return mwe(u,h,r,s,o,n,i,c,e,f),u}}function mwe(t,e,n,i,r,s,o,a,l,c){n=Float64Array.from(a,d=>n[l[d]]),i=Float64Array.from(a,d=>i[l[d]]),r=Array.from(a,d=>r[l[d]]);const u=n.length,h=Array.from({length:u},(d,g)=>_we(g,n,i));let f=0;for(let d=0;d<o;++d){const g=d+.5;for(let m=0;m<s;++m){const _=m+s*d;if(!e[_]){const y=m+.5;for(let p=0;p<u;++p){const b=(u+f+(p%2?(p+1)/2:-p/2))%u;if(h[b](y,g)){const v=pwe(n.at(b-1),i.at(b-1),n[b],i[b],y,g);t[_]=c(r.at(b-1),v,r[b],1-v,r[b],0,m,d),f=b;break}}}}}}function pwe(t,e,n,i,r,s){const o=n-t,a=i-e,l=o*(n-r)+a*(i-s),c=o*(r-t)+a*(s-e);return l>0&&c>0?l/(l+c):+(l>c)}function Jh(t,e,n,i){return t*i-n*e}function _we(t,e,n){const i=e.length,r=e.at(t-2),s=n.at(t-2),o=e.at(t-1),a=n.at(t-1),l=e[t],c=n[t],u=e.at(t+1-i),h=n.at(t+1-i),f=o-l,d=a-c,g=r-o,m=s-a,_=l-u,y=c-h,p=Math.hypot(f,d),b=Math.hypot(g,m),v=Math.hypot(_,y);return(E,w)=>{const T=E-o,C=w-a,M=E-l,S=w-c;return Jh(T,C,M,S)>-1e-6&&Jh(T,C,f,d)*b-Jh(T,C,g,m)*p>-1e-6&&Jh(M,S,_,y)*p-Jh(M,S,f,d)*v<=0}}function i8(t,e,n,i,r,s){const o=new s.constructor(e*n),a=wa.from(t,u=>i[u],u=>r[u]);let l,c;for(let u=.5,h=0;u<n;++u){c=l;for(let f=.5;f<e;++f,++h)c=a.find(f,u,c),f===.5&&(l=c),o[h]=s[t[c]]}return o}function r8({random:t=G2(42),minDistance:e=.5,maxSteps:n=2}={}){return(i,r,s,o,a,l)=>{const c=new l.constructor(r*s),u=wa.from(i,g=>o[g],g=>a[g]);let h,f,d;for(let g=.5,m=0;g<s;++g){f=h;for(let _=.5;_<r;++_,++m){let y=_,p=g;d=f=u.find(y,p,f),_===.5&&(h=f);let b,v=0;for(;(b=Math.hypot(o[i[d]]-y,a[i[d]]-p))>e&&v<n;){const E=t(_,g,v)*2*Math.PI;y+=Math.cos(E)*b,p+=Math.sin(E)*b,d=u.find(y,p,d),++v}c[m]=l[i[d]]}}return c}}function ywe(t,e,n,i,r,s){return e*t+i*n+s*r}function vwe(t){return(e,n,i,r,s,o,a,l)=>{const c=t(a,l);return c<n?e:c<n+r?i:s}}function bwe(t,e){return Vc(t)||qn(t)?ywe:vwe(e)}function wwe(t,e,n){return{transform(i){const r=i.length,s=new Float64Array(r),o=(e-t)/n,a=t+o/2;for(let l=0;l<r;++l)s[l]=l%n*o+a;return s}}}function xwe(t,e,n,i){return{transform(r){const s=r.length,o=new Float64Array(s),a=(e-t)/i,l=t+a/2;for(let c=0;c<s;++c)o[c]=Math.floor(c/n)%i*a+l;return o}}}const ZI={ariaLabel:"contour",fill:"none",stroke:"currentColor",strokeMiterlimit:1,pixelSize:2};class s8 extends K4{constructor(e,{smooth:n=!0,value:i,...r}={}){const s=HF({},r,ZI);if(i===void 0){for(const a in s)if(s[a].value!=null){if(i!==void 0)throw new Error("ambiguous contour value");i=r[a],r[a]="value"}}if(i!=null){const a={transform:l=>l.map(c=>c.value),label:fo(i)};for(const l in s)r[l]==="value"&&(r[l]=a)}if(e==null){if(i==null)throw new Error("missing contour value");r=zw("value",{value:i,...r}),i=null}else{let{interpolate:a}=r;i===void 0&&(i=Re),a===void 0&&(r.interpolate="nearest")}super(e,{value:{value:i,optional:!0}},Ewe(r),ZI);const o={geometry:{value:Re}};for(const a in this.channels){const l=this.channels[a],{scale:c}=l;c==="x"||c==="y"||a==="value"||(o[a]=l,delete this.channels[a])}this.contourChannels=o,this.smooth=!!n}filter(e,{x:n,y:i,value:r,...s},o){return super.filter(e,s,o)}render(e,n,i,r,s){const{geometry:o}=i,a=Ea();return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(l=>{l.selectAll().data(e).enter().append("path").call(wt,this).attr("d",c=>a(o[c])).call(rn,this,i)}).node()}}function Ewe({thresholds:t,interval:e,...n}){return t=x4(t,e,T2),fi(n,function(i,r,s,o,a,l){const[c,u,h,f]=t8(s,o,a,l),d=h-c,g=f-u,{pixelSize:m,width:_=Math.round(Math.abs(d)/m),height:y=Math.round(Math.abs(g)/m)}=this,p=_/d,b=y/g,v=s.value.value,E=[];if(this.interpolate){const{x:S,y:R}=Ty(s,o,l),I=vt(S,L=>(L-c)*p,Float64Array),N=vt(R,L=>(L-u)*b,Float64Array),O=[s.x,s.y,s.value],k=[I,N,v];for(const L of r){const D=this.filter(L,O,k);E.push(this.interpolate(D,_,y,I,N,v))}}else if(r){const S=_*y,R=r.length;for(let I=0;I<R;++I)E.push(v.slice(I*S,I*S+S))}else E.push(v);if(this.blur>0)for(const S of E)Rk({data:S,width:_,height:y},this.blur);const w=Twe(t,v,...Cwe(E));if(w===null)throw new Error(`unsupported thresholds: ${t}`);const{contour:T}=wb().size([_,y]).smooth(this.smooth),C=[],M=[];for(const S of E)M.push(Fi(C.length,C.push(...vt(w,R=>T(S,R)))));for(const{coordinates:S}of C)for(const R of S)for(const I of R)for(const N of I)N[0]=N[0]/p+c,N[1]=N[1]/b+u;return{data:C,facets:M,channels:DF(this.contourChannels,C)}})}function Twe(t,e,n,i){if(typeof(t==null?void 0:t.range)=="function")return t.range(t.floor(n),i);if(typeof t=="function"&&(t=t(e,n,i)),typeof t!="number")return hi(t);const r=sa(...Nk(n,i,t),t);for(;r[r.length-1]>=i;)r.pop();for(;r[1]<n;)r.shift();return r}function Swe(){return new s8(...Q4("value",...arguments))}function Cwe(t){return[fn(t,e=>fn(e,KI)),Kt(t,e=>Kt(e,KI))]}function KI(t){return isFinite(t)?t:NaN}function Mwe(t,e){return LT(oT,t,e)}function Awe(t,e={}){return LT(xd,t,e)}function Rwe(t,e={}){return LT(aT,t,e)}function LT(t,e,n={}){const{x:i,y:r,maxRadius:s}=n,o=t({px:i,py:r,maxRadius:s}),a=[];i!=null&&a.push(ro(e,JI("x",{...o,inset:-6},n))),r!=null&&a.push(ya(e,JI("y",{...o,inset:-6},n))),i!=null&&a.push(Bu(e,QI("x",{...o,dy:9,frameAnchor:"bottom",lineAnchor:"top"},n))),r!=null&&a.push(Bu(e,QI("y",{...o,dx:-9,frameAnchor:"left",textAnchor:"end"},n)));for(const l of a)l.ariaLabel=`crosshair ${l.ariaLabel}`;return Mr(...a)}function o8(t,{channels:e,...n},{facet:i,facetAnchor:r,fx:s,fy:o,[t]:a,channels:l,transform:c,initializer:u}){return{...n,facet:i,facetAnchor:r,fx:s,fy:o,[t]:a,channels:{...e,...l},transform:c,initializer:Iwe(t,u)}}function Iwe(t,e){return e==null?e:function(n,i,{x:r,y:s,px:o,py:a,...l},...c){const{channels:{x:u,y:h,...f}={},...d}=e.call(this,n,i,{...l,x:o,y:a},...c);return{channels:{...f,...u&&{px:u,...t==="x"&&{x:u}},...h&&{py:h,...t==="y"&&{y:h}}},...d}}}function JI(t,e,n){const{color:i="currentColor",opacity:r=.2,ruleStroke:s=i,ruleStrokeOpacity:o=r,ruleStrokeWidth:a}=n;return{...o8(t,e,n),stroke:s,strokeOpacity:o,strokeWidth:a}}function QI(t,e,n){const{color:i="currentColor",textFill:r=i,textFillOpacity:s,textStroke:o="white",textStrokeOpacity:a,textStrokeWidth:l=5}=n;return{...o8(t,e,kwe(t,n)),fill:r,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:l}}function kwe(t,e){return fi(e,(n,i,r)=>{var s;return{channels:{text:{value:(s=Iw(r,t))==null?void 0:s.value}}}})}const $we={ariaLabel:"delaunay link",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Owe={ariaLabel:"delaunay mesh",fill:null,stroke:"currentColor",strokeOpacity:.2},Lwe={ariaLabel:"hull",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeMiterlimit:1},Nwe={ariaLabel:"voronoi",fill:"none",stroke:"currentColor",strokeMiterlimit:1},Dwe={ariaLabel:"voronoi mesh",fill:null,stroke:"currentColor",strokeOpacity:.2};class Fwe extends pt{constructor(e,n={}){const{x:i,y:r,z:s,curve:o,tension:a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,$we),this.curve=pT(o,a),yh(this,n)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,{curve:h}=this,[f,d]=gs(this,r),g=l?p=>l[p]:Ci(f),m=c?p=>c[p]:Ci(d),_=this;function y(p){let b=-1;const v=[],E={};for(const O in i)E[O]=[];const w=[],T=[],C=[],M=[];function S(O,k){O=p[O],k=p[k],v.push(++b),w[b]=g(O),C[b]=m(O),T[b]=g(k),M[b]=m(k);for(const L in i)E[L].push(i[L][k])}const{halfedges:R,hull:I,triangles:N}=wa.from(p,g,m);for(let O=0;O<R.length;++O){const k=R[O];k>O&&S(N[O],N[k])}for(let O=0;O<I.length;++O)S(I[O],I[(O+1)%I.length]);ai(this).selectAll().data(v).enter().append("path").call(wt,_).attr("d",O=>{const k=Ls(),L=h(k);return L.lineStart(),L.point(w[O],C[O]),L.point(T[O],M[O]),L.lineEnd(),k}).call(rn,_,E).call(wg,_,E,s)}return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(u?p=>p.selectAll().data(ao(e,b=>u[b]).values()).enter().append("g").each(y):p=>p.datum(e).each(y)).node()}}class NT extends pt{constructor(e,n={},i,r=({z:s})=>s){const{x:s,y:o}=n;super(e,{x:{value:s,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},z:{value:r(n),optional:!0}},n,i)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[h,f]=gs(this,r),d=l?y=>l[y]:Ci(h),g=c?y=>c[y]:Ci(f),m=this;function _(y){const p=wa.from(y,d,g);ai(this).append("path").datum(y[0]).call(wt,m).attr("d",m._render(p,r)).call(rn,m,i)}return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(ao(e,p=>u[p]).values()).enter().append("g").each(_):y=>y.datum(e).each(_)).node()}}class Pwe extends NT{constructor(e,n={}){super(e,n,Owe),this.fill="none"}_render(e){return e.render()}}class zwe extends NT{constructor(e,n={}){super(e,n,Lwe,$a)}_render(e){return e.renderHull()}}class Wwe extends pt{constructor(e,n={}){const{x:i,y:r,z:s}=n;super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:s,optional:!0}},n,Nwe)}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,z:u}=i,[h,f]=gs(this,r),d=l?y=>l[y]:Ci(h),g=c?y=>c[y]:Ci(f),m=this;function _(y){const p=wa.from(y,d,g),b=a8(p,r);ai(this).selectAll().data(y).enter().append("path").call(wt,m).attr("d",(v,E)=>b.renderCell(E)).call(rn,m,i)}return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(u?y=>y.selectAll().data(ao(e,p=>u[p]).values()).enter().append("g").each(_):y=>y.datum(e).each(_)).node()}}class Hwe extends NT{constructor(e,n){super(e,n,Dwe),this.fill="none"}_render(e,n){return a8(e,n).render()}}function a8(t,e){const{width:n,height:i,marginTop:r,marginRight:s,marginBottom:o,marginLeft:a}=e;return t.voronoi([a,r,n-s,i-o])}function Tg(t,e,{x:n,y:i,...r}={}){return[n,i]=kr(n,i),new t(e,{...r,x:n,y:i})}function Bwe(t,e){return Tg(Fwe,t,e)}function Vwe(t,e){return Tg(Pwe,t,e)}function Gwe(t,e){return Tg(zwe,t,e)}function Uwe(t,e){return Tg(Wwe,t,e)}function Ywe(t,e){return Tg(Hwe,t,e)}const jwe={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class l8 extends pt{constructor(e,{x:n,y:i,z:r,weight:s,fill:o,stroke:a,...l}={}){const c=e3(o)&&(o="currentColor",!0),u=e3(a)&&(a="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},z:{value:$a({z:r,fill:o,stroke:a}),optional:!0},weight:{value:s,optional:!0}},Zwe({...l,fill:o,stroke:a},c,u),jwe),c&&(this.fill=void 0),u&&(this.stroke=void 0),this.z=r}filter(e){return e}render(e,n,i,r,s){const{contours:o}=i,a=Ea();return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{}).call(l=>l.selectAll().data(e).enter().append("path").call(wt,this).call(rn,this,i).attr("d",c=>a(o[c]))).node()}}function qwe(t,{x:e,y:n,...i}={}){return[e,n]=kr(e,n),new l8(t,{...i,x:e,y:n})}const Xwe=new Set(["x","y","z","weight"]);function Zwe(t,e,n){let{bandwidth:r,thresholds:s}=t;return r=r===void 0?20:+r,s=s===void 0?20:typeof(s==null?void 0:s[Symbol.iterator])=="function"?oi(s):+s,fi(t,function(o,a,l,c,u,h){var N;const f=l.weight?oi(l.weight.value):null,d=(N=l.z)==null?void 0:N.value,{z:g}=this,[m,_]=gs(this,u),{width:y,height:p}=u,{x:b,y:v}=Ty(l,c,h),E=Object.fromEntries(Object.entries(l).filter(([O])=>!Xwe.has(O)).map(([O,k])=>[O,{...k,value:[]}])),w=e&&[],T=n&&[],C=DG().x(b?O=>b[O]:m).y(v?O=>v[O]:_).weight(f?O=>f[O]:1).size([y,p]).bandwidth(r),M=[];for(const O of a){const k=[];M.push(k);for(const L of d?KE(O,d,g):[O]){const D=C.contours(L);k.push([L,D])}}let S=s;if(!(S instanceof zu)){let O=0;for(const k of M)for(const[,L]of k){const D=L.max;D>O&&(O=D)}S=Float64Array.from({length:s-1},(k,L)=>O*100*(L+1)/s)}const R=[],I=[];for(const O of M){const k=[];R.push(k);for(const[L,D]of O)for(const H of S){k.push(I.length),I.push(D(H/100)),w&&w.push(H),T&&T.push(H);for(const q in E)E[q].value.push(l[q].value[L[0]])}}return w&&w.push(0),T&&T.push(0),{data:o,facets:R,channels:{...E,...w&&{fill:{value:w,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:I}}}})}function e3(t){return/^density$/i.test(t)}const Kwe={ariaLabel:"geo",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class c8 extends pt{constructor(e,n={}){const[i,r]=Vt(n.r,3);super(e,{geometry:{value:n.geometry,scale:"projection"},r:{value:i,scale:"r",filter:qs,optional:!0}},MT(n),Kwe),this.r=r}render(e,n,i,r,s){const{geometry:o,r:a}=i,l=Ea(s.projection??Jwe(n)),{r:c}=this;return my(c)?e=[]:c!==void 0&&l.pointRadius(c),rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(u=>{u.selectAll().data(e).enter().append("path").call(wt,this).attr("d",a?h=>l.pointRadius(a[h])(o[h]):h=>l(o[h])).call(rn,this,i)}).node()}}function Jwe({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),Bp({point(n,i){this.stream.point(t(n),e(i))}})}function DT(t,{geometry:e=Re,...n}={}){switch(t==null?void 0:t.type){case"FeatureCollection":t=t.features;break;case"GeometryCollection":t=t.geometries;break;case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":t=[t];break}return new c8(t,{geometry:e,...n})}function Qwe({strokeWidth:t=1.5,...e}={}){return DT({type:"Sphere"},{strokeWidth:t,...e})}function e2e({strokeOpacity:t=.1,...e}={}){return DT(kU(),{strokeOpacity:t,...e})}const $f=.5,Of=0;function t2e(t={fill:"count"},{binWidth:e,...n}={}){const{z:i}=n;return e=e===void 0?20:je(e),t=VE(t,n),Qo(t,"fill")&&(n.channels={...n.channels,fill:{value:[]}}),n.symbol===void 0&&(n.symbol="hexagon"),n.r===void 0&&!Qo(t,"r")&&(n.r=e/2),fi(n,(r,s,o,a,l,c)=>{let{x:u,y:h,z:f,fill:d,stroke:g,symbol:m}=o;if(u===void 0)throw new Error("missing channel: x");if(h===void 0)throw new Error("missing channel: y");({x:u,y:h}=Ty(o,a,c)),f=f?f.value:Ge(r,i),d=d==null?void 0:d.value,g=g==null?void 0:g.value,m=m==null?void 0:m.value;const _=YE(t,{z:f,fill:d,stroke:g,symbol:m}),y=f&&[],p=d&&[],b=g&&[],v=m&&[],E=[],w=[],T=[];let C=-1;for(const I of t)I.initialize(r);for(const I of s){const N=[];for(const O of t)O.scope("facet",I);for(const[O,k]of ru(I,_))for(const L of n2e(k,u,h,e)){N.push(++C),w.push(L.x),T.push(L.y),f&&y.push(_===f?O:f[L[0]]),d&&p.push(_===d?O:d[L[0]]),g&&b.push(_===g?O:g[L[0]]),m&&v.push(_===m?O:m[L[0]]);for(const D of t)D.reduce(L)}E.push(N)}const M=o.x.scale,S=o.y.scale,R={x:{value:w,source:a[M]?{value:vt(w,a[M].invert),scale:M}:null},y:{value:T,source:a[S]?{value:vt(T,a[S].invert),scale:S}:null},...f&&{z:{value:y}},...d&&{fill:{value:p,scale:"auto"}},...g&&{stroke:{value:b,scale:"auto"}},...m&&{symbol:{value:v,scale:"auto"}},...Object.fromEntries(t.map(({name:I,output:N})=>[I,{scale:"auto",label:N.label,radius:I==="r"?e/2:void 0,value:N.transform()}]))};return{data:r,facets:E,channels:R}})}function n2e(t,e,n,i){const r=i*(1.5/kF),s=new Map;for(const o of t){let a=e[o],l=n[o];if(isNaN(a)||isNaN(l))continue;let c=Math.round(l=(l-Of)/r),u=Math.round(a=(a-$f)/i-(c&1)/2),h=l-c;if(Math.abs(h)*3>1){let g=a-u,m=u+(a<u?-1:1)/2,_=c+(l<c?-1:1),y=a-m,p=l-_;g*g+h*h>y*y+p*p&&(u=m+(c&1?1:-1)/2,c=_)}const f=`${u},${c}`;let d=s.get(f);d===void 0&&(s.set(f,d=[]),d.x=(u+(c&1)/2)*i+$f,d.y=c*r+Of),d.push(o)}return s.values()}const i2e={ariaLabel:"hexgrid",fill:"none",stroke:"currentColor",strokeOpacity:.1};function r2e(t){return new u8(t)}class u8 extends pt{constructor({binWidth:e=20,clip:n=!0,...i}={}){super(kf,void 0,{clip:n,...i},i2e),this.binWidth=je(e)}render(e,n,i,r,s){const{binWidth:o}=this,{marginTop:a,marginRight:l,marginBottom:c,marginLeft:u,width:h,height:f}=r,d=u-$f,g=h-l-$f,m=a-Of,_=f-c-Of,y=o/2,p=y*$F,b=p/2,v=y*2,E=p*1.5,w=Math.floor(d/v),T=Math.ceil(g/v),C=Math.floor((m+b)/E),M=Math.ceil((_-b)/E)+1,S=`m0,${Io(-p)}l${Io(y)},${Io(b)}v${Io(p)}l${Io(-y)},${Io(b)}`;let R=S;for(let I=C;I<M;++I)for(let N=w;N<T;++N)R+=`M${Io(N*v+(I&1)*y)},${Io(I*E)}${S}`;return rt("svg:g",s).datum(0).call(Mt,this,r,s).call(mt,this,{},yn+$f,yn+Of).call(I=>I.append("path").call(wt,this).call(rn,this,i).attr("d",R)).node()}}function Io(t){return Math.round(t*1e3)/1e3}const s2e={ariaLabel:"image",fill:null,stroke:null};function o2e(t){return/^\.*\//.test(t)}function a2e(t){return/^(blob|data|file|http|https):/i.test(t)}function l2e(t){return typeof t=="string"&&(o2e(t)||a2e(t))?[void 0,t]:[t,void 0]}let h8=class extends pt{constructor(e,n={}){let{x:i,y:r,r:s,width:o,height:a,rotate:l,src:c,preserveAspectRatio:u,crossOrigin:h,frameAnchor:f,imageRendering:d}=n;s==null&&(s=void 0),s===void 0&&o===void 0&&a===void 0?o=a=16:o===void 0&&a!==void 0?o=a:a===void 0&&o!==void 0&&(a=o);const[g,m]=l2e(c),[_,y]=Vt(s),[p,b]=Vt(o,y!==void 0?y*2:void 0),[v,E]=Vt(a,y!==void 0?y*2:void 0),[w,T]=Vt(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:_,scale:"r",filter:qs,optional:!0},width:{value:p,filter:qs,optional:!0},height:{value:v,filter:qs,optional:!0},rotate:{value:w,optional:!0},src:{value:g,optional:!0}},MT(n),s2e),this.src=m,this.width=b,this.rotate=T,this.height=E,this.r=y,this.preserveAspectRatio=Nt(u,"xMidYMid"),this.crossOrigin=Cn(h),this.frameAnchor=mg(f),this.imageRendering=Nt(d,"auto")}render(e,n,i,r,s){const{x:o,y:a}=n,{x:l,y:c,width:u,height:h,r:f,rotate:d,src:g}=i,{r:m,width:_,height:y,rotate:p}=this,[b,v]=gs(this,r);return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,{x:l&&o,y:c&&a}).call(E=>E.selectAll().data(e).enter().append("image").call(wt,this).attr("x",t3(l,u,f,b,_,m)).attr("y",t3(c,h,f,v,y,m)).attr("width",u?w=>u[w]:_!==void 0?_:f?w=>f[w]*2:m*2).attr("height",h?w=>h[w]:y!==void 0?y:f?w=>f[w]*2:m*2).attr("transform",d?w=>`rotate(${d[w]})`:p?`rotate(${p})`:null).attr("transform-origin",d||p?Ry`${l?w=>l[w]:b}px ${c?w=>c[w]:v}px`:null).call(Te,"href",g?w=>g[w]:this.src).call(Te,"preserveAspectRatio",this.preserveAspectRatio).call(Te,"crossorigin",this.crossOrigin).call(Te,"image-rendering",this.imageRendering).call(Te,"clip-path",f?w=>`circle(${f[w]}px)`:m!==void 0?`circle(${m}px)`:null).call(rn,this,i)).node()}};function t3(t,e,n,i,r,s){return e&&t?o=>t[o]-e[o]/2:e?o=>i-e[o]/2:t&&r!==void 0?o=>t[o]-r/2:r!==void 0?i-r/2:n&&t?o=>t[o]-n[o]:n?o=>i-n[o]:t?o=>t[o]-s:i-s}function c2e(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=kr(e,n)),new h8(t,{...i,x:e,y:n})}function u2e(t,e,n){var i=1e-8,r=e-1,s=n-1,o=0,a,l,c,u,h,f,d,g,m,_,y;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(c=t<.5?t:1-t,u=Math.sqrt(-2*Math.log(c)),d=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,t<.5&&(d=-d),g=(d*d-3)/6,m=2/(1/(2*e-1)+1/(2*n-1)),_=d*Math.sqrt(g+m)/m-(1/(2*n-1)-1/(2*e-1))*(g+5/6-2/(3*m)),d=e/(e+n*Math.exp(2*_))):(a=Math.log(e/(e+n)),l=Math.log(n/(e+n)),u=Math.exp(e*a)/e,h=Math.exp(n*l)/n,_=u+h,t<u/_?d=Math.pow(e*_*t,1/e):d=1-Math.pow(n*_*(1-t),1/n)),y=-ou(e)-ou(n)+ou(e+n);o<10;o++){if(d===0||d===1)return d;if(f=h2e(d,e,n)-t,u=Math.exp(r*Math.log(d)+s*Math.log(1-d)+y),h=f/u,d-=u=h/(1-.5*Math.min(1,h*(r/d-s/(1-d)))),d<=0&&(d=.5*(d+u)),d>=1&&(d=.5*(d+u+1)),Math.abs(u)<i*d&&o>0)break}return d}function h2e(t,e,n){var i=t===0||t===1?0:Math.exp(ou(e+n)-ou(e)-ou(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?i*n3(t,e,n)/e:1-i*n3(1-t,n,e)/n}function n3(t,e,n){var i=1e-30,r=1,s=e+n,o=e+1,a=e-1,l=1,c=1-s*t/o,u,h,f,d;for(Math.abs(c)<i&&(c=i),c=1/c,d=c;r<=100&&(u=2*r,h=r*(n-r)*t/((a+u)*(e+u)),c=1+h*c,Math.abs(c)<i&&(c=i),l=1+h/l,Math.abs(l)<i&&(l=i),c=1/c,d*=c*l,h=-(e+r)*(s+r)*t/((e+u)*(o+u)),c=1+h*c,Math.abs(c)<i&&(c=i),l=1+h/l,Math.abs(l)<i&&(l=i),c=1/c,f=c*l,d*=f,!(Math.abs(f-1)<3e-7));r++);return d}function ou(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],i=1.000000000190015,r,s,o;for(o=(s=r=t)+5.5,o-=(r+.5)*Math.log(o);e<6;e++)i+=n[e]/++s;return Math.log(2.506628274631*i/r)-o}function f2e(t,e){var n=u2e(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const d2e={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class f8 extends pt{constructor(e,n={}){const{x:i,y:r,z:s,ci:o=.95,precision:a=4}=n;if(super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:$a(n),optional:!0}},n,d2e),this.z=s,this.ci=+o,this.precision=+a,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${o}`);if(!(this.precision>0))throw new Error(`invalid precision: ${a}`)}render(e,n,i,r,s){const{x:o,y:a,z:l}=i,{ci:c}=this;return rt("svg:g",s).call(Mt,this,r,s).call(mt,this,n).call(u=>u.selectAll().data(l?KE(e,l,this.z):[e]).enter().call(h=>h.append("path").attr("fill","none").call(wt,this).call(D0,this,{...i,fill:null,fillOpacity:null}).attr("d",f=>this._renderLine(f,o,a)).call(c&&!Wu(this.fill)?f=>f.select(g2e).attr("stroke","none").call(wt,this).call(D0,this,{...i,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,o,a)):()=>{}))).node()}}function g2e(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(kl.svg,"path"),this)}class m2e extends f8{constructor(e,n){super(e,n)}_renderBand(e,n,i){const{ci:r,precision:s}=this,[o,a]=St(e,u=>i[u]),l=G0(e,i,n),c=d8(e,i,n,(1-r)/2,l);return Tu().y(u=>u).x0(u=>c(u,-1)).x1(u=>c(u,1))(Fi(o,a-s/2,s).concat(a))}_renderLine(e,n,i){const[r,s]=St(e,a=>i[a]),o=G0(e,i,n);return`M${o(r)},${r}L${o(s)},${s}`}}class p2e extends f8{constructor(e,n){super(e,n)}_renderBand(e,n,i){const{ci:r,precision:s}=this,[o,a]=St(e,u=>n[u]),l=G0(e,n,i),c=d8(e,n,i,(1-r)/2,l);return Tu().x(u=>u).y0(u=>c(u,-1)).y1(u=>c(u,1))(Fi(o,a-s/2,s).concat(a))}_renderLine(e,n,i){const[r,s]=St(e,a=>n[a]),o=G0(e,n,i);return`M${r},${o(r)}L${s},${o(s)}`}}function _2e(t,{y:e=di,x:n=Re,stroke:i,fill:r=Ft(i)?"currentColor":i,...s}={}){return new m2e(t,yT({...s,x:n,y:e,fill:r,stroke:i}))}function y2e(t,{x:e=di,y:n=Re,stroke:i,fill:r=Ft(i)?"currentColor":i,...s}={}){return new p2e(t,_T({...s,x:e,y:n,fill:r,stroke:i}))}function G0(t,e,n){let i=0,r=0,s=0,o=0;for(const u of t){const h=e[u],f=n[u];i+=h,r+=f,s+=h*f,o+=h*h}const a=t.length,l=(a*s-i*r)/(a*o-i*i),c=(r-l*i)/a;return u=>l*u+c}function d8(t,e,n,i,r){const s=ss(t,u=>e[u])/t.length;let o=0,a=0;for(const u of t)o+=(e[u]-s)**2,a+=(n[u]-r(e[u]))**2;const l=Math.sqrt(a/(t.length-2)),c=f2e(i,t.length-2);return(u,h)=>{const f=r(u),d=l*Math.sqrt(1/t.length+(u-s)**2/o);return f+h*c*d}}function Hw({path:t=Re,delimiter:e,frameAnchor:n,treeLayout:i=Yp,treeSort:r,treeSeparation:s,treeAnchor:o,treeFilter:a,...l}={}){o=FT(o),r=m8(r),a!=null&&(a=Vw(a)),n===void 0&&(n=o.frameAnchor);const c=p8(e),u=E8(l,Vw),[h,f]=vi(),[d,g]=vi();return{x:h,y:d,frameAnchor:n,...ds(l,(m,_)=>{const y=c(Ge(m,t)),p=f([]),b=g([]);let v=-1;const E=[],w=[],T=gO().path(M=>y[M]),C=i();C.nodeSize&&C.nodeSize([1,1]),C.separation&&s!==void 0&&C.separation(s??RE);for(const M of u)M[U0]=M[w8]([]);for(const M of _){const S=[],R=T(M.filter(I=>y[I]!=null)).each(I=>I.data=m[I.data]);r!=null&&R.sort(r),C(R);for(const I of R.descendants())if(!(a!=null&&!a(I))){S.push(++v),E[v]=I.data,o.position(I,v,p,b);for(const N of u)N[U0][v]=N[x8](I)}w.push(S)}return{data:E,facets:w}}),...Object.fromEntries(u)}}function g8({path:t=Re,delimiter:e,curve:n="bump-x",stroke:i="#555",strokeWidth:r=1.5,strokeOpacity:s=.5,treeLayout:o=Yp,treeSort:a,treeSeparation:l,treeAnchor:c,treeFilter:u,...h}={}){c=FT(c),a=m8(a),u!=null&&(u=r3(u)),h={curve:n,stroke:i,strokeWidth:r,strokeOpacity:s,...h};const f=p8(e),d=E8(h,r3),[g,m]=vi(),[_,y]=vi(),[p,b]=vi(),[v,E]=vi();return{x1:g,x2:_,y1:p,y2:v,...ds(h,(w,T)=>{const C=f(Ge(w,t)),M=m([]),S=y([]),R=b([]),I=E([]);let N=-1;const O=[],k=[],L=gO().path(H=>C[H]),D=o();D.nodeSize&&D.nodeSize([1,1]),D.separation&&l!==void 0&&D.separation(l??RE);for(const H of d)H[U0]=H[w8]([]);for(const H of T){const q=[],G=L(H.filter(J=>C[J]!=null)).each(J=>J.data=w[J.data]);a!=null&&G.sort(a),D(G);for(const{source:J,target:W}of G.links())if(!(u!=null&&!u(W,J))){q.push(++N),O[N]=W.data,c.position(J,N,M,R),c.position(W,N,S,I);for(const ie of d)ie[U0][N]=ie[x8](W,J)}k.push(q)}return{data:O,facets:k}}),...Object.fromEntries(d)}}function FT(t="left"){switch(`${t}`.trim().toLowerCase()){case"left":return v2e;case"right":return b2e}throw new Error(`invalid tree anchor: ${t}`)}const v2e={frameAnchor:"left",dx:6,position({x:t,y:e},n,i,r){i[n]=e,r[n]=-t}},b2e={frameAnchor:"right",dx:-6,position({x:t,y:e},n,i,r){i[n]=-e,r[n]=-t}};function m8(t){return t==null||typeof t=="function"?t:`${t}`.trim().toLowerCase().startsWith("node:")?i3(Vw(t)):i3(w2e(t))}function i3(t){return(e,n)=>Qi(t(e),t(n))}function w2e(t){return e=>{var n;return(n=e.data)==null?void 0:n[t]}}function p8(t="/"){if(t=`${t}`,t==="/")return n=>n;if(t.length!==1)throw new Error("delimiter must be exactly one character");const e=t.charCodeAt(0);return n=>n.map(i=>x2e(i,e))}const Bw=92,_8=47;function x2e(t,e){if(e===Bw)throw new Error("delimiter cannot be backslash");let n=!1;for(let i=0,r=t.length;i<r;++i){switch(t.charCodeAt(i)){case Bw:if(!n){n=!0;continue}break;case e:n?(t=t.slice(0,i-1)+t.slice(i),--i,--r):t=t.slice(0,i)+"/"+t.slice(i+1);break;case _8:n?(t=t.slice(0,i)+"\\\\"+t.slice(i),i+=2,r+=2):(t=t.slice(0,i)+"\\"+t.slice(i),++i,++r);break}n=!1}return t}function E2e(t){let e=!1;for(let n=0,i=t.length;n<i;++n){switch(t.charCodeAt(n)){case Bw:if(!e){e=!0;continue}case _8:e&&(t=t.slice(0,n-1)+t.slice(n),--n,--i);break}e=!1}return t}function y8(t){return nr(t)&&typeof t.node=="function"}function T2e(t){return nr(t)&&typeof t.link=="function"}function Vw(t){if(y8(t))return t.node;if(t=`${t}`.trim().toLowerCase(),!!t.startsWith("node:")){switch(t){case"node:name":return Uw;case"node:path":return Gw;case"node:internal":return v8;case"node:external":return b8;case"node:depth":return Yw;case"node:height":return jw}throw new Error(`invalid node value: ${t}`)}}function r3(t){if(y8(t))return t.node;if(T2e(t))return t.link;if(t=`${t}`.trim().toLowerCase(),!(!t.startsWith("node:")&&!t.startsWith("parent:"))){switch(t){case"parent:name":return Dm(Uw);case"parent:path":return Dm(Gw);case"parent:depth":return Dm(Yw);case"parent:height":return Dm(jw);case"node:name":return Uw;case"node:path":return Gw;case"node:internal":return v8;case"node:external":return b8;case"node:depth":return Yw;case"node:height":return jw}throw new Error(`invalid link value: ${t}`)}}function Gw(t){return t.id}function Uw(t){return S2e(t.id)}function Yw(t){return t.depth}function jw(t){return t.height}function v8(t){return!!t.children}function b8(t){return!t.children}function Dm(t){return(e,n)=>n==null?void 0:t(n)}function S2e(t){let e=t.length;for(;--e>0&&!C2e(t,e););return E2e(t.slice(e+1))}function C2e(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}const w8=2,x8=3,U0=4;function E8(t,e){const n=[];for(const i in t){const r=t[i],s=e(r);s!==void 0&&n.push([i,...vi(r),s])}return n}function T8(t,{fill:e,stroke:n,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,marker:u,markerStart:h=u,markerEnd:f=u,dot:d=Ft(h)&&Ft(f),text:g="node:name",textStroke:m="white",title:_="node:path",dx:y,dy:p,textAnchor:b,treeLayout:v=Yp,textLayout:E=v===Yp||v===hO?"mirrored":"normal",tip:w,...T}={}){if(y===void 0&&(y=FT(T.treeAnchor).dx),b!==void 0)throw new Error("textAnchor is not a configurable tree option");E=Mi(E,"textLayout",["mirrored","normal"]);function C(M){return Bu(t,Hw({treeLayout:v,text:g,fill:e===void 0?"currentColor":e,stroke:m,dx:y,dy:p,title:_,...M,...T}))}return Mr(L4(t,g8({treeLayout:v,markerStart:h,markerEnd:f,stroke:n!==void 0?n:e===void 0?"node:internal":e,strokeWidth:i,strokeOpacity:r,strokeLinejoin:s,strokeLinecap:o,strokeMiterlimit:a,strokeDasharray:l,strokeDashoffset:c,...T})),d?po(t,Hw({treeLayout:v,fill:e===void 0?"node:internal":e,title:_,tip:w,...T})):null,g!=null?E==="mirrored"?[C({textAnchor:"start",treeFilter:"node:external"}),C({textAnchor:"end",treeFilter:"node:internal",dx:-y})]:C():null)}function M2e(t,e){return T8(t,{...e,treeLayout:hO})}function A2e({geometry:t=Re,...e}={}){return fi({...e,x:null,y:null},(n,i,r,s,o,{projection:a})=>{const l=Ge(n,t),c=l.length,u=new Float64Array(c),h=new Float64Array(c),f=Ea(a);for(let d=0;d<c;++d)[u[d],h[d]]=f.centroid(l[d]);return{data:n,facets:i,channels:{x:{value:u,scale:a==null?"x":null,source:null},y:{value:h,scale:a==null?"y":null,source:null}}}})}function R2e({geometry:t=Re,...e}={}){let n;return{...e,x:{transform:i=>Float64Array.from(n=Ge(Ge(i,t),vU),([r])=>r)},y:{transform:()=>Float64Array.from(n,([,i])=>i)}}}function I2e(t,e,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>=0?(s=o,r=o-1):i=o+1}return s}function k2e(t,e,n,i,r){for(var s=r+1;i<=r;){var o=i+r>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l>0?(s=o,r=o-1):i=o+1}return s}function $2e(t,e,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<0?(s=o,i=o+1):r=o-1}return s}function O2e(t,e,n,i,r){for(var s=i-1;i<=r;){var o=i+r>>>1,a=t[o],l=n!==void 0?n(a,e):a-e;l<=0?(s=o,i=o+1):r=o-1}return s}function L2e(t,e,n,i,r){for(;i<=r;){var s=i+r>>>1,o=t[s],a=n!==void 0?n(o,e):o-e;if(a===0)return s;a<=0?i=s+1:r=s-1}return-1}function Qh(t,e,n,i,r,s){return typeof n=="function"?s(t,e,n,i===void 0?0:i|0,r===void 0?t.length-1:r|0):s(t,e,void 0,n===void 0?0:n|0,i===void 0?t.length-1:i|0)}var N2e={ge:function(t,e,n,i,r){return Qh(t,e,n,i,r,I2e)},gt:function(t,e,n,i,r){return Qh(t,e,n,i,r,k2e)},lt:function(t,e,n,i,r){return Qh(t,e,n,i,r,$2e)},le:function(t,e,n,i,r){return Qh(t,e,n,i,r,O2e)},eq:function(t,e,n,i,r){return Qh(t,e,n,i,r,L2e)}},Y0=N2e,Uc=0,ja=1,rp=2,D2e=P2e;function PT(t,e,n,i,r){this.mid=t,this.left=e,this.right=n,this.leftPoints=i,this.rightPoints=r,this.count=(e?e.count:0)+(n?n.count:0)+i.length}var Sg=PT.prototype;function zv(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function S8(t,e){var n=Yu(e);t.mid=n.mid,t.left=n.left,t.right=n.right,t.leftPoints=n.leftPoints,t.rightPoints=n.rightPoints,t.count=n.count}function s3(t,e){var n=t.intervals([]);n.push(e),S8(t,n)}function o3(t,e){var n=t.intervals([]),i=n.indexOf(e);return i<0?Uc:(n.splice(i,1),S8(t,n),ja)}Sg.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t};Sg.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?s3(this,t):this.left.insert(t):this.left=Yu([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?s3(this,t):this.right.insert(t):this.right=Yu([t]);else{var n=Y0.ge(this.leftPoints,t,zT),i=Y0.ge(this.rightPoints,t,WT);this.leftPoints.splice(n,0,t),this.rightPoints.splice(i,0,t)}};Sg.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return Uc;var n=this.right?this.right.count:0;if(4*n>3*(e-1))return o3(this,t);var i=this.left.remove(t);return i===rp?(this.left=null,this.count-=1,ja):(i===ja&&(this.count-=1),i)}else if(t[0]>this.mid){if(!this.right)return Uc;var r=this.left?this.left.count:0;if(4*r>3*(e-1))return o3(this,t);var i=this.right.remove(t);return i===rp?(this.right=null,this.count-=1,ja):(i===ja&&(this.count-=1),i)}else{if(this.count===1)return this.leftPoints[0]===t?rp:Uc;if(this.leftPoints.length===1&&this.leftPoints[0]===t){if(this.left&&this.right){for(var s=this,o=this.left;o.right;)s=o,o=o.right;if(s===this)o.right=this.right;else{var a=this.left,i=this.right;s.count-=o.count,s.right=o.left,o.left=a,o.right=i}zv(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?zv(this,this.left):zv(this,this.right);return ja}for(var a=Y0.ge(this.leftPoints,t,zT);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(var i=Y0.ge(this.rightPoints,t,WT);i<this.rightPoints.length&&this.rightPoints[i][1]===t[1];++i)if(this.rightPoints[i]===t)return this.rightPoints.splice(i,1),ja}return Uc}};function C8(t,e,n){for(var i=0;i<t.length&&t[i][0]<=e;++i){var r=n(t[i]);if(r)return r}}function M8(t,e,n){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var r=n(t[i]);if(r)return r}}function A8(t,e){for(var n=0;n<t.length;++n){var i=e(t[n]);if(i)return i}}Sg.queryPoint=function(t,e){if(t<this.mid){if(this.left){var n=this.left.queryPoint(t,e);if(n)return n}return C8(this.leftPoints,t,e)}else if(t>this.mid){if(this.right){var n=this.right.queryPoint(t,e);if(n)return n}return M8(this.rightPoints,t,e)}else return A8(this.leftPoints,e)};Sg.queryInterval=function(t,e,n){if(t<this.mid&&this.left){var i=this.left.queryInterval(t,e,n);if(i)return i}if(e>this.mid&&this.right){var i=this.right.queryInterval(t,e,n);if(i)return i}return e<this.mid?C8(this.leftPoints,e,n):t>this.mid?M8(this.rightPoints,t,n):A8(this.leftPoints,n)};function F2e(t,e){return t-e}function zT(t,e){var n=t[0]-e[0];return n||t[1]-e[1]}function WT(t,e){var n=t[1]-e[1];return n||t[0]-e[0]}function Yu(t){if(t.length===0)return null;for(var e=[],n=0;n<t.length;++n)e.push(t[n][0],t[n][1]);e.sort(F2e);for(var i=e[e.length>>1],r=[],s=[],o=[],n=0;n<t.length;++n){var a=t[n];a[1]<i?r.push(a):i<a[0]?s.push(a):o.push(a)}var l=o,c=o.slice();return l.sort(zT),c.sort(WT),new PT(i,Yu(r),Yu(s),l,c)}function qw(t){this.root=t}var Eh=qw.prototype;Eh.insert=function(t){this.root?this.root.insert(t):this.root=new PT(t[0],null,null,[t],[t])};Eh.remove=function(t){if(this.root){var e=this.root.remove(t);return e===rp&&(this.root=null),e!==Uc}return!1};Eh.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)};Eh.queryInterval=function(t,e,n){if(t<=e&&this.root)return this.root.queryInterval(t,e,n)};Object.defineProperty(Eh,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(Eh,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function P2e(t){return!t||t.length===0?new qw(null):new qw(Yu(t))}const z2e=dD(D2e),W2e=({marginLeft:t})=>[1,t],H2e=({width:t,marginRight:e})=>[-1,t-e],B2e=({width:t,marginLeft:e,marginRight:n})=>[0,(e+t-n)/2],V2e=({marginTop:t})=>[1,t],G2e=({height:t,marginBottom:e})=>[-1,t-e],U2e=({height:t,marginTop:e,marginBottom:n})=>[0,(e+t-n)/2];function R8(t){return typeof t=="string"?{anchor:t}:t}function Y2e(t={},e={}){arguments.length===1&&([t,e]=I8(t));let{anchor:n="left",padding:i=1,r=e.r}=R8(t);switch(`${n}`.toLowerCase()){case"left":n=W2e;break;case"right":n=H2e;break;case"middle":n=B2e;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return k8("x","y",n,je(i),r,e)}function j2e(t={},e={}){arguments.length===1&&([t,e]=I8(t));let{anchor:n="bottom",padding:i=1,r=e.r}=R8(t);switch(`${n}`.toLowerCase()){case"top":n=V2e;break;case"bottom":n=G2e;break;case"middle":n=U2e;break;default:throw new Error(`unknown dodge anchor: ${n}`)}return k8("y","x",n,je(i),r,e)}function I8(t){const{anchor:e,padding:n,...i}=t,{r}=i;return[{anchor:e,padding:n,r},i]}function k8(t,e,n,i,r,s){if(r!=null&&typeof r!="number"){let{channels:o,sort:a,reverse:l}=s;o=LE(o),(o==null?void 0:o.r)===void 0&&(s={...s,channels:{...o,r:{value:r,scale:"r"}}}),a===void 0&&l===void 0&&(s.sort={channel:"-r"})}return fi(s,function(o,a,l,c,u,h){let{[e]:f,r:d}=l;if(!l[e])throw new Error(`missing channel: ${e}`);({[e]:f}=Ty(l,c,h));const g=d?void 0:r!==void 0?je(r):this.r!==void 0?this.r:3;d&&(d=Ge(d.value,c[d.scale]||Re,Float64Array));let[m,_]=n(u);const y=m?X2e:q2e,p=new Float64Array(f.length),b=d?v=>d[v]:()=>g;for(let v of a){const E=z2e();v=v.filter(d?T=>$0(f[T])&&qs(d[T]):T=>$0(f[T]));const w=new Float64Array(2*v.length+2);for(const T of v){const C=b(T),M=m?C+i:0,S=f[T]-C,R=f[T]+C;let I=2;E.queryInterval(S-i,R+i,([,,O])=>{const k=p[O]-M,L=f[T]-f[O],D=i+(d?d[T]+d[O]:2*g),H=Math.sqrt(D*D-L*L);w[I++]=k-H,w[I++]=k+H});let N=w.slice(0,I);m&&(N=N.filter(O=>O>=0));e:for(const O of N.sort(y)){for(let k=0;k<I;k+=2)if(w[k]+1e-6<O&&O<w[k+1]-1e-6)continue e;p[T]=O+M;break}E.insert([S,R,T])}}m||(m=1);for(const v of a)for(const E of v)p[E]=p[E]*m+_;return{data:o,facets:a,channels:{[t]:{value:p,source:null},[e]:{value:f,source:l[e]},...d&&{r:{value:d,source:l.r}}}}})}function q2e(t,e){return Math.abs(t)-Math.abs(e)}function X2e(t,e){return t-e}function Z2e(t,e){return arguments.length===1&&({basis:t,...e}=t),IT(HT(t),e)}function K2e(t,e){return arguments.length===1&&({basis:t,...e}=t),kT(HT(t),e)}function HT(t){if(t===void 0)return a3;if(typeof t=="function")return Wy($E(t));if(/^p\d{2}$/i.test(t))return Th(IE(t));switch(`${t}`.toLowerCase()){case"deviation":return exe;case"first":return a3;case"last":return Q2e;case"max":return txe;case"mean":return nxe;case"median":return ixe;case"min":return rxe;case"sum":return sxe;case"extent":return J2e}throw new Error(`invalid basis: ${t}`)}function Wy(t){return{mapIndex(e,n,i){const r=+t(e,n);for(const s of e)i[s]=n[s]===null?NaN:n[s]/r}}}function Th(t){return Wy((e,n)=>t(e,i=>n[i]))}const J2e={mapIndex(t,e,n){const[i,r]=St(t,o=>e[o]),s=r-i;for(const o of t)n[o]=e[o]===null?NaN:(e[o]-i)/s}},a3=Wy((t,e)=>{for(let n=0;n<t.length;++n){const i=e[t[n]];if(Un(i))return i}}),Q2e=Wy((t,e)=>{for(let n=t.length-1;n>=0;--n){const i=e[t[n]];if(Un(i))return i}}),exe={mapIndex(t,e,n){const i=h_(t,s=>e[s]),r=Ad(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:r?(e[s]-i)/r:0}},txe=Th(Kt),nxe=Th(h_),ixe=Th(Uf),rxe=Th(fn),sxe=Th(ss);function oxe(t,e={}){if(typeof t=="string")switch(t.toLowerCase()){case"first":return $8(e);case"last":return O8(e)}if(typeof t=="function")return va(null,t,e);let n,i;for(n in t){if(i!==void 0)throw new Error("ambiguous selector; multiple inputs");i=axe(t[n])}if(i===void 0)throw new Error(`invalid selector: ${t}`);return va(n,i,e)}function axe(t){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"min":return BT;case"max":return VT}throw new Error(`unknown selector: ${t}`)}function $8(t){return va(null,fxe,t)}function O8(t){return va(null,dxe,t)}function lxe(t){return va("x",BT,t)}function cxe(t){return va("y",BT,t)}function uxe(t){return va("x",VT,t)}function hxe(t){return va("y",VT,t)}function*fxe(t){yield t[0]}function*dxe(t){yield t[t.length-1]}function*BT(t,e){yield WW(t,n=>e[n])}function*VT(t,e){yield S2(t,n=>e[n])}function va(t,e,n){if(t!=null){if(n[t]==null)throw new Error(`missing channel: ${t}`);t=n[t]}const i=$a(n);return ds(n,(r,s)=>{const o=Ge(r,i),a=Ge(r,t),l=[];for(const c of s){const u=[];for(const h of o?ao(c,f=>o[f]).values():[c])for(const f of e(h,a))u.push(f);l.push(u)}return{data:r,facets:l}})}const Wv=Object.freeze(Object.defineProperty({__proto__:null,Area:Ly,Arrow:N4,BarX:F4,BarY:P4,Cell:Ny,Contour:s8,Density:l8,Dot:Dy,Frame:m4,Geo:c8,Hexgrid:u8,Image:h8,Line:Fy,Link:O4,Mark:pt,Raster:J4,Rect:Py,RuleX:MP,RuleY:AP,Text:Iy,TickX:G4,TickY:U4,Tip:p4,Vector:ky,area:Sbe,areaX:Ed,areaY:Vl,arrow:kbe,auto:Vbe,autoSpec:z4,axisFx:KP,axisFy:ZP,axisX:hT,axisY:uT,barX:fl,barY:dl,bin:Ja,binX:jo,binY:qo,bollinger:Cl,bollingerX:awe,bollingerY:lwe,boxX:uwe,boxY:hwe,cell:Gc,cellX:Obe,cellY:Lbe,centroid:A2e,circle:Pbe,cluster:M2e,column:vi,contour:Swe,crosshair:Mwe,crosshairX:Awe,crosshairY:Rwe,delaunayLink:Bwe,delaunayMesh:Vwe,density:qwe,dodgeX:Y2e,dodgeY:j2e,dot:po,dotX:Dbe,dotY:Fbe,filter:Z_e,formatIsoDate:WF,formatMonth:pye,formatWeekday:_ye,frame:gT,geo:DT,geoCentroid:R2e,graticule:e2e,gridFx:i4,gridFy:t4,gridX:n4,gridY:e4,group:BE,groupX:yd,groupY:vd,groupZ:HE,hexagon:zbe,hexbin:t2e,hexgrid:r2e,hull:Gwe,identity:Re,image:c2e,indexOf:di,initializer:fi,interpolateNearest:i8,interpolateNone:Ww,interpolatorBarycentric:n8,interpolatorRandomWalk:r8,legend:yve,line:AT,lineX:Td,lineY:Uu,linearRegressionX:_2e,linearRegressionY:y2e,link:L4,map:so,mapX:IT,mapY:kT,marks:Mr,normalize:HT,normalizeX:Z2e,normalizeY:K2e,plot:y4,pointer:oT,pointerX:xd,pointerY:aT,raster:dwe,rect:RT,rectX:B0,rectY:V0,reverse:K_e,ruleX:ro,ruleY:ya,scale:w1e,select:oxe,selectFirst:$8,selectLast:O8,selectMaxX:uxe,selectMaxY:hxe,selectMinX:lxe,selectMinY:cxe,shuffle:J_e,sort:OF,sphere:Qwe,spike:sve,stackX:M4,stackX1:cbe,stackX2:ube,stackY:A4,stackY1:hbe,stackY2:fbe,text:Bu,textX:$P,textY:OP,tickX:Y4,tickY:j4,tip:_4,transform:ds,tree:T8,treeLink:g8,treeNode:Hw,valueof:Ge,vector:VP,vectorX:GP,vectorY:UP,voronoi:Uwe,voronoiMesh:Ywe,window:zy,windowX:Zbe,windowY:Pw},Symbol.toStringTag,{value:"Module"}));class gxe{constructor(){this.documentElement=new Hv(this,"html")}createElementNS(e,n){return new Hv(this,n)}createElement(e){return new Hv(this,e)}createTextNode(e){return new mxe(this,e)}querySelector(){return null}querySelectorAll(){return[]}}const j0=class j0{setProperty(){}removeProperty(){}};ee(j0,"empty",new j0);let Xw=j0,Hv=class{constructor(e,n){this.ownerDocument=e,this.tagName=n,this.attributes={},this.children=[],this.parentNode=null}setAttribute(e,n){this.attributes[e]=String(n)}setAttributeNS(e,n,i){this.setAttribute(n,i)}getAttribute(e){return this.attributes[e]}getAttributeNS(e){return this.getAttribute(e)}hasAttribute(e){return e in this.attributes}hasAttributeNS(e){return this.hasAttribute(e)}removeAttribute(e){delete this.attributes[e]}removeAttributeNS(e,n){this.removeAttribute(n)}addEventListener(){}removeEventListener(){}dispatchEvent(){}append(...e){for(const n of e)this.appendChild(n!=null&&n.ownerDocument?n:this.ownerDocument.createTextNode(n))}appendChild(e){return this.children.push(e),e.parentNode=this,e}insertBefore(e,n){if(n==null)this.children.push(e);else{const i=this.children.indexOf(n);if(i<0)throw new Error("insertBefore reference node not found");this.children.splice(i,0,e)}return e.parentNode=this,e}querySelector(){return null}querySelectorAll(){return[]}set textContent(e){this.children=[this.ownerDocument.createTextNode(e)]}set style(e){this.attributes.style=e}get style(){return Xw.empty}toHyperScript(){return $s(this.tagName,this.attributes,this.children.map(e=>e.toHyperScript()))}};class mxe{constructor(e,n){this.ownerDocument=e,this.nodeValue=String(n)}toHyperScript(){return this.nodeValue}}function L8(t){if(t.nodeType===3)return t.nodeValue;const e={};for(const i of t.getAttributeNames())e[i]=t.getAttribute(i);const n=[];for(let i=t.firstChild;i;i=i.nextSibling)n.push(L8(i));return $s(t.tagName,e,n)}const pxe={props:{options:Object,mark:Object,defer:Boolean,method:{type:String,default:"plot"},onRender:Function},render(){const{method:t}=this,e={...t==="plot"&&{marks:this.mark==null?[]:[this.mark]},...this.options,className:"plot"};if(this.defer){const i=o=>{s();const a=()=>{r(o);const c=Wv[t](e);o.append(c),this.onRender(c)},l=o.getBoundingClientRect();l.bottom>0&&l.top<window.innerHeight?a():(this._observer=new IntersectionObserver(([c])=>{c.isIntersecting&&a()},{rootMargin:"100px"}),this._observer.observe(o),typeof requestIdleCallback=="function"&&(this._idling=requestIdleCallback(a)))},r=o=>{for(;o.lastChild;)o.lastChild.remove();s()},s=()=>{this._observer!==void 0&&(this._observer.disconnect(),this._observer=void 0),this._idling!==void 0&&(cancelIdleCallback(this._idling),this._idling=void 0)};return this.options,ct($s("span",t==="plot"?[$s("div",{style:{maxWidth:"100%"}})]:[]),[[{mounted:i,updated:i,unmounted:r}]])}if(typeof document<"u"){const i=Wv[t](e),r=s=>{for(;s.lastChild;)s.lastChild.remove();s.append(i),this.onRender(i)};return ct($s("span",[L8(i)]),[[{mounted:r,updated:r}]])}const n=Wv[t]({...e,document:new gxe});return this.onRender(n),$s("span",[n.toHyperScript()])}},_xe={components:{PlotFigure:pxe},props:{activityFiles:Array,activityTimezoneOffset:Array},data(){return{x:t=>t.totalDistance,y:t=>t.altitude,firstData:Ke,hovered:Ke,cumulativeData:[],yMin:Number.MAX_VALUE,yMax:0,plotSizeWidth:0,plotSizeHeight:0}},watch:{activityFiles:{handler(t){let e=[],n=0;t==null||t.forEach((i,r)=>{i.sessions.forEach(s=>{s.records.map((o,a)=>{o.totalDistance=n+o.distance,typeof o.altitude=="number"&&o.altitude>this.yMax&&(this.yMax=o.altitude),typeof o.altitude=="number"&&o.altitude<this.yMin&&(this.yMin=o.altitude),o.activityIndex=r,o.recordIndex=a}),n=s.records[s.records.length-1].totalDistance,e=e.concat(s.records)})}),console.log("data",e.length),this.firstData=e[0],this.cumulativeData=e}}},computed:{hoveredResult:function(){if(!this.hovered||!this.firstData)return null;const t=Oe.fromISO(this.hovered.timestamp??"").diff(Oe.fromISO(this.firstData.timestamp??""));return{distance:iI(this.hovered.totalDistance??0,2),duration:rA(t,"seconds",{unitDisplay:"short"}),altitude:(this.hovered.altitude??0).toFixed(2),grade:Math.round(this.hovered.grade??0)}},options:function(){const t=(this.cumulativeData.length<50?50:this.cumulativeData.length)/50;return{width:this.plotSizeWidth<=0?void 0:this.plotSizeWidth,height:this.plotSizeHeight<=0?void 0:this.plotSizeHeight,x:{grid:!0,label:"Distance (km)",transform:e=>e/1e3},y:{grid:!0,label:"Altitude (m)",nice:!0},color:{type:"diverging",scheme:"RdYlGn",reverse:!0,pivot:0,symmetric:!0},marks:[Vl(this.cumulativeData,Pw(t,{x:this.x,y:this.y,z:null,fill:"#2A303F",curve:"basis",y1:this.yMin})),Uu(this.cumulativeData,Pw(t,{x:this.x,y:this.y,z:null,stroke:"grade",curve:"basis",strokeWidth:4,strokeOpacity:.5})),ro(this.cumulativeData,xd({x:this.x,py:this.y,stroke:"#f15a22"})),po(this.cumulativeData,xd({x:this.x,y:this.y,r:10,stroke:"#f15a22"}))]}}},methods:{distanceToHuman:iI,toHuman:rA,getOptions(){},plotRendered(t){this.onResize(),t.addEventListener("input",()=>{this.hovered=t.value,this.$emit("record",t.value)})},onResize(){if(!this.$el)return;let t=this.$el.offsetWidth,e=this.$el.offsetHeight-this.$el.querySelector(".graph-detail").offsetHeight-1;this.plotSizeWidth!=t&&(this.plotSizeWidth=t),this.plotSizeHeight!=e&&(this.plotSizeHeight=e),console.log(this.plotSizeWidth,this.plotSizeHeight)}},updated(){},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize),this.onResize()})},unmounted(){window.removeEventListener("resize",this.onResize)}};const Hy=t=>(Qt("data-v-37fc2713"),t=t(),en(),t),yxe={style:{display:"flex","flex-direction":"column",height:"100%"}},vxe={class:"graph-detail"},bxe={class:"detail"},wxe=Hy(()=>x("span",null,[x("i",{class:"fa-solid fa-road"})],-1)),xxe={class:"detail-value"},Exe={class:"detail"},Txe=Hy(()=>x("span",null,[x("i",{class:"fa-solid fa-hourglass-half"})],-1)),Sxe={class:"detail-value"},Cxe={class:"detail"},Mxe=Hy(()=>x("span",null,[x("i",{class:"fa-solid fa-mountain"})],-1)),Axe={class:"detail-value"},Rxe={class:"detail"},Ixe=Hy(()=>x("span",null,[x("i",{class:"fa-solid fa-angle-left"})],-1)),kxe={class:"detail-value"},$xe={class:"graph",style:{"flex-grow":"1"}};function Oxe(t,e,n,i,r,s){const o=Ku("PlotFigure");return j(),K("div",yxe,[x("div",vxe,[x("div",bxe,[wxe,x("span",xxe,X(s.hoveredResult?s.hoveredResult.distance??"-":"-"),1)]),x("div",Exe,[Txe,x("span",Sxe,X(s.hoveredResult?s.hoveredResult.duration??"-":"-"),1)]),x("div",Cxe,[Mxe,x("span",Axe,X(s.hoveredResult?s.hoveredResult.altitude??"-":"-")+" masl",1)]),x("div",Rxe,[Ixe,x("span",kxe,X(s.hoveredResult?s.hoveredResult.grade??"-":"-")+"%",1)])]),x("div",$xe,[me(o,{options:s.options,defer:"",onRender:s.plotRendered},null,8,["options","onRender"])])])}const Lxe=Ct(_xe,[["render",Oxe],["__scopeId","data-v-37fc2713"]]),By=t=>(Qt("data-v-2dad33a0"),t=t(),en(),t),Nxe={class:"offcanvas offcanvas-start",tabindex:"-1",id:"offcanvasSummary","aria-labelledby":"offcanvasSummaryLabel"},Dxe=By(()=>x("div",{class:"offcanvas-header"},[x("h5",{class:"offcanvas-title title",id:"offcanvasSummaryLabel"},"Open Activity"),x("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),Fxe={class:"offcanvas-body"},Pxe={class:"activity container-fluid text-center"},zxe=By(()=>x("div",{class:"header pt-5 pb-1"},[x("h2",{class:"title"},"Open Activity")],-1)),Wxe={class:"col-12 col-md-7 col-xl-9 map-container"},Hxe={class:"row"},Bxe={class:Xt(["col-12","map"])},Vxe=By(()=>x("div",{class:Xt(["col-12","bottom-info-button"])},[x("nav",{class:"position-relative bottom-info-nav"},[x("div",{class:"nav nav-tabs",role:"tablist"},[x("button",{class:"nav-link d-md-none",type:"button",role:"tab","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasSummary","aria-controls":"offcanvasSummary","aria-label":"Toggle Summary"},[x("i",{class:"fa-solid fa-bar"}),pe(" Summary ")]),x("button",{class:"nav-link active",id:"nav-elevation-tab","data-bs-toggle":"tab","data-bs-target":"#nav-graph",type:"button",role:"tab","aria-controls":"nav-graph","aria-selected":"true"}," Elevation ")])])],-1)),Gxe={class:Xt(["col-12","bottom-info"])},Uxe={class:"tab-content h-100"},Yxe={class:Xt(["tab-pane fade show active h-100","graph"]),id:"nav-graph",role:"tabpanel","aria-labelledby":"nav-elevation-tab",tabindex:"0"},jxe=By(()=>x("div",{class:Xt(["tab-pane fade h-100","graph"]),id:"nav-hr",role:"tabpanel","aria-labelledby":"nav-hr-tab",tabindex:"0"},null,-1)),Zw=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";Zw==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");class qxe{constructor(e){ee(this,"err",null);ee(this,"took");ee(this,"activities");const n=e;this.err=n==null?void 0:n.err,this.took=n==null?void 0:n.took,this.activities=n==null?void 0:n.activities}}const Xxe={data(){return{decodeWorker:new Worker(new URL("/assets/activity-service-66b44af8.js",self.location),{type:"module"}),geojsons:new Array,activities:new Array,timezoneOffsetHour:0,timezoneOffsetHoursList:new Array,loading:!1,begin:0,selectedFeatures:new Array,selectedSessions:new Array}},computed:{isActivityFileReady:function(){return this.activities&&this.activities.length>0},combinedRecords:function(){var t;return(t=this.activities)==null?void 0:t.flatMap(e=>e.sessions.flatMap(n=>n.records))},hasCadence(){for(let t=0;t<this.combinedRecords.length;t++){const e=this.combinedRecords[t].cadence;if(typeof e=="number"&&e!=255&&e!=0)return!0}return!1},hasHeartRate(){for(let t=0;t<this.combinedRecords.length;t++){const e=this.combinedRecords[t].heartRate;if(typeof e=="number"&&e!=255&&e!=0)return!0}return!1},hasPower(){for(let t=0;t<this.combinedRecords.length;t++){const e=this.combinedRecords[t].power;if(typeof e=="number"&&e!=65535&&e!=0)return!0}return!1},hasTemperature(){for(let t=0;t<this.combinedRecords.length;t++){const e=this.combinedRecords[t].temperature;if(typeof e=="number"&&e!=127)return!0}return!1}},watch:{activityFiles:{async handler(t){const e=new Array;for(let n=0;n<t.length;n++)e.push(t[n].timezone);this.timezoneOffsetHoursList=e,this.timezoneOffsetHour=e[0],console.log("timezone offsets:",e)}}},methods:{getExtention(t){if(t=="")return"";const e=t.split(".");return e[e.length-1].toLocaleLowerCase()},getExtentionIdentifier(t){return t=="fit"?1:t=="gpx"?2:t=="tcx"?3:0},createFeatures(t){const e=[];return t.forEach(n=>{n.sessions.forEach((i,r)=>{const s=Math.round(i.records.length*.1);let o=0,a=0,l=0,c=[];for(let u=0;u<i.records.length;u++){const h=i.records[u];if(o==s||u==i.records.length-1){l=u;const f=new R0().readFeature({id:`lineString-${r}-${a}-${l}`,type:"Feature",geometry:{type:"LineString",coordinates:c}});e.push(f),a=u+1,c=[],o=0}h.positionLong==null||h.positionLat==null||(c.push([h.positionLong,h.positionLat]),o++)}})}),e},fileInputEventListener(t){var i;const e=t.target;if(!e.files)return;let n=new Array;for(let r=0;r<((i=e.files)==null?void 0:i.length);r++)n.push(new Promise((s,o)=>{const a=e.files[r];if(!a){o("no file selected");return}const l=this.getExtention(a.name),c=this.getExtentionIdentifier(l);if(c==0){o(`file '${a.name}' (type: ${l}) is not supported`);return}const u=new FileReader;u.onload=h=>{const f=h.target.result;s(new Uint8Array([c,...new Uint8Array(f)]))},u.onerror=o,u.readAsArrayBuffer(a)}));Promise.all(n).then(r=>{this.begin=new Date().getTime(),this.loading=!0,this.decodeWorker.postMessage(r)})},decodeWorkerOnMessage(t){const e=new qxe(t.data);if(e.err!=null){console.error(`decode return with err: ${e.err}`),alert(`decode return with err: ${e.err}`),this.loading=!1;return}const n=new Date().getTime()-this.begin;console.group("Elapsed"),console.log("Decode took:		",e.took,"ms"),console.log("Interop wasm to js:	",n-e.took,"ms"),console.log("Total elapsed:		",n,"ms"),console.groupEnd(),this.activities=e.activities,this.selectedSessions=this.activities.flatMap(i=>i.sessions),this.selectedFeatures=this.createFeatures(this.activities),this.loading=!1},elevationOnRecord(t){this.$refs.theMap.showPopUpRecord(t)}},mounted(){var t,e;(t=document.getElementById("fileInput"))==null||t.addEventListener("change",this.fileInputEventListener),(e=document.getElementById("fileInputMobile"))==null||e.addEventListener("change",this.fileInputEventListener),this.decodeWorker.onmessage=this.decodeWorkerOnMessage}},Zxe=xt({...Xxe,__name:"TheActivity",setup(t){return(e,n)=>(j(),K("div",null,[me(uu,null,{default:Al(()=>[ct(me(ON,null,null,512),[[un,e.loading]])]),_:1}),x("div",Nxe,[Dxe,x("div",Fxe,[me(Aw,{isWebAssemblySupported:_t(Zw),id:"fileInputMobile"},null,8,["isWebAssemblySupported"]),me(nI,{activityFiles:e.activities,timezoneOffsetHour:e.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])])]),x("div",Pxe,[x("div",{class:Xt(["row h-100",e.isActivityFileReady?"":"align-items-center"])},[x("div",{class:Xt(["navigator","col-12",e.isActivityFileReady?"col-xl-3 col-md-5 d-none d-md-block":"col-md-12"])},[zxe,me(Aw,{isWebAssemblySupported:_t(Zw)},null,8,["isWebAssemblySupported"]),me(nI,{activityFiles:e.activities,timezoneOffsetHour:e.timezoneOffsetHour},null,8,["activityFiles","timezoneOffsetHour"])],2),ct(x("div",Wxe,[x("div",Hxe,[x("div",Bxe,[me(cF,{sessions:e.selectedSessions,features:e.selectedFeatures,hasCadence:e.hasCadence,hasHeartRate:e.hasHeartRate,hasPower:e.hasPower,hasTemperature:e.hasTemperature,ref:"theMap"},null,8,["sessions","features","hasCadence","hasHeartRate","hasPower","hasTemperature"])]),Vxe,x("div",Gxe,[x("div",Uxe,[x("div",Yxe,[me(Lxe,{activityFiles:e.activities,activityTimezoneOffset:e.timezoneOffsetHoursList,onRecord:e.elevationOnRecord},null,8,["activityFiles","activityTimezoneOffset","onRecord"])]),jxe])])])],512),[[un,e.isActivityFileReady]])],2)])]))}});const Kxe=Ct(Zxe,[["__scopeId","data-v-2dad33a0"]]),Jxe=xt({__name:"ActivityView",setup(t){return(e,n)=>(j(),K("main",null,[me(Kxe)]))}}),Qxe=uW({history:Mz("/"),routes:[{path:"/",name:"home",component:$pe},{path:"/legacy",name:"legacy",component:Jxe},{path:"/components/elevationgraphplot",name:"elevationgraphplot",component:()=>eC(()=>import("./ElevationGraph-0384c1d7.js"),[])},{path:"/components/elevationgraphview",name:"elevationgraph",component:()=>eC(()=>import("./ElevationGraphView-68954a45.js"),[])}]});var eEe=Object.defineProperty,tEe=Object.defineProperties,nEe=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,iEe=Object.prototype.hasOwnProperty,rEe=Object.prototype.propertyIsEnumerable,c3=(t,e,n)=>e in t?eEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cc=(t,e)=>{for(var n in e||(e={}))iEe.call(e,n)&&c3(t,n,e[n]);if(l3)for(var n of l3(e))rEe.call(e,n)&&c3(t,n,e[n]);return t},u3=(t,e)=>tEe(t,nEe(e));const sEe={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(t){this.autoscroll&&t&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var t;const e=((t=this.$refs.dropdownMenu)==null?void 0:t.children[this.typeAheadPointer])||!1;if(e){const n=this.getDropdownViewport(),{top:i,bottom:r,height:s}=e.getBoundingClientRect();if(i<n.top)return this.$refs.dropdownMenu.scrollTop=e.offsetTop;if(r>n.bottom)return this.$refs.dropdownMenu.scrollTop=e.offsetTop-(n.height-s)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},oEe={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let t=0;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},open(t){t&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let t=this.typeAheadPointer-1;t>=0;t--)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadDown(){for(let t=this.typeAheadPointer+1;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadSelect(){const t=this.filteredOptions[this.typeAheadPointer];t&&this.selectable(t)&&this.select(t)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},aEe={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(t){this.mutableLoading=t}},methods:{toggleLoading(t=null){return t==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=t}}},GT=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},lEe={},cEe={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},uEe=x("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),hEe=[uEe];function fEe(t,e){return j(),K("svg",cEe,hEe)}const dEe=GT(lEe,[["render",fEe]]),gEe={},mEe={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},pEe=x("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),_Ee=[pEe];function yEe(t,e){return j(),K("svg",mEe,_Ee)}const vEe=GT(gEe,[["render",yEe]]),h3={Deselect:dEe,OpenIndicator:vEe},bEe={mounted(t,{instance:e}){if(e.appendToBody){const{height:n,top:i,left:r,width:s}=e.$refs.toggle.getBoundingClientRect();let o=window.scrollX||window.pageXOffset,a=window.scrollY||window.pageYOffset;t.unbindPosition=e.calculatePosition(t,e,{width:s+"px",left:o+r+"px",top:a+i+n+"px"}),document.body.appendChild(t)}},unmounted(t,{instance:e}){e.appendToBody&&(t.unbindPosition&&typeof t.unbindPosition=="function"&&t.unbindPosition(),t.parentNode&&t.parentNode.removeChild(t))}};function wEe(t){const e={};return Object.keys(t).sort().forEach(n=>{e[n]=t[n]}),JSON.stringify(e)}let xEe=0;function EEe(){return++xEe}const TEe={components:Cc({},h3),directives:{appendToBody:bEe},mixins:[sEe,oEe,aEe],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:t=>t},selectable:{type:Function,default:t=>!0},getOptionLabel:{type:Function,default(t){return typeof t=="object"?t.hasOwnProperty(this.label)?t[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(t)}.
https://vue-select.org/api/props.html#getoptionlabel`):t}},getOptionKey:{type:Function,default(t){if(typeof t!="object")return t;try{return t.hasOwnProperty("id")?t.id:wEe(t)}catch(e){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,t,e)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(t,e,n){return(e||"").toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1}},filter:{type:Function,default(t,e){return t.filter(n=>{let i=this.getOptionLabel(n);return typeof i=="number"&&(i=i.toString()),this.filterBy(n,i,e)})}},createOption:{type:Function,default(t){return typeof this.optionList[0]=="object"?{[this.label]:t}:t}},resetOnOptionsChange:{default:!1,validator:t=>["function","boolean"].includes(typeof t)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:t,multiple:e}){return t&&!e}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(t,e)=>t},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(t,e,{width:n,top:i,left:r}){t.style.top=i,t.style.left=r,t.style.width=n}},dropdownShouldOpen:{type:Function,default({noDrop:t,open:e,mutableLoading:n}){return t?!1:e&&!n}},uid:{type:[String,Number],default:()=>EEe()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let t=this.modelValue;return this.isTrackingValues&&(t=this.$data._value),t!=null&&t!==""?[].concat(t):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const t={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:Cc({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:t,listFooter:t,header:u3(Cc({},t),{deselect:this.deselect}),footer:u3(Cc({},t),{deselect:this.deselect})}},childComponents(){return Cc(Cc({},h3),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const t=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return t;const e=this.search.length?this.filter(t,this.search,this):t;if(this.taggable&&this.search.length){const n=this.createOption(this.search);this.optionExists(n)||e.unshift(n)}return e},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(t,e){const n=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(t,e,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&n()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(t){this.isTrackingValues&&this.setInternalValueFromOptions(t)}},multiple(){this.clearSelection()},open(t){this.$emit(t?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(t){Array.isArray(t)?this.$data._value=t.map(e=>this.findOptionFromReducedValue(e)):this.$data._value=this.findOptionFromReducedValue(t)},select(t){this.$emit("option:selecting",t),this.isOptionSelected(t)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(t):(this.taggable&&!this.optionExists(t)&&(this.$emit("option:created",t),this.pushTag(t)),this.multiple&&(t=this.selectedValue.concat(t)),this.updateValue(t),this.$emit("option:selected",t)),this.onAfterSelect(t)},deselect(t){this.$emit("option:deselecting",t),this.updateValue(this.selectedValue.filter(e=>!this.optionComparator(e,t))),this.$emit("option:deselected",t)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(t){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(t){typeof this.modelValue>"u"&&(this.$data._value=t),t!==null&&(Array.isArray(t)?t=t.map(e=>this.reduce(e)):t=this.reduce(t)),this.$emit("update:modelValue",t)},toggleDropdown(t){const e=t.target!==this.searchEl;e&&t.preventDefault();const n=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||n.filter(Boolean).some(i=>i.contains(t.target)||i===t.target)){t.preventDefault();return}this.open&&e?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(t){return this.selectedValue.some(e=>this.optionComparator(e,t))},isOptionDeselectable(t){return this.isOptionSelected(t)&&this.deselectFromDropdown},optionComparator(t,e){return this.getOptionKey(t)===this.getOptionKey(e)},findOptionFromReducedValue(t){const e=i=>JSON.stringify(this.reduce(i))===JSON.stringify(t),n=[...this.options,...this.pushedTags].filter(e);return n.length===1?n[0]:n.find(i=>this.optionComparator(i,this.$data._value))||t},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let t=null;this.multiple&&(t=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(t)}},optionExists(t){return this.optionList.some(e=>this.optionComparator(e,t))},normalizeOptionForSlot(t){return typeof t=="object"?t:{[this.label]:t}},pushTag(t){this.pushedTags.push(t)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:t,multiple:e}=this;this.clearSearchOnBlur({clearSearchOnSelect:t,multiple:e})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(t){const e=r=>(r.preventDefault(),!this.isComposing&&this.typeAheadSelect()),n={8:r=>this.maybeDeleteValue(),9:r=>this.onTab(),27:r=>this.onEscape(),38:r=>(r.preventDefault(),this.typeAheadUp()),40:r=>(r.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(r=>n[r]=e);const i=this.mapKeydown(n,this);if(typeof i[t.keyCode]=="function")return i[t.keyCode](t)}}},SEe=["dir"],CEe=["id","aria-expanded","aria-owns"],MEe={ref:"selectedOptions",class:"vs__selected-options"},AEe=["disabled","title","aria-label","onClick"],REe={ref:"actions",class:"vs__actions"},IEe=["disabled"],kEe={class:"vs__spinner"},$Ee=["id"],OEe=["id","aria-selected","onMouseover","onClick"],LEe={key:0,class:"vs__no-options"},NEe=pe(" Sorry, no matching options. "),DEe=["id"];function FEe(t,e,n,i,r,s){const o=D7("append-to-body");return j(),K("div",{dir:n.dir,class:Xt(["v-select",s.stateClasses])},[rr(t.$slots,"header",ir(cr(s.scope.header))),x("div",{id:`vs${n.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":s.dropdownOpen.toString(),"aria-owns":`vs${n.uid}__listbox`,"aria-label":"Search for option",onMousedown:e[1]||(e[1]=a=>s.toggleDropdown(a))},[x("div",MEe,[(j(!0),K(yt,null,ji(s.selectedValue,(a,l)=>rr(t.$slots,"selected-option-container",{option:s.normalizeOptionForSlot(a),deselect:s.deselect,multiple:n.multiple,disabled:n.disabled},()=>[(j(),K("span",{key:n.getOptionKey(a),class:"vs__selected"},[rr(t.$slots,"selected-option",ir(cr(s.normalizeOptionForSlot(a))),()=>[pe(X(n.getOptionLabel(a)),1)]),n.multiple?(j(),K("button",{key:0,ref_for:!0,ref:c=>r.deselectButtons[l]=c,disabled:n.disabled,type:"button",class:"vs__deselect",title:`Deselect ${n.getOptionLabel(a)}`,"aria-label":`Deselect ${n.getOptionLabel(a)}`,onClick:c=>s.deselect(a)},[(j(),ml(Yy(s.childComponents.Deselect)))],8,AEe)):Ee("",!0)]))])),256)),rr(t.$slots,"search",ir(cr(s.scope.search)),()=>[x("input",tb({class:"vs__search"},s.scope.search.attributes,Q7(s.scope.search.events)),null,16)])],512),x("div",REe,[ct(x("button",{ref:"clearButton",disabled:n.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:e[0]||(e[0]=(...a)=>s.clearSelection&&s.clearSelection(...a))},[(j(),ml(Yy(s.childComponents.Deselect)))],8,IEe),[[un,s.showClearButton]]),rr(t.$slots,"open-indicator",ir(cr(s.scope.openIndicator)),()=>[n.noDrop?Ee("",!0):(j(),ml(Yy(s.childComponents.OpenIndicator),ir(tb({key:0},s.scope.openIndicator.attributes)),null,16))]),rr(t.$slots,"spinner",ir(cr(s.scope.spinner)),()=>[ct(x("div",kEe,"Loading...",512),[[un,t.mutableLoading]])])],512)],40,CEe),me(uu,{name:n.transition},{default:Al(()=>[s.dropdownOpen?ct((j(),K("ul",{id:`vs${n.uid}__listbox`,ref:"dropdownMenu",key:`vs${n.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:e[2]||(e[2]=LS((...a)=>s.onMousedown&&s.onMousedown(...a),["prevent"])),onMouseup:e[3]||(e[3]=(...a)=>s.onMouseUp&&s.onMouseUp(...a))},[rr(t.$slots,"list-header",ir(cr(s.scope.listHeader))),(j(!0),K(yt,null,ji(s.filteredOptions,(a,l)=>(j(),K("li",{id:`vs${n.uid}__option-${l}`,key:n.getOptionKey(a),role:"option",class:Xt(["vs__dropdown-option",{"vs__dropdown-option--deselect":s.isOptionDeselectable(a)&&l===t.typeAheadPointer,"vs__dropdown-option--selected":s.isOptionSelected(a),"vs__dropdown-option--highlight":l===t.typeAheadPointer,"vs__dropdown-option--disabled":!n.selectable(a)}]),"aria-selected":l===t.typeAheadPointer?!0:null,onMouseover:c=>n.selectable(a)?t.typeAheadPointer=l:null,onClick:LS(c=>n.selectable(a)?s.select(a):null,["prevent","stop"])},[rr(t.$slots,"option",ir(cr(s.normalizeOptionForSlot(a))),()=>[pe(X(n.getOptionLabel(a)),1)])],42,OEe))),128)),s.filteredOptions.length===0?(j(),K("li",LEe,[rr(t.$slots,"no-options",ir(cr(s.scope.noOptions)),()=>[NEe])])):Ee("",!0),rr(t.$slots,"list-footer",ir(cr(s.scope.listFooter)))],40,$Ee)),[[o]]):(j(),K("ul",{key:1,id:`vs${n.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,DEe))]),_:3},8,["name"]),rr(t.$slots,"footer",ir(cr(s.scope.footer)))],10,SEe)}const PEe=GT(TEe,[["render",FEe]]),Vy=sz(fW);Vy.component("v-select",PEe);Vy.use(cz());Vy.use(Qxe);Vy.mount("#app");export{Lxe as E,Ke as R,me as a,x as b,K as c,xt as d,XK as e,j as o};

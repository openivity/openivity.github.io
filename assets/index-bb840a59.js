var k_=Object.defineProperty;var N_=(n,e,t)=>e in n?k_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ce=(n,e,t)=>(N_(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function ac(n,e){const t=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const Ue={},ss=[],Ht=()=>{},G_=()=>!1,W_=/^on[^a-z]/,aa=n=>W_.test(n),lc=n=>n.startsWith("onUpdate:"),st=Object.assign,cc=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},z_=Object.prototype.hasOwnProperty,Ce=(n,e)=>z_.call(n,e),oe=Array.isArray,rs=n=>la(n)==="[object Map]",ef=n=>la(n)==="[object Set]",he=n=>typeof n=="function",rt=n=>typeof n=="string",uc=n=>typeof n=="symbol",je=n=>n!==null&&typeof n=="object",tf=n=>je(n)&&he(n.then)&&he(n.catch),nf=Object.prototype.toString,la=n=>nf.call(n),V_=n=>la(n).slice(8,-1),sf=n=>la(n)==="[object Object]",hc=n=>rt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Eo=ac(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ca=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},U_=/-(\w)/g,gs=ca(n=>n.replace(U_,(e,t)=>t?t.toUpperCase():"")),j_=/\B([A-Z])/g,Os=ca(n=>n.replace(j_,"-$1").toLowerCase()),rf=ca(n=>n.charAt(0).toUpperCase()+n.slice(1)),za=ca(n=>n?`on${rf(n)}`:""),cr=(n,e)=>!Object.is(n,e),Va=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},So=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},Y_=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Au;const yl=()=>Au||(Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dc(n){if(oe(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=rt(i)?$_(i):dc(i);if(s)for(const r in s)e[r]=s[r]}return e}else{if(rt(n))return n;if(je(n))return n}}const B_=/;(?![^(]*\))/g,X_=/:([^]+)/,Z_=/\/\*[^]*?\*\//g;function $_(n){const e={};return n.replace(Z_,"").split(B_).forEach(t=>{if(t){const i=t.split(X_);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function fc(n){let e="";if(rt(n))e=n;else if(oe(n))for(let t=0;t<n.length;t++){const i=fc(n[t]);i&&(e+=i+" ")}else if(je(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const H_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",K_=ac(H_);function of(n){return!!n||n===""}const Fe=n=>rt(n)?n:n==null?"":oe(n)||je(n)&&(n.toString===nf||!he(n.toString))?JSON.stringify(n,af,2):String(n),af=(n,e)=>e&&e.__v_isRef?af(n,e.value):rs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s])=>(t[`${i} =>`]=s,t),{})}:ef(e)?{[`Set(${e.size})`]:[...e.values()]}:je(e)&&!oe(e)&&!sf(e)?String(e):e;let jt;class lf{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=jt,!e&&jt&&(this.index=(jt.scopes||(jt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=jt;try{return jt=this,e()}finally{jt=t}}}on(){jt=this}off(){jt=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function q_(n){return new lf(n)}function J_(n,e=jt){e&&e.active&&e.effects.push(n)}function Q_(){return jt}const gc=n=>{const e=new Set(n);return e.w=0,e.n=0,e},cf=n=>(n.w&Qn)>0,uf=n=>(n.n&Qn)>0,ep=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Qn},tp=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];cf(s)&&!uf(s)?s.delete(n):e[t++]=s,s.w&=~Qn,s.n&=~Qn}e.length=t}},El=new WeakMap;let Ks=0,Qn=1;const xl=30;let Bt;const wi=Symbol(""),vl=Symbol("");class mc{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,J_(this,i)}run(){if(!this.active)return this.fn();let e=Bt,t=qn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Bt,Bt=this,qn=!0,Qn=1<<++Ks,Ks<=xl?ep(this):Lu(this),this.fn()}finally{Ks<=xl&&tp(this),Qn=1<<--Ks,Bt=this.parent,qn=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Bt===this?this.deferStop=!0:this.active&&(Lu(this),this.onStop&&this.onStop(),this.active=!1)}}function Lu(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let qn=!0;const hf=[];function Ms(){hf.push(qn),qn=!1}function As(){const n=hf.pop();qn=n===void 0?!0:n}function Tt(n,e,t){if(qn&&Bt){let i=El.get(n);i||El.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=gc()),df(s)}}function df(n,e){let t=!1;Ks<=xl?uf(n)||(n.n|=Qn,t=!cf(n)):t=!n.has(Bt),t&&(n.add(Bt),Bt.deps.push(n))}function bn(n,e,t,i,s,r){const o=El.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&oe(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":oe(n)?hc(t)&&a.push(o.get("length")):(a.push(o.get(wi)),rs(n)&&a.push(o.get(vl)));break;case"delete":oe(n)||(a.push(o.get(wi)),rs(n)&&a.push(o.get(vl)));break;case"set":rs(n)&&a.push(o.get(wi));break}if(a.length===1)a[0]&&wl(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);wl(gc(l))}}function wl(n,e){const t=oe(n)?n:[...n];for(const i of t)i.computed&&Pu(i);for(const i of t)i.computed||Pu(i)}function Pu(n,e){(n!==Bt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const np=ac("__proto__,__v_isRef,__isVue"),ff=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(uc)),ip=_c(),sp=_c(!1,!0),rp=_c(!0),Fu=op();function op(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=be(this);for(let r=0,o=this.length;r<o;r++)Tt(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(be)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Ms();const i=be(this)[e].apply(this,t);return As(),i}}),n}function ap(n){const e=be(this);return Tt(e,"has",n),e.hasOwnProperty(n)}function _c(n=!1,e=!1){return function(i,s,r){if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(n?e?Cp:yf:e?pf:_f).get(i))return i;const o=oe(i);if(!n){if(o&&Ce(Fu,s))return Reflect.get(Fu,s,r);if(s==="hasOwnProperty")return ap}const a=Reflect.get(i,s,r);return(uc(s)?ff.has(s):np(s))||(n||Tt(i,"get",s),e)?a:gt(a)?o&&hc(s)?a:a.value:je(a)?n?xf(a):ha(a):a}}const lp=gf(),cp=gf(!0);function gf(n=!1){return function(t,i,s,r){let o=t[i];if(ms(o)&&gt(o)&&!gt(s))return!1;if(!n&&(!Io(s)&&!ms(s)&&(o=be(o),s=be(s)),!oe(t)&&gt(o)&&!gt(s)))return o.value=s,!0;const a=oe(t)&&hc(i)?Number(i)<t.length:Ce(t,i),l=Reflect.set(t,i,s,r);return t===be(r)&&(a?cr(s,o)&&bn(t,"set",i,s):bn(t,"add",i,s)),l}}function up(n,e){const t=Ce(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&bn(n,"delete",e,void 0),i}function hp(n,e){const t=Reflect.has(n,e);return(!uc(e)||!ff.has(e))&&Tt(n,"has",e),t}function dp(n){return Tt(n,"iterate",oe(n)?"length":wi),Reflect.ownKeys(n)}const mf={get:ip,set:lp,deleteProperty:up,has:hp,ownKeys:dp},fp={get:rp,set(n,e){return!0},deleteProperty(n,e){return!0}},gp=st({},mf,{get:sp,set:cp}),pc=n=>n,ua=n=>Reflect.getPrototypeOf(n);function Zr(n,e,t=!1,i=!1){n=n.__v_raw;const s=be(n),r=be(e);t||(e!==r&&Tt(s,"get",e),Tt(s,"get",r));const{has:o}=ua(s),a=i?pc:t?vc:ur;if(o.call(s,e))return a(n.get(e));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(e)}function $r(n,e=!1){const t=this.__v_raw,i=be(t),s=be(n);return e||(n!==s&&Tt(i,"has",n),Tt(i,"has",s)),n===s?t.has(n):t.has(n)||t.has(s)}function Hr(n,e=!1){return n=n.__v_raw,!e&&Tt(be(n),"iterate",wi),Reflect.get(n,"size",n)}function Du(n){n=be(n);const e=be(this);return ua(e).has.call(e,n)||(e.add(n),bn(e,"add",n,n)),this}function ku(n,e){e=be(e);const t=be(this),{has:i,get:s}=ua(t);let r=i.call(t,n);r||(n=be(n),r=i.call(t,n));const o=s.call(t,n);return t.set(n,e),r?cr(e,o)&&bn(t,"set",n,e):bn(t,"add",n,e),this}function Nu(n){const e=be(this),{has:t,get:i}=ua(e);let s=t.call(e,n);s||(n=be(n),s=t.call(e,n)),i&&i.call(e,n);const r=e.delete(n);return s&&bn(e,"delete",n,void 0),r}function Gu(){const n=be(this),e=n.size!==0,t=n.clear();return e&&bn(n,"clear",void 0,void 0),t}function Kr(n,e){return function(i,s){const r=this,o=r.__v_raw,a=be(o),l=e?pc:n?vc:ur;return!n&&Tt(a,"iterate",wi),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function qr(n,e,t){return function(...i){const s=this.__v_raw,r=be(s),o=rs(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?pc:e?vc:ur;return!e&&Tt(r,"iterate",l?vl:wi),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Ln(n){return function(...e){return n==="delete"?!1:this}}function mp(){const n={get(r){return Zr(this,r)},get size(){return Hr(this)},has:$r,add:Du,set:ku,delete:Nu,clear:Gu,forEach:Kr(!1,!1)},e={get(r){return Zr(this,r,!1,!0)},get size(){return Hr(this)},has:$r,add:Du,set:ku,delete:Nu,clear:Gu,forEach:Kr(!1,!0)},t={get(r){return Zr(this,r,!0)},get size(){return Hr(this,!0)},has(r){return $r.call(this,r,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Kr(!0,!1)},i={get(r){return Zr(this,r,!0,!0)},get size(){return Hr(this,!0)},has(r){return $r.call(this,r,!0)},add:Ln("add"),set:Ln("set"),delete:Ln("delete"),clear:Ln("clear"),forEach:Kr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=qr(r,!1,!1),t[r]=qr(r,!0,!1),e[r]=qr(r,!1,!0),i[r]=qr(r,!0,!0)}),[n,t,e,i]}const[_p,pp,yp,Ep]=mp();function yc(n,e){const t=e?n?Ep:yp:n?pp:_p;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Ce(t,s)&&s in i?t:i,s,r)}const xp={get:yc(!1,!1)},vp={get:yc(!1,!0)},wp={get:yc(!0,!1)},_f=new WeakMap,pf=new WeakMap,yf=new WeakMap,Cp=new WeakMap;function Tp(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rp(n){return n.__v_skip||!Object.isExtensible(n)?0:Tp(V_(n))}function ha(n){return ms(n)?n:Ec(n,!1,mf,xp,_f)}function Ef(n){return Ec(n,!1,gp,vp,pf)}function xf(n){return Ec(n,!0,fp,wp,yf)}function Ec(n,e,t,i,s){if(!je(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Rp(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function os(n){return ms(n)?os(n.__v_raw):!!(n&&n.__v_isReactive)}function ms(n){return!!(n&&n.__v_isReadonly)}function Io(n){return!!(n&&n.__v_isShallow)}function vf(n){return os(n)||ms(n)}function be(n){const e=n&&n.__v_raw;return e?be(e):n}function xc(n){return So(n,"__v_skip",!0),n}const ur=n=>je(n)?ha(n):n,vc=n=>je(n)?xf(n):n;function wf(n){qn&&Bt&&(n=be(n),df(n.dep||(n.dep=gc())))}function Cf(n,e){n=be(n);const t=n.dep;t&&wl(t)}function gt(n){return!!(n&&n.__v_isRef===!0)}function Pi(n){return Tf(n,!1)}function Sp(n){return Tf(n,!0)}function Tf(n,e){return gt(n)?n:new Ip(n,e)}class Ip{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:be(e),this._value=t?e:ur(e)}get value(){return wf(this),this._value}set value(e){const t=this.__v_isShallow||Io(e)||ms(e);e=t?e:be(e),cr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ur(e),Cf(this))}}function Ci(n){return gt(n)?n.value:n}const bp={get:(n,e,t)=>Ci(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return gt(s)&&!gt(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function Rf(n){return os(n)?n:new Proxy(n,bp)}class Op{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new mc(e,()=>{this._dirty||(this._dirty=!0,Cf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=be(this);return wf(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Mp(n,e,t=!1){let i,s;const r=he(n);return r?(i=n,s=Ht):(i=n.get,s=n.set),new Op(i,s,r||!s,t)}function Jn(n,e,t,i){let s;try{s=i?n(...i):n()}catch(r){da(r,e,t)}return s}function Kt(n,e,t,i){if(he(n)){const r=Jn(n,e,t,i);return r&&tf(r)&&r.catch(o=>{da(o,e,t)}),r}const s=[];for(let r=0;r<n.length;r++)s.push(Kt(n[r],e,t,i));return s}function da(n,e,t,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=t;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Jn(l,null,10,[n,o,a]);return}}Ap(n,t,s,i)}function Ap(n,e,t,i=!0){console.error(n)}let hr=!1,Cl=!1;const ht=[];let rn=0;const as=[];let xn=null,mi=0;const Sf=Promise.resolve();let wc=null;function If(n){const e=wc||Sf;return n?e.then(this?n.bind(this):n):e}function Lp(n){let e=rn+1,t=ht.length;for(;e<t;){const i=e+t>>>1;dr(ht[i])<n?e=i+1:t=i}return e}function Cc(n){(!ht.length||!ht.includes(n,hr&&n.allowRecurse?rn+1:rn))&&(n.id==null?ht.push(n):ht.splice(Lp(n.id),0,n),bf())}function bf(){!hr&&!Cl&&(Cl=!0,wc=Sf.then(Mf))}function Pp(n){const e=ht.indexOf(n);e>rn&&ht.splice(e,1)}function Fp(n){oe(n)?as.push(...n):(!xn||!xn.includes(n,n.allowRecurse?mi+1:mi))&&as.push(n),bf()}function Wu(n,e=hr?rn+1:0){for(;e<ht.length;e++){const t=ht[e];t&&t.pre&&(ht.splice(e,1),e--,t())}}function Of(n){if(as.length){const e=[...new Set(as)];if(as.length=0,xn){xn.push(...e);return}for(xn=e,xn.sort((t,i)=>dr(t)-dr(i)),mi=0;mi<xn.length;mi++)xn[mi]();xn=null,mi=0}}const dr=n=>n.id==null?1/0:n.id,Dp=(n,e)=>{const t=dr(n)-dr(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Mf(n){Cl=!1,hr=!0,ht.sort(Dp);const e=Ht;try{for(rn=0;rn<ht.length;rn++){const t=ht[rn];t&&t.active!==!1&&Jn(t,null,14)}}finally{rn=0,ht.length=0,Of(),hr=!1,wc=null,(ht.length||as.length)&&Mf()}}function kp(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Ue;let s=t;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||Ue;d&&(s=t.map(f=>rt(f)?f.trim():f)),h&&(s=t.map(Y_))}let a,l=i[a=za(e)]||i[a=za(gs(e))];!l&&r&&(l=i[a=za(Os(e))]),l&&Kt(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Kt(c,n,6,s)}}function Af(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!he(n)){const l=c=>{const u=Af(c,e,!0);u&&(a=!0,st(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(je(n)&&i.set(n,null),null):(oe(r)?r.forEach(l=>o[l]=null):st(o,r),je(n)&&i.set(n,o),o)}function fa(n,e){return!n||!aa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ce(n,e[0].toLowerCase()+e.slice(1))||Ce(n,Os(e))||Ce(n,e))}let ln=null,Lf=null;function bo(n){const e=ln;return ln=n,Lf=n&&n.type.__scopeId||null,e}function Np(n,e=ln,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&Hu(-1);const r=bo(e);let o;try{o=n(...s)}finally{bo(r),i._d&&Hu(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ua(n){const{type:e,vnode:t,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:m}=n;let _,p;const x=bo(n);try{if(t.shapeFlag&4){const v=s||i;_=sn(u.call(v,v,h,r,f,d,g)),p=l}else{const v=e;_=sn(v.length>1?v(r,{attrs:l,slots:a,emit:c}):v(r,null)),p=e.props?l:Gp(l)}}catch(v){ir.length=0,da(v,n,1),_=ot(Mi)}let w=_;if(p&&m!==!1){const v=Object.keys(p),{shapeFlag:T}=w;v.length&&T&7&&(o&&v.some(lc)&&(p=Wp(p,o)),w=_s(w,p))}return t.dirs&&(w=_s(w),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),_=w,bo(x),_}const Gp=n=>{let e;for(const t in n)(t==="class"||t==="style"||aa(t))&&((e||(e={}))[t]=n[t]);return e},Wp=(n,e)=>{const t={};for(const i in n)(!lc(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function zp(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?zu(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!fa(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?zu(i,o,c):!0:!!o;return!1}function zu(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!fa(t,r))return!0}return!1}function Vp({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const Up=n=>n.__isSuspense;function jp(n,e){e&&e.pendingBranch?oe(n)?e.effects.push(...n):e.effects.push(n):Fp(n)}const Jr={};function ls(n,e,t){return Pf(n,e,t)}function Pf(n,e,{immediate:t,deep:i,flush:s,onTrack:r,onTrigger:o}=Ue){var a;const l=Q_()===((a=dt)==null?void 0:a.scope)?dt:null;let c,u=!1,h=!1;if(gt(n)?(c=()=>n.value,u=Io(n)):os(n)?(c=()=>n,i=!0):oe(n)?(h=!0,u=n.some(v=>os(v)||Io(v)),c=()=>n.map(v=>{if(gt(v))return v.value;if(os(v))return ts(v);if(he(v))return Jn(v,l,2)})):he(n)?e?c=()=>Jn(n,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),Kt(n,l,3,[f])}:c=Ht,e&&i){const v=c;c=()=>ts(v())}let d,f=v=>{d=x.onStop=()=>{Jn(v,l,4)}},g;if(gr)if(f=Ht,e?t&&Kt(e,l,3,[c(),h?[]:void 0,f]):c(),s==="sync"){const v=Fy();g=v.__watcherHandles||(v.__watcherHandles=[])}else return Ht;let m=h?new Array(n.length).fill(Jr):Jr;const _=()=>{if(x.active)if(e){const v=x.run();(i||u||(h?v.some((T,R)=>cr(T,m[R])):cr(v,m)))&&(d&&d(),Kt(e,l,3,[v,m===Jr?void 0:h&&m[0]===Jr?[]:m,f]),m=v)}else x.run()};_.allowRecurse=!!e;let p;s==="sync"?p=_:s==="post"?p=()=>xt(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),p=()=>Cc(_));const x=new mc(c,p);e?t?_():m=x.run():s==="post"?xt(x.run.bind(x),l&&l.suspense):x.run();const w=()=>{x.stop(),l&&l.scope&&cc(l.scope.effects,x)};return g&&g.push(w),w}function Yp(n,e,t){const i=this.proxy,s=rt(n)?n.includes(".")?Ff(i,n):()=>i[n]:n.bind(i,i);let r;he(e)?r=e:(r=e.handler,t=e);const o=dt;ps(this);const a=Pf(s,r.bind(i),t);return o?ps(o):Ti(),a}function Ff(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function ts(n,e){if(!je(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),gt(n))ts(n.value,e);else if(oe(n))for(let t=0;t<n.length;t++)ts(n[t],e);else if(ef(n)||rs(n))n.forEach(t=>{ts(t,e)});else if(sf(n))for(const t in n)ts(n[t],e);return n}function oi(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Ms(),Kt(l,t,8,[n.el,a,n,e]),As())}}function Ir(n,e){return he(n)?(()=>st({name:n.name},e,{setup:n}))():n}const xo=n=>!!n.type.__asyncLoader,Df=n=>n.type.__isKeepAlive;function Bp(n,e){kf(n,"a",e)}function Xp(n,e){kf(n,"da",e)}function kf(n,e,t=dt){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(ga(e,i,t),t){let s=t.parent;for(;s&&s.parent;)Df(s.parent.vnode)&&Zp(i,e,t,s),s=s.parent}}function Zp(n,e,t,i){const s=ga(e,n,i,!0);Nf(()=>{cc(i[e],s)},t)}function ga(n,e,t=dt,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Ms(),ps(t);const a=Kt(e,t,n,o);return Ti(),As(),a});return i?s.unshift(r):s.push(r),r}}const Mn=n=>(e,t=dt)=>(!gr||n==="sp")&&ga(n,(...i)=>e(...i),t),$p=Mn("bm"),Hp=Mn("m"),Kp=Mn("bu"),qp=Mn("u"),Jp=Mn("bum"),Nf=Mn("um"),Qp=Mn("sp"),ey=Mn("rtg"),ty=Mn("rtc");function ny(n,e=dt){ga("ec",n,e)}const iy=Symbol.for("v-ndc"),Tl=n=>n?Hf(n)?bc(n)||n.proxy:Tl(n.parent):null,nr=st(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Tl(n.parent),$root:n=>Tl(n.root),$emit:n=>n.emit,$options:n=>Tc(n),$forceUpdate:n=>n.f||(n.f=()=>Cc(n.update)),$nextTick:n=>n.n||(n.n=If.bind(n.proxy)),$watch:n=>Yp.bind(n)}),ja=(n,e)=>n!==Ue&&!n.__isScriptSetup&&Ce(n,e),sy={get({_:n},e){const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(ja(i,e))return o[e]=1,i[e];if(s!==Ue&&Ce(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&Ce(c,e))return o[e]=3,r[e];if(t!==Ue&&Ce(t,e))return o[e]=4,t[e];Rl&&(o[e]=0)}}const u=nr[e];let h,d;if(u)return e==="$attrs"&&Tt(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Ue&&Ce(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,Ce(d,e))return d[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return ja(s,e)?(s[e]=t,!0):i!==Ue&&Ce(i,e)?(i[e]=t,!0):Ce(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Ue&&Ce(n,o)||ja(e,o)||(a=r[0])&&Ce(a,o)||Ce(i,o)||Ce(nr,o)||Ce(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ce(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Vu(n){return oe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Rl=!0;function ry(n){const e=Tc(n),t=n.proxy,i=n.ctx;Rl=!1,e.beforeCreate&&Uu(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:m,deactivated:_,beforeDestroy:p,beforeUnmount:x,destroyed:w,unmounted:v,render:T,renderTracked:R,renderTriggered:M,errorCaptured:A,serverPrefetch:Z,expose:K,inheritAttrs:se,components:ne,directives:ee,filters:Re}=e;if(c&&oy(c,i,null),o)for(const F in o){const j=o[F];he(j)&&(i[F]=j.bind(t))}if(s){const F=s.call(t,t);je(F)&&(n.data=ha(F))}if(Rl=!0,r)for(const F in r){const j=r[F],de=he(j)?j.bind(t,t):he(j.get)?j.get.bind(t,t):Ht,fe=!he(j)&&he(j.set)?j.set.bind(t):Ht,Me=Xt({get:de,set:fe});Object.defineProperty(i,F,{enumerable:!0,configurable:!0,get:()=>Me.value,set:L=>Me.value=L})}if(a)for(const F in a)Gf(a[F],i,t,F);if(l){const F=he(l)?l.call(t):l;Reflect.ownKeys(F).forEach(j=>{vo(j,F[j])})}u&&Uu(u,n,"c");function B(F,j){oe(j)?j.forEach(de=>F(de.bind(t))):j&&F(j.bind(t))}if(B($p,h),B(Hp,d),B(Kp,f),B(qp,g),B(Bp,m),B(Xp,_),B(ny,A),B(ty,R),B(ey,M),B(Jp,x),B(Nf,v),B(Qp,Z),oe(K))if(K.length){const F=n.exposed||(n.exposed={});K.forEach(j=>{Object.defineProperty(F,j,{get:()=>t[j],set:de=>t[j]=de})})}else n.exposed||(n.exposed={});T&&n.render===Ht&&(n.render=T),se!=null&&(n.inheritAttrs=se),ne&&(n.components=ne),ee&&(n.directives=ee)}function oy(n,e,t=Ht){oe(n)&&(n=Sl(n));for(const i in n){const s=n[i];let r;je(s)?"default"in s?r=Tn(s.from||i,s.default,!0):r=Tn(s.from||i):r=Tn(s),gt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Uu(n,e,t){Kt(oe(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Gf(n,e,t,i){const s=i.includes(".")?Ff(t,i):()=>t[i];if(rt(n)){const r=e[n];he(r)&&ls(s,r)}else if(he(n))ls(s,n.bind(t));else if(je(n))if(oe(n))n.forEach(r=>Gf(r,e,t,i));else{const r=he(n.handler)?n.handler.bind(t):e[n.handler];he(r)&&ls(s,r,n)}}function Tc(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>Oo(l,c,o,!0)),Oo(l,e,o)),je(e)&&r.set(e,l),l}function Oo(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&Oo(n,r,t,!0),s&&s.forEach(o=>Oo(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=ay[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const ay={data:ju,props:Yu,emits:Yu,methods:qs,computed:qs,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:qs,directives:qs,watch:cy,provide:ju,inject:ly};function ju(n,e){return e?n?function(){return st(he(n)?n.call(this,this):n,he(e)?e.call(this,this):e)}:e:n}function ly(n,e){return qs(Sl(n),Sl(e))}function Sl(n){if(oe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mt(n,e){return n?[...new Set([].concat(n,e))]:e}function qs(n,e){return n?st(Object.create(null),n,e):e}function Yu(n,e){return n?oe(n)&&oe(e)?[...new Set([...n,...e])]:st(Object.create(null),Vu(n),Vu(e??{})):e}function cy(n,e){if(!n)return e;if(!e)return n;const t=st(Object.create(null),n);for(const i in e)t[i]=mt(n[i],e[i]);return t}function Wf(){return{app:null,config:{isNativeTag:G_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uy=0;function hy(n,e){return function(i,s=null){he(i)||(i=st({},i)),s!=null&&!je(s)&&(s=null);const r=Wf(),o=new Set;let a=!1;const l=r.app={_uid:uy++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:Dy,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&he(c.install)?(o.add(c),c.install(l,...u)):he(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const d=ot(i,s);return d.appContext=r,u&&e?e(d,c):n(d,c,h),a=!0,l._container=c,c.__vue_app__=l,bc(d.component)||d.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Mo=l;try{return c()}finally{Mo=null}}};return l}}let Mo=null;function vo(n,e){if(dt){let t=dt.provides;const i=dt.parent&&dt.parent.provides;i===t&&(t=dt.provides=Object.create(i)),t[n]=e}}function Tn(n,e,t=!1){const i=dt||ln;if(i||Mo){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Mo._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return t&&he(e)?e.call(i&&i.proxy):e}}function dy(n,e,t,i=!1){const s={},r={};So(r,_a,1),n.propsDefaults=Object.create(null),zf(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:Ef(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function fy(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=be(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(fa(n.emitsOptions,d))continue;const f=e[d];if(l)if(Ce(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const g=gs(d);s[g]=Il(l,a,g,f,n,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{zf(n,e,s,r)&&(c=!0);let u;for(const h in a)(!e||!Ce(e,h)&&((u=Os(h))===h||!Ce(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(s[h]=Il(l,a,h,void 0,n,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!Ce(e,h))&&(delete r[h],c=!0)}c&&bn(n,"set","$attrs")}function zf(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Eo(l))continue;const c=e[l];let u;s&&Ce(s,u=gs(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:fa(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=be(t),c=a||Ue;for(let u=0;u<r.length;u++){const h=r[u];t[h]=Il(s,l,h,c[h],n,!Ce(c,h))}}return o}function Il(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=Ce(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&he(l)){const{propsDefaults:c}=s;t in c?i=c[t]:(ps(s),i=c[t]=l.call(null,e),Ti())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Os(t))&&(i=!0))}return i}function Vf(n,e,t=!1){const i=e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!he(n)){const u=h=>{l=!0;const[d,f]=Vf(h,e,!0);st(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!l)return je(n)&&i.set(n,ss),ss;if(oe(r))for(let u=0;u<r.length;u++){const h=gs(r[u]);Bu(h)&&(o[h]=Ue)}else if(r)for(const u in r){const h=gs(u);if(Bu(h)){const d=r[u],f=o[h]=oe(d)||he(d)?{type:d}:st({},d);if(f){const g=$u(Boolean,f.type),m=$u(String,f.type);f[0]=g>-1,f[1]=m<0||g<m,(g>-1||Ce(f,"default"))&&a.push(h)}}}const c=[o,a];return je(n)&&i.set(n,c),c}function Bu(n){return n[0]!=="$"}function Xu(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Zu(n,e){return Xu(n)===Xu(e)}function $u(n,e){return oe(e)?e.findIndex(t=>Zu(t,n)):he(e)&&Zu(e,n)?0:-1}const Uf=n=>n[0]==="_"||n==="$stable",Rc=n=>oe(n)?n.map(sn):[sn(n)],gy=(n,e,t)=>{if(e._n)return e;const i=Np((...s)=>Rc(e(...s)),t);return i._c=!1,i},jf=(n,e,t)=>{const i=n._ctx;for(const s in n){if(Uf(s))continue;const r=n[s];if(he(r))e[s]=gy(s,r,i);else if(r!=null){const o=Rc(r);e[s]=()=>o}}},Yf=(n,e)=>{const t=Rc(e);n.slots.default=()=>t},my=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=be(e),So(e,"_",t)):jf(e,n.slots={})}else n.slots={},e&&Yf(n,e);So(n.slots,_a,1)},_y=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Ue;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:(st(s,e),!t&&a===1&&delete s._):(r=!e.$stable,jf(e,s)),o=e}else e&&(Yf(n,e),o={default:1});if(r)for(const a in s)!Uf(a)&&!(a in o)&&delete s[a]};function bl(n,e,t,i,s=!1){if(oe(n)){n.forEach((d,f)=>bl(d,e&&(oe(e)?e[f]:e),t,i,s));return}if(xo(i)&&!s)return;const r=i.shapeFlag&4?bc(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,u=a.refs===Ue?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(rt(c)?(u[c]=null,Ce(h,c)&&(h[c]=null)):gt(c)&&(c.value=null)),he(l))Jn(l,a,12,[o,u]);else{const d=rt(l),f=gt(l);if(d||f){const g=()=>{if(n.f){const m=d?Ce(h,l)?h[l]:u[l]:l.value;s?oe(m)&&cc(m,r):oe(m)?m.includes(r)||m.push(r):d?(u[l]=[r],Ce(h,l)&&(h[l]=u[l])):(l.value=[r],n.k&&(u[n.k]=l.value))}else d?(u[l]=o,Ce(h,l)&&(h[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,xt(g,t)):g()}}}const xt=jp;function py(n){return yy(n)}function yy(n,e){const t=yl();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Ht,insertStaticContent:g}=n,m=(y,E,C,S=null,b=null,P=null,V=!1,k=null,W=!!E.dynamicChildren)=>{if(y===E)return;y&&!js(y,E)&&(S=I(y),L(y,b,P,!0),y=null),E.patchFlag===-2&&(W=!1,E.dynamicChildren=null);const{type:D,ref:X,shapeFlag:Y}=E;switch(D){case ma:_(y,E,C,S);break;case Mi:p(y,E,C,S);break;case Ya:y==null&&x(E,C,S,V);break;case Yt:ne(y,E,C,S,b,P,V,k,W);break;default:Y&1?T(y,E,C,S,b,P,V,k,W):Y&6?ee(y,E,C,S,b,P,V,k,W):(Y&64||Y&128)&&D.process(y,E,C,S,b,P,V,k,W,G)}X!=null&&b&&bl(X,y&&y.ref,P,E||y,!E)},_=(y,E,C,S)=>{if(y==null)i(E.el=a(E.children),C,S);else{const b=E.el=y.el;E.children!==y.children&&c(b,E.children)}},p=(y,E,C,S)=>{y==null?i(E.el=l(E.children||""),C,S):E.el=y.el},x=(y,E,C,S)=>{[y.el,y.anchor]=g(y.children,E,C,S,y.el,y.anchor)},w=({el:y,anchor:E},C,S)=>{let b;for(;y&&y!==E;)b=d(y),i(y,C,S),y=b;i(E,C,S)},v=({el:y,anchor:E})=>{let C;for(;y&&y!==E;)C=d(y),s(y),y=C;s(E)},T=(y,E,C,S,b,P,V,k,W)=>{V=V||E.type==="svg",y==null?R(E,C,S,b,P,V,k,W):Z(y,E,b,P,V,k,W)},R=(y,E,C,S,b,P,V,k)=>{let W,D;const{type:X,props:Y,shapeFlag:H,transition:J,dirs:ae}=y;if(W=y.el=o(y.type,P,Y&&Y.is,Y),H&8?u(W,y.children):H&16&&A(y.children,W,null,S,b,P&&X!=="foreignObject",V,k),ae&&oi(y,null,S,"created"),M(W,y,y.scopeId,V,S),Y){for(const me in Y)me!=="value"&&!Eo(me)&&r(W,me,null,Y[me],P,y.children,S,b,ze);"value"in Y&&r(W,"value",null,Y.value),(D=Y.onVnodeBeforeMount)&&nn(D,S,y)}ae&&oi(y,null,S,"beforeMount");const xe=(!b||b&&!b.pendingBranch)&&J&&!J.persisted;xe&&J.beforeEnter(W),i(W,E,C),((D=Y&&Y.onVnodeMounted)||xe||ae)&&xt(()=>{D&&nn(D,S,y),xe&&J.enter(W),ae&&oi(y,null,S,"mounted")},b)},M=(y,E,C,S,b)=>{if(C&&f(y,C),S)for(let P=0;P<S.length;P++)f(y,S[P]);if(b){let P=b.subTree;if(E===P){const V=b.vnode;M(y,V,V.scopeId,V.slotScopeIds,b.parent)}}},A=(y,E,C,S,b,P,V,k,W=0)=>{for(let D=W;D<y.length;D++){const X=y[D]=k?Vn(y[D]):sn(y[D]);m(null,X,E,C,S,b,P,V,k)}},Z=(y,E,C,S,b,P,V)=>{const k=E.el=y.el;let{patchFlag:W,dynamicChildren:D,dirs:X}=E;W|=y.patchFlag&16;const Y=y.props||Ue,H=E.props||Ue;let J;C&&ai(C,!1),(J=H.onVnodeBeforeUpdate)&&nn(J,C,E,y),X&&oi(E,y,C,"beforeUpdate"),C&&ai(C,!0);const ae=b&&E.type!=="foreignObject";if(D?K(y.dynamicChildren,D,k,C,S,ae,P):V||j(y,E,k,null,C,S,ae,P,!1),W>0){if(W&16)se(k,E,Y,H,C,S,b);else if(W&2&&Y.class!==H.class&&r(k,"class",null,H.class,b),W&4&&r(k,"style",Y.style,H.style,b),W&8){const xe=E.dynamicProps;for(let me=0;me<xe.length;me++){const ke=xe[me],at=Y[ke],Ye=H[ke];(Ye!==at||ke==="value")&&r(k,ke,at,Ye,b,y.children,C,S,ze)}}W&1&&y.children!==E.children&&u(k,E.children)}else!V&&D==null&&se(k,E,Y,H,C,S,b);((J=H.onVnodeUpdated)||X)&&xt(()=>{J&&nn(J,C,E,y),X&&oi(E,y,C,"updated")},S)},K=(y,E,C,S,b,P,V)=>{for(let k=0;k<E.length;k++){const W=y[k],D=E[k],X=W.el&&(W.type===Yt||!js(W,D)||W.shapeFlag&70)?h(W.el):C;m(W,D,X,null,S,b,P,V,!0)}},se=(y,E,C,S,b,P,V)=>{if(C!==S){if(C!==Ue)for(const k in C)!Eo(k)&&!(k in S)&&r(y,k,C[k],null,V,E.children,b,P,ze);for(const k in S){if(Eo(k))continue;const W=S[k],D=C[k];W!==D&&k!=="value"&&r(y,k,D,W,V,E.children,b,P,ze)}"value"in S&&r(y,"value",C.value,S.value)}},ne=(y,E,C,S,b,P,V,k,W)=>{const D=E.el=y?y.el:a(""),X=E.anchor=y?y.anchor:a("");let{patchFlag:Y,dynamicChildren:H,slotScopeIds:J}=E;J&&(k=k?k.concat(J):J),y==null?(i(D,C,S),i(X,C,S),A(E.children,C,X,b,P,V,k,W)):Y>0&&Y&64&&H&&y.dynamicChildren?(K(y.dynamicChildren,H,C,b,P,V,k),(E.key!=null||b&&E===b.subTree)&&Bf(y,E,!0)):j(y,E,C,X,b,P,V,k,W)},ee=(y,E,C,S,b,P,V,k,W)=>{E.slotScopeIds=k,y==null?E.shapeFlag&512?b.ctx.activate(E,C,S,V,W):Re(E,C,S,b,P,V,W):$(y,E,W)},Re=(y,E,C,S,b,P,V)=>{const k=y.component=Iy(y,S,b);if(Df(y)&&(k.ctx.renderer=G),by(k),k.asyncDep){if(b&&b.registerDep(k,B),!y.el){const W=k.subTree=ot(Mi);p(null,W,E,C)}return}B(k,y,E,C,b,P,V)},$=(y,E,C)=>{const S=E.component=y.component;if(zp(y,E,C))if(S.asyncDep&&!S.asyncResolved){F(S,E,C);return}else S.next=E,Pp(S.update),S.update();else E.el=y.el,S.vnode=E},B=(y,E,C,S,b,P,V)=>{const k=()=>{if(y.isMounted){let{next:X,bu:Y,u:H,parent:J,vnode:ae}=y,xe=X,me;ai(y,!1),X?(X.el=ae.el,F(y,X,V)):X=ae,Y&&Va(Y),(me=X.props&&X.props.onVnodeBeforeUpdate)&&nn(me,J,X,ae),ai(y,!0);const ke=Ua(y),at=y.subTree;y.subTree=ke,m(at,ke,h(at.el),I(at),y,b,P),X.el=ke.el,xe===null&&Vp(y,ke.el),H&&xt(H,b),(me=X.props&&X.props.onVnodeUpdated)&&xt(()=>nn(me,J,X,ae),b)}else{let X;const{el:Y,props:H}=E,{bm:J,m:ae,parent:xe}=y,me=xo(E);if(ai(y,!1),J&&Va(J),!me&&(X=H&&H.onVnodeBeforeMount)&&nn(X,xe,E),ai(y,!0),Y&&pe){const ke=()=>{y.subTree=Ua(y),pe(Y,y.subTree,y,b,null)};me?E.type.__asyncLoader().then(()=>!y.isUnmounted&&ke()):ke()}else{const ke=y.subTree=Ua(y);m(null,ke,C,S,y,b,P),E.el=ke.el}if(ae&&xt(ae,b),!me&&(X=H&&H.onVnodeMounted)){const ke=E;xt(()=>nn(X,xe,ke),b)}(E.shapeFlag&256||xe&&xo(xe.vnode)&&xe.vnode.shapeFlag&256)&&y.a&&xt(y.a,b),y.isMounted=!0,E=C=S=null}},W=y.effect=new mc(k,()=>Cc(D),y.scope),D=y.update=()=>W.run();D.id=y.uid,ai(y,!0),D()},F=(y,E,C)=>{E.component=y;const S=y.vnode.props;y.vnode=E,y.next=null,fy(y,E.props,S,C),_y(y,E.children,C),Ms(),Wu(),As()},j=(y,E,C,S,b,P,V,k,W=!1)=>{const D=y&&y.children,X=y?y.shapeFlag:0,Y=E.children,{patchFlag:H,shapeFlag:J}=E;if(H>0){if(H&128){fe(D,Y,C,S,b,P,V,k,W);return}else if(H&256){de(D,Y,C,S,b,P,V,k,W);return}}J&8?(X&16&&ze(D,b,P),Y!==D&&u(C,Y)):X&16?J&16?fe(D,Y,C,S,b,P,V,k,W):ze(D,b,P,!0):(X&8&&u(C,""),J&16&&A(Y,C,S,b,P,V,k,W))},de=(y,E,C,S,b,P,V,k,W)=>{y=y||ss,E=E||ss;const D=y.length,X=E.length,Y=Math.min(D,X);let H;for(H=0;H<Y;H++){const J=E[H]=W?Vn(E[H]):sn(E[H]);m(y[H],J,C,null,b,P,V,k,W)}D>X?ze(y,b,P,!0,!1,Y):A(E,C,S,b,P,V,k,W,Y)},fe=(y,E,C,S,b,P,V,k,W)=>{let D=0;const X=E.length;let Y=y.length-1,H=X-1;for(;D<=Y&&D<=H;){const J=y[D],ae=E[D]=W?Vn(E[D]):sn(E[D]);if(js(J,ae))m(J,ae,C,null,b,P,V,k,W);else break;D++}for(;D<=Y&&D<=H;){const J=y[Y],ae=E[H]=W?Vn(E[H]):sn(E[H]);if(js(J,ae))m(J,ae,C,null,b,P,V,k,W);else break;Y--,H--}if(D>Y){if(D<=H){const J=H+1,ae=J<X?E[J].el:S;for(;D<=H;)m(null,E[D]=W?Vn(E[D]):sn(E[D]),C,ae,b,P,V,k,W),D++}}else if(D>H)for(;D<=Y;)L(y[D],b,P,!0),D++;else{const J=D,ae=D,xe=new Map;for(D=ae;D<=H;D++){const lt=E[D]=W?Vn(E[D]):sn(E[D]);lt.key!=null&&xe.set(lt.key,D)}let me,ke=0;const at=H-ae+1;let Ye=!1,Wi=0;const ri=new Array(at);for(D=0;D<at;D++)ri[D]=0;for(D=J;D<=Y;D++){const lt=y[D];if(ke>=at){L(lt,b,P,!0);continue}let Rt;if(lt.key!=null)Rt=xe.get(lt.key);else for(me=ae;me<=H;me++)if(ri[me-ae]===0&&js(lt,E[me])){Rt=me;break}Rt===void 0?L(lt,b,P,!0):(ri[Rt-ae]=D+1,Rt>=Wi?Wi=Rt:Ye=!0,m(lt,E[Rt],C,null,b,P,V,k,W),ke++)}const Yr=Ye?Ey(ri):ss;for(me=Yr.length-1,D=at-1;D>=0;D--){const lt=ae+D,Rt=E[lt],zi=lt+1<X?E[lt+1].el:S;ri[D]===0?m(null,Rt,C,zi,b,P,V,k,W):Ye&&(me<0||D!==Yr[me]?Me(Rt,C,zi,2):me--)}}},Me=(y,E,C,S,b=null)=>{const{el:P,type:V,transition:k,children:W,shapeFlag:D}=y;if(D&6){Me(y.component.subTree,E,C,S);return}if(D&128){y.suspense.move(E,C,S);return}if(D&64){V.move(y,E,C,G);return}if(V===Yt){i(P,E,C);for(let Y=0;Y<W.length;Y++)Me(W[Y],E,C,S);i(y.anchor,E,C);return}if(V===Ya){w(y,E,C);return}if(S!==2&&D&1&&k)if(S===0)k.beforeEnter(P),i(P,E,C),xt(()=>k.enter(P),b);else{const{leave:Y,delayLeave:H,afterLeave:J}=k,ae=()=>i(P,E,C),xe=()=>{Y(P,()=>{ae(),J&&J()})};H?H(P,ae,xe):xe()}else i(P,E,C)},L=(y,E,C,S=!1,b=!1)=>{const{type:P,props:V,ref:k,children:W,dynamicChildren:D,shapeFlag:X,patchFlag:Y,dirs:H}=y;if(k!=null&&bl(k,null,C,y,!0),X&256){E.ctx.deactivate(y);return}const J=X&1&&H,ae=!xo(y);let xe;if(ae&&(xe=V&&V.onVnodeBeforeUnmount)&&nn(xe,E,y),X&6)Te(y.component,C,S);else{if(X&128){y.suspense.unmount(C,S);return}J&&oi(y,null,E,"beforeUnmount"),X&64?y.type.remove(y,E,C,b,G,S):D&&(P!==Yt||Y>0&&Y&64)?ze(D,E,C,!1,!0):(P===Yt&&Y&384||!b&&X&16)&&ze(W,E,C),S&&He(y)}(ae&&(xe=V&&V.onVnodeUnmounted)||J)&&xt(()=>{xe&&nn(xe,E,y),J&&oi(y,null,E,"unmounted")},C)},He=y=>{const{type:E,el:C,anchor:S,transition:b}=y;if(E===Yt){ge(C,S);return}if(E===Ya){v(y);return}const P=()=>{s(C),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(y.shapeFlag&1&&b&&!b.persisted){const{leave:V,delayLeave:k}=b,W=()=>V(C,P);k?k(y.el,P,W):W()}else P()},ge=(y,E)=>{let C;for(;y!==E;)C=d(y),s(y),y=C;s(E)},Te=(y,E,C)=>{const{bum:S,scope:b,update:P,subTree:V,um:k}=y;S&&Va(S),b.stop(),P&&(P.active=!1,L(V,y,E,C)),k&&xt(k,E),xt(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},ze=(y,E,C,S=!1,b=!1,P=0)=>{for(let V=P;V<y.length;V++)L(y[V],E,C,S,b)},I=y=>y.shapeFlag&6?I(y.component.subTree):y.shapeFlag&128?y.suspense.next():d(y.anchor||y.el),z=(y,E,C)=>{y==null?E._vnode&&L(E._vnode,null,null,!0):m(E._vnode||null,y,E,null,null,null,C),Wu(),Of(),E._vnode=y},G={p:m,um:L,m:Me,r:He,mt:Re,mc:A,pc:j,pbc:K,n:I,o:n};let q,pe;return e&&([q,pe]=e(G)),{render:z,hydrate:q,createApp:hy(z,q)}}function ai({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Bf(n,e,t=!1){const i=n.children,s=e.children;if(oe(i)&&oe(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Vn(s[r]),a.el=o.el),t||Bf(o,a)),a.type===ma&&(a.el=o.el)}}function Ey(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}const xy=n=>n.__isTeleport,Yt=Symbol.for("v-fgt"),ma=Symbol.for("v-txt"),Mi=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),ir=[];let Zt=null;function Pe(n=!1){ir.push(Zt=n?null:[])}function vy(){ir.pop(),Zt=ir[ir.length-1]||null}let fr=1;function Hu(n){fr+=n}function Xf(n){return n.dynamicChildren=fr>0?Zt||ss:null,vy(),fr>0&&Zt&&Zt.push(n),n}function We(n,e,t,i,s,r){return Xf(O(n,e,t,i,s,r,!0))}function Zf(n,e,t,i,s){return Xf(ot(n,e,t,i,s,!0))}function Ol(n){return n?n.__v_isVNode===!0:!1}function js(n,e){return n.type===e.type&&n.key===e.key}const _a="__vInternal",$f=({key:n})=>n??null,wo=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?rt(n)||gt(n)||he(n)?{i:ln,r:n,k:e,f:!!t}:n:null);function O(n,e=null,t=null,i=0,s=null,r=n===Yt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&$f(e),ref:e&&wo(e),scopeId:Lf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ln};return a?(Sc(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=rt(t)?8:16),fr>0&&!o&&Zt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Zt.push(l),l}const ot=wy;function wy(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===iy)&&(n=Mi),Ol(n)){const a=_s(n,e,!0);return t&&Sc(a,t),fr>0&&!r&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(n)]=a:Zt.push(a)),a.patchFlag|=-2,a}if(Ly(n)&&(n=n.__vccOpts),e){e=Cy(e);let{class:a,style:l}=e;a&&!rt(a)&&(e.class=fc(a)),je(l)&&(vf(l)&&!oe(l)&&(l=st({},l)),e.style=dc(l))}const o=rt(n)?1:Up(n)?128:xy(n)?64:je(n)?4:he(n)?2:0;return O(n,e,t,i,s,o,r,!0)}function Cy(n){return n?vf(n)||_a in n?st({},n):n:null}function _s(n,e,t=!1){const{props:i,ref:s,patchFlag:r,children:o}=n,a=e?Ty(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&$f(a),ref:e&&e.ref?t&&s?oe(s)?s.concat(wo(e)):[s,wo(e)]:wo(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Yt?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&_s(n.ssContent),ssFallback:n.ssFallback&&_s(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function et(n=" ",e=0){return ot(ma,null,n,e)}function Be(n="",e=!1){return e?(Pe(),Zf(Mi,null,n)):ot(Mi,null,n)}function sn(n){return n==null||typeof n=="boolean"?ot(Mi):oe(n)?ot(Yt,null,n.slice()):typeof n=="object"?Vn(n):ot(ma,null,String(n))}function Vn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:_s(n)}function Sc(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(oe(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Sc(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(_a in e)?e._ctx=ln:s===3&&ln&&(ln.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:ln},t=32):(e=String(e),i&64?(t=16,e=[et(e)]):t=8);n.children=e,n.shapeFlag|=t}function Ty(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=fc([e.class,i.class]));else if(s==="style")e.style=dc([e.style,i.style]);else if(aa(s)){const r=e[s],o=i[s];o&&r!==o&&!(oe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function nn(n,e,t,i=null){Kt(n,e,7,[t,i])}const Ry=Wf();let Sy=0;function Iy(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||Ry,r={uid:Sy++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new lf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vf(i,s),emitsOptions:Af(i,s),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:i.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=kp.bind(null,r),n.ce&&n.ce(r),r}let dt=null,Ic,Ui,Ku="__VUE_INSTANCE_SETTERS__";(Ui=yl()[Ku])||(Ui=yl()[Ku]=[]),Ui.push(n=>dt=n),Ic=n=>{Ui.length>1?Ui.forEach(e=>e(n)):Ui[0](n)};const ps=n=>{Ic(n),n.scope.on()},Ti=()=>{dt&&dt.scope.off(),Ic(null)};function Hf(n){return n.vnode.shapeFlag&4}let gr=!1;function by(n,e=!1){gr=e;const{props:t,children:i}=n.vnode,s=Hf(n);dy(n,t,s,e),my(n,i);const r=s?Oy(n,e):void 0;return gr=!1,r}function Oy(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=xc(new Proxy(n.ctx,sy));const{setup:i}=t;if(i){const s=n.setupContext=i.length>1?Ay(n):null;ps(n),Ms();const r=Jn(i,n,0,[n.props,s]);if(As(),Ti(),tf(r)){if(r.then(Ti,Ti),e)return r.then(o=>{qu(n,o,e)}).catch(o=>{da(o,n,0)});n.asyncDep=r}else qu(n,r,e)}else Kf(n,e)}function qu(n,e,t){he(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:je(e)&&(n.setupState=Rf(e)),Kf(n,t)}let Ju;function Kf(n,e,t){const i=n.type;if(!n.render){if(!e&&Ju&&!i.render){const s=i.template||Tc(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=st(st({isCustomElement:r,delimiters:a},o),l);i.render=Ju(s,c)}}n.render=i.render||Ht}ps(n),Ms(),ry(n),As(),Ti()}function My(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return Tt(n,"get","$attrs"),e[t]}}))}function Ay(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return My(n)},slots:n.slots,emit:n.emit,expose:e}}function bc(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Rf(xc(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in nr)return nr[t](n)},has(e,t){return t in e||t in nr}}))}function Ly(n){return he(n)&&"__vccOpts"in n}const Xt=(n,e)=>Mp(n,e,gr);function qf(n,e,t){const i=arguments.length;return i===2?je(e)&&!oe(e)?Ol(e)?ot(n,null,[e]):ot(n,e):ot(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Ol(t)&&(t=[t]),ot(n,e,t))}const Py=Symbol.for("v-scx"),Fy=()=>Tn(Py),Dy="3.3.4",ky="http://www.w3.org/2000/svg",_i=typeof document<"u"?document:null,Qu=_i&&_i.createElement("template"),Ny={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e?_i.createElementNS(ky,n):_i.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>_i.createTextNode(n),createComment:n=>_i.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>_i.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{Qu.innerHTML=i?`<svg>${n}</svg>`:n;const a=Qu.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Gy(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function Wy(n,e,t){const i=n.style,s=rt(t);if(t&&!s){if(e&&!rt(e))for(const r in e)t[r]==null&&Ml(i,r,"");for(const r in t)Ml(i,r,t[r])}else{const r=i.display;s?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=r)}}const eh=/\s*!important$/;function Ml(n,e,t){if(oe(t))t.forEach(i=>Ml(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=zy(n,e);eh.test(t)?n.setProperty(Os(i),t.replace(eh,""),"important"):n[i]=t}}const th=["Webkit","Moz","ms"],Ba={};function zy(n,e){const t=Ba[e];if(t)return t;let i=gs(e);if(i!=="filter"&&i in n)return Ba[e]=i;i=rf(i);for(let s=0;s<th.length;s++){const r=th[s]+i;if(r in n)return Ba[e]=r}return e}const nh="http://www.w3.org/1999/xlink";function Vy(n,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(nh,e.slice(6,e.length)):n.setAttributeNS(nh,e,t);else{const r=K_(e);t==null||r&&!of(t)?n.removeAttribute(e):n.setAttribute(e,r?"":t)}}function Uy(n,e,t,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=t;const c=a==="OPTION"?n.getAttribute("value"):n.value,u=t??"";c!==u&&(n.value=u),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=of(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function jy(n,e,t,i){n.addEventListener(e,t,i)}function Yy(n,e,t,i){n.removeEventListener(e,t,i)}function By(n,e,t,i,s=null){const r=n._vei||(n._vei={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=Xy(e);if(i){const c=r[e]=Hy(i,s);jy(n,a,c,l)}else o&&(Yy(n,a,o,l),r[e]=void 0)}}const ih=/(?:Once|Passive|Capture)$/;function Xy(n){let e;if(ih.test(n)){e={};let i;for(;i=n.match(ih);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Os(n.slice(2)),e]}let Xa=0;const Zy=Promise.resolve(),$y=()=>Xa||(Zy.then(()=>Xa=0),Xa=Date.now());function Hy(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Kt(Ky(i,t.value),e,5,[i])};return t.value=n,t.attached=$y(),t}function Ky(n,e){if(oe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const sh=/^on[a-z]/,qy=(n,e,t,i,s=!1,r,o,a,l)=>{e==="class"?Gy(n,i,s):e==="style"?Wy(n,t,i):aa(e)?lc(e)||By(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jy(n,e,i,s))?Uy(n,e,i,r,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Vy(n,e,i,s))};function Jy(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&sh.test(e)&&he(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||sh.test(e)&&rt(t)?!1:e in n}const Qy=st({patchProp:qy},Ny);let rh;function e0(){return rh||(rh=py(Qy))}const t0=(...n)=>{const e=e0().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=n0(i);if(!s)return;const r=e._component;!he(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function n0(n){return rt(n)?document.querySelector(n):n}var i0=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const s0=Symbol();var oh;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(oh||(oh={}));function r0(){const n=q_(!0),e=n.run(()=>Pi({}));let t=[],i=[];const s=xc({install(r){s._a=r,r.provide(s0,s),r.config.globalProperties.$pinia=s,i.forEach(o=>t.push(o)),i=[]},use(r){return!this._a&&!i0?i.push(r):t.push(r),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return s}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ki=typeof window<"u";function o0(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Le=Object.assign;function Za(n,e){const t={};for(const i in e){const s=e[i];t[i]=Jt(s)?s.map(n):n(s)}return t}const sr=()=>{},Jt=Array.isArray,a0=/\/$/,l0=n=>n.replace(a0,"");function $a(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=d0(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function c0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ah(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function u0(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&ys(e.matched[i],t.matched[s])&&Jf(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function ys(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Jf(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!h0(n[t],e[t]))return!1;return!0}function h0(n,e){return Jt(n)?lh(n,e):Jt(e)?lh(e,n):n===e}function lh(n,e){return Jt(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function d0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var mr;(function(n){n.pop="pop",n.push="push"})(mr||(mr={}));var rr;(function(n){n.back="back",n.forward="forward",n.unknown=""})(rr||(rr={}));function f0(n){if(!n)if(Ki){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),l0(n)}const g0=/^[^#]+#/;function m0(n,e){return n.replace(g0,"#")+e}function _0(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const pa=()=>({left:window.pageXOffset,top:window.pageYOffset});function p0(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=_0(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ch(n,e){return(history.state?history.state.position-e:-1)+n}const Al=new Map;function y0(n,e){Al.set(n,e)}function E0(n){const e=Al.get(n);return Al.delete(n),e}let x0=()=>location.protocol+"//"+location.host;function Qf(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),ah(l,"")}return ah(t,n)+i+s}function v0(n,e,t,i){let s=[],r=[],o=null;const a=({state:d})=>{const f=Qf(n,location),g=t.value,m=e.value;let _=0;if(d){if(t.value=f,e.value=d,o&&o===g){o=null;return}_=m?d.position-m.position:0}else i(f);s.forEach(p=>{p(t.value,g,{delta:_,type:mr.pop,direction:_?_>0?rr.forward:rr.back:rr.unknown})})};function l(){o=t.value}function c(d){s.push(d);const f=()=>{const g=s.indexOf(d);g>-1&&s.splice(g,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Le({},d.state,{scroll:pa()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function uh(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?pa():null}}function w0(n){const{history:e,location:t}=window,i={value:Qf(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:x0()+n+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(l,c){const u=Le({},e.state,uh(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,u,!0),i.value=l}function a(l,c){const u=Le({},s.value,e.state,{forward:l,scroll:pa()});r(u.current,u,!0);const h=Le({},uh(i.value,l,null),{position:u.position+1},c);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function C0(n){n=f0(n);const e=w0(n),t=v0(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=Le({location:"",base:n,go:i,createHref:m0.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function T0(n){return typeof n=="string"||n&&typeof n=="object"}function eg(n){return typeof n=="string"||typeof n=="symbol"}const Pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},tg=Symbol("");var hh;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(hh||(hh={}));function Es(n,e){return Le(new Error,{type:n,[tg]:!0},e)}function gn(n,e){return n instanceof Error&&tg in n&&(e==null||!!(n.type&e))}const dh="[^/]+?",R0={sensitive:!1,strict:!1,start:!0,end:!0},S0=/[.+*?^${}()[\]/\\]/g;function I0(n,e){const t=Le({},R0,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(S0,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:m,optional:_,regexp:p}=d;r.push({name:g,repeatable:m,optional:_});const x=p||dh;if(x!==dh){f+=10;try{new RegExp(`(${x})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${x}): `+v.message)}}let w=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(w=_&&c.length<2?`(?:/${w})`:"/"+w),_&&(w+="?"),s+=w,f+=20,_&&(f+=-8),m&&(f+=-20),x===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=r[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:m,optional:_}=f,p=g in c?c[g]:"";if(Jt(p)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const x=Jt(p)?p.join("/"):p;if(!x)if(_)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=x}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function b0(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function O0(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=b0(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(fh(i))return 1;if(fh(s))return-1}return s.length-i.length}function fh(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const M0={type:0,value:""},A0=/[a-zA-Z0-9_]/;function L0(n){if(!n)return[[]];if(n==="/")return[[M0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=i;break;case 1:l==="("?t=2:A0.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function P0(n,e,t){const i=I0(L0(n.path),t),s=Le(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function F0(n,e){const t=[],i=new Map;e=_h({strict:!1,end:!0,sensitive:!1},e);function s(u){return i.get(u)}function r(u,h,d){const f=!d,g=D0(u);g.aliasOf=d&&d.record;const m=_h(e,u),_=[g];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of w)_.push(Le({},g,{components:d?d.record.components:g.components,path:v,aliasOf:d?d.record:g}))}let p,x;for(const w of _){const{path:v}=w;if(h&&v[0]!=="/"){const T=h.record.path,R=T[T.length-1]==="/"?"":"/";w.path=h.record.path+(v&&R+v)}if(p=P0(w,h,m),d?d.alias.push(p):(x=x||p,x!==p&&x.alias.push(p),f&&u.name&&!mh(p)&&o(u.name)),g.children){const T=g.children;for(let R=0;R<T.length;R++)r(T[R],p,d&&d.children[R])}d=d||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return x?()=>{o(x)}:sr}function o(u){if(eg(u)){const h=i.get(u);h&&(i.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&O0(u,t[h])>=0&&(u.record.path!==t[h].record.path||!ng(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!mh(u)&&i.set(u.record.name,u)}function c(u,h){let d,f={},g,m;if("name"in u&&u.name){if(d=i.get(u.name),!d)throw Es(1,{location:u});m=d.record.name,f=Le(gh(h.params,d.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&gh(u.params,d.keys.map(x=>x.name))),g=d.stringify(f)}else if("path"in u)g=u.path,d=t.find(x=>x.re.test(g)),d&&(f=d.parse(g),m=d.record.name);else{if(d=h.name?i.get(h.name):t.find(x=>x.re.test(h.path)),!d)throw Es(1,{location:u,currentLocation:h});m=d.record.name,f=Le({},h.params,u.params),g=d.stringify(f)}const _=[];let p=d;for(;p;)_.unshift(p.record),p=p.parent;return{name:m,path:g,params:f,matched:_,meta:N0(_)}}return n.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function gh(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function D0(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:k0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function k0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function mh(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function N0(n){return n.reduce((e,t)=>Le(e,t.meta),{})}function _h(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function ng(n,e){return e.children.some(t=>t===n||ng(n,t))}const ig=/#/g,G0=/&/g,W0=/\//g,z0=/=/g,V0=/\?/g,sg=/\+/g,U0=/%5B/g,j0=/%5D/g,rg=/%5E/g,Y0=/%60/g,og=/%7B/g,B0=/%7C/g,ag=/%7D/g,X0=/%20/g;function Oc(n){return encodeURI(""+n).replace(B0,"|").replace(U0,"[").replace(j0,"]")}function Z0(n){return Oc(n).replace(og,"{").replace(ag,"}").replace(rg,"^")}function Ll(n){return Oc(n).replace(sg,"%2B").replace(X0,"+").replace(ig,"%23").replace(G0,"%26").replace(Y0,"`").replace(og,"{").replace(ag,"}").replace(rg,"^")}function $0(n){return Ll(n).replace(z0,"%3D")}function H0(n){return Oc(n).replace(ig,"%23").replace(V0,"%3F")}function K0(n){return n==null?"":H0(n).replace(W0,"%2F")}function Ao(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function q0(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(sg," "),o=r.indexOf("="),a=Ao(o<0?r:r.slice(0,o)),l=o<0?null:Ao(r.slice(o+1));if(a in e){let c=e[a];Jt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function ph(n){let e="";for(let t in n){const i=n[t];if(t=$0(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Jt(i)?i.map(r=>r&&Ll(r)):[i&&Ll(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function J0(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Jt(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const Q0=Symbol(""),yh=Symbol(""),Mc=Symbol(""),lg=Symbol(""),Pl=Symbol("");function Ys(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Un(n,e,t,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Es(4,{from:t,to:e})):h instanceof Error?a(h):T0(h)?a(Es(2,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),o())},c=n.call(i&&i.instances[s],e,t,l);let u=Promise.resolve(c);n.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function Ha(n,e,t,i){const s=[];for(const r of n)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(eE(a)){const c=(a.__vccOpts||a)[e];c&&s.push(Un(c,t,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=o0(c)?c.default:c;r.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Un(d,t,i,r,o)()}))}}return s}function eE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Eh(n){const e=Tn(Mc),t=Tn(lg),i=Xt(()=>e.resolve(Ci(n.to))),s=Xt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(ys.bind(null,u));if(d>-1)return d;const f=xh(l[c-2]);return c>1&&xh(u)===f&&h[h.length-1].path!==f?h.findIndex(ys.bind(null,l[c-2])):d}),r=Xt(()=>s.value>-1&&sE(t.params,i.value.params)),o=Xt(()=>s.value>-1&&s.value===t.matched.length-1&&Jf(t.params,i.value.params));function a(l={}){return iE(l)?e[Ci(n.replace)?"replace":"push"](Ci(n.to)).catch(sr):Promise.resolve()}return{route:i,href:Xt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const tE=Ir({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Eh,setup(n,{slots:e}){const t=ha(Eh(n)),{options:i}=Tn(Mc),s=Xt(()=>({[vh(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[vh(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return n.custom?r:qf("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),nE=tE;function iE(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function sE(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!Jt(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function xh(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const vh=(n,e,t)=>n??e??t,rE=Ir({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=Tn(Pl),s=Xt(()=>n.route||i.value),r=Tn(yh,0),o=Xt(()=>{let c=Ci(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Xt(()=>s.value.matched[o.value]);vo(yh,Xt(()=>o.value+1)),vo(Q0,a),vo(Pl,s);const l=Pi();return ls(()=>[l.value,a.value,n.name],([c,u,h],[d,f,g])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!ys(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return wh(t.default,{Component:d,route:c});const f=h.props[u],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,_=qf(d,Le({},g,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return wh(t.default,{Component:_,route:c})||_}}});function wh(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const cg=rE;function oE(n){const e=F0(n.routes,n),t=n.parseQuery||q0,i=n.stringifyQuery||ph,s=n.history,r=Ys(),o=Ys(),a=Ys(),l=Sp(Pn);let c=Pn;Ki&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Za.bind(null,I=>""+I),h=Za.bind(null,K0),d=Za.bind(null,Ao);function f(I,z){let G,q;return eg(I)?(G=e.getRecordMatcher(I),q=z):q=I,e.addRoute(q,G)}function g(I){const z=e.getRecordMatcher(I);z&&e.removeRoute(z)}function m(){return e.getRoutes().map(I=>I.record)}function _(I){return!!e.getRecordMatcher(I)}function p(I,z){if(z=Le({},z||l.value),typeof I=="string"){const C=$a(t,I,z.path),S=e.resolve({path:C.path},z),b=s.createHref(C.fullPath);return Le(C,S,{params:d(S.params),hash:Ao(C.hash),redirectedFrom:void 0,href:b})}let G;if("path"in I)G=Le({},I,{path:$a(t,I.path,z.path).path});else{const C=Le({},I.params);for(const S in C)C[S]==null&&delete C[S];G=Le({},I,{params:h(C)}),z.params=h(z.params)}const q=e.resolve(G,z),pe=I.hash||"";q.params=u(d(q.params));const y=c0(i,Le({},I,{hash:Z0(pe),path:q.path})),E=s.createHref(y);return Le({fullPath:y,hash:pe,query:i===ph?J0(I.query):I.query||{}},q,{redirectedFrom:void 0,href:E})}function x(I){return typeof I=="string"?$a(t,I,l.value.path):Le({},I)}function w(I,z){if(c!==I)return Es(8,{from:z,to:I})}function v(I){return M(I)}function T(I){return v(Le(x(I),{replace:!0}))}function R(I){const z=I.matched[I.matched.length-1];if(z&&z.redirect){const{redirect:G}=z;let q=typeof G=="function"?G(I):G;return typeof q=="string"&&(q=q.includes("?")||q.includes("#")?q=x(q):{path:q},q.params={}),Le({query:I.query,hash:I.hash,params:"path"in q?{}:I.params},q)}}function M(I,z){const G=c=p(I),q=l.value,pe=I.state,y=I.force,E=I.replace===!0,C=R(G);if(C)return M(Le(x(C),{state:typeof C=="object"?Le({},pe,C.state):pe,force:y,replace:E}),z||G);const S=G;S.redirectedFrom=z;let b;return!y&&u0(i,q,G)&&(b=Es(16,{to:S,from:q}),Me(q,q,!0,!1)),(b?Promise.resolve(b):K(S,q)).catch(P=>gn(P)?gn(P,2)?P:fe(P):j(P,S,q)).then(P=>{if(P){if(gn(P,2))return M(Le({replace:E},x(P.to),{state:typeof P.to=="object"?Le({},pe,P.to.state):pe,force:y}),z||S)}else P=ne(S,q,!0,E,pe);return se(S,q,P),P})}function A(I,z){const G=w(I,z);return G?Promise.reject(G):Promise.resolve()}function Z(I){const z=ge.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(I):I()}function K(I,z){let G;const[q,pe,y]=aE(I,z);G=Ha(q.reverse(),"beforeRouteLeave",I,z);for(const C of q)C.leaveGuards.forEach(S=>{G.push(Un(S,I,z))});const E=A.bind(null,I,z);return G.push(E),ze(G).then(()=>{G=[];for(const C of r.list())G.push(Un(C,I,z));return G.push(E),ze(G)}).then(()=>{G=Ha(pe,"beforeRouteUpdate",I,z);for(const C of pe)C.updateGuards.forEach(S=>{G.push(Un(S,I,z))});return G.push(E),ze(G)}).then(()=>{G=[];for(const C of y)if(C.beforeEnter)if(Jt(C.beforeEnter))for(const S of C.beforeEnter)G.push(Un(S,I,z));else G.push(Un(C.beforeEnter,I,z));return G.push(E),ze(G)}).then(()=>(I.matched.forEach(C=>C.enterCallbacks={}),G=Ha(y,"beforeRouteEnter",I,z),G.push(E),ze(G))).then(()=>{G=[];for(const C of o.list())G.push(Un(C,I,z));return G.push(E),ze(G)}).catch(C=>gn(C,8)?C:Promise.reject(C))}function se(I,z,G){a.list().forEach(q=>Z(()=>q(I,z,G)))}function ne(I,z,G,q,pe){const y=w(I,z);if(y)return y;const E=z===Pn,C=Ki?history.state:{};G&&(q||E?s.replace(I.fullPath,Le({scroll:E&&C&&C.scroll},pe)):s.push(I.fullPath,pe)),l.value=I,Me(I,z,G,E),fe()}let ee;function Re(){ee||(ee=s.listen((I,z,G)=>{if(!Te.listening)return;const q=p(I),pe=R(q);if(pe){M(Le(pe,{replace:!0}),q).catch(sr);return}c=q;const y=l.value;Ki&&y0(ch(y.fullPath,G.delta),pa()),K(q,y).catch(E=>gn(E,12)?E:gn(E,2)?(M(E.to,q).then(C=>{gn(C,20)&&!G.delta&&G.type===mr.pop&&s.go(-1,!1)}).catch(sr),Promise.reject()):(G.delta&&s.go(-G.delta,!1),j(E,q,y))).then(E=>{E=E||ne(q,y,!1),E&&(G.delta&&!gn(E,8)?s.go(-G.delta,!1):G.type===mr.pop&&gn(E,20)&&s.go(-1,!1)),se(q,y,E)}).catch(sr)}))}let $=Ys(),B=Ys(),F;function j(I,z,G){fe(I);const q=B.list();return q.length?q.forEach(pe=>pe(I,z,G)):console.error(I),Promise.reject(I)}function de(){return F&&l.value!==Pn?Promise.resolve():new Promise((I,z)=>{$.add([I,z])})}function fe(I){return F||(F=!I,Re(),$.list().forEach(([z,G])=>I?G(I):z()),$.reset()),I}function Me(I,z,G,q){const{scrollBehavior:pe}=n;if(!Ki||!pe)return Promise.resolve();const y=!G&&E0(ch(I.fullPath,0))||(q||!G)&&history.state&&history.state.scroll||null;return If().then(()=>pe(I,z,y)).then(E=>E&&p0(E)).catch(E=>j(E,I,z))}const L=I=>s.go(I);let He;const ge=new Set,Te={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,hasRoute:_,getRoutes:m,resolve:p,options:n,push:v,replace:T,go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:B.add,isReady:de,install(I){const z=this;I.component("RouterLink",nE),I.component("RouterView",cg),I.config.globalProperties.$router=z,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>Ci(l)}),Ki&&!He&&l.value===Pn&&(He=!0,v(s.location).catch(pe=>{}));const G={};for(const pe in Pn)Object.defineProperty(G,pe,{get:()=>l.value[pe],enumerable:!0});I.provide(Mc,z),I.provide(lg,Ef(G)),I.provide(Pl,l);const q=I.unmount;ge.add(I),I.unmount=function(){ge.delete(I),ge.size<1&&(c=Pn,ee&&ee(),ee=null,l.value=Pn,He=!1,F=!1),q()}}};function ze(I){return I.reduce((z,G)=>z.then(()=>Z(G)),Promise.resolve())}return Te}function aE(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>ys(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>ys(c,l))||s.push(l))}return[t,i,s]}const lE=Ir({__name:"App",setup(n){return(e,t)=>(Pe(),Zf(Ci(cg)))}}),cE="modulepreload",uE=function(n){return"/openactivity/"+n},Ch={},hE=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=uE(r),r in Ch)return;Ch[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":cE,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};const dE="/openactivity/assets/destination-point-63b16bda.svg",fE="/openactivity/assets/starting-point-c9a465c9.svg";class gE{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const An=gE,xs={PROPERTYCHANGE:"propertychange"};class mE{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Ac=mE;function _E(n,e,t){let i,s;t=t||ei;let r=0,o=n.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+t(n[i],e),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function ei(n,e){return n>e?1:n<e?-1:0}function Lc(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let s=1;s<i;++s){const r=n[s];if(r===e)return s;if(r<e)return t(e,n[s-1],r)>0?s-1:s}return i-1}if(t>0){for(let s=1;s<i;++s)if(n[s]<e)return s-1;return i-1}if(t<0){for(let s=1;s<i;++s)if(n[s]<=e)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==e)return s;if(n[s]<e)return n[s-1]-e<e-n[s]?s-1:s}return i-1}function pE(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Rn(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let s=0;s<i;s++)n[n.length]=t[s]}function ii(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function yE(n,e,t){const i=e||ei;return n.every(function(s,r){if(r===0)return!0;const o=i(n[r-1],s);return!(o>0||t&&o===0)})}function _r(){return!0}function ya(){return!1}function vs(){}function EE(n){let e=!1,t,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!ii(r,i))&&(e=!0,s=this,i=r,t=n.apply(this,arguments)),t}}function xE(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function br(n){for(const e in n)delete n[e]}function ws(n){let e;for(e in n)return!1;return!e}class vE extends Ac{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=t?new An(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=s.length;c<u;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,vs);delete o[i]}return l}disposeInternal(){this.listeners_&&br(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const s=i.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=vs,++this.pendingRemovals_[e]):(i.splice(s,1),i.length===0&&delete this.listeners_[e]))}}}const Or=vE,re={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ee(n,e,t,i,s){if(i&&i!==n&&(t=t.bind(i)),s){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:n,type:e,listener:t};return n.addEventListener(e,t),r}function Lo(n,e,t,i){return Ee(n,e,t,i,!0)}function Ge(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),br(n))}class Ea extends Or{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(re.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Ee(this,e[r],t);return s}return Ee(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Lo(this,e[r],t)}else i=Lo(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)wE(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Ea.prototype.on;Ea.prototype.once;Ea.prototype.un;function wE(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ge(n[e]);else Ge(n)}const ug=Ea;function ie(){throw new Error("Unimplemented abstract method.")}let CE=0;function Ie(n){return n.ol_uid||(n.ol_uid=String(++CE))}class Th extends An{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class TE extends ug{constructor(e){super(),this.on,this.once,this.un,Ie(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Th(i,e,t)),i=xs.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Th(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const s=this.values_||(this.values_={});if(i)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],ws(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const tn=TE,vt={ADD:"add",REMOVE:"remove"},Rh={LENGTH:"length"};class Qr extends An{constructor(e,t,i){super(e),this.element=t,this.index=i}}class RE extends tn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Rh.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Qr(vt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Qr(vt.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Qr(vt.REMOVE,s,e)),this.dispatchEvent(new Qr(vt.ADD,t,e))}updateLength_(){this.set(Rh.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}const cn=RE,ti=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",SE=ti.includes("firefox"),IE=ti.includes("safari")&&!ti.includes("chrom");IE&&(ti.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ti));const bE=ti.includes("webkit")&&!ti.includes("edge"),hg=ti.includes("macintosh"),dg=typeof devicePixelRatio<"u"?devicePixelRatio:1,Pc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,fg=typeof Image<"u"&&Image.prototype.decode,gg=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function ve(n,e){if(!n)throw new Error(e)}new Array(6);function qt(){return[1,0,0,1,0,0]}function OE(n,e,t,i,s,r,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n}function ME(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function $e(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function AE(n,e,t){return OE(n,e,0,0,t,0,0)}function Qt(n,e,t,i,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return n[0]=i*c,n[1]=s*l,n[2]=-i*l,n[3]=s*c,n[4]=o*i*c-a*i*l+e,n[5]=o*s*l+a*s*c+t,n}function xa(n,e){const t=LE(e);ve(t!==0,"Transformation matrix cannot be inverted");const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-s/t,n[2]=-r/t,n[3]=i/t,n[4]=(r*l-o*a)/t,n[5]=-(i*l-s*a)/t,n}function LE(n){return n[0]*n[3]-n[1]*n[2]}let Sh;function Fc(n){const e="matrix("+n.join(", ")+")";if(Pc)return e;const t=Sh||(Sh=document.createElement("div"));return t.style.transform=e,t.style.transform}const it={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ih(n){const e=Nt();for(let t=0,i=n.length;t<i;++t)or(e,n[t]);return e}function Dc(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function mg(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Fi(n,e,t){let i,s;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?s=n[1]-t:n[3]<t?s=t-n[3]:s=0,i*i+s*s}function Mr(n,e){return kc(n,e[0],e[1])}function Zn(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function kc(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function Fl(n,e){const t=n[0],i=n[1],s=n[2],r=n[3],o=e[0],a=e[1];let l=it.UNKNOWN;return o<t?l=l|it.LEFT:o>s&&(l=l|it.RIGHT),a<i?l=l|it.BELOW:a>r&&(l=l|it.ABOVE),l===it.UNKNOWN&&(l=it.INTERSECTING),l}function Nt(){return[1/0,1/0,-1/0,-1/0]}function ni(n,e,t,i,s){return s?(s[0]=n,s[1]=e,s[2]=t,s[3]=i,s):[n,e,t,i]}function Ar(n){return ni(1/0,1/0,-1/0,-1/0,n)}function PE(n,e){const t=n[0],i=n[1];return ni(t,i,t,i,e)}function _g(n,e,t,i,s){const r=Ar(s);return yg(r,n,e,t,i)}function pr(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function pg(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function or(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function yg(n,e,t,i,s){for(;t<i;t+=s)FE(n,e[t],e[t+1]);return n}function FE(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Eg(n,e){let t;return t=e(va(n)),t||(t=e(wa(n)),t)||(t=e(Ca(n)),t)||(t=e(Di(n)),t)?t:!1}function Dl(n){let e=0;return Ls(n)||(e=De(n)*At(n)),e}function va(n){return[n[0],n[1]]}function wa(n){return[n[2],n[1]]}function Ai(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function DE(n,e){let t;if(e==="bottom-left")t=va(n);else if(e==="bottom-right")t=wa(n);else if(e==="top-left")t=Di(n);else if(e==="top-right")t=Ca(n);else throw new Error("Invalid corner");return t}function kl(n,e,t,i,s){const[r,o,a,l,c,u,h,d]=Nl(n,e,t,i);return ni(Math.min(r,a,c,h),Math.min(o,l,u,d),Math.max(r,a,c,h),Math.max(o,l,u,d),s)}function Nl(n,e,t,i){const s=e*i[0]/2,r=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,c=s*a,u=r*o,h=r*a,d=n[0],f=n[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function At(n){return n[3]-n[1]}function cs(n,e,t){const i=t||Nt();return _t(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Ar(i),i}function Di(n){return[n[0],n[3]]}function Ca(n){return[n[2],n[3]]}function De(n){return n[2]-n[0]}function _t(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Ls(n){return n[2]<n[0]||n[3]<n[1]}function kE(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function NE(n,e){const t=(n[2]-n[0])/2*(e-1),i=(n[3]-n[1])/2*(e-1);n[0]-=t,n[2]+=t,n[1]-=i,n[3]+=i}function GE(n,e,t){let i=!1;const s=Fl(n,e),r=Fl(n,t);if(s===it.INTERSECTING||r===it.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],c=n[3],u=e[0],h=e[1],d=t[0],f=t[1],g=(f-h)/(d-u);let m,_;r&it.ABOVE&&!(s&it.ABOVE)&&(m=d-(f-c)/g,i=m>=o&&m<=l),!i&&r&it.RIGHT&&!(s&it.RIGHT)&&(_=f-(d-l)*g,i=_>=a&&_<=c),!i&&r&it.BELOW&&!(s&it.BELOW)&&(m=d-(f-a)/g,i=m>=o&&m<=l),!i&&r&it.LEFT&&!(s&it.LEFT)&&(_=f-(d-o)*g,i=_>=a&&_<=c)}return i}function xg(n,e){const t=e.getExtent(),i=Ai(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const s=De(t),o=Math.floor((i[0]-t[0])/s)*s;n[0]-=o,n[2]-=o}return n}function WE(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];xg(n,e);const i=De(t);if(De(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function Qe(n,e,t){return Math.min(Math.max(n,e),t)}function zE(n,e,t,i,s,r){const o=s-t,a=r-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=s,i=r):l>0&&(t+=o*l,i+=a*l)}return Ri(n,e,t,i)}function Ri(n,e,t,i){const s=t-n,r=i-e;return s*s+r*r}function VE(n){const e=n.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>r&&(r=l,s=a)}if(r===0)return null;const o=n[s];n[s]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let s=i-1;s>=0;s--)n[s][e]-=n[s][i]*t[i]}return t}function Co(n){return n*Math.PI/180}function Si(n,e){const t=n%e;return t*e<0?t+e:t}function bt(n,e,t){return n+t*(e-n)}function Ta(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function eo(n,e){return Math.floor(Ta(n,e))}function to(n,e){return Math.ceil(Ta(n,e))}const UE=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,jE=/^([a-z]*)$|^hsla?\(.*\)$/i;function vg(n){return typeof n=="string"?n:wg(n)}function YE(n){const e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const BE=function(){const e={};let t=0;return function(i){let s;if(e.hasOwnProperty(i))s=e[i];else{if(t>=1024){let r=0;for(const o in e)r++&3||(delete e[o],--t)}s=XE(i),e[i]=s,++t}return s}}();function Po(n){return Array.isArray(n)?n:BE(n)}function XE(n){let e,t,i,s,r;if(jE.exec(n)&&(n=YE(n)),UE.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?s=parseInt(n.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(s=(s<<4)+s)),r=[e,t,i,s/255]}else if(n.startsWith("rgba("))r=n.slice(5,-1).split(",").map(Number),bh(r);else if(n.startsWith("rgb("))r=n.slice(4,-1).split(",").map(Number),r.push(1),bh(r);else throw new Error("Invalid color");return r}function bh(n){return n[0]=Qe(n[0]+.5|0,0,255),n[1]=Qe(n[1]+.5|0,0,255),n[2]=Qe(n[2]+.5|0,0,255),n[3]=Qe(n[3],0,1),n}function wg(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const s=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+s+")"}class ZE{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const s=Oh(e,t,i);return s in this.cache_?this.cache_[s]:null}set(e,t,i,s){const r=Oh(e,t,i);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Oh(n,e,t){const i=t?vg(t):"null";return e+":"+n+":"+i}const Fo=new ZE,Ae={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class $E extends tn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ae.OPACITY]=e.opacity!==void 0?e.opacity:1,ve(typeof t[Ae.OPACITY]=="number","Layer opacity must be a number"),t[Ae.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ae.Z_INDEX]=e.zIndex,t[Ae.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ae.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ae.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ae.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Qe(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ie()}getLayerStatesArray(e){return ie()}getExtent(){return this.get(Ae.EXTENT)}getMaxResolution(){return this.get(Ae.MAX_RESOLUTION)}getMinResolution(){return this.get(Ae.MIN_RESOLUTION)}getMinZoom(){return this.get(Ae.MIN_ZOOM)}getMaxZoom(){return this.get(Ae.MAX_ZOOM)}getOpacity(){return this.get(Ae.OPACITY)}getSourceState(){return ie()}getVisible(){return this.get(Ae.VISIBLE)}getZIndex(){return this.get(Ae.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ae.EXTENT,e)}setMaxResolution(e){this.set(Ae.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ae.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ae.MAX_ZOOM,e)}setMinZoom(e){this.set(Ae.MIN_ZOOM,e)}setOpacity(e){ve(typeof e=="number","Layer opacity must be a number"),this.set(Ae.OPACITY,e)}setVisible(e){this.set(Ae.VISIBLE,e)}setZIndex(e){this.set(Ae.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Cg=$E,hn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Je={ANIMATING:0,INTERACTING:1},Gt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},HE=42,Nc=256,Cs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class KE{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Cs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Tg=KE,Lr=6378137,ns=Math.PI*Lr,qE=[-ns,-ns,ns,ns],JE=[-180,-85,180,85],no=Lr*Math.log(Math.tan(Math.PI/2));class ji extends Tg{constructor(e){super({code:e,units:"m",extent:qE,global:!0,worldExtent:JE,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Lr)}})}}const Mh=[new ji("EPSG:3857"),new ji("EPSG:102100"),new ji("EPSG:102113"),new ji("EPSG:900913"),new ji("http://www.opengis.net/def/crs/EPSG/0/3857"),new ji("http://www.opengis.net/gml/srs/epsg.xml#3857")];function QE(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=t){e[s]=ns*n[s]/180;let r=Lr*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));r>no?r=no:r<-no&&(r=-no),e[s+1]=r}return e}function ex(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=t)e[s]=180*n[s]/ns,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Lr))/Math.PI-90;return e}const tx=6378137,Ah=[-180,-90,180,90],nx=Math.PI*tx/180;class li extends Tg{constructor(e,t){super({code:e,units:"degrees",extent:Ah,axisOrientation:t,global:!0,metersPerUnit:nx,worldExtent:Ah})}}const Lh=[new li("CRS:84"),new li("EPSG:4326","neu"),new li("urn:ogc:def:crs:OGC:1.3:CRS84"),new li("urn:ogc:def:crs:OGC:2:84"),new li("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new li("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new li("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Gl={};function ix(n){return Gl[n]||Gl[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function sx(n,e){Gl[n]=e}let us={};function Do(n,e,t){const i=n.getCode(),s=e.getCode();i in us||(us[i]={}),us[i][s]=t}function rx(n,e){let t;return n in us&&e in us[n]&&(t=us[n][e]),t}function Ph(n,e,t){const i=t!==void 0?n.toFixed(t):""+n;let s=i.indexOf(".");return s=s===-1?i.length:s,s>e?i:new Array(1+e-s).join("0")+i}function ox(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Fh(n,e,t){const i=Si(e+180,360)-180,s=Math.abs(3600*i),r=t||0;let o=Math.floor(s/3600),a=Math.floor((s-o*3600)/60),l=Ta(s-o*3600-a*60,r);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let c=o+"";return(a!==0||l!==0)&&(c+=" "+Ph(a,2)+""),l!==0&&(c+=" "+Ph(l,2,r)+""),i!==0&&(c+=" "+n.charAt(i<0?1:0)),c}function ko(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function Gc(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[0]*t-n[1]*i,r=n[1]*t+n[0]*i;return n[0]=s,n[1]=r,n}function ax(n,e){return n[0]*=e,n[1]*=e,n}function lx(n,e){return n?Fh("NS",n[1],e)+" "+Fh("EW",n[0],e):""}function Rg(n,e){if(e.canWrapX()){const t=De(e.getExtent()),i=cx(n,e,t);i&&(n[0]-=i*t)}return n}function cx(n,e,t){const i=e.getExtent();let s=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||De(i),s=Math.floor((n[0]-i[0])/t)),s}const ux=63710088e-1;function Dh(n,e,t){t=t||ux;const i=Co(n[1]),s=Co(e[1]),r=(s-i)/2,o=Co(e[0]-n[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Sg={info:1,warn:2,error:3,none:4};let hx=Sg.info;function Ig(...n){hx>Sg.warn||console.warn(...n)}let Wl=!0;function dx(n){Wl=!(n===void 0?!0:n)}function Wc(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function bg(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function fx(n){sx(n.getCode(),n),Do(n,n,Wc)}function gx(n){n.forEach(fx)}function tt(n){return typeof n=="string"?ix(n):n||null}function No(n,e,t,i){n=tt(n);let s;const r=n.getPointResolutionFunc();if(r){if(s=r(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(s=s*o/Cs[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")s=e;else{const a=Vc(n,tt("EPSG:4326"));if(a===bg&&o!=="degrees")s=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=Dh(c.slice(0,2),c.slice(2,4)),h=Dh(c.slice(4,6),c.slice(6,8));s=(u+h)/2}const l=i?Cs[i]:n.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function kh(n){gx(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Do(e,t,Wc)})})}function mx(n,e,t,i){n.forEach(function(s){e.forEach(function(r){Do(s,r,t),Do(r,s,i)})})}function zc(n,e){return n?typeof n=="string"?tt(n):n:tt(e)}function pi(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Vc(n,e)===Wc)&&t}function Vc(n,e){const t=n.getCode(),i=e.getCode();let s=rx(t,i);return s||(s=bg),s}function Wo(n,e){const t=tt(n),i=tt(e);return Vc(t,i)}function _x(n,e,t){return Wo(e,t)(n,void 0,n.length)}function zl(n,e){return n}function yn(n,e){return Wl&&!ko(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(Wl=!1,Ig("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Og(n,e){return n}function wn(n,e){return n}function px(){kh(Mh),kh(Lh),mx(Lh,Mh,QE,ex)}px();function Nh(n,e,t){return function(i,s,r,o,a){if(!i)return;if(!s&&!e)return i;const l=e?0:r[0]*s,c=e?0:r[1]*s,u=a?a[0]:0,h=a?a[1]:0;let d=n[0]+l/2+u,f=n[2]-l/2+u,g=n[1]+c/2+h,m=n[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),g>m&&(g=(m+g)/2,m=g);let _=Qe(i[0],d,f),p=Qe(i[1],g,m);if(o&&t&&s){const x=30*s;_+=-x*Math.log(1+Math.max(0,d-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-f)/x),p+=-x*Math.log(1+Math.max(0,g-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-m)/x)}return[_,p]}}function yx(n){return n}function Uc(n,e,t,i){const s=De(e)/t[0],r=At(e)/t[1];return i?Math.min(n,Math.max(s,r)):Math.min(n,Math.min(s,r))}function jc(n,e,t){let i=Math.min(n,e);const s=50;return i*=Math.log(1+s*Math.max(0,n/e-1))/s+1,t&&(i=Math.max(i,t),i/=Math.log(1+s*Math.max(0,t/n-1))/s+1),Qe(i,t/2,e*2)}function Ex(n,e,t,i){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=n[0],c=n[n.length-1],u=t?Uc(l,t,o,i):l;if(a)return e?jc(s,u,c):Qe(s,c,u);const h=Math.min(u,s),d=Math.floor(Lc(n,h,r));return n[d]>u&&d<n.length-1?n[d+1]:n[d]}}}function xx(n,e,t,i,s,r){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=s?Uc(e,s,l,r):e;if(c)return i?jc(o,u,t):Qe(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(n)-h),f=-a*(.5-h)+.5,g=Math.min(u,o),m=Math.floor(Math.log(e/g)/Math.log(n)+f),_=Math.max(d,m),p=e/Math.pow(n,_);return Qe(p,t,u)}}}function Gh(n,e,t,i,s){return t=t!==void 0?t:!0,function(r,o,a,l){if(r!==void 0){const c=i?Uc(n,i,a,s):n;return!t||!l?Qe(r,e,c):jc(r,c,e)}}}function Yc(n){if(n!==void 0)return 0}function Wh(n){if(n!==void 0)return n}function vx(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function wx(n){return n=n||Co(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=n?0:e}}function Mg(n){return Math.pow(n,3)}function Ps(n){return 1-Mg(1-n)}function Cx(n){return 3*n*n-2*n*n*n}function Tx(n){return n}function Ii(n,e,t,i,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],c=n[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function Ag(n,e,t,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],u=r[1];let h=0;for(let d=e;d<t;d+=i){const f=n[d]-c,g=n[d+1]-u;o[h++]=c+f*a-g*l,o[h++]=u+f*l+g*a;for(let m=d+2;m<d+i;++m)o[h++]=n[m]}return o&&o.length!=h&&(o.length=h),o}function Rx(n,e,t,i,s,r,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=i){const d=n[h]-l,f=n[h+1]-c;a[u++]=l+s*d,a[u++]=c+r*f;for(let g=h+2;g<h+i;++g)a[u++]=n[g]}return a&&a.length!=u&&(a.length=u),a}function Sx(n,e,t,i,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+s,o[a++]=n[l+1]+r;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}const zh=qt();class Ix extends tn{constructor(){super(),this.extent_=Nt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=EE(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ie()}closestPointXY(e,t,i,s){return ie()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ie()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ar(t),this.extentRevision_=this.getRevision()}return kE(this.extent_,e)}rotate(e,t){ie()}scale(e,t,i){ie()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ie()}getType(){return ie()}applyTransform(e){ie()}intersectsExtent(e){return ie()}translate(e,t){ie()}transform(e,t){const i=tt(e),s=i.getUnits()=="tile-pixels"?function(r,o,a){const l=i.getExtent(),c=i.getWorldExtent(),u=At(c)/At(l);return Qt(zh,c[0],c[3],u,-u,0,0,0),Ii(r,0,r.length,a,zh,o),Wo(i,t)(r,o,a)}:Wo(i,t);return this.applyTransform(s),this}}const Lg=Ix;class bx extends Lg{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return _g(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ie()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Vh(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ie()}setLayout(e,t,i){let s;if(e)s=Vh(e);else{for(let r=0;r<i;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=Ox(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Ag(i,0,i.length,s,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Ai(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Rx(s,0,s.length,r,e,t,i,s),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Sx(i,0,i.length,s,e,t,i),this.changed()}}}function Ox(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Vh(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function Mx(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return Ii(i,0,i.length,s,e,t)}const ki=bx;function Uh(n,e,t,i,s,r,o){const a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((s-a)*c+(r-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<i;++f)o[f]=bt(n[e+f],n[t+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=n[h+d];o.length=i}function Bc(n,e,t,i,s){let r=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],c=Ri(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function Xc(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Bc(n,e,a,i,s),e=a}return s}function Ax(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Xc(n,e,a,i,s),e=a[a.length-1]}return s}function Zc(n,e,t,i,s,r,o,a,l,c,u){if(e==t)return c;let h,d;if(s===0){if(d=Ri(o,a,n[e],n[e+1]),d<c){for(h=0;h<i;++h)l[h]=n[e+h];return l.length=i,d}return c}u=u||[NaN,NaN];let f=e+i;for(;f<t;)if(Uh(n,f-i,f,i,o,a,u),d=Ri(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(r&&(Uh(n,t-i,e,i,o,a,u),d=Ri(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function $c(n,e,t,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=Zc(n,e,f,i,s,r,o,a,l,c,u),e=f}return c}function Lx(n,e,t,i,s,r,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=$c(n,e,f,i,s,r,o,a,l,c,u),e=f[f.length-1]}return c}function Px(n,e,t,i){for(let s=0,r=t.length;s<r;++s)n[e++]=t[s];return e}function Ra(n,e,t,i){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function Hc(n,e,t,i,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Ra(n,e,t[o],i);s[r++]=l,e=l}return s.length=r,s}function Fx(n,e,t,i,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Hc(n,e,t[o],i,s[r]);l.length===0&&(l[0]=e),s[r++]=l,e=l[l.length-1]}return s.length=r,s}function Kc(n,e,t,i,s,r,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)r[o++]=n[e],r[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-i];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const g=n[d],m=n[d+1],_=n[h],p=n[h+1];for(let x=d+i;x<h;x+=i){const w=n[x],v=n[x+1],T=zE(w,v,g,m,_,p);T>f&&(u=x,f=T)}f>s&&(l[(u-e)/i]=1,d+i<u&&c.push(d,u),u+i<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(r[o++]=n[e+h*i],r[o++]=n[e+h*i+1]);return o}function Dx(n,e,t,i,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=Kc(n,e,u,i,s,r,o),a.push(o),e=u}return o}function gi(n,e){return e*Math.round(n/e)}function kx(n,e,t,i,s,r,o){if(e==t)return o;let a=gi(n[e],s),l=gi(n[e+1],s);e+=i,r[o++]=a,r[o++]=l;let c,u;do if(c=gi(n[e],s),u=gi(n[e+1],s),e+=i,e==t)return r[o++]=c,r[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=gi(n[e],s),d=gi(n[e+1],s);if(e+=i,h==c&&d==u)continue;const f=c-a,g=u-l,m=h-a,_=d-l;if(f*_==g*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(g<0&&_<g||g==_||g>0&&_>g)){c=h,u=d;continue}r[o++]=c,r[o++]=u,a=c,l=u,c=h,u=d}return r[o++]=c,r[o++]=u,o}function Pg(n,e,t,i,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=kx(n,e,u,i,s,r,o),a.push(o),e=u}return o}function Nx(n,e,t,i,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],h=[];o=Pg(n,e,u,i,s,r,o,h),a.push(h),e=u[u.length-1]}return o}function $n(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<t;o+=i)s[r++]=n.slice(o,o+i);return s.length=r,s}function yr(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=$n(n,e,l,i,s[r]),e=l}return s.length=r,s}function Vl(n,e,t,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=l.length===1&&l[0]===e?[]:yr(n,e,l,i,s[r]),e=l[l.length-1]}return s.length=r,s}function Fg(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];s+=o*a-r*l,r=a,o=l}return s/2}function Dg(n,e,t,i){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=Fg(n,e,a,i),e=a}return s}function Gx(n,e,t,i){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=Dg(n,e,a,i),e=a[a.length-1]}return s}class zo extends ki{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new zo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,s){return s<Fi(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Zc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,s))}getArea(){return Fg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return $n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new zo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ra(this.flatCoordinates,0,e,this.stride),this.changed()}}const jh=zo;class qc extends ki{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new qc(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const r=this.flatCoordinates,o=Ri(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return PE(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return kc(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Px(this.flatCoordinates,0,e,this.stride),this.changed()}}const Ts=qc;function Wx(n,e,t,i,s){return!Eg(s,function(o){return!yi(n,e,t,i,o[0],o[1])})}function yi(n,e,t,i,s,r){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],u=n[e+1];l<=r?u>r&&(c-a)*(r-l)-(s-a)*(u-l)>0&&o++:u<=r&&(c-a)*(r-l)-(s-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Jc(n,e,t,i,s,r){if(t.length===0||!yi(n,e,t[0],i,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(yi(n,t[o-1],t[o],i,s,r))return!1;return!0}function zx(n,e,t,i,s,r){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(Jc(n,e,l,i,s,r))return!0;e=l[l.length-1]}return!1}function kg(n,e,t,i,s,r,o){let a,l,c,u,h,d,f;const g=s[r+1],m=[];for(let x=0,w=t.length;x<w;++x){const v=t[x];for(u=n[v-i],d=n[v-i+1],a=e;a<v;a+=i)h=n[a],f=n[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(h-u)+u,m.push(c)),u=h,d=f}let _=NaN,p=-1/0;for(m.sort(ei),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const x=Math.abs(h-u);x>p&&(c=(u+h)/2,Jc(n,e,t,i,c,g)&&(_=c,p=x)),u=h}return isNaN(_)&&(_=s[r]),o?(o.push(_,g,p),o):[_,g,p]}function Vx(n,e,t,i,s){let r=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];r=kg(n,e,l,i,s,2*o,r),e=l[l.length-1]}return r}function Ng(n,e,t,i,s){let r;for(e+=i;e<t;e+=i)if(r=s(n.slice(e-i,e),n.slice(e,e+i)),r)return r;return!1}function Sa(n,e,t,i,s){const r=yg(Nt(),n,e,t,i);return _t(s,r)?Zn(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Ng(n,e,t,i,function(o,a){return GE(s,o,a)}):!1}function Ux(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){if(Sa(n,e,t[r],i,s))return!0;e=t[r]}return!1}function Gg(n,e,t,i,s){return!!(Sa(n,e,t,i,s)||yi(n,e,t,i,s[0],s[1])||yi(n,e,t,i,s[0],s[3])||yi(n,e,t,i,s[2],s[1])||yi(n,e,t,i,s[2],s[3]))}function Wg(n,e,t,i,s){if(!Gg(n,e,t[0],i,s))return!1;if(t.length===1)return!0;for(let r=1,o=t.length;r<o;++r)if(Wx(n,t[r-1],t[r],i,s)&&!Sa(n,t[r-1],t[r],i,s))return!1;return!0}function jx(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(Wg(n,e,a,i,s))return!0;e=a[a.length-1]}return!1}function Yx(n,e,t,i){for(;e<t-i;){for(let s=0;s<i;++s){const r=n[e+s];n[e+s]=n[t-i+s],n[t-i+s]=r}e+=i,t-=i}}function zg(n,e,t,i){let s=0,r=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Vg(n,e,t,i,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=zg(n,e,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function Bx(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];if(!Vg(n,e,a,i,s))return!1;a.length&&(e=a[a.length-1])}return!0}function Ul(n,e,t,i,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=zg(n,e,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&Yx(n,e,a,i),e=a}return e}function Yh(n,e,t,i,s){for(let r=0,o=t.length;r<o;++r)e=Ul(n,e,t[r],i,s);return e}class Er extends ki{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Rn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Er(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<Fi(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$c(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return Jc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Dg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ul(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,yr(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ai(this.getExtent());this.flatInteriorPoint_=kg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ts(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new jh(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=new jh(t.slice(r,l),e);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Vg(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ul(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Pg(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Er(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Wg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Hc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Vo=Er;function jl(n){if(Ls(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],s=n[3],r=[e,t,e,s,i,s,i,t,e,t];return new Er(r,"XY",[r.length])}const Ka=0;class Xx extends tn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=zc(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&dx(),e.center&&(e.center=yn(e.center,this.projection_)),e.extent&&(e.extent=wn(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Gt)delete t[a];this.setProperties(t,!0);const i=$x(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=Zx(e),r=i.constraint,o=Hx(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=yn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=yn(s.anchor,this.getProjection())),t[i]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===t){i&&io(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<t;++s){const u=arguments[s],h={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||Cx,callback:i};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=Si(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}Kx(h)?h.complete=!0:r+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Je.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Je.ANIMATING]>0}getInteracting(){return this.hints_[Je.INTERACTING]>0}cancelAnimations(){this.setHint(Je.ANIMATING,-this.hints_[Je.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const s=this.animations_[t];if(s[0].callback&&io(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=d+h*(g-d),p=f+h*(m-f);this.targetCenter_=[_,p]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?Si(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Je.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&io(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-t[0],s[1]-t[1]],Gc(i,e-this.getRotation()),ox(i,t)),i}calculateCenterZoom(e,t){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],s=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&zl(e,this.getProjection())}getCenterInternal(){return this.get(Gt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Og(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ve(t,"The view center is not defined");const i=this.getResolution();ve(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return ve(s!==void 0,"The view rotation is not defined"),kl(t,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Gt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(wn(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=De(e)/t[0],s=At(e)/t[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(t/i)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(Gt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/t;return function(o){return Math.log(i/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=qa(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,i)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,s;if(this.resolutions_){const r=Lc(this.resolutions_,e,1);t=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Qe(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Qe(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ve(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ve(!Ls(e),"Cannot fit empty extent provided as `geometry`");const s=wn(e,this.getProjection());i=jl(s)}else if(e.getType()==="Circle"){const s=wn(e.getExtent(),this.getProjection());i=jl(s),i.rotate(this.getRotation(),Ai(s))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=r.length;h<d;h+=o){const f=r[h]*i-r[h+1]*s,g=r[h]*s+r[h+1]*i;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=Ai(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*h-d[1]*u,g=d[1]*h+d[0]*u,m=this.getConstrainedCenter([f,g],l),_=t.callback?t.callback:vs;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),io(_,!0))}centerOn(e,t,i){this.centerOnInternal(yn(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(qa(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=qa(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,i);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=zl(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&yn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=yn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&yn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Gt.ROTATION)!==s&&this.set(Gt.ROTATION,s),this.get(Gt.RESOLUTION)!==o&&(this.set(Gt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Gt.CENTER)||!ko(this.get(Gt.CENTER),a))&&this.set(Gt.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!ko(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:Ps,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Je.INTERACTING,1)}endInteraction(e,t,i){i=i&&yn(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Je.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function io(n,e){setTimeout(function(){n(e)},0)}function Zx(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Nh(n.extent,n.constrainOnlyCenter,t)}const e=zc(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Nh(t,!1,!1)}return yx}function $x(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:Ka,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,h=n.showFullExtent!==void 0?n.showFullExtent:!1,d=zc(n.projection,"EPSG:3857"),f=d.getExtent();let g=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&d.isGlobal()&&(g=!1,m=f),n.resolutions!==void 0){const _=n.resolutions;t=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],n.constrainResolution?e=Ex(_,u,!g&&m,h):e=Gh(t,i,u,!g&&m,h)}else{const p=(f?Math.max(De(f),At(f)):360*Cs.degrees/d.getMetersPerUnit())/Nc/Math.pow(2,Ka),x=p/Math.pow(2,28-Ka);t=n.maxResolution,t!==void 0?o=0:t=p/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=p/Math.pow(l,a):i=x),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=xx(l,t,i,u,!g&&m,h):e=Gh(t,i,u,!g&&m,h)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function Hx(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?wx():t===!1?Wh:typeof t=="number"?vx(t):Wh}return Yc}function Kx(n){return!(n.sourceCenter&&n.targetCenter&&!ko(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function qa(n,e,t,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=n[0]*r-n[1]*o,l=n[1]*r+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const c=a*r-l*o,u=l*r+a*o;return[c,u]}const on=Xx;class qx extends Cg{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ae.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ae.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ge(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ee(e,re.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof on?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;t.layerStatesArray?s=t.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return Qc(s,t.viewState)&&(!r||_t(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const s=e instanceof on?e.getViewStateAndExtent():e;let r=t(s);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Ae.MAP,e)}getMapInternal(){return this.get(Ae.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ge(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ge(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ee(e,hn.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);ve(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=Ee(this,re.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Ae.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Qc(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const Ia=qx;class Jx extends Ac{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ie()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Qt(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),xa(s,i)}forEachFeatureAtCoordinate(e,t,i,s,r,o,a,l){let c;const u=t.viewState;function h(v,T,R,M){return r.call(o,T,v?R:null,M)}const d=u.projection,f=Rg(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const v=d.getExtent(),T=De(v);g.push([-T,0],[T,0])}const m=t.layerStatesArray,_=m.length,p=[],x=[];for(let v=0;v<g.length;v++)for(let T=_-1;T>=0;--T){const R=m[T],M=R.layer;if(M.hasRenderer()&&Qc(R,u)&&a.call(l,M)){const A=M.getRenderer(),Z=M.getSource();if(A&&Z){const K=Z.getWrapX()?f:e,se=h.bind(null,R.managed);x[0]=K[0]+g[v][0],x[1]=K[1]+g[v][1],c=A.forEachFeatureAtCoordinate(x,t,i,se,p)}if(c)return c}}if(p.length===0)return;const w=1/p.length;return p.forEach((v,T)=>v.distanceSq+=T*w),p.sort((v,T)=>v.distanceSq-T.distanceSq),p.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(e,t,i,s,r,o){return this.forEachFeatureAtCoordinate(e,t,i,s,_r,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){ie()}flushDeclutterItems(e){}scheduleExpireIconCache(e){Fo.canExpireCache()&&e.postRenderFunctions.push(Qx)}}function Qx(n,e){Fo.expire()}const ev=Jx;class tv extends An{constructor(e,t,i,s){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=s}}const Ug=tv,so="ol-hidden",nv="ol-selectable",Ni="ol-unselectable",Bh="ol-unsupported",Pr="ol-control",Xh="ol-collapsed",iv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Zh=["style","variant","weight","size","lineHeight","family"],jg=function(n){const e=n.match(iv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=Zh.length;i<s;++i){const r=e[i+1];r!==void 0&&(t[Zh[i]]=r)}return t.families=t.family.split(/,\s?/),t};function yt(n,e,t,i){let s;return t&&t.length?s=t.shift():Pc?s=new OffscreenCanvas(n||300,e||300):s=document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("2d",i)}function ba(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function sv(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function rv(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Uo(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function jo(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Yg(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function ov(n,e){const t=n.childNodes;for(let i=0;;++i){const s=t[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){n.appendChild(r);continue}if(!r){n.removeChild(s),--i;continue}n.insertBefore(r,s)}}}const Bg="10px sans-serif",wt="#000",Rs="round",Sn=[],In=0,Ss="round",xr=10,vr="#000",wr="center",Yo="middle",Ei=[0,0,0,0],Cr=1,En=new tn;let qi=null,Yl;const Bl={},av=function(){const e="32px ",t=["monospace","serif"],i=t.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(c,u,h){let d=!0;for(let f=0;f<i;++f){const g=t[f];if(o=Bo(c+" "+u+" "+e+g,s),h!=g){const m=Bo(c+" "+u+" "+e+h+","+g,s);d=d&&m!=o}}return!!d}function l(){let c=!0;const u=En.getKeys();for(let h=0,d=u.length;h<d;++h){const f=u[h];En.get(f)<100&&(a.apply(this,f.split(`
`))?(br(Bl),qi=null,Yl=void 0,En.set(f,100)):(En.set(f,En.get(f)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const u=jg(c);if(!u)return;const h=u.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],m=u.style+`
`+u.weight+`
`+g;En.get(m)===void 0&&(En.set(m,100,!0),a(u.style,u.weight,g)||(En.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),lv=function(){let n;return function(e){let t=Bl[e];if(t==null){if(Pc){const i=jg(e),s=Xg(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Bl[e]=t}return t}}();function Xg(n,e){return qi||(qi=yt(1,1)),n!=Yl&&(qi.font=n,Yl=qi.font),qi.measureText(e)}function Bo(n,e){return Xg(n,e).width}function $h(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((s,r)=>Math.max(s,Bo(n,r)),0);return t[e]=i,i}function cv(n,e){const t=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const d=e[c+1]||n.font,f=Bo(d,h);t.push(f),o+=f;const g=lv(d);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:t,heights:i,lineWidths:s}}function uv(n,e,t,i,s,r,o,a,l,c,u){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(u[0],u[1]),hv(i,n)):u[0]<0||u[1]<0?(n.translate(l,c),n.scale(u[0],u[1]),n.drawImage(i,s,r,o,a,0,0,o,a)):n.drawImage(i,s,r,o,a,l,c,o*u[0],a*u[1]),n.restore()}function hv(n,e){const t=n.contextInstructions;for(let i=0,s=t.length;i<s;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class dv extends ev{constructor(e){super(e),this.fontChangeListenerKey_=Ee(En,xs.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ni+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new Ug(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){Ge(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(hn.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!Qc(l,i)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(e,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in c&&s.push(c))}this.flushDeclutterItems(e),ov(this.element_,this.children_),this.dispatchRenderEvent(hn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let i=t.length-1;i>=0;--i)t[i].renderDeclutter(e);t.length=0}}const fv=dv;class jn extends An{constructor(e,t){super(e),this.layer=t}}const Ja={LAYERS:"layers"};class eu extends Cg{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ja.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new cn(i.slice(),{unique:!0}):ve(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new cn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ge),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ee(e,vt.ADD,this.handleLayersAdd_,this),Ee(e,vt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ge);br(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const r=t[i];this.registerLayerListeners_(r),this.dispatchEvent(new jn("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[Ee(e,xs.PROPERTYCHANGE,this.handleLayerChange_,this),Ee(e,re.CHANGE,this.handleLayerChange_,this)];e instanceof eu&&t.push(Ee(e,"addlayer",this.handleLayerGroupAdd_,this),Ee(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ie(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new jn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new jn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new jn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ie(t);this.listenerKeys_[i].forEach(Ge),delete this.listenerKeys_[i],this.dispatchEvent(new jn("removelayer",t)),this.changed()}getLayers(){return this.get(Ja.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new jn("removelayer",i[s]))}this.set(Ja.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=cs(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}const Oa=eu;class gv extends An{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}const Ji=gv;class mv extends Ji{constructor(e,t,i,s,r,o){super(e,t,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const zn=mv,Ze={SINGLECLICK:"singleclick",CLICK:re.CLICK,DBLCLICK:re.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Xl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class _v extends Or{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ee(i,Xl.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ee(i,Xl.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_,gg?{passive:!1}:!1)}emulateClick_(e){let t=new zn(Ze.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new zn(Ze.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new zn(Ze.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ze.POINTERUP||t.type==Ze.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Ze.POINTERDOWN||t.type==Ze.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new zn(Ze.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ge),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new zn(Ze.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ee(i,Ze.POINTERMOVE,this.handlePointerMove_,this),Ee(i,Ze.POINTERUP,this.handlePointerUp_,this),Ee(this.element_,Ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ee(this.element_.getRootNode(),Ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new zn(Ze.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new zn(Ze.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ge(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ge(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ge),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const pv=_v,vn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},nt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Xo=1/0;class yv{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,br(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){ve(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Xo?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,r=t[e],o=i[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<s&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=r,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,r=i[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>o)i[t]=i[a],s[t]=s[a],t=a;else break}i[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==Xo?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,t[s++]=o);t.length=s,i.length=s,this.heapify_()}}const Ev=yv,Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class xv extends Ev{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(re.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Q.LOADED||i===Q.ERROR||i===Q.EMPTY){i!==Q.ERROR&&t.removeEventListener(re.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,s,r,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===Q.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}const vv=xv;function wv(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Xo;const r=n.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Cv extends tn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){jo(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&jo(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Ge(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==vs&&this.listenerKeys.push(Ee(e,vn.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const Fs=Cv;class Tv extends Fs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Ni+" "+Pr+(this.collapsed_&&this.collapsible_?" "+Xh:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ii(t,this.renderedAttributions_)){Yg(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Xh),this.collapsed_?Uo(this.collapseLabel_,this.label_):Uo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const Rv=Tv;class Sv extends Fs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Ni+" "+Pr,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(so)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Ps}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(so);!r&&i===0?this.element.classList.add(so):r&&i!==0&&this.element.classList.remove(so)}this.label_.style.transform=s}this.rotation_=i}}const Iv=Sv;class bv extends Fs{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(re.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(re.CLICK,this.handleClick_.bind(this,-i),!1);const d=t+" "+Ni+" "+Pr,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Ps})):i.setZoom(r)}}}const Ov=bv;function Zg(n){n=n||{};const e=new cn;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Ov(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Iv(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Rv(n.attributionOptions)),e}const Hh={ACTIVE:"active"};class Mv extends tn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Hh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Hh.ACTIVE,e)}setMap(e){this.map_=e}}function Av(n,e,t){const i=n.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Tx,center:n.getConstrainedCenter(s)})}}function tu(n,e,t,i){const s=n.getZoom();if(s===void 0)return;const r=n.getConstrainedZoom(s+e),o=n.getResolutionForZoom(r);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:Ps})}const Fr=Mv;class Lv extends Fr{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ze.DBLCLICK){const i=e.originalEvent,s=e.map,r=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();tu(a,o,r,this.duration_),i.preventDefault(),t=!0}return!t}}const Pv=Lv;class Fv extends Fr{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ze.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ze.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ze.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ze.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function nu(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return{clientX:t/e,clientY:i/e}}const Dr=Fv;function Zl(n){const e=arguments;return function(t){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](t),!!i);++s);return i}}const Dv=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},kv=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},$g=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?kv(n):!0},Nv=_r,Hg=function(n){const e=n.originalEvent;return e.button==0&&!(bE&&hg&&e.ctrlKey)},Kg=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Gv=function(n){const e=n.originalEvent;return hg?e.metaKey:e.ctrlKey},Wv=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},qg=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Qa=function(n){const e=n.originalEvent;return ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},zv=function(n){const e=n.originalEvent;return ve(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Vv extends Dr{constructor(e){super({stopDown:ya}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Zl(Kg,zv);this.condition_=e.onFocusOnly?Zl($g,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,s=t.getEventPixel(nu(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();ax(r,a.getResolution()),Gc(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Ps})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const Uv=Vv;class jv extends Dr{constructor(e){e=e||{},super({stopDown:ya}),this.condition_=e.condition?e.condition:Dv,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Qa(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Yc)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Qa(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Qa(e)&&Hg(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const Yv=jv;class Bv extends Ac{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Vo([s])}getGeometry(){return this.geometry_}}const Xv=Bv,ro={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class el extends An{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class Zv extends Dr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Xv(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Hg,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],r=i[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new el(ro.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new el(t?ro.BOXEND:ro.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new el(ro.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}const $v=Zv;class Hv extends $v{constructor(e){e=e||{};const t=e.condition?e.condition:Wv;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Ps})}}const Kv=Hv,ci={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class qv extends Fr{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Kg(t)&&qg(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==ci.DOWN||s==ci.LEFT||s==ci.RIGHT||s==ci.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==ci.DOWN?c=-a:s==ci.LEFT?l=-a:s==ci.RIGHT?l=a:c=a;const u=[l,c];Gc(u,o.getRotation()),Av(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}}const Jv=qv;class Qv extends Fr{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Gv(t)&&qg(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN||e.type==re.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();tu(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const ew=Qv;class tw{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const nw=tw;class iw extends Fr{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Nv;this.condition_=e.onFocusOnly?Zl($g,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==re.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==re.WHEEL&&(r=s.deltaY,SE&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=dg),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Qe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),tu(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const sw=iw;class rw extends Dr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ya),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==Yc&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(nu(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const ow=rw;class aw extends Dr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ya),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(nu(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const lw=aw;function cw(n){n=n||{};const e=new cn,t=new nw(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new Yv),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new Pv({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new Uv({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new ow),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new lw({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new Jv),e.push(new ew({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new sw({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new Kv({duration:n.zoomDuration})),e}function Kh(n){return n[0]>0&&n[1]>0}function uw(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Ot(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function Jg(n){if(n instanceof Ia){n.setMapInternal(null);return}n instanceof Oa&&n.getLayers().forEach(Jg)}function Qg(n,e){if(n instanceof Ia){n.setMapInternal(e);return}if(n instanceof Oa){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)Qg(t[i],e)}}let hw=class extends tn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=dw(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:dg,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=qt(),this.pixelToCoordinateTransform_=qt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Zg(),this.interactions=t.interactions||cw({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new vv(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(nt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(nt.VIEW,this.handleViewChanged_),this.addChangeListener(nt.SIZE,this.handleSizeChanged_),this.addChangeListener(nt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof on)&&e.view.then(function(s){i.setView(new on(s))}),this.controls.addEventListener(vt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(vt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(vt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(vt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(vt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(vt.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Qg(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:_r,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(s){s instanceof Oa?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:_r,r=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(nt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return zl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?$e(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(nt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof cn){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=yn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?$e(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(nt.SIZE)}getView(){return this.get(nt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return wv(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){t=t||e.type;const i=new zn(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Xl.POINTERDOWN||i===re.WHEEL||i===re.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[Je.ANIMATING]||o[Je.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(hn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(hn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ji(vn.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ji(vn.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Ge(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(re.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,jo(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new fv(this)),this.mapBrowserEventHandler_=new pv(this,this.moveTolerance_);for(const r in Ze)this.mapBrowserEventHandler_.addEventListener(Ze[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(re.WHEEL,this.boundHandleBrowserEvent_,gg?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Ee(i,re.KEYDOWN,this.handleBrowserEvent,this),Ee(i,re.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ge(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ge(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ee(e,xs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ee(e,re.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ge),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new jn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ee(e,xs.PROPERTYCHANGE,this.render,this),Ee(e,re.CHANGE,this.render,this),Ee(e,"addlayer",this.handleLayerAdd_,this),Ee(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Jg(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&Kh(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:kl(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Ie(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=kl(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Ls(this.previousExtent_)&&!pr(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Ji(vn.MOVESTART,this,s)),this.previousExtent_=Ar(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Je.ANIMATING]&&!r.viewHints[Je.INTERACTING]&&!pr(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Ji(vn.MOVEEND,this,r)),mg(r.extent,this.previousExtent_))),this.dispatchEvent(new Ji(vn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(vn.LOADSTART)||this.hasListener(vn.LOADEND)||this.hasListener(hn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new jn("removelayer",t)),this.set(nt.LAYERGROUP,e)}setSize(e){this.set(nt.SIZE,e)}setTarget(e){this.set(nt.TARGET,e)}setView(e){if(!e||e instanceof on){this.set(nt.VIEW,e);return}this.set(nt.VIEW,new on);const t=this;e.then(function(i){t.setView(new on(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!Kh(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Ig("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!ii(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}};function dw(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Oa({layers:n.layers});t[nt.LAYERGROUP]=i,t[nt.TARGET]=n.target,t[nt.VIEW]=n.view instanceof on?n.view:new on;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new cn(n.controls.slice()):(ve(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls));let r;n.interactions!==void 0&&(Array.isArray(n.interactions)?r=new cn(n.interactions.slice()):(ve(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new cn(n.overlays.slice()):(ve(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new cn,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}const fw=hw;class iu extends tn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new iu(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ge(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ee(e,re.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?gw(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function gw(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ve(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const $l=iu;class mw{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?tt(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=tt(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return ie()}readFeature(e,t){return ie()}readFeatures(e,t){return ie()}readGeometry(e,t){return ie()}readProjection(e){return ie()}writeFeature(e,t){return ie()}writeFeatures(e,t){return ie()}writeGeometry(e,t){return ie()}}function em(n,e,t){const i=t?tt(t.featureProjection):null,s=t?tt(t.dataProjection):null;let r;if(i&&s&&!pi(i,s)?r=(e?n.clone():n).transform(e?i:s,e?s:i):r=n,e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};r===n&&(r=n.clone()),r.applyTransform(a)}return r}class _w extends mw{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(oo(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(oo(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ie()}readFeaturesFromObject(e,t){return ie()}readGeometry(e,t){return this.readGeometryFromObject(oo(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ie()}readProjection(e){return this.readProjectionFromObject(oo(e))}readProjectionFromObject(e){return ie()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ie()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ie()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ie()}}function oo(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}const pw=_w;function tm(n,e,t,i,s,r,o){let a,l;const c=(t-e)/i;if(c===1)a=e;else if(c===2)a=e,l=s;else if(c!==0){let u=n[e],h=n[e+1],d=0;const f=[0];for(let _=e+i;_<t;_+=i){const p=n[_],x=n[_+1];d+=Math.sqrt((p-u)*(p-u)+(x-h)*(x-h)),f.push(d),u=p,h=x}const g=s*d,m=_E(f,g);m<0?(l=(g-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*i):a=e+m*i}o=o>1?o:2,r=r||new Array(o);for(let u=0;u<o;++u)r[u]=a===void 0?NaN:l===void 0?n[a+u]:bt(n[a+u],n[a+i+u],l);return r}function Hl(n,e,t,i,s,r){if(t==e)return null;let o;if(s<n[e+i-1])return r?(o=n.slice(e,e+i),o[i-1]=s,o):null;if(n[t-1]<s)return r?(o=n.slice(t-i,t),o[i-1]=s,o):null;if(s==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const d=a+l>>1;s<n[(d+1)*i-1]?l=d:a=d+1}const c=n[a*i-1];if(s==c)return n.slice((a-1)*i,(a-1)*i+i);const u=n[(a+1)*i-1],h=(s-c)/(u-c);o=[];for(let d=0;d<i-1;++d)o.push(bt(n[(a-1)*i+d],n[a*i+d],h));return o.push(s),o}function yw(n,e,t,i,s,r,o){if(o)return Hl(n,e,t[t.length-1],i,s,r);let a;if(s<n[i-1])return r?(a=n.slice(0,i),a[i-1]=s,a):null;if(n[n.length-1]<s)return r?(a=n.slice(n.length-i),a[i-1]=s,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(s<n[e+i-1])return null;if(s<=n[u-1])return Hl(n,e,u,i,s,!1);e=u}}return null}function nm(n,e,t,i){let s=n[e],r=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],c=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}class Zo extends ki{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){this.flatCoordinates?Rn(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new Zo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<Fi(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Zc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,s))}forEachSegment(e){return Ng(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Hl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return $n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return nm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Zo(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Sa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ra(this.flatCoordinates,0,e,this.stride),this.changed()}}const $o=Zo;class Ho extends ki{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout()),Rn(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(s,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Rn(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ho(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<Fi(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xc(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$c(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,s))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,yw(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return yr(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new $o(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new $o(e.slice(r,l),i);s.push(c),r=l}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=tm(t,i,l,r,.5);Rn(e,c),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Dx(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new Ho(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return Ux(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Hc(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Ew=Ho;class su extends ki{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Rn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new su(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){if(s<Fi(this.getExtent(),e,t))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const c=Ri(e,t,r[a],r[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)i[u]=r[a+u];i.length=o}}return s}getCoordinates(){return $n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new Ts(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,s=[];for(let r=0,o=e.length;r<o;r+=i){const a=new Ts(e.slice(r,r+i),t);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let s=0,r=t.length;s<r;s+=i){const o=t[s],a=t[s+1];if(kc(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ra(this.flatCoordinates,0,e,this.stride),this.changed()}}const im=su;function xw(n,e,t,i){const s=[];let r=Nt();for(let o=0,a=t.length;o<a;++o){const l=t[o];r=_g(n,e,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}class Ko extends ki{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let s=this.getLayout();const r=e,o=[],a=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];l===0&&(s=u.getLayout());const h=o.length,d=u.getEnds();for(let f=0,g=d.length;f<g;++f)d[f]+=h;Rn(o,u.getFlatCoordinates()),a.push(d)}t=s,e=o,i=a}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Rn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,r=t.length;s<r;++s)t[s]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const i=new Ko(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,s){return s<Fi(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ax(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return zx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Gx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Yh(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Vl(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=xw(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Vx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new im(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Bx(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Yh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Nx(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new Ko(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const r=this.endss_[e-1];t=r[r.length-1]}const i=this.endss_[e].slice(),s=i[i.length-1];if(t!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=t;return new Vo(this.flatCoordinates.slice(t,s),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),c=l[l.length-1];if(r!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=r;const u=new Vo(t.slice(r,c),e,l);s.push(u),r=c}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return jx(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Fx(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const vw=Ko;class qo extends Lg{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ge),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Ee(this.geometries_[e],re.CHANGE,this.changed,this))}clone(){const e=new qo(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,s){if(s<Fi(this.getExtent(),e,t))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(e,t,i,s);return s}containsXY(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(e,t))return!0;return!1}computeExtent(e){Ar(e);const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)pg(e,t[i].getExtent());return e}getGeometries(){return qh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(s=!0)}if(s){const r=new qo(null);return r.setGeometriesArray(t),r}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Ai(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(qh(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,s=t.length;i<s;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function qh(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const ww=qo;class Cw extends pw{constructor(e){e=e||{},super(),this.dataProjection=tt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=tt(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const s=Kl(i.geometry,t),r=new $l;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(s),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(e,t){const i=e;let s=null;if(i.type==="FeatureCollection"){const r=e;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a)s.push(this.readFeatureFromObject(o[a],t))}else s=[this.readFeatureFromObject(e,t)];return s}readGeometryFromObject(e,t){return Kl(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=tt(t.properties.name);else if(t.type==="EPSG")i=tt("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},s=e.getId();if(s!==void 0&&(i.id=s),!e.hasProperties())return i;const r=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=ql(o,t),delete r[e.getGeometryName()]),ws(r)||(i.properties=r),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let s=0,r=e.length;s<r;++s)i.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return ql(e,this.adaptOptions(t))}}function Kl(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Rw(n);break}case"LineString":{t=Sw(n);break}case"Polygon":{t=Mw(n);break}case"MultiPoint":{t=bw(n);break}case"MultiLineString":{t=Iw(n);break}case"MultiPolygon":{t=Ow(n);break}case"GeometryCollection":{t=Tw(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return em(t,!1,e)}function Tw(n,e){const t=n.geometries.map(function(i){return Kl(i,e)});return new ww(t)}function Rw(n){return new Ts(n.coordinates)}function Sw(n){return new $o(n.coordinates)}function Iw(n){return new Ew(n.coordinates)}function bw(n){return new im(n.coordinates)}function Ow(n){return new vw(n.coordinates)}function Mw(n){return new Vo(n.coordinates)}function ql(n,e){n=em(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=kw(n);break}case"LineString":{i=Lw(n);break}case"Polygon":{i=Nw(n,e);break}case"MultiPoint":{i=Fw(n);break}case"MultiLineString":{i=Pw(n);break}case"MultiPolygon":{i=Dw(n,e);break}case"GeometryCollection":{i=Aw(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Aw(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return ql(i,e)})}}function Lw(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Pw(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Fw(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Dw(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function kw(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Nw(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const Gw=Cw;class ru{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new ru({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const ou=ru,ue={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class au{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ot(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new au({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ie()}getImage(e){return ie()}getHitDetectionImage(){return ie()}getPixelRatio(e){return 1}getImageState(){return ie()}getImageSize(){return ie()}getOrigin(){return ie()}getSize(){return ie()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ot(e)}listenImageChange(e){ie()}load(){ie()}unlistenImageChange(e){ie()}}const sm=au;class Ww extends Or{constructor(e,t,i,s){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof s=="function"?ue.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(re.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ue.IDLE&&this.loader){this.state=ue.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;xE(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=ue.LOADED}).catch(i=>{this.state=ue.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function zw(n,e,t){const i=n;let s=!0,r=!1,o=!1;const a=[Lo(i,re.LOAD,function(){o=!0,r||e()})];return i.src&&fg?(r=!0,i.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(Lo(i,re.ERROR,t)),function(){s=!1,a.forEach(Ge)}}function Vw(n,e){return new Promise((t,i)=>{function s(){o(),t(n)}function r(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",s),n.removeEventListener("error",r)}n.addEventListener("load",s),n.addEventListener("error",r),e&&(n.src=e)})}function Uw(n,e){return e&&(n.src=e),fg?new Promise((t,i)=>n.decode().then(()=>t(n),i)):Vw(n)}const jw=Ww;let Bs=null;class Yw extends Or{constructor(e,t,i,s,r){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?ue.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ue.LOADED){Bs||(Bs=yt(1,1,void 0,{willReadFrequently:!0})),Bs.drawImage(this.image_,0,0);try{Bs.getImageData(0,0,1,1),this.tainted_=!1}catch{Bs=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(re.CHANGE)}handleImageError_(){this.imageState_=ue.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ue.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=yt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ue.IDLE){this.image_||this.initializeImage_(),this.imageState_=ue.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Uw(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ue.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=vg(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=i}}function Bw(n,e,t,i,s){let r=e===void 0?void 0:Fo.get(e,t,s);return r||(r=new Yw(n,n instanceof HTMLImageElement?n.src||void 0:e,t,i,s),Fo.set(e,t,s,r)),r}function Jh(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class lu extends sm{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;ve(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Ie(o)),ve(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ve(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ue.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?ue.LOADED:ue.IDLE:l=ue.LOADING:l=ue.LOADED),this.color_=e.color!==void 0?Po(e.color):null,this.iconImage_=Bw(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(Jh(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(Jh(c,u,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new lu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ue.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ue.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(re.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(re.CHANGE,e)}}const Jo=lu;class cu{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new cu({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const uu=cu;function un(n){return Array.isArray(n)?wg(n):n}class hu extends sm{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new hu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,s=yt(i.size*e,i.size*e);this.draw_(i,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ue.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const R=s;s=r,r=R}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),u=s-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=i)return d*t;const f=t/2/d,g=t/2*(u/h),_=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||e==="bevel")return _*2;const p=s*Math.sin(a),x=Math.sqrt(s*s-p*p),w=r-x,T=Math.sqrt(p*p+w*w)/p;if(T<=i){const R=T*t/2-r-s;return 2*Math.max(_,R)}return _*2}createRenderOptions(){let e=Rs,t=Ss,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=vr),o=un(o),a=this.stroke_.getWidth(),a===void 0&&(a=Cr),s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Ss),e=this.stroke_.getLineCap(),e===void 0&&(e=Rs),i=this.stroke_.getMiterLimit(),i===void 0&&(i=xr));const l=this.calculateLineJoinSize_(t,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=wt),t.fillStyle=un(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if(typeof t=="string"&&(t=Po(t)),t===null?i=1:Array.isArray(t)&&(i=t.length===4?t[3]:1),i===0){const s=yt(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,c=a%2===0?i:s;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=wt,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const rm=hu;class du extends rm{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new du({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const om=du;class Ma{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Qh,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ma({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Qh,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Xw(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ve(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let tl=null;function Zw(n,e){if(!tl){const t=new ou({color:"rgba(255,255,255,0.4)"}),i=new uu({color:"#3399CC",width:1.25});tl=[new Ma({image:new om({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return tl}function Qh(n){return n.getGeometry()}const bi=Ma,$w="#333";class fu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Ot(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ou({color:$w}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new fu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ot(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Hw=fu,ao={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Kw extends Ia{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(ao.PRELOAD)}setPreload(e){this.set(ao.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ao.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ao.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const qw=Kw;class Jw extends ug{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return ie()}getData(e){return null}prepareFrame(e){return ie()}renderFrame(e,t){return ie()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ue.LOADED||t.getState()===ue.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ue.LOADED&&t!=ue.ERROR&&e.addEventListener(re.CHANGE,this.boundHandleImageChange_),t==ue.IDLE&&(e.load(),t=e.getState()),t==ue.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Qw=Jw,ed=[];let Qi=null;function e1(){Qi=yt(1,1,void 0,{willReadFrequently:!0})}class t1 extends Qw{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=qt(),this.pixelTransform=qt(),this.inversePixelTransform=qt(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){Qi||e1(),Qi.clearRect(0,0,1,1);let s;try{Qi.drawImage(e,t,i,1,1,0,0,1,1),s=Qi.getImageData(0,0,1,1).data}catch{return Qi=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&ii(Po(e.style.backgroundColor),Po(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=yt();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const s=Di(i),r=Ca(i),o=wa(i),a=va(i);$e(t.coordinateToPixelTransform,s),$e(t.coordinateToPixelTransform,r),$e(t.coordinateToPixelTransform,o),$e(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;$e(l,s),$e(l,r),$e(l,o),$e(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){const r=new Ug(e,this.inversePixelTransform,i,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(hn.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(hn.POSTRENDER,e,t)}getRenderTransform(e,t,i,s,r,o,a){const l=r/2,c=o/2,u=s/t,h=-u,d=-e[0]+a,f=-e[1];return Qt(this.tempTransform,l,c,u,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const gu=t1;class n1 extends Or{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(re.CHANGE)}release(){this.state===Q.ERROR&&this.setState(Q.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==Q.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==Q.LOADED){e.interimTile=null;break}else e.getState()==Q.LOADING?t=e:e.getState()==Q.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Q.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ie()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=t-i+1e3/60;return s>=this.transition_?1:Mg(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const am=n1;class i1 extends am{constructor(e,t,i,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Q.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Q.ERROR,this.unlistenImage_(),this.image_=s1(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Q.LOADED:this.state=Q.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Q.ERROR&&(this.state=Q.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Q.IDLE&&(this.state=Q.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=zw(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function s1(){const n=yt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const lm=i1,r1=.5,o1=10,td=.25;class a1{constructor(e,t,i,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Wo(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const w=x[0]+"/"+x[1];return a[w]||(a[w]=l(x)),a[w]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&De(s)>=De(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?De(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?De(this.targetProj_.getExtent()):null;const c=Di(i),u=Ca(i),h=wa(i),d=va(i),f=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(h),_=this.transformInv_(d),p=o1+(o?Math.max(0,Math.ceil(Math.log2(Dl(i)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,d,f,g,m,_,p),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(w,v,T){x=Math.min(x,w.source[0][0],w.source[1][0],w.source[2][0])}),this.triangles_.forEach(w=>{if(Math.max(w.source[0][0],w.source[1][0],w.source[2][0])-x>this.sourceWorldWidth_/2){const v=[[w.source[0][0],w.source[0][1]],[w.source[1][0],w.source[1][1]],[w.source[2][0],w.source[2][1]]];v[0][0]-x>this.sourceWorldWidth_/2&&(v[0][0]-=this.sourceWorldWidth_),v[1][0]-x>this.sourceWorldWidth_/2&&(v[1][0]-=this.sourceWorldWidth_),v[2][0]-x>this.sourceWorldWidth_/2&&(v[2][0]-=this.sourceWorldWidth_);const T=Math.min(v[0][0],v[1][0],v[2][0]);Math.max(v[0][0],v[1][0],v[2][0])-T<this.sourceWorldWidth_/2&&(w.source=v)}})}a={}}addTriangle_(e,t,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,i]})}addQuad_(e,t,i,s,r,o,a,l,c){const u=Ih([r,o,a,l]),h=this.sourceWorldWidth_?De(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=Ih([e,t,i,s]);g=De(_)/this.targetWorldWidth_>td||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>td||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!_t(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!g){const _=[(e[0]+i[0])/2,(e[1]+i[1])/2],p=this.transformInv_(_);let x;f?x=(Si(r[0],d)+Si(a[0],d))/2-Si(p[0],d):x=(r[0]+a[0])/2-p[0];const w=(r[1]+a[1])/2-p[1];g=x*x+w*w>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(_),x=[(s[0]+e[0])/2,(s[1]+e[1])/2],w=this.transformInv_(x);this.addQuad_(e,t,_,x,r,o,p,w,c-1),this.addQuad_(x,_,i,s,w,p,a,l,c-1)}else{const _=[(e[0]+t[0])/2,(e[1]+t[1])/2],p=this.transformInv_(_),x=[(i[0]+s[0])/2,(i[1]+s[1])/2],w=this.transformInv_(x);this.addQuad_(e,_,x,s,r,p,w,l,c-1),this.addQuad_(_,t,i,x,p,o,a,w,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(e,i,s,r,a,l),m&14||this.addTriangle_(e,i,t,r,a,o),m&&(m&13||this.addTriangle_(t,s,e,o,l,r),m&7||this.addTriangle_(t,s,i,o,l,a))}calculateSourceExtent(){const e=Nt();return this.triangles_.forEach(function(t,i,s){const r=t.source;or(e,r[0]),or(e,r[1]),or(e,r[2])}),e}getTriangles(){return this.triangles_}}const l1=a1;let nl;const hs=[];function nd(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function il(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function c1(){if(nl===void 0){const n=yt(6,6,hs);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",nd(n,4,5,4,0),nd(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;nl=il(e,0)||il(e,4)||il(e,8),ba(n),hs.push(n.canvas)}return nl}function id(n,e,t,i){const s=_x(t,e,n);let r=No(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=n.getMetersPerUnit();a!==void 0&&(r/=a);const l=n.getExtent();if(!l||Mr(l,s)){const c=No(n,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function u1(n,e,t,i){const s=Ai(t);let r=id(n,e,s,i);return(!isFinite(r)||r<=0)&&Eg(t,function(o){return r=id(n,e,o,i),isFinite(r)&&r>0}),r}function h1(n,e,t,i,s,r,o,a,l,c,u,h){const d=yt(Math.round(t*n),Math.round(t*e),hs);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(t,t);function f(v){return Math.round(v*t)/t}d.globalCompositeOperation="lighter";const g=Nt();l.forEach(function(v,T,R){pg(g,v.extent)});const m=De(g),_=At(g),p=yt(Math.round(t*m/i),Math.round(t*_/i),hs);h||(p.imageSmoothingEnabled=!1);const x=t/i;l.forEach(function(v,T,R){const M=v.extent[0]-g[0],A=-(v.extent[3]-g[3]),Z=De(v.extent),K=At(v.extent);v.image.width>0&&v.image.height>0&&p.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,M*x,A*x,Z*x,K*x)});const w=Di(o);return a.getTriangles().forEach(function(v,T,R){const M=v.source,A=v.target;let Z=M[0][0],K=M[0][1],se=M[1][0],ne=M[1][1],ee=M[2][0],Re=M[2][1];const $=f((A[0][0]-w[0])/r),B=f(-(A[0][1]-w[1])/r),F=f((A[1][0]-w[0])/r),j=f(-(A[1][1]-w[1])/r),de=f((A[2][0]-w[0])/r),fe=f(-(A[2][1]-w[1])/r),Me=Z,L=K;Z=0,K=0,se-=Me,ne-=L,ee-=Me,Re-=L;const He=[[se,ne,0,0,F-$],[ee,Re,0,0,de-$],[0,0,se,ne,j-B],[0,0,ee,Re,fe-B]],ge=VE(He);if(ge){if(d.save(),d.beginPath(),c1()||!h){d.moveTo(F,j);const Te=4,ze=$-F,I=B-j;for(let z=0;z<Te;z++)d.lineTo(F+f((z+1)*ze/Te),j+f(z*I/(Te-1))),z!=Te-1&&d.lineTo(F+f((z+1)*ze/Te),j+f((z+1)*I/(Te-1)));d.lineTo(de,fe)}else d.moveTo(F,j),d.lineTo($,B),d.lineTo(de,fe);d.clip(),d.transform(ge[0],ge[2],ge[1],ge[3],$,B),d.translate(g[0]-Me,g[3]-L),d.scale(i/t,-i/t),d.drawImage(p.canvas,0,0),d.restore()}}),ba(p),hs.push(p.canvas),u&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(v,T,R){const M=v.target,A=(M[0][0]-w[0])/r,Z=-(M[0][1]-w[1])/r,K=(M[1][0]-w[0])/r,se=-(M[1][1]-w[1])/r,ne=(M[2][0]-w[0])/r,ee=-(M[2][1]-w[1])/r;d.beginPath(),d.moveTo(K,se),d.lineTo(A,Z),d.lineTo(ne,ee),d.closePath(),d.stroke()}),d.restore()),d.canvas}class d1 extends am{constructor(e,t,i,s,r,o,a,l,c,u,h,d){super(r,Q.IDLE,{interpolate:!!d}),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?cs(f,g):f;if(Dl(_)===0){this.state=Q.EMPTY;return}const p=e.getExtent();p&&(m?m=cs(m,p):m=p);const x=s.getResolution(this.wrappedTileCoord_[0]),w=u1(e,i,_,x);if(!isFinite(w)||w<=0){this.state=Q.EMPTY;return}const v=u!==void 0?u:r1;if(this.triangulation_=new l1(e,i,_,m,w*v,x),this.triangulation_.getTriangles().length===0){this.state=Q.EMPTY;return}this.sourceZ_=t.getZForResolution(w);let T=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(T[1]=Qe(T[1],m[1],m[3]),T[3]=Qe(T[3],m[1],m[3])):T=cs(T,m)),!Dl(T))this.state=Q.EMPTY;else{const R=t.getTileRangeForExtentAndZ(T,this.sourceZ_);for(let M=R.minX;M<=R.maxX;M++)for(let A=R.minY;A<=R.maxY;A++){const Z=c(this.sourceZ_,M,A,a);Z&&this.sourceTiles_.push(Z)}this.sourceTiles_.length===0&&(this.state=Q.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==Q.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=Q.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=h1(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Q.LOADED}this.changed()}load(){if(this.state==Q.IDLE){this.state=Q.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==Q.IDLE||i==Q.LOADING){e++;const s=Ee(t,re.CHANGE,function(r){const o=t.getState();(o==Q.LOADED||o==Q.ERROR||o==Q.EMPTY)&&(Ge(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,s){t.getState()==Q.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ge),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ba(this.canvas_.getContext("2d")),hs.push(this.canvas_),this.canvas_=null),super.release()}}const Jl=d1;class cm{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Yi(n,e,t,i,s){return s!==void 0?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new cm(n,e,t,i)}const um=cm;class f1 extends gu{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Nt(),this.tmpTileRange_=new um(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),s=t.getUseInterimTilesOnError();return i==Q.LOADED||i==Q.EMPTY||i==Q.ERROR&&!s}getTile(e,t,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,i,r,o);return c.getState()==Q.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=$e(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!Mr(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(t.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(s,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof lm||g instanceof Jl)||g instanceof Jl&&g.getState()===Q.EMPTY)return null;if(g.getState()!==Q.LOADED)continue;const m=u.getOrigin(d),_=Ot(u.getTileSize(d)),p=u.getResolution(d),x=Math.floor(h*((s[0]-m[0])/p-f[1]*_[0])),w=Math.floor(h*((m[1]-s[1])/p-f[2]*_[1])),v=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),x+v,w+v)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=e.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(r),g=f.getZForResolution(o,h.zDirection),m=f.getResolution(g);let _=e.extent;const p=e.viewState.resolution,x=h.getTilePixelRatio(c),w=Math.round(De(_)/p*c),v=Math.round(At(_)/p*c),T=i.extent&&wn(i.extent);T&&(_=cs(_,wn(i.extent)));const R=m*w/2/x,M=m*v/2/x,A=[a[0]-R,a[1]-M,a[0]+R,a[1]+M],Z=f.getTileRangeForExtentAndZ(_,g),K={};K[g]={};const se=this.createLoadedTileFinder(h,r,K),ne=this.tmpExtent,ee=this.tmpTileRange_;this.newTiles_=!1;const Re=l?Nl(s.center,p,l,e.size):void 0;for(let He=Z.minX;He<=Z.maxX;++He)for(let ge=Z.minY;ge<=Z.maxY;++ge){if(l&&!f.tileCoordIntersectsViewport([g,He,ge],Re))continue;const Te=this.getTile(g,He,ge,e);if(this.isDrawableTile(Te)){const z=Ie(this);if(Te.getState()==Q.LOADED){K[g][Te.tileCoord.toString()]=Te;let G=Te.inTransition(z);G&&i.opacity!==1&&(Te.endTransition(z),G=!1),!this.newTiles_&&(G||!this.renderedTiles.includes(Te))&&(this.newTiles_=!0)}if(Te.getAlpha(z,e.time)===1)continue}const ze=f.getTileCoordChildTileRange(Te.tileCoord,ee,ne);let I=!1;ze&&(I=se(g+1,ze)),I||f.forEachTileCoordParentTileRange(Te.tileCoord,se,ee,ne)}const $=m/o*c/x;Qt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-w/2,-v/2);const B=Fc(this.pixelTransform);this.useContainer(t,B,this.getBackground(e));const F=this.context,j=F.canvas;xa(this.inversePixelTransform,this.pixelTransform),Qt(this.tempTransform,w/2,v/2,$,$,0,-w/2,-v/2),j.width!=w||j.height!=v?(j.width=w,j.height=v):this.containerReused||F.clearRect(0,0,w,v),T&&this.clipUnrotated(F,e,T),h.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e),this.renderedTiles.length=0;let de=Object.keys(K).map(Number);de.sort(ei);let fe,Me,L;i.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?de=de.reverse():(fe=[],Me=[]);for(let He=de.length-1;He>=0;--He){const ge=de[He],Te=h.getTilePixelSize(ge,c,r),I=f.getResolution(ge)/m,z=Te[0]*I*$,G=Te[1]*I*$,q=f.getTileCoordForCoordAndZ(Di(A),ge),pe=f.getTileCoordExtent(q),y=$e(this.tempTransform,[x*(pe[0]-A[0])/m,x*(A[3]-pe[3])/m]),E=x*h.getGutterForProjection(r),C=K[ge];for(const S in C){const b=C[S],P=b.tileCoord,V=q[1]-P[1],k=Math.round(y[0]-(V-1)*z),W=q[2]-P[2],D=Math.round(y[1]-(W-1)*G),X=Math.round(y[0]-V*z),Y=Math.round(y[1]-W*G),H=k-X,J=D-Y,ae=g===ge,xe=ae&&b.getAlpha(Ie(this),e.time)!==1;let me=!1;if(!xe)if(fe){L=[X,Y,X+H,Y,X+H,Y+J,X,Y+J];for(let ke=0,at=fe.length;ke<at;++ke)if(g!==ge&&ge<Me[ke]){const Ye=fe[ke];_t([X,Y,X+H,Y+J],[Ye[0],Ye[3],Ye[4],Ye[7]])&&(me||(F.save(),me=!0),F.beginPath(),F.moveTo(L[0],L[1]),F.lineTo(L[2],L[3]),F.lineTo(L[4],L[5]),F.lineTo(L[6],L[7]),F.moveTo(Ye[6],Ye[7]),F.lineTo(Ye[4],Ye[5]),F.lineTo(Ye[2],Ye[3]),F.lineTo(Ye[0],Ye[1]),F.clip())}fe.push(L),Me.push(ge)}else F.clearRect(X,Y,H,J);this.drawTileImage(b,e,X,Y,H,J,E,ae),fe&&!xe?(me&&F.restore(),this.renderedTiles.unshift(b)):this.renderedTiles.push(b),this.updateUsedTiles(e.usedTiles,h,b)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!pr(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(e,h,f,c,r,_,g,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(F,e),i.extent&&F.restore(),F.imageSmoothingEnabled=!0,B!==j.style.transform&&(j.style.transform=B),this.container}drawTileImage(e,t,i,s,r,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=Ie(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(l?e.getAlpha(u,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,s,r,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=(function(s,r,o){const a=Ie(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const s=Ie(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,t,i,s,r,o,a,l,c){const u=Ie(t);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=e.tileQueue,f=i.getMinZoom(),g=e.viewState.rotation,m=g?Nl(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let _=0,p,x,w,v,T,R;for(R=f;R<=a;++R)for(x=i.getTileRangeForExtentAndZ(o,R,x),w=i.getResolution(R),v=x.minX;v<=x.maxX;++v)for(T=x.minY;T<=x.maxY;++T)g&&!i.tileCoordIntersectsViewport([R,v,T],m)||(a-R<=l?(++_,p=t.getTile(R,v,T,s,r),p.getState()==Q.IDLE&&(h[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,u,i.getTileCoordCenter(p.tileCoord),w])),c!==void 0&&c(p)):t.useTile(R,v,T,r));t.updateCacheSize(_,r)}}const g1=f1;class m1 extends qw{constructor(e){super(e)}createRenderer(){return new g1(this)}}const _1=m1;function p1(n,e,t,i,s){hm(n,e,t||0,i||n.length-1,s||y1)}function hm(n,e,t,i,s){for(;i>t;){if(i-t>600){var r=i-t+1,o=e-t+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/r+c)),h=Math.min(i,Math.floor(e+(r-o)*l/r+c));hm(n,e,u,h,s)}var d=n[e],f=t,g=i;for(Xs(n,t,e),s(n[i],d)>0&&Xs(n,t,i);f<g;){for(Xs(n,f,g),f++,g--;s(n[f],d)<0;)f++;for(;s(n[g],d)>0;)g--}s(n[t],d)===0?Xs(n,t,g):(g++,Xs(n,g,i)),g<=e&&(t=g+1),e<=g&&(i=g-1)}}function Xs(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function y1(n,e){return n<e?-1:n>e?1:0}let mu=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!co(e,t))return i;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;co(e,l)&&(t.leaf?i.push(a):rl(e,l)?this._all(a,i):r.push(a))}t=r.pop()}return i}collides(e){let t=this.data;if(!co(e,t))return!1;const i=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(co(e,o)){if(t.leaf||rl(e,o))return!0;i.push(r)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=es([]),this}remove(e,t){if(!e)return this;let i=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,c;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),i.leaf){const u=E1(e,i.children,t);if(u!==-1)return i.children.splice(u,1),r.push(i),this._condense(r),this}!c&&!i.leaf&&rl(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,s){const r=i-t+1;let o=this._maxEntries,a;if(r<=o)return a=es(e.slice(t,i+1)),Bi(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=es([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));sd(e,t,i,c,this.compareMinX);for(let u=t;u<=i;u+=c){const h=Math.min(u+c-1,i);sd(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,s-1))}}return Bi(a,this.toBBox),a}_chooseSubtree(e,t,i,s){for(;s.push(t),!(t.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=sl(c),h=w1(e,c)-u;h<o?(o=h,r=u<r?u:r,a=c):h===o&&u<r&&(r=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){const s=i?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),Qs(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const i=e[t],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=es(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Bi(i,this.toBBox),Bi(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=es([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Bi(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let s,r=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=Js(e,0,a,this.toBBox),c=Js(e,a,i,this.toBBox),u=C1(l,c),h=sl(l)+sl(c);u<r?(r=u,s=a,o=h<o?h:o):u===r&&h<o&&(o=h,s=a)}return s||i-t}_chooseSplitAxis(e,t,i){const s=e.leaf?this.compareMinX:x1,r=e.leaf?this.compareMinY:v1,o=this._allDistMargin(e,t,i,s),a=this._allDistMargin(e,t,i,r);o<a&&e.children.sort(s)}_allDistMargin(e,t,i,s){e.children.sort(s);const r=this.toBBox,o=Js(e,0,t,r),a=Js(e,i-t,i,r);let l=lo(o)+lo(a);for(let c=t;c<i-t;c++){const u=e.children[c];Qs(o,e.leaf?r(u):u),l+=lo(o)}for(let c=i-t-1;c>=t;c--){const u=e.children[c];Qs(a,e.leaf?r(u):u),l+=lo(a)}return l}_adjustParentBBoxes(e,t,i){for(let s=i;s>=0;s--)Qs(t[s],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Bi(e[t],this.toBBox)}};function E1(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Bi(n,e){Js(n,0,n.children.length,e,n)}function Js(n,e,t,i,s){s||(s=es(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=n.children[r];Qs(s,n.leaf?i(o):o)}return s}function Qs(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function x1(n,e){return n.minX-e.minX}function v1(n,e){return n.minY-e.minY}function sl(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function lo(n){return n.maxX-n.minX+(n.maxY-n.minY)}function w1(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function C1(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),s=Math.min(n.maxX,e.maxX),r=Math.min(n.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-i)}function rl(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function co(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function es(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sd(n,e,t,i,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;p1(n,o,e,t,s),r.push(e,o,o,t)}}let Ds=0;const ut=1<<Ds++,_e=1<<Ds++,Is=1<<Ds++,_u=1<<Ds++,kr=1<<Ds++,Wt=Math.pow(2,Ds)-1,dm={[ut]:"boolean",[_e]:"number",[Is]:"string",[_u]:"color",[kr]:"number[]"},T1=Object.keys(dm).map(Number).sort(ei);function Qo(n){const e=[];for(const t of T1)R1(n,t)&&e.push(dm[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function R1(n,e){return(n&e)===e}function fm(n,e){return!!(n&e)}class Hn{constructor(e,t){this.type=e,this.value=t}}class S1{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function gm(){return{variables:new Set,properties:new Set}}function Aa(n,e){switch(typeof n){case"boolean":return new Hn(ut,n);case"number":return new Hn(_e,n);case"string":return new Hn(Is,n)}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return A1(n,e);for(const i of n)if(typeof i!="number")throw new Error("Expected an array of numbers");let t=kr;return(n.length===3||n.length===4)&&(t|=_u),new Hn(t,n)}const N={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},I1={[N.Number]:Oe(Ne(1,1/0,Wt),_e),[N.String]:Oe(Ne(1,1/0,Wt),Is),[N.Get]:Oe(b1,Wt),[N.Var]:Oe(O1,Wt),[N.Resolution]:Oe(M1,_e),[N.Any]:Oe(Ne(2,1/0,ut),ut),[N.All]:Oe(Ne(2,1/0,ut),ut),[N.Not]:Oe(Ne(1,1,ut),ut),[N.Equal]:Oe(Ne(2,2,Wt),ut),[N.NotEqual]:Oe(Ne(2,2,Wt),ut),[N.GreaterThan]:Oe(Ne(2,2,Wt),ut),[N.GreaterThanOrEqualTo]:Oe(Ne(2,2,Wt),ut),[N.LessThan]:Oe(Ne(2,2,Wt),ut),[N.LessThanOrEqualTo]:Oe(Ne(2,2,Wt),ut),[N.Multiply]:Oe(Ne(2,1/0,_e),_e),[N.Divide]:Oe(Ne(2,2,_e),_e),[N.Add]:Oe(Ne(2,1/0,_e),_e),[N.Subtract]:Oe(Ne(2,2,_e),_e),[N.Clamp]:Oe(Ne(3,3,_e),_e),[N.Mod]:Oe(Ne(2,2,_e),_e),[N.Pow]:Oe(Ne(2,2,_e),_e),[N.Abs]:Oe(Ne(1,1,_e),_e),[N.Floor]:Oe(Ne(1,1,_e),_e),[N.Ceil]:Oe(Ne(1,1,_e),_e),[N.Round]:Oe(Ne(1,1,_e),_e),[N.Sin]:Oe(Ne(1,1,_e),_e),[N.Cos]:Oe(Ne(1,1,_e),_e),[N.Atan]:Oe(Ne(1,2,_e),_e),[N.Sqrt]:Oe(Ne(1,1,_e),_e),[N.Match]:Oe(Ne(4,1/0,Is|_e),Wt)};function b1(n,e){if(n.length!==2)throw new Error("Expected 1 argument for get operation");const t=Aa(n[1],e);if(!(t instanceof Hn))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");return e.properties.add(t.value),[t]}function O1(n,e){if(n.length!==2)throw new Error("Expected 1 argument for var operation");const t=Aa(n[1],e);if(!(t instanceof Hn))throw new Error("Expected a literal argument for var operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");return e.variables.add(t.value),[t]}function M1(n,e){const t=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function Ne(n,e,t){return function(i,s){const r=i[0],o=i.length-1;if(n===e){if(o!==n){const l=n===1?"":"s";throw new Error(`Expected ${n} argument${l} for operation ${r}, got ${o}`)}}else if(o<n||o>e)throw new Error(`Expected ${n} to ${e} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const c=Aa(i[l+1],s);if(!fm(t,c.type)){const u=Qo(t),h=Qo(c.type);throw new Error(`Unexpected type for argument ${l} of ${r} operation : got ${u} but expected ${h}`)}a[l]=c}return a}}function Oe(n,e){return function(t,i){const s=t[0],r=n(t,i);return new S1(e,s,...r)}}function A1(n,e){const t=n[0],i=I1[t];if(!i)throw new Error(`Unknown operator: ${t}`);return i(n,e)}function mm(){return{variables:{},properties:{},resolution:NaN}}function si(n,e,t){const i=Aa(n,t);if(!fm(e,i.type)){const s=Qo(e),r=Qo(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return Li(i)}function Li(n,e){if(n instanceof Hn)return function(){return n.value};const t=n.operator;switch(t){case N.Number:case N.String:return L1(n);case N.Get:case N.Var:return P1(n);case N.Resolution:return i=>i.resolution;case N.Any:case N.All:case N.Not:return D1(n);case N.Equal:case N.NotEqual:case N.LessThan:case N.LessThanOrEqualTo:case N.GreaterThan:case N.GreaterThanOrEqualTo:return F1(n);case N.Multiply:case N.Divide:case N.Add:case N.Subtract:case N.Clamp:case N.Mod:case N.Pow:case N.Abs:case N.Floor:case N.Ceil:case N.Round:case N.Sin:case N.Cos:case N.Atan:case N.Sqrt:return k1(n);case N.Match:return N1(n);default:throw new Error(`Unsupported operator ${t}`)}}function L1(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Li(n.args[r]);switch(t){case N.Number:case N.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function P1(n,e){const t=n.args[0];if(!(t instanceof Hn))throw new Error("Expected literal name");const i=t.value;if(typeof i!="string")throw new Error("Expected string name");switch(n.operator){case N.Get:return s=>s.properties[i];case N.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function F1(n,e){const t=n.operator,i=Li(n.args[0]),s=Li(n.args[1]);switch(t){case N.Equal:return r=>i(r)===s(r);case N.NotEqual:return r=>i(r)!==s(r);case N.LessThan:return r=>i(r)<s(r);case N.LessThanOrEqualTo:return r=>i(r)<=s(r);case N.GreaterThan:return r=>i(r)>s(r);case N.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${t}`)}}function D1(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Li(n.args[r]);switch(t){case N.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case N.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case N.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${t}`)}}function k1(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Li(n.args[r]);switch(t){case N.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case N.Divide:return r=>s[0](r)/s[1](r);case N.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case N.Subtract:return r=>s[0](r)-s[1](r);case N.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case N.Mod:return r=>s[0](r)%s[1](r);case N.Pow:return r=>Math.pow(s[0](r),s[1](r));case N.Abs:return r=>Math.abs(s[0](r));case N.Floor:return r=>Math.floor(s[0](r));case N.Ceil:return r=>Math.ceil(s[0](r));case N.Round:return r=>Math.round(s[0](r));case N.Sin:return r=>Math.sin(s[0](r));case N.Cos:return r=>Math.cos(s[0](r));case N.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case N.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${t}`)}}function N1(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Li(n.args[s]);return s=>{const r=i[0](s);for(let o=1;o<t;o+=2)if(r===i[o](s))return i[o+1](s);return i[t-1](s)}}function G1(n){return!0}function W1(n){const e=gm(),t=z1(n,e),i=mm();return function(s,r){return i.properties=s.getPropertiesInternal(),i.resolution=r,t(i)}}function rd(n){const e=gm(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=Ql(n[o],e);const s=mm(),r=new Array(t);return function(o,a){s.properties=o.getPropertiesInternal(),s.resolution=a;for(let l=0;l<t;++l)r[l]=i[l](s);return r}}function z1(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s){const r=n[s],o="filter"in r?si(r.filter,ut,e):G1;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Ql(r.style[c],e)}else a=[Ql(r.style,e)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<t;++a){const l=i[a].filter;if(l(s)&&!(n[a].else&&o)){o=!0;for(const c of i[a].styles){const u=c(s);u&&r.push(u)}}}return r}}function Ql(n,e){const t=Tr(n,"",e),i=Rr(n,"",e),s=V1(n,e),r=U1(n,e),o=Ct(n,"z-index",e),a=new bi;return function(l){let c=!0;if(t){const u=t(l);u&&(c=!1),a.setFill(u)}if(i){const u=i(l);u&&(c=!1),a.setStroke(u)}if(s){const u=s(l);u&&(c=!1),a.setText(u)}if(r){const u=r(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Tr(n,e,t){const i=_m(n,e+"fill-color",t);if(!i)return null;const s=new ou;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function Rr(n,e,t){const i=Ct(n,e+"stroke-width",t),s=_m(n,e+"stroke-color",t);if(!i&&!s)return null;const r=Yn(n,e+"stroke-line-cap",t),o=Yn(n,e+"stroke-line-join",t),a=pm(n,e+"stroke-line-dash",t),l=Ct(n,e+"stroke-line-dash-offset",t),c=Ct(n,e+"stroke-miter-limit",t),u=new uu;return function(h){if(s){const d=s(h);if(d==="none")return null;u.setColor(d)}if(i&&u.setWidth(i(h)),r){const d=r(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(d)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function V1(n,e){const t="text-",i=Yn(n,t+"value",e);if(!i)return null;const s=Tr(n,t,e),r=Tr(n,t+"background-",e),o=Rr(n,t,e),a=Rr(n,t+"background-",e),l=Yn(n,t+"font",e),c=Ct(n,t+"max-angle",e),u=Ct(n,t+"offset-x",e),h=Ct(n,t+"offset-y",e),d=Sr(n,t+"overflow",e),f=Yn(n,t+"placement",e),g=Ct(n,t+"repeat",e),m=La(n,t+"scale",e),_=Sr(n,t+"rotate-with-view",e),p=Ct(n,t+"rotation",e),x=Yn(n,t+"align",e),w=Yn(n,t+"justify",e),v=Yn(n,t+"baseline",e),T=pm(n,t+"padding",e),R=new Hw({});return function(M){if(R.setText(i(M)),s&&R.setFill(s(M)),r&&R.setBackgroundFill(r(M)),o&&R.setStroke(o(M)),a&&R.setBackgroundStroke(a(M)),l&&R.setFont(l(M)),c&&R.setMaxAngle(c(M)),u&&R.setOffsetX(u(M)),h&&R.setOffsetY(h(M)),d&&R.setOverflow(d(M)),f){const A=f(M);if(A!=="point"&&A!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(A)}if(g&&R.setRepeat(g(M)),m&&R.setScale(m(M)),_&&R.setRotateWithView(_(M)),p&&R.setRotation(p(M)),x){const A=x(M);if(A!=="left"&&A!=="center"&&A!=="right"&&A!=="end"&&A!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(A)}if(w){const A=w(M);if(A!=="left"&&A!=="right"&&A!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(A)}if(v){const A=v(M);if(A!=="bottom"&&A!=="top"&&A!=="middle"&&A!=="alphabetic"&&A!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(A)}return T&&R.setPadding(T(M)),R}}function U1(n,e){return"icon-src"in n?j1(n,e):"shape-points"in n?Y1(n,e):"circle-radius"in n?B1(n,e):null}function j1(n,e){const t="icon-",i=t+"src",s=ym(n[i],i),r=ea(n,t+"anchor",e),o=La(n,t+"scale",e),a=Ct(n,t+"opacity",e),l=ea(n,t+"displacement",e),c=Ct(n,t+"rotation",e),u=Sr(n,t+"rotate-with-view",e),h=od(n,t+"anchor-origin"),d=ad(n,t+"anchor-x-units"),f=ad(n,t+"anchor-y-units"),g=H1(n,t+"color"),m=Z1(n,t+"cross-origin"),_=$1(n,t+"offset"),p=od(n,t+"offset-origin"),x=is(n,t+"width"),w=is(n,t+"height"),v=X1(n,t+"size"),T=pu(n,t+"declutter"),R=new Jo({src:s,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:m,offset:_,offsetOrigin:p,height:w,width:x,size:v,declutterMode:T});return function(M){return a&&R.setOpacity(a(M)),l&&R.setDisplacement(l(M)),c&&R.setRotation(c(M)),u&&R.setRotateWithView(u(M)),o&&R.setScale(o(M)),r&&R.setAnchor(r(M)),R}}function Y1(n,e){const t="shape-",i=t+"points",s=Em(n[i],i),r=Tr(n,t,e),o=Rr(n,t,e),a=La(n,t+"scale",e),l=ea(n,t+"displacement",e),c=Ct(n,t+"rotation",e),u=Sr(n,t+"rotate-with-view",e),h=is(n,t+"radius"),d=is(n,t+"radius1"),f=is(n,t+"radius2"),g=is(n,t+"angle"),m=pu(n,t+"declutter-mode"),_=new rm({points:s,radius:h,radius1:d,radius2:f,angle:g,declutterMode:m});return function(p){return r&&_.setFill(r(p)),o&&_.setStroke(o(p)),l&&_.setDisplacement(l(p)),c&&_.setRotation(c(p)),u&&_.setRotateWithView(u(p)),a&&_.setScale(a(p)),_}}function B1(n,e){const t="circle-",i=Tr(n,t,e),s=Rr(n,t,e),r=Ct(n,t+"radius",e),o=La(n,t+"scale",e),a=ea(n,t+"displacement",e),l=Ct(n,t+"rotation",e),c=Sr(n,t+"rotate-with-view",e),u=pu(n,t+"declutter-mode"),h=new om({radius:5,declutterMode:u});return function(d){return r&&h.setRadius(r(d)),i&&h.setFill(i(d)),s&&h.setStroke(s(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),c&&h.setRotateWithView(c(d)),o&&h.setScale(o(d)),h}}function Ct(n,e,t){if(!(e in n))return;const i=si(n[e],_e,t);return function(s){return Em(i(s),e)}}function Yn(n,e,t){if(!(e in n))return null;const i=si(n[e],Is,t);return function(s){return ym(i(s),e)}}function Sr(n,e,t){if(!(e in n))return null;const i=si(n[e],ut,t);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${e}`);return r}}function _m(n,e,t){if(!(e in n))return null;const i=si(n[e],_u|Is,t);return function(s){return xm(i(s),e)}}function pm(n,e,t){if(!(e in n))return null;const i=si(n[e],kr,t);return function(s){return Nr(i(s),e)}}function ea(n,e,t){if(!(e in n))return null;const i=si(n[e],kr,t);return function(s){const r=Nr(i(s),e);if(r.length!==2)throw new Error(`Expected two numbers for ${e}`);return r}}function La(n,e,t){if(!(e in n))return null;const i=si(n[e],kr|_e,t);return function(s){return K1(i(s),e)}}function is(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function X1(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Ot(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Z1(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function od(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ad(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function $1(n,e){const t=n[e];if(t!==void 0)return Nr(t,e)}function pu(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function H1(n,e){const t=n[e];if(t!==void 0)return xm(t,e)}function Nr(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function ym(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function Em(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function xm(n,e){if(typeof n=="string")return n;const t=Nr(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function K1(n,e){if(typeof n=="number")return n;const t=Nr(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}const ld={RENDER_ORDER:"renderOrder"};class q1 extends Ia{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ld.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new mu(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(ld.RENDER_ORDER,e)}setStyle(e){this.style_=J1(e),this.styleFunction_=e===null?void 0:Xw(this.style_),this.changed()}}function J1(n){if(n===void 0)return Zw;if(!n)return null;if(typeof n=="function"||n instanceof bi)return n;if(!Array.isArray(n))return rd([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof bi){const s=new Array(e);for(let r=0;r<e;++r){const o=n[r];if(!(o instanceof bi))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in t){const s=new Array(e);for(let r=0;r<e;++r){const o=n[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return W1(s)}return rd(n)}const Q1=q1;class eC extends gu{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,s=e.viewState,r=s.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=cs(l,wn(t.extent,s.projection))),!a[Je.ANIMATING]&&!a[Je.INTERACTING]&&!Ls(l))if(o){const c=s.projection,u=o.getImage(l,r,i,c);u&&(this.loadImage(u)?this.image_=u:u.getState()===ue.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=$e(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!Mr(r,s))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=De(o),c=Math.floor(a.width*((s[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=At(o),h=Math.floor(a.height*((o[3]-s[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,t){const i=this.image_,s=i.getExtent(),r=i.getResolution(),[o,a]=Array.isArray(r)?r:[r,r],l=i.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,d=h.center,f=h.resolution,g=u*o/(f*l),m=u*a/(f*l),_=e.extent,p=h.resolution,x=h.rotation,w=Math.round(De(_)/p*u),v=Math.round(At(_)/p*u);Qt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,x,-w/2,-v/2),xa(this.inversePixelTransform,this.pixelTransform);const T=Fc(this.pixelTransform);this.useContainer(t,T,this.getBackground(e));const R=this.context,M=R.canvas;M.width!=w||M.height!=v?(M.width=w,M.height=v):this.containerReused||R.clearRect(0,0,w,v);let A=!1,Z=!0;if(c.extent){const Re=wn(c.extent,h.projection);Z=_t(Re,e.extent),A=Z&&!Zn(Re,e.extent),A&&this.clipUnrotated(R,e,Re)}const K=i.getImage(),se=Qt(this.tempTransform,w/2,v/2,g,m,0,l*(s[0]-d[0])/o,l*(d[1]-s[3])/a);this.renderedResolution=a*u/l;const ne=K.width*se[0],ee=K.height*se[3];if(this.getLayer().getSource().getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),Z&&ne>=.5&&ee>=.5){const Re=se[4],$=se[5],B=c.opacity;let F;B!==1&&(F=R.globalAlpha,R.globalAlpha=B),R.drawImage(K,0,0,+K.width,+K.height,Re,$,ne,ee),B!==1&&(R.globalAlpha=F)}return this.postRender(R,e),A&&R.restore(),R.imageSmoothingEnabled=!0,T!==M.style.transform&&(M.style.transform=T),this.container}}const tC=eC,Gr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},uo=[Gr.FILL],Kn=[Gr.STROKE],xi=[Gr.BEGIN_PATH],cd=[Gr.CLOSE_PATH],te=Gr;class nC{drawCustom(e,t,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const vm=nC;class iC extends vm{constructor(e,t,i,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Mr(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,i,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=s);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,m,_;for(g=t+s;g<i;g+=s)d[0]=e[g],d[1]=e[g+1],_=Fl(c,d),_!==m?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):_===it.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],m=_;return(r&&f||g===t+s)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],c=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(c),t=l}return t}drawCustom(e,t,i,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,h,d;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let g=0,m=f.length;g<m;++g){const _=[];d=this.drawCustomCoordinates_(l,d,f[g],o,_),h.push(_)}this.instructions.push([te.CUSTOM,a,h,e,i,Vl]),this.hitDetectionInstructions.push([te.CUSTOM,a,h,e,s||i,Vl]);break;case"Polygon":case"MultiLineString":u=[],l=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([te.CUSTOM,a,u,e,i,yr]),this.hitDetectionInstructions.push([te.CUSTOM,a,u,e,s||i,yr]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([te.CUSTOM,a,c,e,i,$n]),this.hitDetectionInstructions.push([te.CUSTOM,a,c,e,s||i,$n]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([te.CUSTOM,a,c,e,i,$n]),this.hitDetectionInstructions.push([te.CUSTOM,a,c,e,s||i,$n]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([te.CUSTOM,a,c,e,i]),this.hitDetectionInstructions.push([te.CUSTOM,a,c,e,s||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[te.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[te.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let s,r,o=-1;for(t=0;t<i;++t)s=e[t],r=s[0],r==te.END_GEOMETRY?o=t:r==te.BEGIN_GEOMETRY&&(s[2]=t,pE(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const s=e.getColor();i.fillStyle=un(s||wt)}else i.fillStyle=void 0;if(t){const s=t.getColor();i.strokeStyle=un(s||vr);const r=t.getLineCap();i.lineCap=r!==void 0?r:Rs;const o=t.getLineDash();i.lineDash=o?o.slice():Sn;const a=t.getLineDashOffset();i.lineDashOffset=a||In;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:Ss;const c=t.getWidth();i.lineWidth=c!==void 0?c:Cr;const u=t.getMiterLimit();i.miterLimit=u!==void 0?u:xr,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[te.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[te.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!ii(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[te.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mg(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Dc(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Wr=iC;class sC extends Wr{constructor(e,t,i,s){super(e,t,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([te.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([te.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([te.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([te.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const rC=sC;class oC extends Wr{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinates_(e,t,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,s,!1,!1),a=[te.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Sn,In],xi);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Kn),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Sn,In],xi);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Kn),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Kn),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Kn),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(xi)}}const aC=oC;class lC extends Wr{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinatess_(e,t,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(xi),this.hitDetectionInstructions.push(xi);for(let c=0;c<l;++c){const u=i[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,s,!0,!a),f=[te.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(cd),this.hitDetectionInstructions.push(cd)),t=u}return o&&(this.instructions.push(uo),this.hitDetectionInstructions.push(uo)),a&&(this.instructions.push(Kn),this.hitDetectionInstructions.push(Kn)),t}drawCircle(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,wt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Sn,In]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[te.CIRCLE,l];this.instructions.push(xi,c),this.hitDetectionInstructions.push(xi,c),i.fillStyle!==void 0&&(this.instructions.push(uo),this.hitDetectionInstructions.push(uo)),i.strokeStyle!==void 0&&(this.instructions.push(Kn),this.hitDetectionInstructions.push(Kn)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,wt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Sn,In]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,wt]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Sn,In]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,s=t.length;i<s;++i)t[i]=gi(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const ud=lC;function cC(n,e,t,i,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+s<i;){const[c,u]=l.slice(-2),h=e[o+s],d=e[o+s+1],f=Math.sqrt((h-c)*(h-c)+(d-u)*(d-u));if(a+=f,a>=n){const g=(n-a+f)/f,m=bt(c,h,g),_=bt(u,d,g);l.push(m,_),r.push(l),l=[m,_],a==n&&(o+=s),a=0}else if(a<n)l.push(e[o+s],e[o+s+1]),o+=s;else{const g=f-a,m=bt(c,h,g/f),_=bt(u,d,g/f);l.push(m,_),r.push(l),l=[m,_],a=0,o+=s}}return a>0&&r.push(l),r}function uC(n,e,t,i,s){let r=t,o=t,a=0,l=0,c=t,u,h,d,f,g,m,_,p,x,w;for(h=t;h<i;h+=s){const v=e[h],T=e[h+1];g!==void 0&&(x=v-g,w=T-m,f=Math.sqrt(x*x+w*w),_!==void 0&&(l+=d,u=Math.acos((_*x+p*w)/(d*f)),u>n&&(l>a&&(a=l,r=c,o=h),l=0,c=h-s)),d=f,_=x,p=w),g=v,m=T}return l+=f,l>a?[c,h]:[r,o]}const ta={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class hC extends Wr{constructor(e,t,i,s){super(e,t,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[wt]={fillStyle:wt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!_t(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();h=[];for(let _=0,p=m.length;_<p;++_)h.push(m[_][0])}this.beginGeometry(e,t);const d=r.repeat,f=d?void 0:r.textAlign;let g=0;for(let m=0,_=h.length;m<_;++m){let p;d?p=cC(d*this.resolution,c,g,h[m],u):p=[c.slice(g,h[m])];for(let x=0,w=p.length;x<w;++x){const v=p[x];let T=0,R=v.length;if(f==null){const A=uC(r.maxAngle,v,0,v.length,2);T=A[0],R=A[1]}for(let A=T;A<R;A+=u)o.push(v[A],v[A+1]);const M=o.length;g=h[m],this.drawChars_(a,M),a=M}}this.endGeometry(t)}else{let h=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),r.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const p=e.getFlatInteriorPoints();c=[];for(let x=0,w=p.length;x<w;x+=3)r.overflow||h.push(p[x+2]/this.resolution),c.push(p[x],p[x+1]);if(c.length===0)return;u=2;break}const d=this.appendFlatPointCoordinates(c,u);if(d===a)return;if(h&&(d-a)/2!==c.length/u){let p=a/2;h=h.filter((x,w)=>{const v=o[(p+w)*2]===c[w*u]&&o[(p+w)*2+1]===c[w*u+1];return v||--p,v})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=r.padding;if(f!=Ei&&(r.scale[0]<0||r.scale[1]<0)){let p=r.padding[0],x=r.padding[1],w=r.padding[2],v=r.padding[3];r.scale[0]<0&&(x=-x,v=-v),r.scale[1]<0&&(p=-p,w=-w),f=[p,x,w,v]}const g=this.pixelRatio;this.instructions.push([te.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==Ei?Ei:f.map(function(p){return p*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const m=1/g,_=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=wt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([te.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?wt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),r.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||wr,justify:t.justify,textBaseline:t.textBaseline||Yo,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=ta[s.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([te.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,l,u,r,d*l,h,o,1]),this.hitDetectionInstructions.push([te.DRAW_CHARS,e,t,c,s.overflow,a&&wt,s.maxAngle,l,u,r,d*l,h,o,1/l])}setTextStyle(e,t){let i,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=un(o.getColor()||wt)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),p=a.getMiterLimit();r.lineCap=a.getLineCap()||Rs,r.lineDash=g?g.slice():Sn,r.lineDashOffset=m===void 0?In:m,r.lineJoin=a.getLineJoin()||Ss,r.lineWidth=_===void 0?Cr:_,r.miterLimit=p===void 0?xr:p,r.strokeStyle=un(a.getColor()||vr)}i=this.textState_;const l=e.getFont()||Bg;av(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Yo,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Ei,i.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:Ie(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+Ie(s.fillStyle):""}this.declutterImageWithText_=t}}const dC={Circle:ud,Default:Wr,Image:rC,LineString:aC,Polygon:ud,Text:hC};class fC{constructor(e,t,i,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const s in i){const r=i[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[t];if(r===void 0){const o=dC[t];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}const hd=fC;function gC(n,e,t,i,s,r,o,a,l,c,u,h){let d=n[e],f=n[e+1],g=0,m=0,_=0,p=0;function x(){g=d,m=f,e+=i,d=n[e],f=n[e+1],p+=_,_=Math.sqrt((d-g)*(d-g)+(f-m)*(f-m))}do x();while(e<t-i&&p+_<r);let w=_===0?0:(r-p)/_;const v=bt(g,d,w),T=bt(m,f,w),R=e-i,M=p,A=r+a*l(c,s,u);for(;e<t-i&&p+_<A;)x();w=_===0?0:(A-p)/_;const Z=bt(g,d,w),K=bt(m,f,w);let se;if(h){const B=[v,T,Z,K];Ag(B,0,4,2,h,B,B),se=B[0]>B[2]}else se=v>Z;const ne=Math.PI,ee=[],Re=R+i===e;e=R,_=0,p=M,d=n[e],f=n[e+1];let $;if(Re){x(),$=Math.atan2(f-m,d-g),se&&($+=$>0?-ne:ne);const B=(Z+v)/2,F=(K+T)/2;return ee[0]=[B,F,(A-r)/2,$,s],ee}s=s.replace(/\n/g," ");for(let B=0,F=s.length;B<F;){x();let j=Math.atan2(f-m,d-g);if(se&&(j+=j>0?-ne:ne),$!==void 0){let ge=j-$;if(ge+=ge>ne?-2*ne:ge<-ne?2*ne:0,Math.abs(ge)>o)return null}$=j;const de=B;let fe=0;for(;B<F;++B){const ge=se?F-B-1:B,Te=a*l(c,s[ge],u);if(e+i<t&&p+_<r+fe+Te/2)break;fe+=Te}if(B===de)continue;const Me=se?s.substring(F-de,F-B):s.substring(de,B);w=_===0?0:(r+fe/2-p)/_;const L=bt(g,d,w),He=bt(m,f,w);ee.push([L,He,fe/2,j,Me]),r+=fe}return ee}const Xi=Nt(),Fn=[],mn=[],_n=[],Dn=[];function dd(n){return n[3].declutterBox}const fd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ol(n,e){return e==="start"?e=fd.test(n)?"right":"left":e==="end"&&(e=fd.test(n)?"left":"right"),ta[e]}function mC(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class _C{constructor(e,t,i,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=qt(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,s){const r=e+t+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(e),d=l.justify?ta[l.justify]:ol(Array.isArray(e)?e[0]:e,l.textAlign||wr),f=s&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(mC,[]),{width:m,height:_,widths:p,heights:x,lineWidths:w}=cv(l,g),v=m+f,T=[],R=(v+2)*u[0],M=(_+f)*u[1],A={width:R<0?Math.floor(R):Math.ceil(R),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:T};(u[0]!=1||u[1]!=1)&&T.push("scale",u),s&&(T.push("strokeStyle",o.strokeStyle),T.push("lineWidth",f),T.push("lineCap",o.lineCap),T.push("lineJoin",o.lineJoin),T.push("miterLimit",o.miterLimit),T.push("setLineDash",[o.lineDash]),T.push("lineDashOffset",o.lineDashOffset)),i&&T.push("fillStyle",a.fillStyle),T.push("textBaseline","middle"),T.push("textAlign","center");const Z=.5-d;let K=d*v+Z*f;const se=[],ne=[];let ee=0,Re=0,$=0,B=0,F;for(let j=0,de=g.length;j<de;j+=2){const fe=g[j];if(fe===`
`){Re+=ee,ee=0,K=d*v+Z*f,++B;continue}const Me=g[j+1]||l.font;Me!==F&&(s&&se.push("font",Me),i&&ne.push("font",Me),F=Me),ee=Math.max(ee,x[$]);const L=[fe,K+Z*p[$]+d*(p[$]-w[B]),.5*(f+ee)+Re];K+=p[$],s&&se.push("strokeText",L),i&&ne.push("fillText",L),++$}return Array.prototype.push.apply(T,se),Array.prototype.push.apply(T,ne),this.labels_[r]=A,A}replayTextBackground_(e,t,i,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,s,r,o,a,l,c,u,h,d,f,g,m,_){a*=d[0],l*=d[1];let p=i-a,x=s-l;const w=r+c>e?e-c:r,v=o+u>t?t-u:o,T=g[3]+w*d[0]+g[1],R=g[0]+v*d[1]+g[2],M=p-g[3],A=x-g[0];(m||h!==0)&&(Fn[0]=M,Dn[0]=M,Fn[1]=A,mn[1]=A,mn[0]=M+T,_n[0]=mn[0],_n[1]=A+R,Dn[1]=_n[1]);let Z;return h!==0?(Z=Qt(qt(),i,s,1,1,h,-i,-s),$e(Z,Fn),$e(Z,mn),$e(Z,_n),$e(Z,Dn),ni(Math.min(Fn[0],mn[0],_n[0],Dn[0]),Math.min(Fn[1],mn[1],_n[1],Dn[1]),Math.max(Fn[0],mn[0],_n[0],Dn[0]),Math.max(Fn[1],mn[1],_n[1],Dn[1]),Xi)):ni(Math.min(M,M+T),Math.min(A,A+R),Math.max(M,M+T),Math.max(A,A+R),Xi),f&&(p=Math.round(p),x=Math.round(x)),{drawImageX:p,drawImageY:x,drawImageW:w,drawImageH:v,originX:c,originY:u,declutterBox:{minX:Xi[0],minY:Xi[1],maxX:Xi[2],maxY:Xi[3],value:_},canvasTransform:Z,scale:d}}replayImageOrLabel_(e,t,i,s,r,o,a){const l=!!(o||a),c=s.declutterBox,u=e.canvas,h=a?a[2]*s.scale[0]/2:0;return c.minX-h<=u.width/t&&c.maxX+h>=0&&c.minY-h<=u.height/t&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,Fn,mn,_n,Dn,o,a),uv(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=$e(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,s){const r=this.textStates[t],o=this.createLabel(e,t,s,i),a=this.strokeStates[i],l=this.pixelRatio,c=ol(Array.isArray(e)?e[0]:e,r.textAlign||wr),u=ta[r.textBaseline||Yo],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*r.scale[0],f=c*d+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,i,s,r,o,a,l){let c;this.pixelCoordinates_&&ii(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Ii(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),ME(this.renderedTransform_,i));let u=0;const h=s.length;let d=0,f,g,m,_,p,x,w,v,T,R,M,A,Z=0,K=0,se=null,ne=null;const ee=this.coordinateCache_,Re=this.viewRotation_,$=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,B={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Re},F=this.instructions!=s||this.overlaps?0:200;let j,de,fe,Me;for(;u<h;){const L=s[u];switch(L[0]){case te.BEGIN_GEOMETRY:j=L[1],Me=L[3],j.getGeometry()?a!==void 0&&!_t(a,Me.getExtent())?u=L[2]+1:++u:u=L[2];break;case te.BEGIN_PATH:Z>F&&(this.fill_(e),Z=0),K>F&&(e.stroke(),K=0),!Z&&!K&&(e.beginPath(),_=NaN,p=NaN),++u;break;case te.CIRCLE:d=L[1];const ge=c[d],Te=c[d+1],ze=c[d+2],I=c[d+3],z=ze-ge,G=I-Te,q=Math.sqrt(z*z+G*G);e.moveTo(ge+q,Te),e.arc(ge,Te,q,0,2*Math.PI,!0),++u;break;case te.CLOSE_PATH:e.closePath(),++u;break;case te.CUSTOM:d=L[1],f=L[2];const pe=L[3],y=L[4],E=L.length==6?L[5]:void 0;B.geometry=pe,B.feature=j,u in ee||(ee[u]=[]);const C=ee[u];E?E(c,d,f,2,C):(C[0]=c[d],C[1]=c[d+1],C.length=2),y(C,B),++u;break;case te.DRAW_IMAGE:d=L[1],f=L[2],v=L[3],g=L[4],m=L[5];let S=L[6];const b=L[7],P=L[8],V=L[9],k=L[10];let W=L[11];const D=L[12];let X=L[13];const Y=L[14],H=L[15];if(!v&&L.length>=20){T=L[19],R=L[20],M=L[21],A=L[22];const St=this.drawLabelWithPointPlacement_(T,R,M,A);v=St.label,L[3]=v;const Vi=L[23];g=(St.anchorX-Vi)*this.pixelRatio,L[4]=g;const Lt=L[24];m=(St.anchorY-Lt)*this.pixelRatio,L[5]=m,S=v.height,L[6]=S,X=v.width,L[13]=X}let J;L.length>25&&(J=L[25]);let ae,xe,me;L.length>17?(ae=L[16],xe=L[17],me=L[18]):(ae=Ei,xe=!1,me=!1),k&&$?W+=Re:!k&&!$&&(W-=Re);let ke=0;for(;d<f;d+=2){if(J&&J[ke++]<X/this.pixelRatio)continue;const St=this.calculateImageOrLabelDimensions_(v.width,v.height,c[d],c[d+1],X,S,g,m,P,V,W,D,r,ae,xe||me,j),Vi=[e,t,v,St,b,xe?se:null,me?ne:null];if(l){if(Y==="none")continue;if(Y==="obstacle"){l.insert(St.declutterBox);continue}else{let Lt,dn;if(H){const It=f-d;if(!H[It]){H[It]=Vi;continue}if(Lt=H[It],delete H[It],dn=dd(Lt),l.collides(dn))continue}if(l.collides(St.declutterBox))continue;Lt&&(l.insert(dn),this.replayImageOrLabel_.apply(this,Lt)),l.insert(St.declutterBox)}}this.replayImageOrLabel_.apply(this,Vi)}++u;break;case te.DRAW_CHARS:const at=L[1],Ye=L[2],Wi=L[3],ri=L[4];A=L[5];const Yr=L[6],lt=L[7],Rt=L[8];M=L[9];const zi=L[10];T=L[11],R=L[12];const bu=[L[13],L[13]],Wa=this.textStates[R],zs=Wa.font,Vs=[Wa.scale[0]*lt,Wa.scale[1]*lt];let Us;zs in this.widths_?Us=this.widths_[zs]:(Us={},this.widths_[zs]=Us);const Ou=nm(c,at,Ye,2),Mu=Math.abs(Vs[0])*$h(zs,T,Us);if(ri||Mu<=Ou){const St=this.textStates[R].textAlign,Vi=(Ou-Mu)*ol(T,St),Lt=gC(c,at,Ye,2,T,Vi,Yr,Math.abs(Vs[0]),$h,zs,Us,$?0:this.viewRotation_);e:if(Lt){const dn=[];let It,Br,Xr,Et,Pt;if(M)for(It=0,Br=Lt.length;It<Br;++It){Pt=Lt[It],Xr=Pt[4],Et=this.createLabel(Xr,R,"",M),g=Pt[2]+(Vs[0]<0?-zi:zi),m=Wi*Et.height+(.5-Wi)*2*zi*Vs[1]/Vs[0]-Rt;const fn=this.calculateImageOrLabelDimensions_(Et.width,Et.height,Pt[0],Pt[1],Et.width,Et.height,g,m,0,0,Pt[3],bu,!1,Ei,!1,j);if(l&&l.collides(fn.declutterBox))break e;dn.push([e,t,Et,fn,1,null,null])}if(A)for(It=0,Br=Lt.length;It<Br;++It){Pt=Lt[It],Xr=Pt[4],Et=this.createLabel(Xr,R,A,""),g=Pt[2],m=Wi*Et.height-Rt;const fn=this.calculateImageOrLabelDimensions_(Et.width,Et.height,Pt[0],Pt[1],Et.width,Et.height,g,m,0,0,Pt[3],bu,!1,Ei,!1,j);if(l&&l.collides(fn.declutterBox))break e;dn.push([e,t,Et,fn,1,null,null])}l&&l.load(dn.map(dd));for(let fn=0,D_=dn.length;fn<D_;++fn)this.replayImageOrLabel_.apply(this,dn[fn])}}++u;break;case te.END_GEOMETRY:if(o!==void 0){j=L[1];const St=o(j,Me);if(St)return St}++u;break;case te.FILL:F?Z++:this.fill_(e),++u;break;case te.MOVE_TO_LINE_TO:for(d=L[1],f=L[2],de=c[d],fe=c[d+1],x=de+.5|0,w=fe+.5|0,(x!==_||w!==p)&&(e.moveTo(de,fe),_=x,p=w),d+=2;d<f;d+=2)de=c[d],fe=c[d+1],x=de+.5|0,w=fe+.5|0,(d==f-2||x!==_||w!==p)&&(e.lineTo(de,fe),_=x,p=w);++u;break;case te.SET_FILL_STYLE:se=L,this.alignFill_=L[2],Z&&(this.fill_(e),Z=0,K&&(e.stroke(),K=0)),e.fillStyle=L[1],++u;break;case te.SET_STROKE_STYLE:ne=L,K&&(e.stroke(),K=0),this.setStrokeStyle_(e,L),++u;break;case te.STROKE:F?K++:e.stroke(),++u;break;default:++u;break}}Z&&this.fill_(e),K&&e.stroke()}execute(e,t,i,s,r,o){this.viewRotation_=s,this.execute_(e,t,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,i,s,r){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}const pC=_C,al=["Polygon","Circle","LineString","Image","Text","Default"];class yC{constructor(e,t,i,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=qt(),this.createExecutors_(r)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const s=e[t];for(const r in s){const o=s[r];i[r]=new pC(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,s,r,o){s=Math.round(s);const a=s*2+1,l=Qt(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=yt(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Nt(),or(h,e),Dc(h,t*(this.renderBuffer_+s),h));const d=EC(s);let f;function g(T,R){const M=u.getImageData(0,0,a,a).data;for(let A=0,Z=d.length;A<Z;A++)if(M[d[A]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(T)){const K=(d[A]-3)/4,se=s-K%a,ne=s-(K/a|0),ee=r(T,R,se*se+ne*ne);if(ee)return ee}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(ei);let _,p,x,w,v;for(_=m.length-1;_>=0;--_){const T=m[_].toString();for(x=this.executorsByZIndex_[T],p=al.length-1;p>=0;--p)if(f=al[p],w=x[f],w!==void 0&&(v=w.executeHitDetection(u,l,i,g,h),v))return v}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],s=t[1],r=t[2],o=t[3],a=[i,s,i,o,r,o,r,s];return Ii(a,0,8,2,e,a),a}isEmpty(){return ws(this.executorsByZIndex_)}execute(e,t,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ei),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||al;let c,u,h,d,f,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const m=l[c].toString();for(f=this.executorsByZIndex_[m],h=0,d=o.length;h<d;++h){const _=o[h];g=f[_],g!==void 0&&g.execute(e,t,i,s,r,a)}}this.maxExtent_&&e.restore()}}const ll={};function EC(n){if(ll[n]!==void 0)return ll[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let r=0;r<=n;++r)for(let o=0;o<=n;++o){const a=r*r+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+r)*e+(n+o))*4+3),r>0&&l.push(((n-r)*e+(n+o))*4+3),o>0&&(l.push(((n+r)*e+(n-o))*4+3),r>0&&l.push(((n-r)*e+(n-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return ll[n]=s,s}const gd=yC;class xC extends vm{constructor(e,t,i,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=s,this.transformRotation_=s?Ta(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=qt()}drawImages_(e,t,i,s){if(!this.image_)return;const r=Ii(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const d=r[u]-this.imageAnchorX_,f=r[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,m=f+this.imageAnchorY_;Qt(a,g,m,1,1,c,-g,-m),o.save(),o.transform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Ii(e,t,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=s){const l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,s,r){const o=this.context_,a=Ii(e,t,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),i}drawRings_(e,t,i,s){for(let r=0,o=i.length;r<o;++r)t=this.moveToLineTo_(e,t,i[r],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!_t(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Mx(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,s=t.length;i<s;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!_t(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(_t(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!_t(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!_t(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(i,s,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),ii(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:wr;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=s&&(i.textAlign=s,t.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:un(i||wt)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=r||Sn;this.strokeState_={lineCap:s!==void 0?s:Rs,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||In)*this.pixelRatio_,lineJoin:a!==void 0?a:Ss,lineWidth:(l!==void 0?l:Cr)*this.pixelRatio_,miterLimit:c!==void 0?c:xr,strokeStyle:un(i||vr)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:un(f||wt)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),m=i.getLineDash(),_=i.getLineDashOffset(),p=i.getLineJoin(),x=i.getWidth(),w=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Rs,lineDash:m||Sn,lineDashOffset:_||In,lineJoin:p!==void 0?p:Ss,lineWidth:x!==void 0?x:Cr,miterLimit:w!==void 0?w:xr,strokeStyle:un(f||vr)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:s!==void 0?s:Bg,textAlign:h!==void 0?h:wr,textBaseline:d!==void 0?d:Yo},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,g,m)=>f+=m%2?" ":g,""):u:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const vC=xC,an=.5;function wC(n,e,t,i,s,r,o){const a=n[0]*an,l=n[1]*an,c=yt(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new vC(c,an,s,null,o),d=t.length,f=Math.floor((256*256*256-1)/d),g={};for(let _=1;_<=d;++_){const p=t[_-1],x=p.getStyleFunction()||i;if(!x)continue;let w=x(p,r);if(!w)continue;Array.isArray(w)||(w=[w]);const T=(_*f).toString(16).padStart(7,"#00000");for(let R=0,M=w.length;R<M;++R){const A=w[R],Z=A.getGeometryFunction()(p);if(!Z||!_t(s,Z.getExtent()))continue;const K=A.clone(),se=K.getFill();se&&se.setColor(T);const ne=K.getStroke();ne&&(ne.setColor(T),ne.setLineDash(null)),K.setText(void 0);const ee=A.getImage();if(ee){const F=ee.getImageSize();if(!F)continue;const j=yt(F[0],F[1],void 0,{alpha:!1}),de=j.canvas;j.fillStyle=T,j.fillRect(0,0,de.width,de.height),K.setImage(new Jo({img:de,anchor:ee.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ee.getOrigin(),opacity:1,size:ee.getSize(),scale:ee.getScale(),rotation:ee.getRotation(),rotateWithView:ee.getRotateWithView()}))}const Re=K.getZIndex()||0;let $=g[Re];$||($={},g[Re]=$,$.Polygon=[],$.Circle=[],$.LineString=[],$.Point=[]);const B=Z.getType();if(B==="GeometryCollection"){const F=Z.getGeometriesArrayRecursive();for(let j=0,de=F.length;j<de;++j){const fe=F[j];$[fe.getType().replace("Multi","")].push(fe,K)}}else $[B.replace("Multi","")].push(Z,K)}}const m=Object.keys(g).map(Number).sort(ei);for(let _=0,p=m.length;_<p;++_){const x=g[m[_]];for(const w in x){const v=x[w];for(let T=0,R=v.length;T<R;T+=2){h.setStyle(v[T+1]);for(let M=0,A=e.length;M<A;++M)h.setTransform(e[M]),h.drawGeometry(v[T])}}}return c.getImageData(0,0,u.width,u.height)}function CC(n,e,t){const i=[];if(t){const s=Math.floor(Math.round(n[0])*an),r=Math.floor(Math.round(n[1])*an),o=(Qe(s,0,t.width-1)+Qe(r,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&i.push(e[u/h-1])}return i}const TC=.5,wm={Point:PC,LineString:MC,Polygon:DC,MultiPoint:FC,MultiLineString:AC,MultiPolygon:LC,GeometryCollection:OC,Circle:IC};function RC(n,e){return parseInt(Ie(n),10)-parseInt(Ie(e),10)}function SC(n,e){const t=ec(n,e);return t*t}function ec(n,e){return TC*n/e}function IC(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(s||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function md(n,e,t,i,s,r,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==ue.LOADED||c==ue.ERROR?l.unlistenImageChange(s):(c==ue.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return bC(n,e,t,i,r,o),a}function bC(n,e,t,i,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,s);if(t.getRenderer())Cm(n,a,t,e);else{const c=wm[a.getType()];c(n,a,t,e,r)}}function Cm(n,e,t,i){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)Cm(n,r[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function OC(n,e,t,i,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=wm[r[o].getType()];l(n,r[o],t,i,s)}}function MC(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function AC(n,e,t,i,s){const r=t.getStroke();if(r){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(s||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function LC(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(s||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function PC(n,e,t,i,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=ue.LOADED)return;let l=n;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(e,i)}if(o&&o.getText()){let l=n;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function FC(n,e,t,i,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=ue.LOADED)return;let l=n;if(s){const u=r.getDeclutterMode();if(u!=="none")if(l=s,u==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,i)}}function DC(n,e,t,i,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(s||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}class kC extends gu{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Nt(),this.wrappedRenderedExtent_=Nt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,g=!(f[Je.ANIMATING]||f[Je.INTERACTING]),m=this.compositionContext_,_=Math.round(t.size[0]*d),p=Math.round(t.size[1]*d),x=h.getWrapX()&&l.canWrapX(),w=x?De(u):null,v=x?Math.ceil((s[2]-u[2])/w)+1:1;let T=x?Math.floor((s[0]-u[0])/w):0;do{const R=this.getRenderTransform(o,a,c,d,_,p,T*w);e.execute(m,1,R,c,g,void 0,i)}while(++T<v)}setupCompositionContext_(){if(this.opacity_!==1){const e=yt(this.context.canvas.width,this.context.canvas.height,ed);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,ba(this.compositionContext_),ed.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];AE(this.pixelTransform,1/i,1/i),xa(this.inversePixelTransform,this.pixelTransform);const r=Fc(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(hn.PRERENDER)||this.getLayer().hasListener(hn.POSTRENDER)))return null;const h=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);a.width!=h||a.height!=d?(a.width=h,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,h,d),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let g=!1;if(u&&s.extent&&this.clipping){const m=wn(s.extent);u=_t(m,e.extent),g=u&&!Zn(m,e.extent),g&&this.clipUnrotated(this.compositionContext_,e,m)}return u&&this.renderWorlds(l,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];$e(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=i[0]*an,d=i[1]*an;u.push(this.getRenderTransform(s,r,o,an,h,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Zn(g,l)){let m=l[0];const _=De(g);let p=0,x;for(;m<g[0];)--p,x=_*p,u.push(this.getRenderTransform(s,r,o,an,h,d,x).slice()),m+=_;for(p=0,m=l[2];m>g[2];)++p,x=_*p,u.push(this.getRenderTransform(s,r,o,an,h,d,x).slice()),m-=_}this.hitDetectionImageData_=wC(i,u,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}t(CC(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,m){const _=Ie(f),p=c[_];if(p){if(p!==!0&&m<p.distanceSq){if(m===0)return c[_]=!0,r.splice(r.lastIndexOf(p),1),s(f,l,g);p.geometry=g,p.distanceSq=m}}else{if(m===0)return c[_]=!0,s(f,l,g);r.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:m,callback:s})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,i,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const s=e.viewHints[Je.ANIMATING],r=e.viewHints[Je.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=RC);const _=c.center.slice(),p=Dc(l,g*h),x=p.slice(),w=[p.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!Zn(v,e.extent)){const $=De(v),B=Math.max(De(p)/2,$);p[0]=v[0]-B,p[2]=v[2]+B,Rg(_,u);const F=xg(w[0],u);F[0]<v[0]&&F[2]<v[2]?w.push([F[0]+$,F[1],F[2]+$,F[3]]):F[0]>v[0]&&F[2]>v[2]&&w.push([F[0]-$,F[1],F[2]-$,F[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&Zn(this.wrappedRenderedExtent_,p))return ii(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const T=new hd(ec(h,d),p,h,d);let R;this.getLayer().getDeclutter()&&(R=new hd(ec(h,d),p,h,d));let M;for(let $=0,B=w.length;$<B;++$)i.loadFeatures(w[$],h,u);const A=SC(h,d);let Z=!0;const K=$=>{let B;const F=$.getStyleFunction()||t.getStyleFunction();if(F&&(B=F($,h)),B){const j=this.renderFeature($,A,B,T,M,R);Z=Z&&!j}},se=Og(p),ne=i.getFeaturesInExtent(se);m&&ne.sort(m);for(let $=0,B=ne.length;$<B;++$)K(ne[$]);this.renderedFeatures_=ne,this.ready=Z;const ee=T.finish(),Re=new gd(p,h,d,i.getOverlaps(),ee,t.getRenderBuffer());return R&&(this.declutterExecutorGroup=new gd(p,h,d,i.getOverlaps(),R.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=x,this.wrappedRenderedExtent_=p,this.renderedCenter_=_,this.renderedProjection_=u,this.replayGroup_=Re,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,c=i.length;l<c;++l)a=md(s,e,i[l],t,this.boundHandleStyleImageChange_,r,o)||a;else a=md(s,e,i,t,this.boundHandleStyleImageChange_,r,o);return a}}const NC=kC;class GC extends jw{constructor(e,t,i,s,r){const o=r!==void 0?ue.IDLE:ue.LOADED;super(e,t,i,o),this.loader_=r!==void 0?r:null,this.canvas_=s,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=ue.ERROR):this.state=ue.LOADED,this.changed()}load(){this.state==ue.IDLE&&(this.state=ue.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const WC=GC;function zC(n){return Array.isArray(n)?Math.min(...n):n}class VC extends tC{constructor(e){super(e),this.vectorRenderer_=new NC(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=qt(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=$e(this.coordinateToVectorPixelTransform_,$e(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const t=e.pixelRatio,i=e.viewState,s=i.resolution,r=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),NE(a,this.layerImageRatio_));const l=De(a)/s,c=At(a)/s;if(!r[Je.ANIMATING]&&!r[Je.INTERACTING]&&!Ls(a)){o.useContainer(null,null);const u=o.context,h=e.layerStatesArray[e.layerIndex],d=Object.assign({},h,{opacity:1}),f=Object.assign({},e,{declutterTree:new mu(9),extent:a,size:[l,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0});let g=!0;const m=new WC(a,s,t,u.canvas,function(_){o.prepareFrame(f)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(f,null)&&(o.renderDeclutter(f),g=!1),_())});m.addEventListener(re.CHANGE,()=>{if(m.getState()!==ue.LOADED)return;this.image_=g?null:m;const _=m.getPixelRatio(),p=zC(m.getResolution())*t/_;this.renderedResolution=p,this.coordinateToVectorPixelTransform_=Qt(this.coordinateToVectorPixelTransform_,l/2,c/2,1/p,-1/p,0,-i.center[0],-i.center[1])}),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,i,s,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,i,s,r):super.forEachFeatureAtCoordinate(e,t,i,s,r)}}const UC=VC;class jC extends Q1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new UC(this)}}const YC=jC;class BC{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ve(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ve(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ve(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const XC=BC;function _d(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Pa(n,e,t){return n+"/"+e+"/"+t}function Tm(n){return Pa(n[0],n[1],n[2])}function ZC(n){return n.split("/").map(Number)}function $C(n){return(n[1]<<n[0])+n[2]}function HC(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(i,s):!0}class KC extends XC{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=ZC(e)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(Tm(s.tileCoord)),s.release())})}}const Rm=KC,cl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class qC extends tn{constructor(e){super(),this.projection=tt(e.projection),this.attributions_=pd(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,s){t.viewResolver=i,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=pd(e),this.changed()}setState(e){this.state_=e,this.changed()}}function pd(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}const Sm=qC,Zi=[0,0,0],kn=5;class JC{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ve(yE(this.resolutions_,function(s,r){return r-s},!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ve(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Di(i)),ve(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ve(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Nc,ve(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new um(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([t,r,a])}forEachTileCoordParentTileRange(e,t,i,s){let r,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=Yi(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,c,i),t(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return Yi(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return Yi(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),c=Math.floor(r*l),u=Math.floor(o*l);if(t<s)return Yi(c,c,u,u,i);const h=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return Yi(c,h,u,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Zi);const s=Zi[1],r=Zi[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Zi);const o=Zi[1],a=Zi[2];return Yi(s,o,r,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Ot(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=Ot(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return ni(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=Ot(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/i/c[0],h=a*(l[1]-t)/i/c[1];return s?(u=to(u,kn)-1,h=to(h,kn)-1):(u=eo(u,kn),h=eo(h,kn)),_d(o,u,h,r)}getTileCoordForXYAndZ_(e,t,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=Ot(this.getTileSize(i),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return s?(c=to(c,kn)-1,u=to(u,kn)-1):(c=eo(c,kn),u=eo(u,kn)),_d(i,c,u,r)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Lc(this.resolutions_,e,t||0);return Qe(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Gg(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}const Im=JC;function bm(n){let e=n.getDefaultTileGrid();return e||(e=nT(n),n.setDefaultTileGrid(e)),e}function QC(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),r=yu(t);if(!Mr(r,s)){const o=De(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,n.getTileCoordForCoordAndZ(s,i)}return e}function eT(n,e,t,i){i=i!==void 0?i:"top-left";const s=Om(n,e,t);return new Im({extent:n,origin:DE(n,i),resolutions:s,tileSize:t})}function tT(n){const e=n||{},t=e.extent||tt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Om(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Im(i)}function Om(n,e,t,i){e=e!==void 0?e:HE,t=Ot(t!==void 0?t:Nc);const s=At(n),r=De(n);i=i>0?i:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function nT(n,e,t,i){const s=yu(n);return eT(s,e,t,i)}function yu(n){n=tt(n);let e=n.getExtent();if(!e){const t=180*Cs.degrees/n.getMetersPerUnit();e=ni(-t,-t,t,t)}return e}class iT extends Sm{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ot(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Rm(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)l=Pa(t,u,h),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===Q.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,r){return ie()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:bm(e)}getTileCacheForProjection(e){const t=this.getProjection();return ve(t===null||pi(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(t),o=Ot(s.getTileSize(e),this.tmpSize);return r==1?o:uw(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=QC(i,e,t)),HC(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,s){}}class sT extends An{constructor(e,t){super(e),this.tile=t}}const rT=iT;function oT(n,e){const t=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],u=e.getFullTileRange(c);return ve(u,"The {-y} placeholder requires a tile grid with extent"),(u.getHeight()-o[2]-1).toString()})}}function aT(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=oT(n[s],e);return lT(i)}function lT(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const s=$C(e),r=Si(s,n.length);return n[r](e,t,i)}}function cT(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(n.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}class Eu extends rT{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Eu.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ie(t),s=t.getState();let r;s==Q.LOADING?(this.tileLoadingKeys_[i]=!0,r=cl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==Q.ERROR?cl.TILELOADERROR:s==Q.LOADED?cl.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new sT(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=cT(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(aT(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const s=Pa(e,t,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const uT=Eu;class hT extends uT{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dT,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:lm,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!pi(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!pi(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||pi(t,e)))return this.tileGrid;const i=Ie(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=bm(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||pi(t,e))return this.tileCache;const i=Ie(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Rm(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,s,r,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(a,c!==void 0?Q.IDLE:Q.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(re.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,s,r){const o=this.getProjection();if(!o||!r||pi(o,r))return this.getTileInternal(e,t,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,i];let c;const u=Tm(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new Jl(o,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(_,p,x,w)=>this.getTileInternal(_,p,x,w,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=h,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,t,i,s,r){let o=null;const a=Pa(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,i,s,r,l),c.getState()==Q.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=tt(e);if(i){const s=Ie(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function dT(n,e){n.getImage().src=e}const fT=hT;class gT extends fT{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:tT({extent:yu(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const mT=gT,_T='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class pT extends mT{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[_T];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const yT=pT;class ET{constructor(e){this.rbush_=new mu(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ie(t)]=i}load(e,t){const i=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[Ie(a)]=l}this.rbush_.load(i)}remove(e){const t=Ie(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ie(t)],s=[i.minX,i.minY,i.maxX,i.maxY];pr(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let s=0,r=e.length;s<r;s++)if(i=t(e[s]),i)return i;return i}isEmpty(){return ws(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return ni(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const yd=ET,zt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function xT(n,e){return[[-1/0,-1/0,1/0,1/0]]}let vT=!1;function wT(n,e,t,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,s):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=vT,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"||c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?r(e.readFeatures(u,{extent:t,featureProjection:s}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function Ed(n,e){return function(t,i,s,r,o){const a=this;wT(n,e,t,i,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||vs)}}class Nn extends An{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class CT extends Sm{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=vs,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ve(this.format_,"`format` must be set when `url` is set"),this.loader_=Ed(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:xT;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new yd:null,this.loadedExtentsRtree_=new yd,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!t&&i===void 0&&(i=new cn(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ie(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Nn(zt.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Ee(t,re.CHANGE,this.handleFeatureChange_,this),Ee(t,xs.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=t),i&&(ve(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=Ie(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=Ie(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(zt.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Nn(zt.ADDFEATURE,i[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(zt.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(zt.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(vt.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(vt.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ge);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Nn(zt.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const r=t(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ws(this.nullGeometryFeatures_)||Rn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=WE(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||_r,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u.closestPointXY(i,s,o,a),a<h){r=c;const d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ie(t),s=t.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const r=t.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Nn(zt.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ie(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ws(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(u){return Zn(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Nn(zt.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Nn(zt.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Nn(zt.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(s){if(pr(s.extent,e))return i=s,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=Ie(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ie(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Ge),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Nn(zt.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){ve(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Ed(e,this.format_))}}const TT=CT,xd=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],vd={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class RT extends Fs{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(re.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Ni} ${Pr}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(wd(t))if(Cd(t))IT(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?ST(i):Mm(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=Cd(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Uo(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(vd.ENTERFULLSCREEN)):(Uo(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(vd.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(nt.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(nt.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,s=e.length;i<s;++i)Ge(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();wd(i)?this.element.classList.remove(Bh):this.element.classList.add(Bh);for(let s=0,r=xd.length;s<r;++s)e.push(Ee(i,xd[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function wd(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function Cd(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function Mm(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function ST(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():Mm(n)}function IT(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}const bT=RT,ct={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class OT extends tn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+nv,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(ct.ELEMENT,this.handleElementChanged),this.addChangeListener(ct.MAP,this.handleMapChanged),this.addChangeListener(ct.OFFSET,this.handleOffsetChanged),this.addChangeListener(ct.POSITION,this.handlePositionChanged),this.addChangeListener(ct.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(ct.ELEMENT)}getId(){return this.id}getMap(){return this.get(ct.MAP)||null}getOffset(){return this.get(ct.OFFSET)}getPosition(){return this.get(ct.POSITION)}getPositioning(){return this.get(ct.POSITIONING)}handleElementChanged(){Yg(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(jo(this.element),Ge(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ee(e,vn.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(ct.ELEMENT,e)}setMap(e){this.set(ct.MAP,e)}setOffset(e){this.set(ct.OFFSET,e)}setPosition(e){this.set(ct.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(ct.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),r=this.getRect(s,[sv(s),rv(s)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Zn(i,r)){const a=r[0]-i[0],l=i[2]-r[2],c=r[1]-i[1],u=i[3]-r[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+h[0],f[1]+h[1]],m=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(g),duration:m.duration,easing:m.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+t[0],r+t[1]]}setPositioning(e){this.set(ct.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,t){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let l="0%",c="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?l="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(l="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?c="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}const Td=OT,ul="units",MT=[1,2,5],Zs=25.4/.28;class AT extends Fs{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Ni,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(ul,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(ul)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(ul,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=No(i,e.resolution,t,r);const a=this.minWidth_*(this.dpi_||Zs)/Zs,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Zs)/Zs:void 0;let c=a*o,u="";if(s=="degrees"){const w=Cs.degrees;c*=w,c<w/60?(u="",o*=3600):c<w?(u="",o*=60):u=""}else if(s=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(s=="nautical")o/=1852,u="NM";else if(s=="metric")c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(s=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,g,m,_,p;for(;;){g=Math.floor(h/3);const w=Math.pow(10,g);if(d=MT[(h%3+3)%3]*w,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=m,f=_,g=p;break}else if(f>=a)break;m=d,_=f,p=g,++h}const x=this.scaleBar_?this.createScaleBar(f,d,u):d.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=x&&(this.innerElement_.innerHTML=x,this.renderedHTML_=x),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+r+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,s,r){const a=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+r),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=No(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Zs,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const LT=AT;class PT extends Fs{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",s=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=s,r.appendChild(typeof i=="string"?document.createTextNode(i):i),r.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Ni+" "+Pr,a=this.element;a.className=o,a.appendChild(r)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(jl(i))}}const FT=PT;class DT{constructor(e){ce(this,"fileId",null);ce(this,"activity",null);ce(this,"sessions",null);ce(this,"records",null);const t=e;this.fileId=t==null?void 0:t.fileId,this.activity=t==null?void 0:t.activity,this.sessions=t==null?void 0:t.sessions,this.records=t==null?void 0:t.records}}class Rd{constructor(e){ce(this,"timestamp",null);ce(this,"positionLat",null);ce(this,"positionLong",null);ce(this,"distance",null);ce(this,"speed",null);ce(this,"altitude",null);ce(this,"cadence",null);ce(this,"heartRate",null);ce(this,"power",null);const t=e;this.positionLat=t==null?void 0:t.positionLat,this.positionLong=t==null?void 0:t.positionLong,this.altitude=t==null?void 0:t.altitude,this.cadence=t==null?void 0:t.cadence,this.distance=t==null?void 0:t.distance,this.heartRate=t==null?void 0:t.heartRate,this.speed=t==null?void 0:t.speed,this.timestamp=t==null?void 0:t.timestamp,this.power=t==null?void 0:t.power}}class Gi extends Error{}class kT extends Gi{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class NT extends Gi{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class GT extends Gi{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class er extends Gi{}class Am extends Gi{constructor(e){super(`Invalid unit ${e}`)}}class Dt extends Gi{}class Gn extends Gi{constructor(){super("Zone is an abstract class")}}const U="numeric",en="short",Mt="long",na={year:U,month:U,day:U},Lm={year:U,month:en,day:U},WT={year:U,month:en,day:U,weekday:en},Pm={year:U,month:Mt,day:U},Fm={year:U,month:Mt,day:U,weekday:Mt},Dm={hour:U,minute:U},km={hour:U,minute:U,second:U},Nm={hour:U,minute:U,second:U,timeZoneName:en},Gm={hour:U,minute:U,second:U,timeZoneName:Mt},Wm={hour:U,minute:U,hourCycle:"h23"},zm={hour:U,minute:U,second:U,hourCycle:"h23"},Vm={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:en},Um={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:Mt},jm={year:U,month:U,day:U,hour:U,minute:U},Ym={year:U,month:U,day:U,hour:U,minute:U,second:U},Bm={year:U,month:en,day:U,hour:U,minute:U},Xm={year:U,month:en,day:U,hour:U,minute:U,second:U},zT={year:U,month:en,day:U,weekday:en,hour:U,minute:U},Zm={year:U,month:Mt,day:U,hour:U,minute:U,timeZoneName:en},$m={year:U,month:Mt,day:U,hour:U,minute:U,second:U,timeZoneName:en},Hm={year:U,month:Mt,day:U,weekday:Mt,hour:U,minute:U,timeZoneName:Mt},Km={year:U,month:Mt,day:U,weekday:Mt,hour:U,minute:U,second:U,timeZoneName:Mt};class zr{get type(){throw new Gn}get name(){throw new Gn}get ianaName(){return this.name}get isUniversal(){throw new Gn}offsetName(e,t){throw new Gn}formatOffset(e,t){throw new Gn}offset(e){throw new Gn}equals(e){throw new Gn}get isValid(){throw new Gn}}let hl=null;class Fa extends zr{static get instance(){return hl===null&&(hl=new Fa),hl}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Jm(e,t,i)}formatOffset(e,t){return lr(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let To={};function VT(n){return To[n]||(To[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),To[n]}const UT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function jT(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,r,o,a,l,c,u]=i;return[o,s,r,a,l,c,u]}function YT(n,e){const t=n.formatToParts(e),i=[];for(let s=0;s<t.length;s++){const{type:r,value:o}=t[s],a=UT[r];r==="era"?i[a]=o:ye(a)||(i[a]=parseInt(o,10))}return i}let ho={};class On extends zr{static create(e){return ho[e]||(ho[e]=new On(e)),ho[e]}static resetCache(){ho={},To={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=On.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Jm(e,t,i,this.name)}formatOffset(e,t){return lr(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=VT(this.name);let[s,r,o,a,l,c,u]=i.formatToParts?YT(i,t):jT(i,t);a==="BC"&&(s=-Math.abs(s)+1);const d=ka({year:s,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let f=+t;const g=f%1e3;return f-=g>=0?g:1e3+g,(d-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Sd={};function BT(n,e={}){const t=JSON.stringify([n,e]);let i=Sd[t];return i||(i=new Intl.ListFormat(n,e),Sd[t]=i),i}let tc={};function nc(n,e={}){const t=JSON.stringify([n,e]);let i=tc[t];return i||(i=new Intl.DateTimeFormat(n,e),tc[t]=i),i}let ic={};function XT(n,e={}){const t=JSON.stringify([n,e]);let i=ic[t];return i||(i=new Intl.NumberFormat(n,e),ic[t]=i),i}let sc={};function ZT(n,e={}){const{base:t,...i}=e,s=JSON.stringify([n,i]);let r=sc[s];return r||(r=new Intl.RelativeTimeFormat(n,e),sc[s]=r),r}let tr=null;function $T(){return tr||(tr=new Intl.DateTimeFormat().resolvedOptions().locale,tr)}function HT(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,s;try{i=nc(n).resolvedOptions(),s=n}catch{const l=n.substring(0,t);i=nc(l).resolvedOptions(),s=l}const{numberingSystem:r,calendar:o}=i;return[s,r,o]}}function KT(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function qT(n){const e=[];for(let t=1;t<=12;t++){const i=le.utc(2009,t,1);e.push(n(i))}return e}function JT(n){const e=[];for(let t=1;t<=7;t++){const i=le.utc(2016,11,13+t);e.push(n(i))}return e}function fo(n,e,t,i){const s=n.listingMode();return s==="error"?null:s==="en"?t(e):i(e)}function QT(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class eR{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:r,...o}=i;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=XT(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):vu(e,3);return qe(t,this.padTo)}}}class tR{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&On.create(a).valid?(s=a,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=nc(t,r)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class nR{constructor(e,t,i){this.opts={style:"long",...i},!t&&qm()&&(this.rtf=ZT(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):ER(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}class Ve{static fromOpts(e){return Ve.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,i,s=!1){const r=e||Ke.defaultLocale,o=r||(s?"en-US":$T()),a=t||Ke.defaultNumberingSystem,l=i||Ke.defaultOutputCalendar;return new Ve(o,a,l,r)}static resetCache(){tr=null,tc={},ic={},sc={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i}={}){return Ve.create(e,t,i)}constructor(e,t,i,s){const[r,o,a]=HT(e);this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=i||a||null,this.intl=KT(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=QT(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Ve.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return fo(this,e,t_,()=>{const i=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=qT(r=>this.extract(r,i,"month"))),this.monthsCache[s][e]})}weekdays(e,t=!1){return fo(this,e,s_,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=JT(r=>this.extract(r,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return fo(this,void 0,()=>r_,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[le.utc(2016,11,13,9),le.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return fo(this,e,o_,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[le.utc(-40,1,1),le.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const s=this.dtFormatter(e,t),r=s.formatToParts(),o=r.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new eR(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new tR(e,this.intl,t)}relFormatter(e={}){return new nR(this.intl,this.isEnglish(),e)}listFormatter(e={}){return BT(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let dl=null;class pt extends zr{static get utcInstance(){return dl===null&&(dl=new pt(0)),dl}static instance(e){return e===0?pt.utcInstance:new pt(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new pt(Na(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${lr(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${lr(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return lr(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class iR extends zr{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Xn(n,e){if(ye(n)||n===null)return e;if(n instanceof zr)return n;if(sR(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Fa.instance:t==="utc"||t==="gmt"?pt.utcInstance:pt.parseSpecifier(t)||On.create(n)}else return Oi(n)?pt.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new iR(n)}let Id=()=>Date.now(),bd="system",Od=null,Md=null,Ad=null,Ld=60,Pd;class Ke{static get now(){return Id}static set now(e){Id=e}static set defaultZone(e){bd=e}static get defaultZone(){return Xn(bd,Fa.instance)}static get defaultLocale(){return Od}static set defaultLocale(e){Od=e}static get defaultNumberingSystem(){return Md}static set defaultNumberingSystem(e){Md=e}static get defaultOutputCalendar(){return Ad}static set defaultOutputCalendar(e){Ad=e}static get twoDigitCutoffYear(){return Ld}static set twoDigitCutoffYear(e){Ld=e%100}static get throwOnInvalid(){return Pd}static set throwOnInvalid(e){Pd=e}static resetCaches(){Ve.resetCache(),On.resetCache()}}function ye(n){return typeof n>"u"}function Oi(n){return typeof n=="number"}function Da(n){return typeof n=="number"&&n%1===0}function sR(n){return typeof n=="string"}function rR(n){return Object.prototype.toString.call(n)==="[object Date]"}function qm(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function oR(n){return Array.isArray(n)?n:[n]}function Fd(n,e,t){if(n.length!==0)return n.reduce((i,s)=>{const r=[e(s),s];return i&&t(i[0],r[0])===i[0]?i:r},null)[1]}function aR(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function bs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Cn(n,e,t){return Da(n)&&n>=e&&n<=t}function lR(n,e){return n-e*Math.floor(n/e)}function qe(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function Bn(n){if(!(ye(n)||n===null||n===""))return parseInt(n,10)}function ui(n){if(!(ye(n)||n===null||n===""))return parseFloat(n)}function xu(n){if(!(ye(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function vu(n,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(n*i)/i}function Vr(n){return n%4===0&&(n%100!==0||n%400===0)}function ar(n){return Vr(n)?366:365}function ia(n,e){const t=lR(e-1,12)+1,i=n+(e-t)/12;return t===2?Vr(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function ka(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function sa(n){const e=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,t=n-1,i=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||i===3?53:52}function rc(n){return n>99?n:n>Ke.twoDigitCutoffYear?1900+n:2e3+n}function Jm(n,e,t,i=null){const s=new Date(n),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:e,...r},a=new Intl.DateTimeFormat(t,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Na(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-i:i;return t*60+s}function Qm(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new Dt(`Invalid unit value ${n}`);return e}function ra(n,e){const t={};for(const i in n)if(bs(n,i)){const s=n[i];if(s==null)continue;t[e(i)]=Qm(s)}return t}function lr(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),s=n>=0?"+":"-";switch(e){case"short":return`${s}${qe(t,2)}:${qe(i,2)}`;case"narrow":return`${s}${t}${i>0?`:${i}`:""}`;case"techie":return`${s}${qe(t,2)}${qe(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Ga(n){return aR(n,["hour","minute","second","millisecond"])}const cR=["January","February","March","April","May","June","July","August","September","October","November","December"],e_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],uR=["J","F","M","A","M","J","J","A","S","O","N","D"];function t_(n){switch(n){case"narrow":return[...uR];case"short":return[...e_];case"long":return[...cR];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const n_=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],i_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],hR=["M","T","W","T","F","S","S"];function s_(n){switch(n){case"narrow":return[...hR];case"short":return[...i_];case"long":return[...n_];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const r_=["AM","PM"],dR=["Before Christ","Anno Domini"],fR=["BC","AD"],gR=["B","A"];function o_(n){switch(n){case"narrow":return[...gR];case"short":return[...fR];case"long":return[...dR];default:return null}}function mR(n){return r_[n.hour<12?0:1]}function _R(n,e){return s_(e)[n.weekday-1]}function pR(n,e){return t_(e)[n.month-1]}function yR(n,e){return o_(e)[n.year<0?0:1]}function ER(n,e,t="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&r){const h=n==="days";switch(e){case 1:return h?"tomorrow":`next ${s[n][0]}`;case-1:return h?"yesterday":`last ${s[n][0]}`;case 0:return h?"today":`this ${s[n][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=s[n],u=i?l?c[1]:c[2]||c[1]:l?s[n][0]:n;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Dd(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const xR={D:na,DD:Lm,DDD:Pm,DDDD:Fm,t:Dm,tt:km,ttt:Nm,tttt:Gm,T:Wm,TT:zm,TTT:Vm,TTTT:Um,f:jm,ff:Bm,fff:Zm,ffff:Hm,F:Ym,FF:Xm,FFF:$m,FFFF:Km};class ft{static create(e,t={}){return new ft(e,t)}static parseFormat(e){let t=null,i="",s=!1;const r=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),t=null,i="",s=!s):s||a===t?i+=a:(i.length>0&&r.push({literal:/^\s+$/.test(i),val:i}),i=a,t=a)}return i.length>0&&r.push({literal:s||/^\s+$/.test(i),val:i}),r}static macroTokenToFormatOpts(e){return xR[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return qe(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(f,g)=>this.loc.extract(e,f,g),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>i?mR(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>i?pR(e,f):r(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>i?_R(e,f):r(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),u=f=>{const g=ft.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(e,g):f},h=f=>i?yR(e,f):r({era:f},"era"),d=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?r({day:"numeric"},"day"):this.num(e.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(e.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(e.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(f)}};return Dd(ft.parseFormat(t),d)}formatDurationFromString(e,t){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},r=ft.parseFormat(t),o=r.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=e.shiftTo(...o.map(i).filter(l=>l));return Dd(r,s(a))}}class $t{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const a_=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ks(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function Ns(...n){return e=>n.reduce(([t,i,s],r)=>{const[o,a,l]=r(e,s);return[{...t,...o},a||i,l]},[{},null,1]).slice(0,2)}function Gs(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const s=t.exec(n);if(s)return i(s)}return[null,null]}function l_(...n){return(e,t)=>{const i={};let s;for(s=0;s<n.length;s++)i[n[s]]=Bn(e[t+s]);return[i,null,t+s]}}const c_=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,vR=`(?:${c_.source}?(?:\\[(${a_.source})\\])?)?`,wu=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,u_=RegExp(`${wu.source}${vR}`),Cu=RegExp(`(?:T${u_.source})?`),wR=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,CR=/(\d{4})-?W(\d\d)(?:-?(\d))?/,TR=/(\d{4})-?(\d{3})/,RR=l_("weekYear","weekNumber","weekDay"),SR=l_("year","ordinal"),IR=/(\d{4})-(\d\d)-(\d\d)/,h_=RegExp(`${wu.source} ?(?:${c_.source}|(${a_.source}))?`),bR=RegExp(`(?: ${h_.source})?`);function ds(n,e,t){const i=n[e];return ye(i)?t:Bn(i)}function OR(n,e){return[{year:ds(n,e),month:ds(n,e+1,1),day:ds(n,e+2,1)},null,e+3]}function Ws(n,e){return[{hours:ds(n,e,0),minutes:ds(n,e+1,0),seconds:ds(n,e+2,0),milliseconds:xu(n[e+3])},null,e+4]}function Ur(n,e){const t=!n[e]&&!n[e+1],i=Na(n[e+1],n[e+2]),s=t?null:pt.instance(i);return[{},s,e+3]}function jr(n,e){const t=n[e]?On.create(n[e]):null;return[{},t,e+1]}const MR=RegExp(`^T?${wu.source}$`),AR=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function LR(n){const[e,t,i,s,r,o,a,l,c]=n,u=e[0]==="-",h=l&&l[0]==="-",d=(f,g=!1)=>f!==void 0&&(g||f&&u)?-f:f;return[{years:d(ui(t)),months:d(ui(i)),weeks:d(ui(s)),days:d(ui(r)),hours:d(ui(o)),minutes:d(ui(a)),seconds:d(ui(l),l==="-0"),milliseconds:d(xu(c),h)}]}const PR={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Tu(n,e,t,i,s,r,o){const a={year:e.length===2?rc(Bn(e)):Bn(e),month:e_.indexOf(t)+1,day:Bn(i),hour:Bn(s),minute:Bn(r)};return o&&(a.second=Bn(o)),n&&(a.weekday=n.length>3?n_.indexOf(n)+1:i_.indexOf(n)+1),a}const FR=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function DR(n){const[,e,t,i,s,r,o,a,l,c,u,h]=n,d=Tu(e,s,i,t,r,o,a);let f;return l?f=PR[l]:c?f=0:f=Na(u,h),[d,new pt(f)]}function kR(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const NR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,GR=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,WR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function kd(n){const[,e,t,i,s,r,o,a]=n;return[Tu(e,s,i,t,r,o,a),pt.utcInstance]}function zR(n){const[,e,t,i,s,r,o,a]=n;return[Tu(e,a,t,i,s,r,o),pt.utcInstance]}const VR=ks(wR,Cu),UR=ks(CR,Cu),jR=ks(TR,Cu),YR=ks(u_),d_=Ns(OR,Ws,Ur,jr),BR=Ns(RR,Ws,Ur,jr),XR=Ns(SR,Ws,Ur,jr),ZR=Ns(Ws,Ur,jr);function $R(n){return Gs(n,[VR,d_],[UR,BR],[jR,XR],[YR,ZR])}function HR(n){return Gs(kR(n),[FR,DR])}function KR(n){return Gs(n,[NR,kd],[GR,kd],[WR,zR])}function qR(n){return Gs(n,[AR,LR])}const JR=Ns(Ws);function QR(n){return Gs(n,[MR,JR])}const eS=ks(IR,bR),tS=ks(h_),nS=Ns(Ws,Ur,jr);function iS(n){return Gs(n,[eS,d_],[tS,nS])}const Nd="Invalid Duration",f_={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},sS={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...f_},Ft=146097/400,$i=146097/4800,rS={years:{quarters:4,months:12,weeks:Ft/7,days:Ft,hours:Ft*24,minutes:Ft*24*60,seconds:Ft*24*60*60,milliseconds:Ft*24*60*60*1e3},quarters:{months:3,weeks:Ft/28,days:Ft/4,hours:Ft*24/4,minutes:Ft*24*60/4,seconds:Ft*24*60*60/4,milliseconds:Ft*24*60*60*1e3/4},months:{weeks:$i/7,days:$i,hours:$i*24,minutes:$i*24*60,seconds:$i*24*60*60,milliseconds:$i*24*60*60*1e3},...f_},vi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],oS=vi.slice(0).reverse();function Wn(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new we(i)}function g_(n,e){let t=e.milliseconds??0;for(const i of oS.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function Gd(n,e){const t=g_(n,e)<0?-1:1;vi.reduceRight((i,s)=>{if(ye(e[s]))return i;if(i){const r=e[i]*t,o=n[s][i],a=Math.floor(r/o);e[s]+=a*t,e[i]-=a*o*t}return s},null),vi.reduce((i,s)=>{if(ye(e[s]))return i;if(i){const r=e[i]%1;e[i]-=r,e[s]+=r*n[i][s]}return s},null)}function aS(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class we{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?rS:sS;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Ve.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return we.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Dt(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new we({values:ra(e,we.normalizeUnit),loc:Ve.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Oi(e))return we.fromMillis(e);if(we.isDuration(e))return e;if(typeof e=="object")return we.fromObject(e);throw new Dt(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=qR(e);return i?we.fromObject(i,t):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=QR(e);return i?we.fromObject(i,t):we.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Dt("need to specify a reason the Duration is invalid");const i=e instanceof $t?e:new $t(e,t);if(Ke.throwOnInvalid)throw new GT(i);return new we({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Am(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?ft.create(this.loc,i).formatDurationFromString(this,e):Nd}toHuman(e={}){if(!this.isValid)return Nd;const t=vi.map(i=>{const s=this.values[i];return ye(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=vu(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},le.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?g_(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=we.fromDurationLike(e),i={};for(const s of vi)(bs(t.values,s)||bs(this.values,s))&&(i[s]=t.get(s)+this.get(s));return Wn(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=we.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=Qm(e(this.values[i],i));return Wn(this,{values:t},!0)}get(e){return this[we.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...ra(e,we.normalizeUnit)};return Wn(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:i};return Wn(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Gd(this.matrix,e),Wn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=aS(this.normalize().shiftToAll().toObject());return Wn(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>we.normalizeUnit(o));const t={},i={},s=this.toObject();let r;for(const o of vi)if(e.indexOf(o)>=0){r=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Oi(s[o])&&(a+=s[o]);const l=Math.trunc(a);t[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Oi(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(t[r]+=o===r?i[o]:i[o]/this.matrix[r][o]);return Gd(this.matrix,t),Wn(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Wn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of vi)if(!t(this.values[i],e.values[i]))return!1;return!0}}const Hi="Invalid Interval";function lS(n,e){return!n||!n.isValid?Xe.invalid("missing or invalid start"):!e||!e.isValid?Xe.invalid("missing or invalid end"):e<n?Xe.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class Xe{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Dt("need to specify a reason the Interval is invalid");const i=e instanceof $t?e:new $t(e,t);if(Ke.throwOnInvalid)throw new NT(i);return new Xe({invalid:i})}static fromDateTimes(e,t){const i=Hs(e),s=Hs(t),r=lS(i,s);return r??new Xe({start:i,end:s})}static after(e,t){const i=we.fromDurationLike(t),s=Hs(e);return Xe.fromDateTimes(s,s.plus(i))}static before(e,t){const i=we.fromDurationLike(t),s=Hs(e);return Xe.fromDateTimes(s.minus(i),s)}static fromISO(e,t){const[i,s]=(e||"").split("/",2);if(i&&s){let r,o;try{r=le.fromISO(i,t),o=r.isValid}catch{o=!1}let a,l;try{a=le.fromISO(s,t),l=a.isValid}catch{l=!1}if(o&&l)return Xe.fromDateTimes(r,a);if(o){const c=we.fromISO(s,t);if(c.isValid)return Xe.after(r,c)}else if(l){const c=we.fromISO(i,t);if(c.isValid)return Xe.before(a,c)}}return Xe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const t=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(t,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Xe.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Hs).filter(o=>this.contains(o)).sort(),i=[];let{s}=this,r=0;for(;s<this.e;){const o=t[r]||this.e,a=+o>+this.e?this.e:o;i.push(Xe.fromDateTimes(s,a)),s=a,r+=1}return i}splitBy(e){const t=we.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,s=1,r;const o=[];for(;i<this.e;){const a=this.start.plus(t.mapUnits(l=>l*s));r=+a>+this.e?this.e:a,o.push(Xe.fromDateTimes(i,r)),i=r,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:Xe.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Xe.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((s,r)=>s.s-r.s).reduce(([s,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[s,r.union(o)]:[s.concat([r]),o]:[s,o],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const s=[],r=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?t=l.time:(t&&+t!=+l.time&&s.push(Xe.fromDateTimes(t,l.time)),t=null);return Xe.merge(s)}difference(...e){return Xe.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Hi}toLocaleString(e=na,t={}){return this.isValid?ft.create(this.s.loc.clone(t),e).formatInterval(this):Hi}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Hi}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Hi}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Hi}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Hi}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):we.invalid(this.invalidReason)}mapEndpoints(e){return Xe.fromDateTimes(e(this.s),e(this.e))}}class go{static hasDST(e=Ke.defaultZone){const t=le.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return On.isValidZone(e)}static normalizeZone(e){return Xn(e,Ke.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Ve.create(t,i,r)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Ve.create(t,i,r)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Ve.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Ve.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Ve.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Ve.create(t,null,"gregory").eras(e)}static features(){return{relative:qm()}}}function Wd(n,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(we.fromMillis(i).as("days"))}function cS(n,e,t){const i=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Wd(l,c);return(u-u%7)/7}],["days",Wd]],s={},r=n;let o,a;for(const[l,c]of i)t.indexOf(l)>=0&&(o=l,s[l]=c(n,e),a=r.plus(s),a>e?(s[l]--,n=r.plus(s),n>e&&(a=n,s[l]--,n=r.plus(s))):n=a);return[n,s,a,o]}function uS(n,e,t,i){let[s,r,o,a]=cS(n,e,t);const l=e-s,c=t.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(r[a]=(r[a]||0)+l/(o-s)));const u=we.fromObject(r,i);return c.length>0?we.fromMillis(l,i).shiftTo(...c).plus(u):u}const Ru={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},zd={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hS=Ru.hanidec.replace(/[\[|\]]/g,"").split("");function dS(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Ru.hanidec)!==-1)e+=hS.indexOf(n[t]);else for(const s in zd){const[r,o]=zd[s];i>=r&&i<=o&&(e+=i-r)}}return parseInt(e,10)}else return e}function Vt({numberingSystem:n},e=""){return new RegExp(`${Ru[n||"latn"]}${e}`)}const fS="missing Intl.DateTimeFormat.formatToParts support";function Se(n,e=t=>t){return{regex:n,deser:([t])=>e(dS(t))}}const gS=String.fromCharCode(160),m_=`[ ${gS}]`,__=new RegExp(m_,"g");function mS(n){return n.replace(/\./g,"\\.?").replace(__,m_)}function Vd(n){return n.replace(/\./g,"").replace(__," ").toLowerCase()}function Ut(n,e){return n===null?null:{regex:RegExp(n.map(mS).join("|")),deser:([t])=>n.findIndex(i=>Vd(t)===Vd(i))+e}}function Ud(n,e){return{regex:n,deser:([,t,i])=>Na(t,i),groups:e}}function mo(n){return{regex:n,deser:([e])=>e}}function _S(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function pS(n,e){const t=Vt(e),i=Vt(e,"{2}"),s=Vt(e,"{3}"),r=Vt(e,"{4}"),o=Vt(e,"{6}"),a=Vt(e,"{1,2}"),l=Vt(e,"{1,3}"),c=Vt(e,"{1,6}"),u=Vt(e,"{1,9}"),h=Vt(e,"{2,4}"),d=Vt(e,"{4,6}"),f=_=>({regex:RegExp(_S(_.val)),deser:([p])=>p,literal:!0}),m=(_=>{if(n.literal)return f(_);switch(_.val){case"G":return Ut(e.eras("short"),0);case"GG":return Ut(e.eras("long"),0);case"y":return Se(c);case"yy":return Se(h,rc);case"yyyy":return Se(r);case"yyyyy":return Se(d);case"yyyyyy":return Se(o);case"M":return Se(a);case"MM":return Se(i);case"MMM":return Ut(e.months("short",!0),1);case"MMMM":return Ut(e.months("long",!0),1);case"L":return Se(a);case"LL":return Se(i);case"LLL":return Ut(e.months("short",!1),1);case"LLLL":return Ut(e.months("long",!1),1);case"d":return Se(a);case"dd":return Se(i);case"o":return Se(l);case"ooo":return Se(s);case"HH":return Se(i);case"H":return Se(a);case"hh":return Se(i);case"h":return Se(a);case"mm":return Se(i);case"m":return Se(a);case"q":return Se(a);case"qq":return Se(i);case"s":return Se(a);case"ss":return Se(i);case"S":return Se(l);case"SSS":return Se(s);case"u":return mo(u);case"uu":return mo(a);case"uuu":return Se(t);case"a":return Ut(e.meridiems(),0);case"kkkk":return Se(r);case"kk":return Se(h,rc);case"W":return Se(a);case"WW":return Se(i);case"E":case"c":return Se(t);case"EEE":return Ut(e.weekdays("short",!1),1);case"EEEE":return Ut(e.weekdays("long",!1),1);case"ccc":return Ut(e.weekdays("short",!0),1);case"cccc":return Ut(e.weekdays("long",!0),1);case"Z":case"ZZ":return Ud(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return Ud(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return mo(/[a-z_+-/]{1,256}?/i);case" ":return mo(/[^\S\n\r]/);default:return f(_)}})(n)||{invalidReason:fS};return m.token=n,m}const yS={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ES(n,e,t){const{type:i,value:s}=n;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const r=e[i];let o=i;i==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=yS[o];if(typeof a=="object"&&(a=a[r]),a)return{literal:!1,val:a}}function xS(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function vS(n,e,t){const i=n.match(e);if(i){const s={};let r=1;for(const o in t)if(bs(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(r,r+l))),r+=l}return[i,s]}else return[i,{}]}function wS(n){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return ye(n.z)||(t=On.create(n.z)),ye(n.Z)||(t||(t=new pt(n.Z)),i=n.Z),ye(n.q)||(n.M=(n.q-1)*3+1),ye(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),ye(n.u)||(n.S=xu(n.u)),[Object.keys(n).reduce((r,o)=>{const a=e(o);return a&&(r[a]=n[o]),r},{}),t,i]}let fl=null;function CS(){return fl||(fl=le.fromMillis(1555555555555)),fl}function TS(n,e){if(n.literal)return n;const t=ft.macroTokenToFormatOpts(n.val),i=E_(t,e);return i==null||i.includes(void 0)?n:i}function p_(n,e){return Array.prototype.concat(...n.map(t=>TS(t,e)))}function y_(n,e,t){const i=p_(ft.parseFormat(t),n),s=i.map(o=>pS(o,n)),r=s.find(o=>o.invalidReason);if(r)return{input:e,tokens:i,invalidReason:r.invalidReason};{const[o,a]=xS(s),l=RegExp(o,"i"),[c,u]=vS(e,l,a),[h,d,f]=u?wS(u):[null,null,void 0];if(bs(u,"a")&&bs(u,"H"))throw new er("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:l,rawMatches:c,matches:u,result:h,zone:d,specificOffset:f}}}function RS(n,e,t){const{result:i,zone:s,specificOffset:r,invalidReason:o}=y_(n,e,t);return[i,s,r,o]}function E_(n,e){if(!n)return null;const i=ft.create(e,n).dtFormatter(CS()),s=i.formatToParts(),r=i.resolvedOptions();return s.map(o=>ES(o,n,r))}const x_=[0,31,59,90,120,151,181,212,243,273,304,334],v_=[0,31,60,91,121,152,182,213,244,274,305,335];function kt(n,e){return new $t("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function w_(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function C_(n,e,t){return t+(Vr(n)?v_:x_)[e-1]}function T_(n,e){const t=Vr(n)?v_:x_,i=t.findIndex(r=>r<e),s=e-t[i];return{month:i+1,day:s}}function oc(n){const{year:e,month:t,day:i}=n,s=C_(e,t,i),r=w_(e,t,i);let o=Math.floor((s-r+10)/7),a;return o<1?(a=e-1,o=sa(a)):o>sa(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:r,...Ga(n)}}function jd(n){const{weekYear:e,weekNumber:t,weekday:i}=n,s=w_(e,1,4),r=ar(e);let o=t*7+i-s-3,a;o<1?(a=e-1,o+=ar(a)):o>r?(a=e+1,o-=ar(e)):a=e;const{month:l,day:c}=T_(a,o);return{year:a,month:l,day:c,...Ga(n)}}function gl(n){const{year:e,month:t,day:i}=n,s=C_(e,t,i);return{year:e,ordinal:s,...Ga(n)}}function Yd(n){const{year:e,ordinal:t}=n,{month:i,day:s}=T_(e,t);return{year:e,month:i,day:s,...Ga(n)}}function SS(n){const e=Da(n.weekYear),t=Cn(n.weekNumber,1,sa(n.weekYear)),i=Cn(n.weekday,1,7);return e?t?i?!1:kt("weekday",n.weekday):kt("week",n.week):kt("weekYear",n.weekYear)}function IS(n){const e=Da(n.year),t=Cn(n.ordinal,1,ar(n.year));return e?t?!1:kt("ordinal",n.ordinal):kt("year",n.year)}function R_(n){const e=Da(n.year),t=Cn(n.month,1,12),i=Cn(n.day,1,ia(n.year,n.month));return e?t?i?!1:kt("day",n.day):kt("month",n.month):kt("year",n.year)}function S_(n){const{hour:e,minute:t,second:i,millisecond:s}=n,r=Cn(e,0,23)||e===24&&t===0&&i===0&&s===0,o=Cn(t,0,59),a=Cn(i,0,59),l=Cn(s,0,999);return r?o?a?l?!1:kt("millisecond",s):kt("second",i):kt("minute",t):kt("hour",e)}const ml="Invalid DateTime",Bd=864e13;function _o(n){return new $t("unsupported zone",`the zone "${n.name}" is not supported`)}function _l(n){return n.weekData===null&&(n.weekData=oc(n.c)),n.weekData}function hi(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new le({...t,...e,old:t})}function I_(n,e,t){let i=n-e*60*1e3;const s=t.offset(i);if(e===s)return[i,e];i-=(s-e)*60*1e3;const r=t.offset(i);return s===r?[i,s]:[n-Math.min(s,r)*60*1e3,Math.max(s,r)]}function po(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Ro(n,e,t){return I_(ka(n),e,t)}function Xd(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),s=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...n.c,year:i,month:s,day:Math.min(n.c.day,ia(i,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=we.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=ka(r);let[l,c]=I_(a,t,n.zone);return o!==0&&(l+=o,c=n.zone.offset(l)),{ts:l,o:c}}function $s(n,e,t,i,s,r){const{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){const l=e||a,c=le.fromObject(n,{...t,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return le.invalid(new $t("unparsable",`the input "${s}" can't be parsed as ${i}`))}function yo(n,e,t=!0){return n.isValid?ft.create(Ve.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function pl(n,e){const t=n.c.year>9999||n.c.year<0;let i="";return t&&n.c.year>=0&&(i+="+"),i+=qe(n.c.year,t?6:4),e?(i+="-",i+=qe(n.c.month),i+="-",i+=qe(n.c.day)):(i+=qe(n.c.month),i+=qe(n.c.day)),i}function Zd(n,e,t,i,s,r){let o=qe(n.c.hour);return e?(o+=":",o+=qe(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=qe(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=qe(n.c.second),(n.c.millisecond!==0||!i)&&(o+=".",o+=qe(n.c.millisecond,3))),s&&(n.isOffsetFixed&&n.offset===0&&!r?o+="Z":n.o<0?(o+="-",o+=qe(Math.trunc(-n.o/60)),o+=":",o+=qe(Math.trunc(-n.o%60))):(o+="+",o+=qe(Math.trunc(n.o/60)),o+=":",o+=qe(Math.trunc(n.o%60)))),r&&(o+="["+n.zone.ianaName+"]"),o}const b_={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},bS={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},OS={ordinal:1,hour:0,minute:0,second:0,millisecond:0},O_=["year","month","day","hour","minute","second","millisecond"],MS=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],AS=["year","ordinal","hour","minute","second","millisecond"];function $d(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Am(n);return e}function Hd(n,e){const t=Xn(e.zone,Ke.defaultZone),i=Ve.fromObject(e),s=Ke.now();let r,o;if(ye(n.year))r=s;else{for(const c of O_)ye(n[c])&&(n[c]=b_[c]);const a=R_(n)||S_(n);if(a)return le.invalid(a);const l=t.offset(s);[r,o]=Ro(n,l,t)}return new le({ts:r,zone:t,loc:i,o})}function Kd(n,e,t){const i=ye(t.round)?!0:t.round,s=(o,a)=>(o=vu(o,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),r=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return s(r(t.unit),t.unit);for(const o of t.units){const a=r(o);if(Math.abs(a)>=1)return s(a,o)}return s(n>e?-0:0,t.units[t.units.length-1])}function qd(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}class le{constructor(e){const t=e.zone||Ke.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new $t("invalid input"):null)||(t.isValid?null:_o(t));this.ts=ye(e.ts)?Ke.now():e.ts;let s=null,r=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,r]=[e.old.c,e.old.o];else{const a=t.offset(this.ts);s=po(this.ts,a),i=Number.isNaN(s.year)?new $t("invalid input"):null,s=i?null:s,r=i?null:a}this._zone=t,this.loc=e.loc||Ve.create(),this.invalid=i,this.weekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new le({})}static local(){const[e,t]=qd(arguments),[i,s,r,o,a,l,c]=t;return Hd({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,t]=qd(arguments),[i,s,r,o,a,l,c]=t;return e.zone=pt.utcInstance,Hd({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const i=rR(e)?e.valueOf():NaN;if(Number.isNaN(i))return le.invalid("invalid input");const s=Xn(t.zone,Ke.defaultZone);return s.isValid?new le({ts:i,zone:s,loc:Ve.fromObject(t)}):le.invalid(_o(s))}static fromMillis(e,t={}){if(Oi(e))return e<-Bd||e>Bd?le.invalid("Timestamp out of range"):new le({ts:e,zone:Xn(t.zone,Ke.defaultZone),loc:Ve.fromObject(t)});throw new Dt(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Oi(e))return new le({ts:e*1e3,zone:Xn(t.zone,Ke.defaultZone),loc:Ve.fromObject(t)});throw new Dt("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Xn(t.zone,Ke.defaultZone);if(!i.isValid)return le.invalid(_o(i));const s=Ke.now(),r=ye(t.specificOffset)?i.offset(s):t.specificOffset,o=ra(e,$d),a=!ye(o.ordinal),l=!ye(o.year),c=!ye(o.month)||!ye(o.day),u=l||c,h=o.weekYear||o.weekNumber,d=Ve.fromObject(t);if((u||a)&&h)throw new er("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new er("Can't mix ordinal dates with month/day");const f=h||o.weekday&&!u;let g,m,_=po(s,r);f?(g=MS,m=bS,_=oc(_)):a?(g=AS,m=OS,_=gl(_)):(g=O_,m=b_);let p=!1;for(const A of g){const Z=o[A];ye(Z)?p?o[A]=m[A]:o[A]=_[A]:p=!0}const x=f?SS(o):a?IS(o):R_(o),w=x||S_(o);if(w)return le.invalid(w);const v=f?jd(o):a?Yd(o):o,[T,R]=Ro(v,r,i),M=new le({ts:T,zone:i,o:R,loc:d});return o.weekday&&u&&e.weekday!==M.weekday?le.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${M.toISO()}`):M}static fromISO(e,t={}){const[i,s]=$R(e);return $s(i,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,s]=HR(e);return $s(i,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,s]=KR(e);return $s(i,s,t,"HTTP",t)}static fromFormat(e,t,i={}){if(ye(e)||ye(t))throw new Dt("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=i,o=Ve.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=RS(o,e,t);return u?le.invalid(u):$s(a,l,i,`format ${t}`,e,c)}static fromString(e,t,i={}){return le.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,s]=iS(e);return $s(i,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Dt("need to specify a reason the DateTime is invalid");const i=e instanceof $t?e:new $t(e,t);if(Ke.throwOnInvalid)throw new kT(i);return new le({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=E_(e,Ve.fromObject(t));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return p_(ft.parseFormat(e),Ve.fromObject(t)).map(s=>s.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?_l(this).weekYear:NaN}get weekNumber(){return this.isValid?_l(this).weekNumber:NaN}get weekday(){return this.isValid?_l(this).weekday:NaN}get ordinal(){return this.isValid?gl(this.c).ordinal:NaN}get monthShort(){return this.isValid?go.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?go.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?go.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?go.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=ka(this.c),s=this.zone.offset(i-e),r=this.zone.offset(i+e),o=this.zone.offset(i-s*t),a=this.zone.offset(i-r*t);if(o===a)return[this];const l=i-o*t,c=i-a*t,u=po(l,o),h=po(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[hi(this,{ts:l}),hi(this,{ts:c})]:[this]}get isInLeapYear(){return Vr(this.year)}get daysInMonth(){return ia(this.year,this.month)}get daysInYear(){return this.isValid?ar(this.year):NaN}get weeksInWeekYear(){return this.isValid?sa(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:s}=ft.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(pt.instance(e),t)}toLocal(){return this.setZone(Ke.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Xn(e,Ke.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||i){const r=e.offset(this.ts),o=this.toObject();[s]=Ro(o,r,e)}return hi(this,{ts:s,zone:e})}else return le.invalid(_o(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return hi(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=ra(e,$d),i=!ye(t.weekYear)||!ye(t.weekNumber)||!ye(t.weekday),s=!ye(t.ordinal),r=!ye(t.year),o=!ye(t.month)||!ye(t.day),a=r||o,l=t.weekYear||t.weekNumber;if((a||s)&&l)throw new er("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new er("Can't mix ordinal dates with month/day");let c;i?c=jd({...oc(this.c),...t}):ye(t.ordinal)?(c={...this.toObject(),...t},ye(t.day)&&(c.day=Math.min(ia(c.year,c.month),c.day))):c=Yd({...gl(this.c),...t});const[u,h]=Ro(c,this.o,this.zone);return hi(this,{ts:u,o:h})}plus(e){if(!this.isValid)return this;const t=we.fromDurationLike(e);return hi(this,Xd(this,t))}minus(e){if(!this.isValid)return this;const t=we.fromDurationLike(e).negate();return hi(this,Xd(this,t))}startOf(e){if(!this.isValid)return this;const t={},i=we.normalizeUnit(e);switch(i){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(i==="weeks"&&(t.weekday=1),i==="quarters"){const s=Math.ceil(this.month/3);t.month=(s-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?ft.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):ml}toLocaleString(e=na,t={}){return this.isValid?ft.create(this.loc.clone(t),e).formatDateTime(this):ml}toLocaleParts(e={}){return this.isValid?ft.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=pl(this,o);return a+="T",a+=Zd(this,o,t,i,s,r),a}toISODate({format:e="extended"}={}){return this.isValid?pl(this,e==="extended"):null}toISOWeekDate(){return yo(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Zd(this,o==="extended",t,e,i,r):null}toRFC2822(){return yo(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yo(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?pl(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(i&&(s+=" "),t?s+="z":e&&(s+="ZZ")),yo(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():ml}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return we.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=oR(t).map(we.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=uS(a,l,r,s);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(le.now(),e,t)}until(e){return this.isValid?Xe.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t)<=i&&i<=s.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||le.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(s=e.unit,r=void 0),Kd(t,this.plus(i),{...e,numeric:"always",units:s,unit:r})}toRelativeCalendar(e={}){return this.isValid?Kd(e.base||le.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(le.isDateTime))throw new Dt("min requires all arguments be DateTimes");return Fd(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(le.isDateTime))throw new Dt("max requires all arguments be DateTimes");return Fd(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:s=null,numberingSystem:r=null}=i,o=Ve.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return y_(o,e,t)}static fromStringExplain(e,t,i={}){return le.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return na}static get DATE_MED(){return Lm}static get DATE_MED_WITH_WEEKDAY(){return WT}static get DATE_FULL(){return Pm}static get DATE_HUGE(){return Fm}static get TIME_SIMPLE(){return Dm}static get TIME_WITH_SECONDS(){return km}static get TIME_WITH_SHORT_OFFSET(){return Nm}static get TIME_WITH_LONG_OFFSET(){return Gm}static get TIME_24_SIMPLE(){return Wm}static get TIME_24_WITH_SECONDS(){return zm}static get TIME_24_WITH_SHORT_OFFSET(){return Vm}static get TIME_24_WITH_LONG_OFFSET(){return Um}static get DATETIME_SHORT(){return jm}static get DATETIME_SHORT_WITH_SECONDS(){return Ym}static get DATETIME_MED(){return Bm}static get DATETIME_MED_WITH_SECONDS(){return Xm}static get DATETIME_MED_WITH_WEEKDAY(){return zT}static get DATETIME_FULL(){return Zm}static get DATETIME_FULL_WITH_SECONDS(){return $m}static get DATETIME_HUGE(){return Hm}static get DATETIME_HUGE_WITH_SECONDS(){return Km}}function Hs(n){if(le.isDateTime(n))return n;if(n&&n.valueOf&&Oi(n.valueOf()))return le.fromJSDate(n);if(n&&typeof n=="object")return le.fromObject(n);throw new Dt(`Unknown datetime argument: ${n}, of type ${typeof n}`)}function M_(n,e){let t=le.fromISO(n);return e&&(t=t.setZone(`UTC+${e}`)),t.toLocaleString({weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}function LS(n){if(!n)return"UTC";let e="GMT";return n>0&&(e+="+"),e+n.toString()}function PS(n){const e=Math.floor(n/86400);n-=e*(60*60*24);const t=Math.floor(n/(60*60));n-=t*(60*60);const i=Math.floor(n/60);return n-=i*60,e>0?`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}`:`${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}`}const A_=document.createElement("i"),L_=document.createElement("i");A_.setAttribute("class","fa-solid fa-expand");L_.setAttribute("class","fa-solid fa-compress");const FS={props:{geojsons:Array,activityFiles:Array,timezoneOffsetHoursList:Array},data(){return{popupFreeze:new Boolean,popupRecord:new Rd,popupTimezoneOffsetHours:new Number(0),popupOverlay:new Td({}),vec:new YC({source:new TT({features:[]}),visible:!0,style:new bi({stroke:new uu({color:[60,99,130,1],width:3})})}),map:new fw({controls:[],layers:[new _1({source:new yT})],view:new on({enableRotation:!1,projection:"EPSG:4326"})})}},watch:{geojsons:{handler(n){this.updateMapSource(n)}}},methods:{toStringHDMS:lx,toTimezoneDateString:M_,updateMapSource(n){var o,a;const e=this.map.getView(),t=this.vec.getSource(),i=new Array;for(let l=0;l<n.length;l++){const c=new Gw().readFeature(n[l]);c.setId("lineString-"+l),i.push(c)}t.clear(),t.addFeatures(i),e.fit(t.getExtent(),{padding:[50,50,50,50]}),this.map.getControls().forEach(l=>this.map.removeControl(l)),Zg().forEach(l=>this.map.addControl(l)),this.map.addControl(new FT({extent:e.getViewStateAndExtent().extent})),this.map.addControl(new bT({label:A_,labelActive:L_})),this.map.addControl(new LT);const s=new Array,r=new Array;for(let l=0;l<i.length;l++){const c=new $l(new Ts(((o=i[l])==null?void 0:o.getGeometry()).getFirstCoordinate()));c.setStyle(new bi({image:new Jo({crossOrigin:"anonymous",src:fE,scale:.8})})),c.setId("startingPoint-"+l),s.push(c);const u=new $l(new Ts(((a=i[l])==null?void 0:a.getGeometry()).getLastCoordinate()));u.setStyle(new bi({image:new Jo({crossOrigin:"anonymous",src:dE,scale:.8})})),u.setId("destinationPoint-"+l),r.push(u)}t.addFeatures(s),t.addFeatures(r)},findNearestRecord(n,e){var r;const t=Number(n.split("-")[1]);let i=new Rd,s=Number.MAX_VALUE;return this.popupTimezoneOffsetHours=this.timezoneOffsetHoursList[t],(r=this.activityFiles[t].records)==null||r.forEach(o=>{if(!o.positionLong||!o.positionLat)return;const a=Math.abs(Math.sqrt(Math.pow(o.positionLong-e[0],2)+Math.pow(o.positionLat-e[1],2)));a<s&&(s=a,i=o)}),i},lineStringFeatureListener(n,e){n=="singleclick"&&(this.popupFreeze=!this.popupFreeze&&this.popupOverlay.getPosition()!=null),this.popupFreeze||this.popupOverlay.setPosition(void 0),!(this.popupFreeze==!0&&this.popupOverlay.getPosition()!=null)&&this.map.forEachFeatureAtPixel(e.pixel,t=>{t.getGeometry()instanceof $o&&(this.popupRecord=this.findNearestRecord(t.getId(),e.coordinate),this.popupOverlay.setPosition([this.popupRecord.positionLong,this.popupRecord.positionLat]),this.popupFreeze=n=="singleclick")},{hitTolerance:10})}},mounted(){this.popupOverlay=new Td({element:document.getElementById("popup")}),this.map.addOverlay(this.popupOverlay),this.map.addLayer(this.vec),this.map.setTarget("map"),this.map.on("precompose",()=>this.popupOverlay.setPosition(void 0)),this.map.on("pointermove",n=>this.lineStringFeatureListener(n.type,n)),this.map.on("singleclick",n=>this.lineStringFeatureListener(n.type,n))}};const Su=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},DS=O("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1),kS={id:"popup",class:"ol-popup"},NS={class:"popup-content"},GS=O("span",null,"Time:",-1),WS=O("span",null,"Distance:",-1),zS=O("span",null,"km",-1),VS=O("span",null,"Speed:",-1),US=O("span",null,"km/h",-1),jS=O("span",null,"Cadence:",-1),YS=O("span",null,"rpm",-1),BS=O("span",null,"Heart Rate:",-1),XS=O("span",null,"bpm",-1),ZS=O("span",null,"Power:",-1),$S=O("span",null,"watts",-1),HS=O("span",null,"Altitude:",-1),KS=O("span",null,"masl",-1),qS=O("span",null,"Location:",-1);function JS(n,e,t,i,s,r){var o;return Pe(),We(Yt,null,[DS,O("div",kS,[O("div",NS,[O("div",null,[GS,O("span",null,Fe(s.popupRecord.timestamp?r.toTimezoneDateString(s.popupRecord.timestamp,s.popupTimezoneOffsetHours):"-"),1)]),O("div",null,[WS,O("span",null,Fe(s.popupRecord.distance?(s.popupRecord.distance/1e3).toFixed(2):"-"),1),zS]),O("div",null,[VS,O("span",null,Fe(s.popupRecord.speed?(s.popupRecord.speed*3600/1e3).toFixed(2):"-"),1),US]),O("div",null,[jS,O("span",null,Fe(s.popupRecord.cadence?s.popupRecord.cadence:"-"),1),YS]),O("div",null,[BS,O("span",null,Fe(s.popupRecord.heartRate?s.popupRecord.heartRate:"-"),1),XS]),O("div",null,[ZS,O("span",null,Fe(s.popupRecord.power?s.popupRecord.power:"-"),1),$S]),O("div",null,[HS,O("span",null,Fe(s.popupRecord.altitude?(o=s.popupRecord.altitude)==null?void 0:o.toFixed(2):"-"),1),KS]),O("div",null,[qS,O("span",null,Fe(s.popupRecord.positionLong&&s.popupRecord.positionLat?r.toStringHDMS([s.popupRecord.positionLong,s.popupRecord.positionLat]):"-"),1)])])])],64)}const QS=Su(FS,[["render",JS]]),eI={props:{elevations:{}}};const tI={key:0,class:"elevation"};function nI(n,e,t,i,s,r){return t.elevations?(Pe(),We("div",tI,"Elevation")):Be("",!0)}const iI=Su(eI,[["render",nI]]);class sI{constructor(){ce(this,"sport",null);ce(this,"subSport",null);ce(this,"totalMovingTime",null);ce(this,"totalElapsedTime",null);ce(this,"totalTimerTime",null);ce(this,"totalDistance",null);ce(this,"totalAscent",null);ce(this,"totalDescent",null);ce(this,"totalCycles",null);ce(this,"totalCalories",null);ce(this,"avgSpeed",null);ce(this,"maxSpeed",null);ce(this,"avgHeartRate",null);ce(this,"maxHeartRate",null);ce(this,"avgCadence",null);ce(this,"maxCadence",null);ce(this,"avgPower",null);ce(this,"maxPower",null);ce(this,"avgTemperature",null);ce(this,"maxTemperature",null);ce(this,"avgAltitude",null);ce(this,"maxAltitude",null)}}function di(...n){let e=0,t=0;for(let i=0;i<n.length;i++){const s=n[i];s&&(t+=s,e++)}return e==0?null:t/e}function fi(...n){let e=0,t=0;for(let i=0;i<n.length;i++){const s=n[i];s&&(s>e&&(e=s),t++)}return t==0?null:e}function pn(...n){let e=0,t=0;for(let i=0;i<n.length;i++){const s=n[i];s&&(e+=s,t++)}return t==0?null:e}const rI={props:{activityFiles:Array,timezoneOffsetHours:Number},computed:{summary(){const n=new sI;for(let e=0;e<this.activityFiles.length;e++)for(let t=0;t<this.activityFiles[e].sessions.length;t++){const i=this.activityFiles[e].sessions[t];n.sport=i.sport,n.subSport=i.subSport,n.totalMovingTime=pn(n.totalMovingTime,i.totalMovingTime),n.totalElapsedTime=pn(n.totalElapsedTime,i.totalElapsedTime),n.totalTimerTime=pn(n.totalTimerTime,i.totalTimerTime),n.totalDistance=pn(n.totalDistance,i.totalDistance),n.totalAscent=pn(n.totalAscent,i.totalAscent),n.totalDescent=pn(n.totalDescent,i.totalDescent),n.totalCycles=pn(n.totalCycles,i.totalCycles),n.totalCalories=pn(n.totalCalories,i.totalCalories),n.avgSpeed=di(n.avgSpeed,i.avgSpeed),n.maxSpeed=fi(n.maxSpeed,i.maxSpeed),n.avgHeartRate=di(n.avgHeartRate,i.avgHeartRate),n.maxHeartRate=fi(n.maxHeartRate,i.maxHeartRate),n.avgCadence=di(n.avgCadence,i.avgCadence),n.maxCadence=fi(n.maxCadence,i.maxCadence),n.avgPower=di(n.avgPower,i.avgPower),n.maxPower=fi(n.maxPower,i.maxPower),n.avgTemperature=di(n.avgTemperature,i.avgTemperature),n.maxTemperature=fi(n.maxTemperature,i.maxTemperature),n.avgAltitude=di(n.avgAltitude,i.avgAltitude),n.maxAltitude=fi(n.maxAltitude,i.maxAltitude)}return n}},methods:{toTimezoneDateString:M_,GMTString:LS,secondsToDHMS:PS,avg:di,max:fi,sum:pn}};const oI=O("div",{style:{"text-align":"center"}},[O("input",{class:"input",type:"file",id:"fileInput",accept:".fit",multiple:""})],-1),aI={class:"analysis"},lI={class:"summary"},cI={key:0,class:"section-title"},uI={class:"summary-grid"},hI={key:0,class:"summary-item"},dI=O("div",{class:"summary-title"},"Sport",-1),fI={class:"summary-value"},gI={key:1,class:"summary-item"},mI=O("div",{class:"summary-title"},"Sub Sport",-1),_I={class:"summary-value"},pI={class:"summary-grid"},yI={key:0,class:"summary-item"},EI=O("div",{class:"summary-title"},"Total Moving Time",-1),xI={class:"summary-value"},vI=O("i",{class:"fa-solid fa-hourglass-half"},null,-1),wI={key:1,class:"summary-item"},CI=O("div",{class:"summary-title"},"Total Elapsed Time",-1),TI={class:"summary-value"},RI=O("i",{class:"fa-solid fa-hourglass-end"},null,-1),SI={class:"summary-grid"},II={key:0,class:"summary-item"},bI=O("div",{class:"summary-title"},"Total Distance",-1),OI={class:"summary-value"},MI=O("i",{class:"fa-solid fa-road"},null,-1),AI={key:1,class:"summary-item"},LI=O("div",{class:"summary-title"},"Total Calories",-1),PI={class:"summary-value"},FI=O("i",{class:"fa-solid fa-droplet"},null,-1),DI={class:"summary-grid"},kI={key:0,class:"summary-item"},NI=O("div",{class:"summary-title"},"Avg Speed",-1),GI={class:"summary-value"},WI=O("i",{class:"fa-solid fa-gauge"},null,-1),zI={key:1,class:"summary-item"},VI=O("div",{class:"summary-title"},"Max Speed",-1),UI={class:"summary-value"},jI=O("i",{class:"fa-solid fa-gauge-high"},null,-1),YI={class:"summary-grid"},BI={key:0,class:"summary-item"},XI=O("div",{class:"summary-title"},"Avg Heart Rate",-1),ZI={class:"summary-value"},$I=O("i",{class:"fa-solid fa-heart-pulse"},null,-1),HI={key:1,class:"summary-item"},KI=O("div",{class:"summary-title"},"Max Heart Rate",-1),qI={class:"summary-value"},JI=O("i",{class:"fa-solid fa-heart-pulse"},null,-1),QI={class:"summary-grid"},eb={key:0,class:"summary-item"},tb=O("div",{class:"summary-title"},"Avg Cadence",-1),nb={class:"summary-value"},ib=O("i",{class:"fa-solid fa-rotate"},null,-1),sb={key:1,class:"summary-item"},rb=O("div",{class:"summary-title"},"Max Cadence",-1),ob={class:"summary-value"},ab=O("i",{class:"fa-solid fa-rotate"},null,-1),lb={class:"summary-grid"},cb={key:0,class:"summary-item"},ub=O("div",{class:"summary-title"},"Avg Power",-1),hb={class:"summary-value"},db=O("i",{class:"fa-solid fa-bolt-lightning"},null,-1),fb={key:1,class:"summary-item"},gb=O("div",{class:"summary-title"},"Max Power",-1),mb={class:"summary-value"},_b=O("i",{class:"fa-solid fa-bolt-lightning"},null,-1),pb={class:"summary-grid"},yb={key:0,class:"summary-item"},Eb=O("div",{class:"summary-title"},"Avg Temperature",-1),xb={class:"summary-value"},vb=O("i",{class:"fa-solid fa-temperature-low"},null,-1),wb={key:1,class:"summary-item"},Cb=O("div",{class:"summary-title"},"Max Temperature",-1),Tb={class:"summary-value"},Rb=O("i",{class:"fa-solid fa-temperature-high"},null,-1),Sb={class:"summary-grid"},Ib={key:0,class:"summary-item"},bb=O("div",{class:"summary-title"},"Total Ascent",-1),Ob={class:"summary-value"},Mb=O("i",{class:"fa-solid fa-arrow-trend-up"},null,-1),Ab={key:1,class:"summary-item"},Lb=O("div",{class:"summary-title"},"Total Descent",-1),Pb={class:"summary-value"},Fb=O("i",{class:"fa-solid fa-arrow-trend-down"},null,-1),Db={class:"summary-grid"},kb={key:0,class:"summary-item"},Nb=O("div",{class:"summary-title"},"Avg Altitude",-1),Gb={class:"summary-value"},Wb=O("i",{class:"fa-solid fa-mountain"},null,-1),zb={key:1,class:"summary-item"},Vb=O("div",{class:"summary-title"},"Max Altitude",-1),Ub={class:"summary-value"},jb=O("i",{class:"fa-solid fa-mountain"},null,-1);function Yb(n,e,t,i,s,r){return Pe(),We(Yt,null,[oI,O("div",aI,[O("div",lI,[t.activityFiles?(Pe(),We("h4",cI,"Summary")):Be("",!0),O("div",null,[O("div",uI,[r.summary.sport?(Pe(),We("div",hI,[dI,O("div",fI,Fe(r.summary.sport),1)])):Be("",!0),r.summary.subSport?(Pe(),We("div",gI,[mI,O("div",_I,Fe(r.summary.subSport),1)])):Be("",!0)]),O("div",pI,[r.summary.totalMovingTime?(Pe(),We("div",yI,[EI,O("div",xI,[vI,et(" "+Fe(r.secondsToDHMS(r.summary.totalMovingTime)),1)])])):Be("",!0),r.summary.totalElapsedTime?(Pe(),We("div",wI,[CI,O("div",TI,[RI,et(" "+Fe(r.secondsToDHMS(r.summary.totalElapsedTime)),1)])])):Be("",!0)]),O("div",SI,[r.summary.totalDistance?(Pe(),We("div",II,[bI,O("div",OI,[MI,et(" "+Fe((r.summary.totalDistance/1e3).toFixed(2))+" km ",1)])])):Be("",!0),r.summary.totalCalories?(Pe(),We("div",AI,[LI,O("div",PI,[FI,et(" "+Fe(r.summary.totalCalories.toLocaleString())+" Cal ",1)])])):Be("",!0)]),O("div",DI,[r.summary.avgSpeed?(Pe(),We("div",kI,[NI,O("div",GI,[WI,et(" "+Fe((r.summary.avgSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Be("",!0),r.summary.maxSpeed?(Pe(),We("div",zI,[VI,O("div",UI,[jI,et(" "+Fe((r.summary.maxSpeed*3600/1e3).toFixed(2))+" km/h ",1)])])):Be("",!0)]),O("div",YI,[r.summary.avgHeartRate?(Pe(),We("div",BI,[XI,O("div",ZI,[$I,et(" "+Fe(Math.round(r.summary.avgHeartRate))+" bpm ",1)])])):Be("",!0),r.summary.maxHeartRate?(Pe(),We("div",HI,[KI,O("div",qI,[JI,et(" "+Fe(r.summary.maxHeartRate)+" bpm ",1)])])):Be("",!0)]),O("div",QI,[r.summary.avgCadence?(Pe(),We("div",eb,[tb,O("div",nb,[ib,et(" "+Fe(Math.round(r.summary.avgCadence))+" rpm ",1)])])):Be("",!0),r.summary.maxCadence?(Pe(),We("div",sb,[rb,O("div",ob,[ab,et(" "+Fe(r.summary.maxCadence)+" rpm ",1)])])):Be("",!0)]),O("div",lb,[r.summary.avgPower?(Pe(),We("div",cb,[ub,O("div",hb,[db,et(" "+Fe(Math.round(r.summary.avgPower)),1)])])):Be("",!0),r.summary.maxPower?(Pe(),We("div",fb,[gb,O("div",mb,[_b,et(" "+Fe(r.summary.maxPower),1)])])):Be("",!0)]),O("div",pb,[r.summary.avgTemperature?(Pe(),We("div",yb,[Eb,O("div",xb,[vb,et(" "+Fe(Math.round(r.summary.avgTemperature))+" C ",1)])])):Be("",!0),r.summary.maxTemperature?(Pe(),We("div",wb,[Cb,O("div",Tb,[Rb,et(" "+Fe(r.summary.maxTemperature)+" C ",1)])])):Be("",!0)]),O("div",Sb,[r.summary.totalAscent?(Pe(),We("div",Ib,[bb,O("div",Ob,[Mb,et(" "+Fe(r.summary.totalAscent)+" m ",1)])])):Be("",!0),r.summary.totalDescent?(Pe(),We("div",Ab,[Lb,O("div",Pb,[Fb,et(" "+Fe(r.summary.totalDescent)+" m ",1)])])):Be("",!0)]),O("div",Db,[r.summary.avgAltitude?(Pe(),We("div",kb,[Nb,O("div",Gb,[Wb,et(" "+Fe(r.summary.avgAltitude.toFixed(2))+" m ",1)])])):Be("",!0),r.summary.maxAltitude?(Pe(),We("div",zb,[Vb,O("div",Ub,[jb,et(" "+Fe(r.summary.maxAltitude.toFixed(2))+" m ",1)])])):Be("",!0)])])])])],64)}const Bb=Su(rI,[["render",Yb]]);(()=>{const n=()=>{const i=new Error("not implemented");return i.code="ENOSYS",i};if(!globalThis.fs){let i="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(s,r){i+=t.decode(r);const o=i.lastIndexOf(`
`);return o!=-1&&(console.log(i.substring(0,o)),i=i.substring(o+1)),r.length},write(s,r,o,a,l,c){if(o!==0||a!==r.length||l!==null){c(n());return}const u=this.writeSync(s,r);c(null,u)},chmod(s,r,o){o(n())},chown(s,r,o,a){a(n())},close(s,r){r(n())},fchmod(s,r,o){o(n())},fchown(s,r,o,a){a(n())},fstat(s,r){r(n())},fsync(s,r){r(null)},ftruncate(s,r,o){o(n())},lchown(s,r,o,a){a(n())},link(s,r,o){o(n())},lstat(s,r){r(n())},mkdir(s,r,o){o(n())},open(s,r,o,a){a(n())},read(s,r,o,a,l,c){c(n())},readdir(s,r){r(n())},readlink(s,r){r(n())},rename(s,r,o){o(n())},rmdir(s,r){r(n())},stat(s,r){r(n())},symlink(s,r,o){o(n())},truncate(s,r,o){o(n())},unlink(s,r){r(n())},utimes(s,r,o,a){a(n())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw n()},pid:-1,ppid:-1,umask(){throw n()},cwd(){throw n()},chdir(){throw n()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const e=new TextEncoder("utf-8"),t=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=h=>{h!==0&&console.warn("exit code:",h)},this._exitPromise=new Promise(h=>{this._resolveExitPromise=h}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const i=(h,d)=>{this.mem.setUint32(h+0,d,!0),this.mem.setUint32(h+4,Math.floor(d/4294967296),!0)},s=h=>{const d=this.mem.getUint32(h+0,!0),f=this.mem.getInt32(h+4,!0);return d+f*4294967296},r=h=>{const d=this.mem.getFloat64(h,!0);if(d===0)return;if(!isNaN(d))return d;const f=this.mem.getUint32(h,!0);return this._values[f]},o=(h,d)=>{if(typeof d=="number"&&d!==0){if(isNaN(d)){this.mem.setUint32(h+4,2146959360,!0),this.mem.setUint32(h,0,!0);return}this.mem.setFloat64(h,d,!0);return}if(d===void 0){this.mem.setFloat64(h,0,!0);return}let g=this._ids.get(d);g===void 0&&(g=this._idPool.pop(),g===void 0&&(g=this._values.length),this._values[g]=d,this._goRefCounts[g]=0,this._ids.set(d,g)),this._goRefCounts[g]++;let m=0;switch(typeof d){case"object":d!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(h+4,2146959360|m,!0),this.mem.setUint32(h,g,!0)},a=h=>{const d=s(h+0),f=s(h+8);return new Uint8Array(this._inst.exports.mem.buffer,d,f)},l=h=>{const d=s(h+0),f=s(h+8),g=new Array(f);for(let m=0;m<f;m++)g[m]=r(d+m*8);return g},c=h=>{const d=s(h+0),f=s(h+8);return t.decode(new DataView(this._inst.exports.mem.buffer,d,f))},u=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":h=>{h>>>=0;const d=this.mem.getInt32(h+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(d)},"runtime.wasmWrite":h=>{h>>>=0;const d=s(h+8),f=s(h+16),g=this.mem.getInt32(h+24,!0);fs.writeSync(d,new Uint8Array(this._inst.exports.mem.buffer,f,g))},"runtime.resetMemoryDataView":h=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":h=>{h>>>=0,i(h+8,(u+performance.now())*1e6)},"runtime.walltime":h=>{h>>>=0;const d=new Date().getTime();i(h+8,d/1e3),this.mem.setInt32(h+16,d%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":h=>{h>>>=0;const d=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(d,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(d);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},s(h+8)+1)),this.mem.setInt32(h+16,d,!0)},"runtime.clearTimeoutEvent":h=>{h>>>=0;const d=this.mem.getInt32(h+8,!0);clearTimeout(this._scheduledTimeouts.get(d)),this._scheduledTimeouts.delete(d)},"runtime.getRandomData":h=>{h>>>=0,crypto.getRandomValues(a(h+8))},"syscall/js.finalizeRef":h=>{h>>>=0;const d=this.mem.getUint32(h+8,!0);if(this._goRefCounts[d]--,this._goRefCounts[d]===0){const f=this._values[d];this._values[d]=null,this._ids.delete(f),this._idPool.push(d)}},"syscall/js.stringVal":h=>{h>>>=0,o(h+24,c(h+8))},"syscall/js.valueGet":h=>{h>>>=0;const d=Reflect.get(r(h+8),c(h+16));h=this._inst.exports.getsp()>>>0,o(h+32,d)},"syscall/js.valueSet":h=>{h>>>=0,Reflect.set(r(h+8),c(h+16),r(h+32))},"syscall/js.valueDelete":h=>{h>>>=0,Reflect.deleteProperty(r(h+8),c(h+16))},"syscall/js.valueIndex":h=>{h>>>=0,o(h+24,Reflect.get(r(h+8),s(h+16)))},"syscall/js.valueSetIndex":h=>{h>>>=0,Reflect.set(r(h+8),s(h+16),r(h+24))},"syscall/js.valueCall":h=>{h>>>=0;try{const d=r(h+8),f=Reflect.get(d,c(h+16)),g=l(h+32),m=Reflect.apply(f,d,g);h=this._inst.exports.getsp()>>>0,o(h+56,m),this.mem.setUint8(h+64,1)}catch(d){h=this._inst.exports.getsp()>>>0,o(h+56,d),this.mem.setUint8(h+64,0)}},"syscall/js.valueInvoke":h=>{h>>>=0;try{const d=r(h+8),f=l(h+16),g=Reflect.apply(d,void 0,f);h=this._inst.exports.getsp()>>>0,o(h+40,g),this.mem.setUint8(h+48,1)}catch(d){h=this._inst.exports.getsp()>>>0,o(h+40,d),this.mem.setUint8(h+48,0)}},"syscall/js.valueNew":h=>{h>>>=0;try{const d=r(h+8),f=l(h+16),g=Reflect.construct(d,f);h=this._inst.exports.getsp()>>>0,o(h+40,g),this.mem.setUint8(h+48,1)}catch(d){h=this._inst.exports.getsp()>>>0,o(h+40,d),this.mem.setUint8(h+48,0)}},"syscall/js.valueLength":h=>{h>>>=0,i(h+16,parseInt(r(h+8).length))},"syscall/js.valuePrepareString":h=>{h>>>=0;const d=e.encode(String(r(h+8)));o(h+16,d),i(h+24,d.length)},"syscall/js.valueLoadString":h=>{h>>>=0;const d=r(h+8);a(h+16).set(d)},"syscall/js.valueInstanceOf":h=>{h>>>=0,this.mem.setUint8(h+24,r(h+8)instanceof r(h+16)?1:0)},"syscall/js.copyBytesToGo":h=>{h>>>=0;const d=a(h+8),f=r(h+32);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray)){this.mem.setUint8(h+48,0);return}const g=f.subarray(0,d.length);d.set(g),i(h+40,g.length),this.mem.setUint8(h+48,1)},"syscall/js.copyBytesToJS":h=>{h>>>=0;const d=r(h+8),f=a(h+16);if(!(d instanceof Uint8Array||d instanceof Uint8ClampedArray)){this.mem.setUint8(h+48,0);return}const g=f.subarray(0,d.length);d.set(g),i(h+40,g.length),this.mem.setUint8(h+48,1)},debug:h=>{console.log(h)}}}}async run(i){if(!(i instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=i,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let s=4096;const r=h=>{const d=s,f=e.encode(h+"\0");return new Uint8Array(this.mem.buffer,s,f.length).set(f),s+=f.length,s%8!==0&&(s+=8-s%8),d},o=this.argv.length,a=[];this.argv.forEach(h=>{a.push(r(h))}),a.push(0),Object.keys(this.env).sort().forEach(h=>{a.push(r(`${h}=${this.env[h]}`))}),a.push(0);const c=s;a.forEach(h=>{this.mem.setUint32(s,h,!0),this.mem.setUint32(s+4,0,!0),s+=8});const u=4096+8192;if(s>=u)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(o,c),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(i){const s=this;return function(){const r={id:i,this:this,args:arguments};return s._pendingEvent=r,s._resume(),r.result}}}})();const Xb={class:"container"},Zb={class:"map"},$b={class:"navigator"},Hb=O("div",{class:"header"},[O("h2",{class:"title"},"Open Activity")],-1),Kb=typeof WebAssembly=="object"&&typeof WebAssembly.instantiateStreaming=="function";Kb==!1&&alert("Sorry, it appears that your browser does not support WebAssembly :(");const P_=Pi(new Array),oa=Pi(new Array),qb=Pi(0),F_=Pi(new Array),Jd=Pi(new Array);ls(oa,n=>{var t,i;const e=new Array;for(let s=0;s<n.length;s++){if(!((t=n[s].activity)!=null&&t.timestamp)||!((i=n[s].activity)!=null&&i.localDateTime))return;const r=new Date(n[s].activity.localDateTime),o=new Date(n[s].activity.timestamp),a=r.getTime()-o.getTime(),l=Math.floor(a/1e3/3600);e.push(l)}F_.value=e,console.log("timezone offsets:",e)});const Qd=new Go;class Jb{constructor(e){ce(this,"feature");ce(this,"activityFile");ce(this,"err");const t=e;this.feature=t==null?void 0:t.feature,this.activityFile=new DT(t==null?void 0:t.activityFile),this.err=t==null?void 0:t.err}}const Qb="wasm/fitsvc.wasm";WebAssembly.instantiateStreaming(fetch(Qb),Qd.importObject).then(n=>{var e;Qd.run(n.instance),ls(Jd,t=>{const i=new Date().getTime(),r=decode(t);if(r.err!=""){alert(`decode return with err: ${r.err}`);return}const o=new Array;for(let c=0;c<r.decodeResults.length;c++)o[c]=new Jb(r.decodeResults[c]);console.log("js: e2e decode took: ",new Date().getTime()-i,"ms");const a=new Array;for(let c=0;c<o.length;c++)a.push(o[c].feature);P_.value=a;const l=new Array;for(let c=0;c<o.length;c++)l.push(o[c].activityFile);oa.value=l}),(e=document.getElementById("fileInput"))==null||e.addEventListener("change",t=>{var r;const i=t.target;if(!i.files)return;let s=new Array;for(let o=0;o<((r=i.files)==null?void 0:r.length);o++)s.push(new Promise((a,l)=>{const c=i.files[o];if(!c)return;const u=new FileReader;u.onload=h=>{const d=h.target.result;a(new Uint8Array(d))},u.onerror=l,u.readAsArrayBuffer(c)}));Promise.all(s).then(o=>Jd.value=o)})});const eO=Ir({__name:"TheActivity",setup(n){return(e,t)=>(Pe(),We("div",Xb,[O("div",Zb,[ot(QS,{geojsons:P_.value,activityFiles:oa.value,timezoneOffsetHoursList:F_.value},null,8,["geojsons","activityFiles","timezoneOffsetHoursList"]),ot(iI)]),O("div",$b,[Hb,ot(Bb,{activityFiles:oa.value,timezoneOffsetHours:qb.value},null,8,["activityFiles","timezoneOffsetHours"])])]))}});const tO=Ir({__name:"ActivityView",setup(n){return(e,t)=>(Pe(),We("main",null,[ot(eO)]))}}),nO=oE({history:C0("/openactivity/"),routes:[{path:"/",name:"home",component:tO},{path:"/activity",name:"activity",component:()=>hE(()=>import("./ActivityView-70b50ee2.js"),[])}]}),Iu=t0(lE);Iu.use(r0());Iu.use(nO);Iu.mount("#app");export{tO as _};
